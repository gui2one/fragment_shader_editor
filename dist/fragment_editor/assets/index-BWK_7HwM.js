(function(){const $i=document.createElement("link").relList;if($i&&$i.supports&&$i.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))F(I);new MutationObserver(I=>{for(const f of I)if(f.type==="childList")for(const C of f.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&F(C)}).observe(document,{childList:!0,subtree:!0});function c(I){const f={};return I.integrity&&(f.integrity=I.integrity),I.referrerPolicy&&(f.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?f.credentials="include":I.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function F(I){if(I.ep)return;I.ep=!0;const f=c(I);fetch(I.href,f)}})();var ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Js(Wt){return Wt&&Wt.__esModule&&Object.prototype.hasOwnProperty.call(Wt,"default")?Wt.default:Wt}function Tn(Wt){throw new Error('Could not dynamically require "'+Wt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var na={exports:{}},To;function qs(){return To||(To=1,function(Wt,$i){(function(c){Wt.exports=c()})(function(){return function c(F,I,f){function C(y,o){if(!I[y]){if(!F[y]){var d=typeof Tn=="function"&&Tn;if(!o&&d)return d(y,!0);if(k)return k(y,!0);var M=new Error("Cannot find module '"+y+"'");throw M.code="MODULE_NOT_FOUND",M}var m=I[y]={exports:{}};F[y][0].call(m.exports,function(p){var A=F[y][1][p];return C(A||p)},m,m.exports,c,F,I,f)}return I[y].exports}for(var k=typeof Tn=="function"&&Tn,T=0;T<f.length;T++)C(f[T]);return C}({1:[function(c,F,I){F.exports={default:c("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":32}],2:[function(c,F,I){F.exports={default:c("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":33}],3:[function(c,F,I){F.exports={default:c("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":34}],4:[function(c,F,I){F.exports={default:c("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":35}],5:[function(c,F,I){F.exports={default:c("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":36}],6:[function(c,F,I){F.exports={default:c("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":37}],7:[function(c,F,I){F.exports={default:c("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":38}],8:[function(c,F,I){F.exports={default:c("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":39}],9:[function(c,F,I){F.exports={default:c("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":40}],10:[function(c,F,I){I.default=function(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")},I.__esModule=!0},{}],11:[function(c,F,I){var f=c("babel-runtime/core-js/object/define-property").default;I.default=function(){function C(k,T){for(var y=0;y<T.length;y++){var o=T[y];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),f(k,o.key,o)}}return function(k,T,y){return T&&C(k.prototype,T),y&&C(k,y),k}}(),I.__esModule=!0},{"babel-runtime/core-js/object/define-property":4}],12:[function(c,F,I){var f=c("babel-runtime/core-js/object/get-own-property-descriptor").default;I.default=function(k,T,y){var o=!0;e:for(;o;){var d=k,M=T,m=y;o=!1,d===null&&(d=Function.prototype);var p=f(d,M);if(p===void 0){var A=Object.getPrototypeOf(d);if(A===null)return;k=A,T=M,y=m,o=!0,p=A=void 0;continue e}else{if("value"in p)return p.value;var L=p.get;return L===void 0?void 0:L.call(m)}}},I.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":5}],13:[function(c,F,I){var f=c("babel-runtime/core-js/object/create").default,C=c("babel-runtime/core-js/object/set-prototype-of").default;I.default=function(k,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);k.prototype=f(T&&T.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),T&&(C?C(k,T):k.__proto__=T)},I.__esModule=!0},{"babel-runtime/core-js/object/create":3,"babel-runtime/core-js/object/set-prototype-of":7}],14:[function(c,F,I){I.default=function(f){return f&&f.__esModule?f:{default:f}},I.__esModule=!0},{}],15:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C={},k=/[^\s\u00a0]/,T=f.Pos;function y(o){var d=o.search(k);return d==-1?0:d}f.commands.toggleComment=function(o){o.toggleComment()},f.defineExtension("toggleComment",function(o){o||(o=C);for(var d=this,M=1/0,m=this.listSelections(),p=null,A=m.length-1;A>=0;A--){var L=m[A].from(),S=m[A].to();L.line>=M||(S.line>=M&&(S=T(M,0)),M=L.line,p==null?d.uncomment(L,S,o)?p="un":(d.lineComment(L,S,o),p="line"):p=="un"?d.uncomment(L,S,o):d.lineComment(L,S,o))}}),f.defineExtension("lineComment",function(o,d,M){M||(M=C);var m=this,p=m.getModeAt(o),A=M.lineComment||p.lineComment;if(!A){(M.blockCommentStart||p.blockCommentStart)&&(M.fullLines=!0,m.blockComment(o,d,M));return}var L=m.getLine(o.line);if(L!=null){var S=Math.min(d.ch!=0||d.line==o.line?d.line+1:d.line,m.lastLine()+1),R=M.padding==null?" ":M.padding,v=M.commentBlankLines||o.line==d.line;m.operation(function(){if(M.indent){for(var w=null,l=o.line;l<S;++l){var h=m.getLine(l),x=h.slice(0,y(h));(w==null||w.length>x.length)&&(w=x)}for(var l=o.line;l<S;++l){var h=m.getLine(l),u=w.length;!v&&!k.test(h)||(h.slice(0,u)!=w&&(u=y(h)),m.replaceRange(w+A+R,T(l,0),T(l,u)))}}else for(var l=o.line;l<S;++l)(v||k.test(m.getLine(l)))&&m.replaceRange(A+R,T(l,0))})}}),f.defineExtension("blockComment",function(o,d,M){M||(M=C);var m=this,p=m.getModeAt(o),A=M.blockCommentStart||p.blockCommentStart,L=M.blockCommentEnd||p.blockCommentEnd;if(!A||!L){(M.lineComment||p.lineComment)&&M.fullLines!=!1&&m.lineComment(o,d,M);return}var S=Math.min(d.line,m.lastLine());S!=o.line&&d.ch==0&&k.test(m.getLine(S))&&--S;var R=M.padding==null?" ":M.padding;o.line>S||m.operation(function(){if(M.fullLines!=!1){var v=k.test(m.getLine(S));m.replaceRange(R+L,T(S)),m.replaceRange(A+R,T(o.line,0));var w=M.blockCommentLead||p.blockCommentLead;if(w!=null)for(var l=o.line+1;l<=S;++l)(l!=S||v)&&m.replaceRange(w+R,T(l,0))}else m.replaceRange(L,d),m.replaceRange(A,o)})}),f.defineExtension("uncomment",function(o,d,M){M||(M=C);var m=this,p=m.getModeAt(o),A=Math.min(d.ch!=0||d.line==o.line?d.line:d.line-1,m.lastLine()),L=Math.min(o.line,A),S=M.lineComment||p.lineComment,R=[],v=M.padding==null?" ":M.padding,w;e:{if(!S)break e;for(var l=L;l<=A;++l){var h=m.getLine(l),x=h.indexOf(S);if(x>-1&&!/comment/.test(m.getTokenTypeAt(T(l,x+1)))&&(x=-1),x==-1&&(l!=A||l==L)&&k.test(h)||x>-1&&k.test(h.slice(0,x)))break e;R.push(h)}if(m.operation(function(){for(var ee=L;ee<=A;++ee){var ae=R[ee-L],he=ae.indexOf(S),me=he+S.length;he<0||(ae.slice(me,me+v.length)==v&&(me+=v.length),w=!0,m.replaceRange("",T(ee,he),T(ee,me)))}}),w)return!0}var u=M.blockCommentStart||p.blockCommentStart,P=M.blockCommentEnd||p.blockCommentEnd;if(!u||!P)return!1;var b=M.blockCommentLead||p.blockCommentLead,O=m.getLine(L),D=A==L?O:m.getLine(A),$=O.indexOf(u),W=D.lastIndexOf(P);if(W==-1&&L!=A&&(D=m.getLine(--A),W=D.lastIndexOf(P)),$==-1||W==-1||!/comment/.test(m.getTokenTypeAt(T(L,$+1)))||!/comment/.test(m.getTokenTypeAt(T(A,W+1))))return!1;var V=O.lastIndexOf(u,o.ch),Q=V==-1?-1:O.slice(0,o.ch).indexOf(P,V+u.length);if(V!=-1&&Q!=-1&&Q+P.length!=o.ch)return!1;Q=D.indexOf(P,d.ch);var ue=D.slice(d.ch).lastIndexOf(u,Q-d.ch);return V=Q==-1||ue==-1?-1:d.ch+ue,Q!=-1&&V!=-1&&V!=d.ch?!1:(m.operation(function(){m.replaceRange("",T(A,W-(v&&D.slice(W-v.length,W)==v?v.length:0)),T(A,W+P.length));var ee=$+u.length;if(v&&O.slice(ee,ee+v.length)==v&&(ee+=v.length),m.replaceRange("",T(L,$),T(L,ee)),b)for(var ae=L+1;ae<=A;++ae){var he=m.getLine(ae),me=he.indexOf(b);if(!(me==-1||k.test(he.slice(0,me)))){var ie=me+b.length;v&&he.slice(ie,ie+v.length)==v&&(ie+=v.length),m.replaceRange("",T(ae,me),T(ae,ie))}}}),!0)})})},{"../../lib/codemirror":30}],16:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){function C(T,y,o){var d=T.getWrapperElement(),M;return M=d.appendChild(document.createElement("div")),o?M.className="CodeMirror-dialog CodeMirror-dialog-bottom":M.className="CodeMirror-dialog CodeMirror-dialog-top",typeof y=="string"?M.innerHTML=y:M.appendChild(y),M}function k(T,y){T.state.currentNotificationClose&&T.state.currentNotificationClose(),T.state.currentNotificationClose=y}f.defineExtension("openDialog",function(T,y,o){o||(o={}),k(this,null);var d=C(this,T,o.bottom),M=!1,m=this;function p(S){if(typeof S=="string")A.value=S;else{if(M)return;M=!0,d.parentNode.removeChild(d),m.focus(),o.onClose&&o.onClose(d)}}var A=d.getElementsByTagName("input")[0],L;return A?(o.value&&(A.value=o.value,o.selectValueOnOpen!==!1&&A.select()),o.onInput&&f.on(A,"input",function(S){o.onInput(S,A.value,p)}),o.onKeyUp&&f.on(A,"keyup",function(S){o.onKeyUp(S,A.value,p)}),f.on(A,"keydown",function(S){o&&o.onKeyDown&&o.onKeyDown(S,A.value,p)||((S.keyCode==27||o.closeOnEnter!==!1&&S.keyCode==13)&&(A.blur(),f.e_stop(S),p()),S.keyCode==13&&y(A.value,S))}),o.closeOnBlur!==!1&&f.on(A,"blur",p),A.focus()):(L=d.getElementsByTagName("button")[0])&&(f.on(L,"click",function(){p(),m.focus()}),o.closeOnBlur!==!1&&f.on(L,"blur",p),L.focus()),p}),f.defineExtension("openConfirm",function(T,y,o){k(this,null);var d=C(this,T,o&&o.bottom),M=d.getElementsByTagName("button"),m=!1,p=this,A=1;function L(){m||(m=!0,d.parentNode.removeChild(d),p.focus())}M[0].focus();for(var S=0;S<M.length;++S){var R=M[S];(function(v){f.on(R,"click",function(w){f.e_preventDefault(w),L(),v&&v(p)})})(y[S]),f.on(R,"blur",function(){--A,setTimeout(function(){A<=0&&L()},200)}),f.on(R,"focus",function(){++A})}}),f.defineExtension("openNotification",function(T,y){k(this,p);var o=C(this,T,y&&y.bottom),d=!1,M,m=y&&typeof y.duration<"u"?y.duration:5e3;function p(){d||(d=!0,clearTimeout(M),o.parentNode.removeChild(o))}return f.on(o,"click",function(A){f.e_preventDefault(A),p()}),m&&(M=setTimeout(p,m)),p})})},{"../../lib/codemirror":30}],17:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){f.defineExtension("addPanel",function(y,o){o=o||{},this.state.panels||k(this);var d=this.state.panels,M=d.wrapper,m=this.getWrapperElement();o.after instanceof C&&!o.after.cleared?M.insertBefore(y,o.before.node.nextSibling):o.before instanceof C&&!o.before.cleared?M.insertBefore(y,o.before.node):o.replace instanceof C&&!o.replace.cleared?(M.insertBefore(y,o.replace.node),o.replace.clear()):o.position=="bottom"?M.appendChild(y):o.position=="before-bottom"?M.insertBefore(y,m.nextSibling):o.position=="after-top"?M.insertBefore(y,m):M.insertBefore(y,M.firstChild);var p=o&&o.height||y.offsetHeight;return this._setSize(null,d.heightLeft-=p),d.panels++,new C(this,y,o,p)});function C(y,o,d,M){this.cm=y,this.node=o,this.options=d,this.height=M,this.cleared=!1}C.prototype.clear=function(){if(!this.cleared){this.cleared=!0;var y=this.cm.state.panels;this.cm._setSize(null,y.heightLeft+=this.height),y.wrapper.removeChild(this.node),--y.panels==0&&T(this.cm)}},C.prototype.changed=function(y){var o=y??this.node.offsetHeight,d=this.cm.state.panels;this.cm._setSize(null,d.height+=o-this.height),this.height=o};function k(y){var o=y.getWrapperElement(),d=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,M=parseInt(d.height),m=y.state.panels={setHeight:o.style.height,heightLeft:M,panels:0,wrapper:document.createElement("div")};o.parentNode.insertBefore(m.wrapper,o);var p=y.hasFocus();m.wrapper.appendChild(o),p&&y.focus(),y._setSize=y.setSize,M!=null&&(y.setSize=function(A,L){if(L==null)return this._setSize(A,L);if(m.setHeight=L,typeof L!="number"){var S=/^(\d+\.?\d*)px$/.exec(L);S?L=Number(S[1]):(m.wrapper.style.height=L,L=m.wrapper.offsetHeight,m.wrapper.style.height="")}y._setSize(A,m.heightLeft+=L-M),M=L})}function T(y){var o=y.state.panels;y.state.panels=null;var d=y.getWrapperElement();o.wrapper.parentNode.replaceChild(d,o.wrapper),d.style.height=o.setHeight,y.setSize=y._setSize,y.setSize()}})},{"../../lib/codemirror":30}],18:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){f.defineOption("rulers",!1,function(y,o,d){d&&d!=f.Init&&(C(y),y.off("refresh",T)),o&&o.length&&(k(y),y.on("refresh",T))});function C(y){for(var o=y.display.lineSpace.childNodes.length-1;o>=0;o--){var d=y.display.lineSpace.childNodes[o];/(^|\s)CodeMirror-ruler($|\s)/.test(d.className)&&d.parentNode.removeChild(d)}}function k(y){for(var o=y.getOption("rulers"),d=y.defaultCharWidth(),M=y.charCoords(f.Pos(y.firstLine(),0),"div").left,m=y.display.scroller.offsetHeight+30,p=0;p<o.length;p++){var A=document.createElement("div");A.className="CodeMirror-ruler";var L,S=o[p];typeof S=="number"?L=S:(L=S.column,S.className&&(A.className+=" "+S.className),S.color&&(A.style.borderColor=S.color),S.lineStyle&&(A.style.borderLeftStyle=S.lineStyle),S.width&&(A.style.borderLeftWidth=S.width)),A.style.left=M+L*d+"px",A.style.top="-50px",A.style.bottom="-20px",A.style.minHeight=m+"px",y.display.lineSpace.insertBefore(A,y.display.cursorDiv)}}function T(y){C(y),k(y)}})},{"../../lib/codemirror":30}],19:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C={pairs:`()[]{}''""`,triples:"",explode:"[]{}"},k=f.Pos;f.defineOption("autoCloseBrackets",!1,function(l,h,x){x&&x!=f.Init&&(l.removeKeyMap(o),l.state.closeBrackets=null),h&&(l.state.closeBrackets=h,l.addKeyMap(o))});function T(l,h){return h=="pairs"&&typeof l=="string"?l:typeof l=="object"&&l[h]!=null?l[h]:C[h]}for(var y=C.pairs+"`",o={Backspace:p,Enter:A},d=0;d<y.length;d++)o["'"+y.charAt(d)+"'"]=M(y.charAt(d));function M(l){return function(h){return S(h,l)}}function m(l){var h=l.state.closeBrackets;if(!h)return null;var x=l.getModeAt(l.getCursor());return x.closeBrackets||h}function p(l){var h=m(l);if(!h||l.getOption("disableInput"))return f.Pass;for(var x=T(h,"pairs"),u=l.listSelections(),P=0;P<u.length;P++){if(!u[P].empty())return f.Pass;var b=v(l,u[P].head);if(!b||x.indexOf(b)%2!=0)return f.Pass}for(var P=u.length-1;P>=0;P--){var O=u[P].head;l.replaceRange("",k(O.line,O.ch-1),k(O.line,O.ch+1))}}function A(l){var h=m(l),x=h&&T(h,"explode");if(!x||l.getOption("disableInput"))return f.Pass;for(var u=l.listSelections(),P=0;P<u.length;P++){if(!u[P].empty())return f.Pass;var b=v(l,u[P].head);if(!b||x.indexOf(b)%2!=0)return f.Pass}l.operation(function(){l.replaceSelection(`

`,null),l.execCommand("goCharLeft"),u=l.listSelections();for(var O=0;O<u.length;O++){var D=u[O].head.line;l.indentLine(D,null,!0),l.indentLine(D+1,null,!0)}})}function L(l){var h=f.cmpPos(l.anchor,l.head)>0;return{anchor:new k(l.anchor.line,l.anchor.ch+(h?-1:1)),head:new k(l.head.line,l.head.ch+(h?1:-1))}}function S(l,h){var x=m(l);if(!x||l.getOption("disableInput"))return f.Pass;var u=T(x,"pairs"),P=u.indexOf(h);if(P==-1)return f.Pass;for(var b=T(x,"triples"),O=u.charAt(P+1)==h,D=l.listSelections(),$=P%2==0,W,V,Q=0;Q<D.length;Q++){var ue=D[Q],ee=ue.head,ae,V=l.getRange(ee,k(ee.line,ee.ch+1));if($&&!ue.empty())ae="surround";else if((O||!$)&&V==h)b.indexOf(h)>=0&&l.getRange(ee,k(ee.line,ee.ch+3))==h+h+h?ae="skipThree":ae="skip";else if(O&&ee.ch>1&&b.indexOf(h)>=0&&l.getRange(k(ee.line,ee.ch-2),ee)==h+h&&(ee.ch<=2||l.getRange(k(ee.line,ee.ch-3),k(ee.line,ee.ch-2))!=h))ae="addFour";else if(O)if(!f.isWordChar(V)&&w(l,ee,h))ae="both";else return f.Pass;else if($&&(l.getLine(ee.line).length==ee.ch||R(V,u)||/\s/.test(V)))ae="both";else return f.Pass;if(!W)W=ae;else if(W!=ae)return f.Pass}var he=P%2?u.charAt(P-1):h,me=P%2?h:u.charAt(P+1);l.operation(function(){if(W=="skip")l.execCommand("goCharRight");else if(W=="skipThree")for(var ie=0;ie<3;ie++)l.execCommand("goCharRight");else if(W=="surround"){for(var re=l.getSelections(),ie=0;ie<re.length;ie++)re[ie]=he+re[ie]+me;l.replaceSelections(re,"around"),re=l.listSelections().slice();for(var ie=0;ie<re.length;ie++)re[ie]=L(re[ie]);l.setSelections(re)}else W=="both"?(l.replaceSelection(he+me,null),l.triggerElectric(he+me),l.execCommand("goCharLeft")):W=="addFour"&&(l.replaceSelection(he+he+he+he,"before"),l.execCommand("goCharRight"))})}function R(l,h){var x=h.lastIndexOf(l);return x>-1&&x%2==1}function v(l,h){var x=l.getRange(k(h.line,h.ch-1),k(h.line,h.ch+1));return x.length==2?x:null}function w(l,h,x){var u=l.getLine(h.line),P=l.getTokenAt(h);if(/\bstring2?\b/.test(P.type))return!1;var b=new f.StringStream(u.slice(0,h.ch)+x+u.slice(h.ch),4);for(b.pos=b.start=P.start;;){var O=l.getMode().token(b,P.state);if(b.pos>=h.ch+1)return/\bstring2?\b/.test(O);b.start=b.pos}}})},{"../../lib/codemirror":30}],20:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),k=f.Pos,T={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function y(p,A,L,S){var R=p.getLineHandle(A.line),v=A.ch-1,w=v>=0&&T[R.text.charAt(v)]||T[R.text.charAt(++v)];if(!w)return null;var l=w.charAt(1)==">"?1:-1;if(L&&l>0!=(v==A.ch))return null;var h=p.getTokenTypeAt(k(A.line,v+1)),x=o(p,k(A.line,v+(l>0?1:0)),l,h||null,S);return x==null?null:{from:k(A.line,v),to:x&&x.pos,match:x&&x.ch==w.charAt(0),forward:l>0}}function o(p,A,L,S,R){for(var v=R&&R.maxScanLineLength||1e4,w=R&&R.maxScanLines||1e3,l=[],h=R&&R.bracketRegex?R.bracketRegex:/[(){}[\]]/,x=L>0?Math.min(A.line+w,p.lastLine()+1):Math.max(p.firstLine()-1,A.line-w),u=A.line;u!=x;u+=L){var P=p.getLine(u);if(P){var b=L>0?0:P.length-1,O=L>0?P.length:-1;if(!(P.length>v))for(u==A.line&&(b=A.ch-(L<0?1:0));b!=O;b+=L){var D=P.charAt(b);if(h.test(D)&&(S===void 0||p.getTokenTypeAt(k(u,b+1))==S)){var $=T[D];if($.charAt(1)==">"==L>0)l.push(D);else if(l.length)l.pop();else return{pos:k(u,b),ch:D}}}}}return u-L==(L>0?p.lastLine():p.firstLine())?!1:null}function d(p,A,L){for(var S=p.state.matchBrackets.maxHighlightLineLength||1e3,R=[],v=p.listSelections(),w=0;w<v.length;w++){var l=v[w].empty()&&y(p,v[w].head,!1,L);if(l&&p.getLine(l.from.line).length<=S){var h=l.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";R.push(p.markText(l.from,k(l.from.line,l.from.ch+1),{className:h})),l.to&&p.getLine(l.to.line).length<=S&&R.push(p.markText(l.to,k(l.to.line,l.to.ch+1),{className:h}))}}if(R.length){C&&p.state.focused&&p.focus();var x=function(){p.operation(function(){for(var u=0;u<R.length;u++)R[u].clear()})};if(A)setTimeout(x,800);else return x}}var M=null;function m(p){p.operation(function(){M&&(M(),M=null),M=d(p,!1,p.state.matchBrackets)})}f.defineOption("matchBrackets",!1,function(p,A,L){L&&L!=f.Init&&p.off("cursorActivity",m),A&&(p.state.matchBrackets=typeof A=="object"?A:{},p.on("cursorActivity",m))}),f.defineExtension("matchBrackets",function(){d(this,!0)}),f.defineExtension("findMatchingBracket",function(p,A,L){return y(this,p,A,L)}),f.defineExtension("scanForBracket",function(p,A,L,S){return o(this,p,A,L,S)})})},{"../../lib/codemirror":30}],21:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){function C(o,d,M,m){if(M&&M.call){var p=M;M=null}else var p=y(o,M,"rangeFinder");typeof d=="number"&&(d=f.Pos(d,0));var A=y(o,M,"minFoldSize");function L(w){var l=p(o,d);if(!l||l.to.line-l.from.line<A)return null;for(var h=o.findMarksAt(l.from),x=0;x<h.length;++x)if(h[x].__isFold&&m!=="fold"){if(!w)return null;l.cleared=!0,h[x].clear()}return l}var S=L(!0);if(y(o,M,"scanUp"))for(;!S&&d.line>o.firstLine();)d=f.Pos(d.line-1,0),S=L(!1);if(!(!S||S.cleared||m==="unfold")){var R=k(o,M);f.on(R,"mousedown",function(w){v.clear(),f.e_preventDefault(w)});var v=o.markText(S.from,S.to,{replacedWith:R,clearOnEnter:!0,__isFold:!0});v.on("clear",function(w,l){f.signal(o,"unfold",o,w,l)}),f.signal(o,"fold",o,S.from,S.to)}}function k(o,d){var M=y(o,d,"widget");if(typeof M=="string"){var m=document.createTextNode(M);M=document.createElement("span"),M.appendChild(m),M.className="CodeMirror-foldmarker"}return M}f.newFoldFunction=function(o,d){return function(M,m){C(M,m,{rangeFinder:o,widget:d})}},f.defineExtension("foldCode",function(o,d,M){C(this,o,d,M)}),f.defineExtension("isFolded",function(o){for(var d=this.findMarksAt(o),M=0;M<d.length;++M)if(d[M].__isFold)return!0}),f.commands.toggleFold=function(o){o.foldCode(o.getCursor())},f.commands.fold=function(o){o.foldCode(o.getCursor(),null,"fold")},f.commands.unfold=function(o){o.foldCode(o.getCursor(),null,"unfold")},f.commands.foldAll=function(o){o.operation(function(){for(var d=o.firstLine(),M=o.lastLine();d<=M;d++)o.foldCode(f.Pos(d,0),null,"fold")})},f.commands.unfoldAll=function(o){o.operation(function(){for(var d=o.firstLine(),M=o.lastLine();d<=M;d++)o.foldCode(f.Pos(d,0),null,"unfold")})},f.registerHelper("fold","combine",function(){var o=Array.prototype.slice.call(arguments,0);return function(d,M){for(var m=0;m<o.length;++m){var p=o[m](d,M);if(p)return p}}}),f.registerHelper("fold","auto",function(o,d){for(var M=o.getHelpers(d,"fold"),m=0;m<M.length;m++){var p=M[m](o,d);if(p)return p}});var T={rangeFinder:f.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};f.defineOption("foldOptions",null);function y(o,d,M){if(d&&d[M]!==void 0)return d[M];var m=o.options.foldOptions;return m&&m[M]!==void 0?m[M]:T[M]}f.defineExtension("foldOption",function(o,d){return y(this,o,d)})})},{"../../lib/codemirror":30}],22:[function(c,F,I){(function(f){typeof I=="object"&&typeof F=="object"?f(c("../../lib/codemirror"),c("./foldcode")):f(CodeMirror)})(function(f){f.defineOption("foldGutter",!1,function(S,R,v){v&&v!=f.Init&&(S.clearGutter(S.state.foldGutter.options.gutter),S.state.foldGutter=null,S.off("gutterClick",m),S.off("change",p),S.off("viewportChange",A),S.off("fold",L),S.off("unfold",L),S.off("swapDoc",M)),R&&(S.state.foldGutter=new k(T(R)),M(S),S.on("gutterClick",m),S.on("change",p),S.on("viewportChange",A),S.on("fold",L),S.on("unfold",L),S.on("swapDoc",M))});var C=f.Pos;function k(S){this.options=S,this.from=this.to=0}function T(S){return S===!0&&(S={}),S.gutter==null&&(S.gutter="CodeMirror-foldgutter"),S.indicatorOpen==null&&(S.indicatorOpen="CodeMirror-foldgutter-open"),S.indicatorFolded==null&&(S.indicatorFolded="CodeMirror-foldgutter-folded"),S}function y(S,R){for(var v=S.findMarksAt(C(R)),w=0;w<v.length;++w)if(v[w].__isFold&&v[w].find().from.line==R)return v[w]}function o(S){if(typeof S=="string"){var R=document.createElement("div");return R.className=S+" CodeMirror-guttermarker-subtle",R}else return S.cloneNode(!0)}function d(S,R,v){var w=S.state.foldGutter.options,l=R,h=S.foldOption(w,"minFoldSize"),x=S.foldOption(w,"rangeFinder");S.eachLine(R,v,function(u){var P=null;if(y(S,l))P=o(w.indicatorFolded);else{var b=C(l,0),O=x&&x(S,b);O&&O.to.line-O.from.line>=h&&(P=o(w.indicatorOpen))}S.setGutterMarker(u,w.gutter,P),++l})}function M(S){var R=S.getViewport(),v=S.state.foldGutter;v&&(S.operation(function(){d(S,R.from,R.to)}),v.from=R.from,v.to=R.to)}function m(S,R,v){var w=S.state.foldGutter;if(w){var l=w.options;if(v==l.gutter){var h=y(S,R);h?h.clear():S.foldCode(C(R,0),l.rangeFinder)}}}function p(S){var R=S.state.foldGutter;if(R){var v=R.options;R.from=R.to=0,clearTimeout(R.changeUpdate),R.changeUpdate=setTimeout(function(){M(S)},v.foldOnChangeTimeSpan||600)}}function A(S){var R=S.state.foldGutter;if(R){var v=R.options;clearTimeout(R.changeUpdate),R.changeUpdate=setTimeout(function(){var w=S.getViewport();R.from==R.to||w.from-R.to>20||R.from-w.to>20?M(S):S.operation(function(){w.from<R.from&&(d(S,w.from,R.from),R.from=w.from),w.to>R.to&&(d(S,R.to,w.to),R.to=w.to)})},v.updateViewportTimeSpan||400)}}function L(S,R){var v=S.state.foldGutter;if(v){var w=R.line;w>=v.from&&w<v.to&&d(S,w,w+1)}}})},{"../../lib/codemirror":30,"./foldcode":21}],23:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){f.registerHelper("fold","indent",function(C,k){var T=C.getOption("tabSize"),y=C.getLine(k.line);if(/\S/.test(y)){for(var o=function(S){return f.countColumn(S,null,T)},d=o(y),M=null,m=k.line+1,p=C.lastLine();m<=p;++m){var A=C.getLine(m),L=o(A);if(L>d)M=m;else if(/\S/.test(A))break}if(M)return{from:f.Pos(k.line,y.length),to:f.Pos(M,C.getLine(M).length)}}})})},{"../../lib/codemirror":30}],24:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C=f.Pos;function k(v,w){for(var l=0,h=v.length;l<h;++l)w(v[l])}function T(v,w){if(!Array.prototype.indexOf){for(var l=v.length;l--;)if(v[l]===w)return!0;return!1}return v.indexOf(w)!=-1}function y(v,w,l,h){var x=v.getCursor(),u=l(v,x);if(!/\b(?:string|comment)\b/.test(u.type)){u.state=f.innerMode(v.getMode(),u.state).state,/^[\w$_]*$/.test(u.string)?u.end>x.ch&&(u.end=x.ch,u.string=u.string.slice(0,x.ch-u.start)):u={start:x.ch,end:x.ch,string:"",state:u.state,type:u.string=="."?"property":null};for(var P=u;P.type=="property";){if(P=l(v,C(x.line,P.start)),P.string!=".")return;if(P=l(v,C(x.line,P.start)),!b)var b=[];b.push(P)}return{list:R(u,b,w,h),from:C(x.line,u.start),to:C(x.line,u.end)}}}function o(v,w){return y(v,L,function(l,h){return l.getTokenAt(h)},w)}f.registerHelper("hint","javascript",o);function d(v,w){var l=v.getTokenAt(w);return w.ch==l.start+1&&l.string.charAt(0)=="."?(l.end=l.start,l.string=".",l.type="property"):/^\.[\w$_]*$/.test(l.string)&&(l.type="property",l.start++,l.string=l.string.replace(/\./,"")),l}function M(v,w){return y(v,S,d,w)}f.registerHelper("hint","coffeescript",M);var m="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),p="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),A="prototype apply call bind".split(" "),L="break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),S="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function R(v,w,l,h){var x=[],u=v.string,P=h&&h.globalScope||window;function b(V){V.lastIndexOf(u,0)==0&&!T(x,V)&&x.push(V)}function O(V){typeof V=="string"?k(m,b):V instanceof Array?k(p,b):V instanceof Function&&k(A,b);for(var Q in V)b(Q)}if(w&&w.length){var D=w.pop(),$;for(D.type&&D.type.indexOf("variable")===0?(h&&h.additionalContext&&($=h.additionalContext[D.string]),(!h||h.useGlobalScope!==!1)&&($=$||P[D.string])):D.type=="string"?$="":D.type=="atom"?$=1:D.type=="function"&&(P.jQuery!=null&&(D.string=="$"||D.string=="jQuery")&&typeof P.jQuery=="function"?$=P.jQuery():P._!=null&&D.string=="_"&&typeof P._=="function"&&($=P._()));$!=null&&w.length;)$=$[w.pop().string];$!=null&&O($)}else{for(var W=v.state.localVars;W;W=W.next)b(W.name);for(var W=v.state.globalVars;W;W=W.next)b(W.name);(!h||h.useGlobalScope!==!1)&&O(P),k(l,b)}return x}})},{"../../lib/codemirror":30}],25:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C="CodeMirror-hint",k="CodeMirror-hint-active";f.showHint=function(v,w,l){if(!w)return v.showHint(l);l&&l.async&&(w.async=!0);var h={hint:w};if(l)for(var x in l)h[x]=l[x];return v.showHint(h)},f.defineExtension("showHint",function(v){v=d(this,this.getCursor("start"),v);var w=this.listSelections();if(!(w.length>1)){if(this.somethingSelected()){if(!v.hint.supportsSelection)return;for(var l=0;l<w.length;l++)if(w[l].head.line!=w[l].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var h=this.state.completionActive=new T(this,v);h.options.hint&&(f.signal(this,"startCompletion",this),h.update(!0))}});function T(v,w){this.cm=v,this.options=w,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var l=this;v.on("cursorActivity",this.activityFunc=function(){l.cursorActivity()})}var y=window.requestAnimationFrame||function(v){return setTimeout(v,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;T.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&f.signal(this.data,"close"),this.widget&&this.widget.close(),f.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(v,w){var l=v.list[w];l.hint?l.hint(this.cm,v,l):this.cm.replaceRange(M(l),l.from||v.from,l.to||v.to,"complete"),f.signal(v,"pick",l),this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var v=this.cm.getCursor(),w=this.cm.getLine(v.line);if(v.line!=this.startPos.line||w.length-v.ch!=this.startLen-this.startPos.ch||v.ch<this.startPos.ch||this.cm.somethingSelected()||v.ch&&this.options.closeCharacters.test(w.charAt(v.ch-1)))this.close();else{var l=this;this.debounce=y(function(){l.update()}),this.widget&&this.widget.disable()}},update:function(v){if(this.tick!=null)if(!this.options.hint.async)this.finishUpdate(this.options.hint(this.cm,this.options),v);else{var w=++this.tick,l=this;this.options.hint(this.cm,function(h){l.tick==w&&l.finishUpdate(h,v)},this.options)}},finishUpdate:function(v,w){this.data&&f.signal(this.data,"update"),v&&this.data&&f.cmpPos(v.from,this.data.from)&&(v=null),this.data=v;var l=this.widget&&this.widget.picked||w&&this.options.completeSingle;this.widget&&this.widget.close(),v&&v.list.length&&(l&&v.list.length==1?this.pick(v,0):(this.widget=new A(this,v),f.signal(v,"shown")))}};function d(v,w,l){var h=v.options.hintOptions,x={};for(var u in R)x[u]=R[u];if(h)for(var u in h)h[u]!==void 0&&(x[u]=h[u]);if(l)for(var u in l)l[u]!==void 0&&(x[u]=l[u]);return x.hint.resolve&&(x.hint=x.hint.resolve(v,w)),x}function M(v){return typeof v=="string"?v:v.text}function m(v,w){var l={Up:function(){w.moveFocus(-1)},Down:function(){w.moveFocus(1)},PageUp:function(){w.moveFocus(-w.menuSize()+1,!0)},PageDown:function(){w.moveFocus(w.menuSize()-1,!0)},Home:function(){w.setFocus(0)},End:function(){w.setFocus(w.length-1)},Enter:w.pick,Tab:w.pick,Esc:w.close},h=v.options.customKeys,x=h?{}:l;function u(O,D){var $;typeof D!="string"?$=function(W){return D(W,w)}:l.hasOwnProperty(D)?$=l[D]:$=D,x[O]=$}if(h)for(var P in h)h.hasOwnProperty(P)&&u(P,h[P]);var b=v.options.extraKeys;if(b)for(var P in b)b.hasOwnProperty(P)&&u(P,b[P]);return x}function p(v,w){for(;w&&w!=v;){if(w.nodeName.toUpperCase()==="LI"&&w.parentNode==v)return w;w=w.parentNode}}function A(v,w){this.completion=v,this.data=w,this.picked=!1;var l=this,h=v.cm,x=this.hints=document.createElement("ul");x.className="CodeMirror-hints",this.selectedHint=w.selectedHint||0;for(var u=w.list,P=0;P<u.length;++P){var b=x.appendChild(document.createElement("li")),O=u[P],D=C+(P!=this.selectedHint?"":" "+k);O.className!=null&&(D=O.className+" "+D),b.className=D,O.render?O.render(b,w,O):b.appendChild(document.createTextNode(O.displayText||M(O))),b.hintId=P}var $=h.cursorCoords(v.options.alignWithWord?w.from:null),W=$.left,V=$.bottom,Q=!0;x.style.left=W+"px",x.style.top=V+"px";var ue=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),ee=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(v.options.container||document.body).appendChild(x);var ae=x.getBoundingClientRect(),he=ae.bottom-ee;if(he>0){var me=ae.bottom-ae.top,ie=$.top-($.bottom-ae.top);if(ie-me>0)x.style.top=(V=$.top-me)+"px",Q=!1;else if(me>ee){x.style.height=ee-5+"px",x.style.top=(V=$.bottom-ae.top)+"px";var re=h.getCursor();w.from.ch!=re.ch&&($=h.cursorCoords(re),x.style.left=(W=$.left)+"px",ae=x.getBoundingClientRect())}}var ye=ae.right-ue;if(ye>0&&(ae.right-ae.left>ue&&(x.style.width=ue-5+"px",ye-=ae.right-ae.left-ue),x.style.left=(W=$.left-ye)+"px"),h.addKeyMap(this.keyMap=m(v,{moveFocus:function(ve,ge){l.changeActive(l.selectedHint+ve,ge)},setFocus:function(ve){l.changeActive(ve)},menuSize:function(){return l.screenAmount()},length:u.length,close:function(){v.close()},pick:function(){l.pick()},data:w})),v.options.closeOnUnfocus){var te;h.on("blur",this.onBlur=function(){te=setTimeout(function(){v.close()},100)}),h.on("focus",this.onFocus=function(){clearTimeout(te)})}var Le=h.getScrollInfo();return h.on("scroll",this.onScroll=function(){var ve=h.getScrollInfo(),ge=h.getWrapperElement().getBoundingClientRect(),pe=V+Le.top-ve.top,Oe=pe-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(Q||(Oe+=x.offsetHeight),Oe<=ge.top||Oe>=ge.bottom)return v.close();x.style.top=pe+"px",x.style.left=W+Le.left-ve.left+"px"}),f.on(x,"dblclick",function(ve){var ge=p(x,ve.target||ve.srcElement);ge&&ge.hintId!=null&&(l.changeActive(ge.hintId),l.pick())}),f.on(x,"click",function(ve){var ge=p(x,ve.target||ve.srcElement);ge&&ge.hintId!=null&&(l.changeActive(ge.hintId),v.options.completeOnSingleClick&&l.pick())}),f.on(x,"mousedown",function(){setTimeout(function(){h.focus()},20)}),f.signal(w,"select",u[0],x.firstChild),!0}A.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var v=this.completion.cm;this.completion.options.closeOnUnfocus&&(v.off("blur",this.onBlur),v.off("focus",this.onFocus)),v.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var v=this;this.keyMap={Enter:function(){v.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(v,w){if(v>=this.data.list.length?v=w?this.data.list.length-1:0:v<0&&(v=w?0:this.data.list.length-1),this.selectedHint!=v){var l=this.hints.childNodes[this.selectedHint];l.className=l.className.replace(" "+k,""),l=this.hints.childNodes[this.selectedHint=v],l.className+=" "+k,l.offsetTop<this.hints.scrollTop?this.hints.scrollTop=l.offsetTop-3:l.offsetTop+l.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=l.offsetTop+l.offsetHeight-this.hints.clientHeight+3),f.signal(this.data,"select",this.data.list[this.selectedHint],l)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}};function L(v,w){if(!v.somethingSelected())return w;for(var l=[],h=0;h<w.length;h++)w[h].supportsSelection&&l.push(w[h]);return l}function S(v,w){var l=v.getHelpers(w,"hint"),h;if(l.length){for(var x=!1,u,P=0;P<l.length;P++)l[P].async&&(x=!0);return x?(u=function(b,O,D){var $=L(b,l);function W(V,Q){if(V==$.length)return O(null);var ue=$[V];if(ue.async)ue(b,function(ee){ee?O(ee):W(V+1)},D);else{var Q=ue(b,D);Q?O(Q):W(V+1)}}W(0)},u.async=!0):u=function(b,O){for(var D=L(b,l),$=0;$<D.length;$++){var W=D[$](b,O);if(W&&W.list.length)return W}},u.supportsSelection=!0,u}else return(h=v.getHelper(v.getCursor(),"hintWords"))?function(b){return f.hint.fromList(b,{words:h})}:f.hint.anyword?function(b,O){return f.hint.anyword(b,O)}:function(){}}f.registerHelper("hint","auto",{resolve:S}),f.registerHelper("hint","fromList",function(v,w){var l=v.getCursor(),h=v.getTokenAt(l),x=f.Pos(l.line,h.end);if(h.string&&/\w/.test(h.string[h.string.length-1]))var u=h.string,P=f.Pos(l.line,h.start);else var u="",P=x;for(var b=[],O=0;O<w.words.length;O++){var D=w.words[O];D.slice(0,u.length)==u&&b.push(D)}if(b.length)return{list:b,from:P,to:x}}),f.commands.autocomplete=f.showHint;var R={hint:f.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};f.defineOption("hintOptions",null)})},{"../../lib/codemirror":30}],26:[function(c,F,I){(function(f){typeof I=="object"&&typeof F=="object"?f(c("../../lib/codemirror"),c("./searchcursor"),c("../dialog/dialog")):f(CodeMirror)})(function(f){function C(b,O){return typeof b=="string"?b=new RegExp(b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),O?"gi":"g"):b.global||(b=new RegExp(b.source,b.ignoreCase?"gi":"g")),{token:function(D){b.lastIndex=D.pos;var $=b.exec(D.string);if($&&$.index==D.pos)return D.pos+=$[0].length,"searching";$?D.pos=$.index:D.skipToEnd()}}}function k(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function T(b){return b.state.search||(b.state.search=new k)}function y(b){return typeof b=="string"&&b==b.toLowerCase()}function o(b,O,D){return b.getSearchCursor(O,D,y(O))}function d(b,O,D,$){b.openDialog(O,$,{value:D,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){w(b)}})}function M(b,O,D,$,W){b.openDialog?b.openDialog(O,W,{value:$,selectValueOnOpen:!0}):W(prompt(D,$))}function m(b,O,D,$){b.openConfirm?b.openConfirm(O,$):confirm(D)&&$[0]()}function p(b){return b.replace(/\\(.)/g,function(O,D){return D=="n"?`
`:D=="r"?"\r":D})}function A(b){var O=b.match(/^\/(.*)\/([a-z]*)$/);if(O)try{b=new RegExp(O[1],O[2].indexOf("i")==-1?"":"i")}catch{}else b=p(b);return(typeof b=="string"?b=="":b.test(""))&&(b=/x^/),b}var L='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function S(b,O,D){O.queryText=D,O.query=A(D),b.removeOverlay(O.overlay,y(O.query)),O.overlay=C(O.query,y(O.query)),b.addOverlay(O.overlay),b.showMatchesOnScrollbar&&(O.annotate&&(O.annotate.clear(),O.annotate=null),O.annotate=b.showMatchesOnScrollbar(O.query,y(O.query)))}function R(b,O,D){var $=T(b);if($.query)return v(b,O);var W=b.getSelection()||$.lastQuery;if(D&&b.openDialog){var V=null;d(b,L,W,function(Q,ue){f.e_stop(ue),Q&&(Q!=$.queryText&&S(b,$,Q),V&&(V.style.opacity=1),v(b,ue.shiftKey,function(ee,ae){var he;ae.line<3&&document.querySelector&&(he=b.display.wrapper.querySelector(".CodeMirror-dialog"))&&he.getBoundingClientRect().bottom-4>b.cursorCoords(ae,"window").top&&((V=he).style.opacity=.4)}))})}else M(b,L,"Search for:",W,function(Q){Q&&!$.query&&b.operation(function(){S(b,$,Q),$.posFrom=$.posTo=b.getCursor(),v(b,O)})})}function v(b,O,D){b.operation(function(){var $=T(b),W=o(b,$.query,O?$.posFrom:$.posTo);!W.find(O)&&(W=o(b,$.query,O?f.Pos(b.lastLine()):f.Pos(b.firstLine(),0)),!W.find(O))||(b.setSelection(W.from(),W.to()),b.scrollIntoView({from:W.from(),to:W.to()},20),$.posFrom=W.from(),$.posTo=W.to(),D&&D(W.from(),W.to()))})}function w(b){b.operation(function(){var O=T(b);O.lastQuery=O.query,O.query&&(O.query=O.queryText=null,b.removeOverlay(O.overlay),O.annotate&&(O.annotate.clear(),O.annotate=null))})}var l=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',h='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',x="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";function u(b,O,D){b.operation(function(){for(var $=o(b,O);$.findNext();)if(typeof O!="string"){var W=b.getRange($.from(),$.to()).match(O);$.replace(D.replace(/\$(\d)/g,function(V,Q){return W[Q]}))}else $.replace(D)})}function P(b,O){if(!b.getOption("readOnly")){var D=b.getSelection()||T(b).lastQuery,$=O?"Replace all:":"Replace:";M(b,$+l,$,D,function(W){W&&(W=A(W),M(b,h,"Replace with:","",function(V){if(V=p(V),O)u(b,W,V);else{w(b);var Q=o(b,W,b.getCursor()),ue=function(){var ae=Q.from(),he;!(he=Q.findNext())&&(Q=o(b,W),!(he=Q.findNext())||ae&&Q.from().line==ae.line&&Q.from().ch==ae.ch)||(b.setSelection(Q.from(),Q.to()),b.scrollIntoView({from:Q.from(),to:Q.to()}),m(b,x,"Replace?",[function(){ee(he)},ue,function(){u(b,W,V)}]))},ee=function(ae){Q.replace(typeof W=="string"?V:V.replace(/\$(\d)/g,function(he,me){return ae[me]})),ue()};ue()}}))})}}f.commands.find=function(b){w(b),R(b)},f.commands.findPersistent=function(b){w(b),R(b,!1,!0)},f.commands.findNext=R,f.commands.findPrev=function(b){R(b,!0)},f.commands.clearSearch=w,f.commands.replace=P,f.commands.replaceAll=function(b){P(b,!0)}})},{"../../lib/codemirror":30,"../dialog/dialog":16,"./searchcursor":27}],27:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C=f.Pos;function k(y,o,d,M){if(this.atOccurrence=!1,this.doc=y,M==null&&typeof o=="string"&&(M=!1),d=d?y.clipPos(d):C(0,0),this.pos={from:d,to:d},typeof o!="string")o.global||(o=new RegExp(o.source,o.ignoreCase?"ig":"g")),this.matches=function(S,R){if(S){o.lastIndex=0;for(var v=y.getLine(R.line).slice(0,R.ch),w=0,l,h;;){o.lastIndex=w;var x=o.exec(v);if(!x||(l=x,h=l.index,w=l.index+(l[0].length||1),w==v.length))break}var u=l&&l[0].length||0;u||(h==0&&v.length==0?l=void 0:h!=y.getLine(R.line).length&&u++)}else{o.lastIndex=R.ch;var v=y.getLine(R.line),l=o.exec(v),u=l&&l[0].length||0,h=l&&l.index;h+u!=v.length&&!u&&(u=1)}if(l&&u)return{from:C(R.line,h),to:C(R.line,h+u),match:l}};else{var m=o;M&&(o=o.toLowerCase());var p=M?function(S){return S.toLowerCase()}:function(S){return S},A=o.split(`
`);if(A.length==1)o.length?this.matches=function(S,R){if(S){var v=y.getLine(R.line).slice(0,R.ch),w=p(v),l=w.lastIndexOf(o);if(l>-1)return l=T(v,w,l),{from:C(R.line,l),to:C(R.line,l+m.length)}}else{var v=y.getLine(R.line).slice(R.ch),w=p(v),l=w.indexOf(o);if(l>-1)return l=T(v,w,l)+R.ch,{from:C(R.line,l),to:C(R.line,l+m.length)}}}:this.matches=function(){};else{var L=m.split(`
`);this.matches=function(S,R){var v=A.length-1;if(S){if(R.line-(A.length-1)<y.firstLine()||p(y.getLine(R.line).slice(0,L[v].length))!=A[A.length-1])return;for(var w=C(R.line,L[v].length),l=R.line-1,h=v-1;h>=1;--h,--l)if(A[h]!=p(y.getLine(l)))return;var x=y.getLine(l),u=x.length-L[0].length;return p(x.slice(u))!=A[0]?void 0:{from:C(l,u),to:w}}else{if(R.line+(A.length-1)>y.lastLine())return;var x=y.getLine(R.line),u=x.length-L[0].length;if(p(x.slice(u))!=A[0])return;for(var P=C(R.line,u),l=R.line+1,h=1;h<v;++h,++l)if(A[h]!=p(y.getLine(l)))return;return p(y.getLine(l).slice(0,L[v].length))!=A[v]?void 0:{from:P,to:C(l,L[v].length)}}}}}}k.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(y){var o=this,d=this.doc.clipPos(y?this.pos.from:this.pos.to);function M(p){var A=C(p,0);return o.pos={from:A,to:A},o.atOccurrence=!1,!1}for(;;){if(this.pos=this.matches(y,d))return this.atOccurrence=!0,this.pos.match||!0;if(y){if(!d.line)return M(0);d=C(d.line-1,this.doc.getLine(d.line-1).length)}else{var m=this.doc.lineCount();if(d.line==m-1)return M(m);d=C(d.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(y,o){if(this.atOccurrence){var d=f.splitLines(y);this.doc.replaceRange(d,this.pos.from,this.pos.to,o),this.pos.to=C(this.pos.from.line+d.length-1,d[d.length-1].length+(d.length==1?this.pos.from.ch:0))}}};function T(y,o,d){if(y.length==o.length)return d;for(var M=Math.min(d,y.length);;){var m=y.slice(0,M).toLowerCase().length;if(m<d)++M;else if(m>d)--M;else return M}}f.defineExtension("getSearchCursor",function(y,o,d){return new k(this.doc,y,o,d)}),f.defineDocExtension("getSearchCursor",function(y,o,d){return new k(this,y,o,d)}),f.defineExtension("selectMatches",function(y,o){for(var d=[],M=this.getSearchCursor(y,this.getCursor("from"),o);M.findNext()&&!(f.cmpPos(M.to(),this.getCursor("to"))>0);)d.push({anchor:M.from(),head:M.to()});d.length&&this.setSelections(d,0)})})},{"../../lib/codemirror":30}],28:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){var C=f.Pos;function k(o,d,M){for(var m=M.paragraphStart||o.getHelper(d,"paragraphStart"),p=d.line,A=o.firstLine();p>A;--p){var L=o.getLine(p);if(m&&m.test(L))break;if(!/\S/.test(L)){++p;break}}for(var S=M.paragraphEnd||o.getHelper(d,"paragraphEnd"),R=d.line+1,v=o.lastLine();R<=v;++R){var L=o.getLine(R);if(S&&S.test(L)){++R;break}if(!/\S/.test(L))break}return{from:p,to:R}}function T(o,d,M,m){for(var p=d;p>0&&!M.test(o.slice(p-1,p+1));--p);for(var A=!0;;A=!1){var L=p;if(m)for(;o.charAt(L-1)==" ";)--L;if(L==0&&A)p=d;else return{from:L,to:p}}}function y(o,d,M,m){d=o.clipPos(d),M=o.clipPos(M);var p=m.column||80,A=m.wrapOn||/\s\S|-[^\.\d]/,L=m.killTrailingSpace!==!1,S=[],R="",v=d.line,w=o.getRange(d,M,!1);if(!w.length)return null;for(var l=w[0].match(/^[ \t]*/)[0],h=0;h<w.length;++h){var x=w[h],u=R.length,P=0;R&&x&&!A.test(R.charAt(R.length-1)+x.charAt(0))&&(R+=" ",P=1);var b="";if(h&&(b=x.match(/^\s*/)[0],x=x.slice(b.length)),R+=x,h){var O=R.length>p&&l==b&&T(R,p,A,L);!O||O.from!=u||O.to!=u+P?S.push({text:[P?" ":""],from:C(v,u),to:C(v+1,b.length)}):(R=l+x,++v)}for(;R.length>p;){var D=T(R,p,A,L);S.push({text:["",l],from:C(v,D.from),to:C(v,D.to)}),R=l+R.slice(D.to),++v}}return S.length&&o.operation(function(){for(var $=0;$<S.length;++$){var W=S[$];(W.text||f.cmpPos(W.from,W.to))&&o.replaceRange(W.text,W.from,W.to)}}),S.length?{from:S[0].from,to:f.changeEnd(S[S.length-1])}:null}f.defineExtension("wrapParagraph",function(o,d){d=d||{},o||(o=this.getCursor());var M=k(this,o,d);return y(this,C(M.from,0),C(M.to-1),d)}),f.commands.wrapLines=function(o){o.operation(function(){for(var d=o.listSelections(),M=o.lastLine()+1,m=d.length-1;m>=0;m--){var p=d[m],A;if(p.empty()){var L=k(o,p.head,{});A={from:C(L.from,0),to:C(L.to-1)}}else A={from:p.from(),to:p.to()};A.to.line>=M||(M=A.from.line,y(o,A.from,A.to,{}))}})},f.defineExtension("wrapRange",function(o,d,M){return y(this,o,d,M||{})}),f.defineExtension("wrapParagraphsInRange",function(o,d,M){M=M||{};for(var m=this,p=[],A=o.line;A<=d.line;){var L=k(m,C(A,0),M);p.push(L),A=L.to}var S=!1;return p.length&&m.operation(function(){for(var R=p.length-1;R>=0;--R)S=S||y(m,C(p[R].from,0),C(p[R].to-1),M)}),S})})},{"../../lib/codemirror":30}],29:[function(c,F,I){(function(f){typeof I=="object"&&typeof F=="object"?f(c("../lib/codemirror"),c("../addon/search/searchcursor"),c("../addon/edit/matchbrackets")):f(CodeMirror)})(function(f){var C=f.keyMap.sublime={fallthrough:"default"},k=f.commands,T=f.Pos,y=f.keyMap.default==f.keyMap.macDefault,o=y?"Cmd-":"Ctrl-";function d(u,P,b){if(b<0&&P.ch==0)return u.clipPos(T(P.line-1));var O=u.getLine(P.line);if(b>0&&P.ch>=O.length)return u.clipPos(T(P.line+1,0));for(var D="start",$,W=P.ch,V=b<0?0:O.length,Q=0;W!=V;W+=b,Q++){var ue=O.charAt(b<0?W-1:W),ee=ue!="_"&&f.isWordChar(ue)?"w":"o";if(ee=="w"&&ue.toUpperCase()==ue&&(ee="W"),D=="start")ee!="o"&&(D="in",$=ee);else if(D=="in"&&$!=ee){if($=="w"&&ee=="W"&&b<0&&W--,$=="W"&&ee=="w"&&b>0){$="w";continue}break}}return T(P.line,W)}function M(u,P){u.extendSelectionsBy(function(b){return u.display.shift||u.doc.extend||b.empty()?d(u.doc,b.head,P):P<0?b.from():b.to()})}k[C["Alt-Left"]="goSubwordLeft"]=function(u){M(u,-1)},k[C["Alt-Right"]="goSubwordRight"]=function(u){M(u,1)};var m=y?"Ctrl-Alt-":"Ctrl-";k[C[m+"Up"]="scrollLineUp"]=function(u){var P=u.getScrollInfo();if(!u.somethingSelected()){var b=u.lineAtHeight(P.top+P.clientHeight,"local");u.getCursor().line>=b&&u.execCommand("goLineUp")}u.scrollTo(null,P.top-u.defaultTextHeight())},k[C[m+"Down"]="scrollLineDown"]=function(u){var P=u.getScrollInfo();if(!u.somethingSelected()){var b=u.lineAtHeight(P.top,"local")+1;u.getCursor().line<=b&&u.execCommand("goLineDown")}u.scrollTo(null,P.top+u.defaultTextHeight())},k[C["Shift-"+o+"L"]="splitSelectionByLine"]=function(u){for(var P=u.listSelections(),b=[],O=0;O<P.length;O++)for(var D=P[O].from(),$=P[O].to(),W=D.line;W<=$.line;++W)$.line>D.line&&W==$.line&&$.ch==0||b.push({anchor:W==D.line?D:T(W,0),head:W==$.line?$:T(W)});u.setSelections(b,0)},C["Shift-Tab"]="indentLess",k[C.Esc="singleSelectionTop"]=function(u){var P=u.listSelections()[0];u.setSelection(P.anchor,P.head,{scroll:!1})},k[C[o+"L"]="selectLine"]=function(u){for(var P=u.listSelections(),b=[],O=0;O<P.length;O++){var D=P[O];b.push({anchor:T(D.from().line,0),head:T(D.to().line+1,0)})}u.setSelections(b)},C["Shift-"+o+"K"]="deleteLine";function p(u,P){u.operation(function(){for(var b=u.listSelections().length,O=[],D=-1,$=0;$<b;$++){var W=u.listSelections()[$].head;if(!(W.line<=D)){var V=T(W.line+(P?0:1),0);u.replaceRange(`
`,V,null,"+insertLine"),u.indentLine(V.line,null,!0),O.push({head:V,anchor:V}),D=W.line+1}}u.setSelections(O)})}k[C[o+"Enter"]="insertLineAfter"]=function(u){p(u,!1)},k[C["Shift-"+o+"Enter"]="insertLineBefore"]=function(u){p(u,!0)};function A(u,P){for(var b=P.ch,O=b,D=u.getLine(P.line);b&&f.isWordChar(D.charAt(b-1));)--b;for(;O<D.length&&f.isWordChar(D.charAt(O));)++O;return{from:T(P.line,b),to:T(P.line,O),word:D.slice(b,O)}}k[C[o+"D"]="selectNextOccurrence"]=function(u){var P=u.getCursor("from"),b=u.getCursor("to"),O=u.state.sublimeFindFullWord==u.doc.sel;if(f.cmpPos(P,b)==0){var D=A(u,P);if(!D.word)return;u.setSelection(D.from,D.to),O=!0}else{var $=u.getRange(P,b),W=O?new RegExp("\\b"+$+"\\b"):$,V=u.getSearchCursor(W,b);V.findNext()?u.addSelection(V.from(),V.to()):(V=u.getSearchCursor(W,T(u.firstLine(),0)),V.findNext()&&u.addSelection(V.from(),V.to()))}O&&(u.state.sublimeFindFullWord=u.doc.sel)};var L="(){}[]";function S(u){var P=u.getCursor(),b=u.scanForBracket(P,-1);if(b)for(;;){var O=u.scanForBracket(P,1);if(!O)return;if(O.ch==L.charAt(L.indexOf(b.ch)+1))return u.setSelection(T(b.pos.line,b.pos.ch+1),O.pos,!1),!0;P=T(O.pos.line,O.pos.ch+1)}}k[C["Shift-"+o+"Space"]="selectScope"]=function(u){S(u)||u.execCommand("selectAll")},k[C["Shift-"+o+"M"]="selectBetweenBrackets"]=function(u){if(!S(u))return f.Pass},k[C[o+"M"]="goToBracket"]=function(u){u.extendSelectionsBy(function(P){var b=u.scanForBracket(P.head,1);if(b&&f.cmpPos(b.pos,P.head)!=0)return b.pos;var O=u.scanForBracket(P.head,-1);return O&&T(O.pos.line,O.pos.ch+1)||P.head})};var R=y?"Cmd-Ctrl-":"Shift-Ctrl-";k[C[R+"Up"]="swapLineUp"]=function(u){for(var P=u.listSelections(),b=[],O=u.firstLine()-1,D=[],$=0;$<P.length;$++){var W=P[$],V=W.from().line-1,Q=W.to().line;D.push({anchor:T(W.anchor.line-1,W.anchor.ch),head:T(W.head.line-1,W.head.ch)}),W.to().ch==0&&!W.empty()&&--Q,V>O?b.push(V,Q):b.length&&(b[b.length-1]=Q),O=Q}u.operation(function(){for(var ue=0;ue<b.length;ue+=2){var ee=b[ue],ae=b[ue+1],he=u.getLine(ee);u.replaceRange("",T(ee,0),T(ee+1,0),"+swapLine"),ae>u.lastLine()?u.replaceRange(`
`+he,T(u.lastLine()),null,"+swapLine"):u.replaceRange(he+`
`,T(ae,0),null,"+swapLine")}u.setSelections(D),u.scrollIntoView()})},k[C[R+"Down"]="swapLineDown"]=function(u){for(var P=u.listSelections(),b=[],O=u.lastLine()+1,D=P.length-1;D>=0;D--){var $=P[D],W=$.to().line+1,V=$.from().line;$.to().ch==0&&!$.empty()&&W--,W<O?b.push(W,V):b.length&&(b[b.length-1]=V),O=V}u.operation(function(){for(var Q=b.length-2;Q>=0;Q-=2){var ue=b[Q],ee=b[Q+1],ae=u.getLine(ue);ue==u.lastLine()?u.replaceRange("",T(ue-1),T(ue),"+swapLine"):u.replaceRange("",T(ue,0),T(ue+1,0),"+swapLine"),u.replaceRange(ae+`
`,T(ee,0),null,"+swapLine")}u.scrollIntoView()})},C[o+"/"]=function(u){u.toggleComment({indent:!0})},k[C[o+"J"]="joinLines"]=function(u){for(var P=u.listSelections(),b=[],O=0;O<P.length;O++){for(var D=P[O],$=D.from(),W=$.line,V=D.to().line;O<P.length-1&&P[O+1].from().line==V;)V=P[++O].to().line;b.push({start:W,end:V,anchor:!D.empty()&&$})}u.operation(function(){for(var Q=0,ue=[],ee=0;ee<b.length;ee++){for(var ae=b[ee],he=ae.anchor&&T(ae.anchor.line-Q,ae.anchor.ch),me,ie=ae.start;ie<=ae.end;ie++){var re=ie-Q;ie==ae.end&&(me=T(re,u.getLine(re).length+1)),re<u.lastLine()&&(u.replaceRange(" ",T(re),T(re+1,/^\s*/.exec(u.getLine(re+1))[0].length)),++Q)}ue.push({anchor:he||me,head:me})}u.setSelections(ue,0)})},k[C["Shift-"+o+"D"]="duplicateLine"]=function(u){u.operation(function(){for(var P=u.listSelections().length,b=0;b<P;b++){var O=u.listSelections()[b];O.empty()?u.replaceRange(u.getLine(O.head.line)+`
`,T(O.head.line,0)):u.replaceRange(u.getRange(O.from(),O.to()),O.from())}u.scrollIntoView()})},C[o+"T"]="transposeChars";function v(u,P){for(var b=u.listSelections(),O=[],D,$=0;$<b.length;$++){var W=b[$];if(!W.empty()){for(var V=W.from().line,Q=W.to().line;$<b.length-1&&b[$+1].from().line==Q;)Q=W[++$].to().line;O.push(V,Q)}}O.length?D=!0:O.push(u.firstLine(),u.lastLine()),u.operation(function(){for(var ue=[],ee=0;ee<O.length;ee+=2){var ae=O[ee],he=O[ee+1],me=T(ae,0),ie=T(he),re=u.getRange(me,ie,!1);P?re.sort():re.sort(function(ye,te){var Le=ye.toUpperCase(),ve=te.toUpperCase();return Le!=ve&&(ye=Le,te=ve),ye<te?-1:ye==te?0:1}),u.replaceRange(re,me,ie),D&&ue.push({anchor:me,head:ie})}D&&u.setSelections(ue,0)})}k[C.F9="sortLines"]=function(u){v(u,!0)},k[C[o+"F9"]="sortLinesInsensitive"]=function(u){v(u,!1)},k[C.F2="nextBookmark"]=function(u){var P=u.state.sublimeBookmarks;if(P)for(;P.length;){var b=P.shift(),O=b.find();if(O)return P.push(b),u.setSelection(O.from,O.to)}},k[C["Shift-F2"]="prevBookmark"]=function(u){var P=u.state.sublimeBookmarks;if(P)for(;P.length;){P.unshift(P.pop());var b=P[P.length-1].find();if(!b)P.pop();else return u.setSelection(b.from,b.to)}},k[C[o+"F2"]="toggleBookmark"]=function(u){for(var P=u.listSelections(),b=u.state.sublimeBookmarks||(u.state.sublimeBookmarks=[]),O=0;O<P.length;O++){for(var D=P[O].from(),$=P[O].to(),W=u.findMarks(D,$),V=0;V<W.length;V++)if(W[V].sublimeBookmark){W[V].clear();for(var Q=0;Q<b.length;Q++)b[Q]==W[V]&&b.splice(Q--,1);break}V==W.length&&b.push(u.markText(D,$,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},k[C["Shift-"+o+"F2"]="clearBookmarks"]=function(u){var P=u.state.sublimeBookmarks;if(P)for(var b=0;b<P.length;b++)P[b].clear();P.length=0},k[C["Alt-F2"]="selectBookmarks"]=function(u){var P=u.state.sublimeBookmarks,b=[];if(P)for(var O=0;O<P.length;O++){var D=P[O].find();D?b.push({anchor:D.from,head:D.to}):P.splice(O--,0)}b.length&&u.setSelections(b,0)},C["Alt-Q"]="wrapLines";var w=o+"K ";function l(u,P){u.operation(function(){for(var b=u.listSelections(),O=[],D=[],$=0;$<b.length;$++){var W=b[$];W.empty()?(O.push($),D.push("")):D.push(P(u.getRange(W.from(),W.to())))}u.replaceSelections(D,"around","case");for(var $=O.length-1,V;$>=0;$--){var W=b[O[$]];if(!(V&&f.cmpPos(W.head,V)>0)){var Q=A(u,W.head);V=Q.from,u.replaceRange(P(Q.word),Q.from,Q.to)}}})}C[w+o+"Backspace"]="delLineLeft",k[C.Backspace="smartBackspace"]=function(u){if(u.somethingSelected())return f.Pass;var P=u.getCursor(),b=u.getRange({line:P.line,ch:0},P),O=f.countColumn(b,null,u.getOption("tabSize")),D=u.getOption("indentUnit");if(b&&!/\S/.test(b)&&O%D==0){var $=new T(P.line,f.findColumn(b,O-D,D));return $.ch==P.ch?f.Pass:u.replaceRange("",$,P,"+delete")}else return f.Pass},k[C[w+o+"K"]="delLineRight"]=function(u){u.operation(function(){for(var P=u.listSelections(),b=P.length-1;b>=0;b--)u.replaceRange("",P[b].anchor,T(P[b].to().line),"+delete");u.scrollIntoView()})},k[C[w+o+"U"]="upcaseAtCursor"]=function(u){l(u,function(P){return P.toUpperCase()})},k[C[w+o+"L"]="downcaseAtCursor"]=function(u){l(u,function(P){return P.toLowerCase()})},k[C[w+o+"Space"]="setSublimeMark"]=function(u){u.state.sublimeMark&&u.state.sublimeMark.clear(),u.state.sublimeMark=u.setBookmark(u.getCursor())},k[C[w+o+"A"]="selectToSublimeMark"]=function(u){var P=u.state.sublimeMark&&u.state.sublimeMark.find();P&&u.setSelection(u.getCursor(),P)},k[C[w+o+"W"]="deleteToSublimeMark"]=function(u){var P=u.state.sublimeMark&&u.state.sublimeMark.find();if(P){var b=u.getCursor(),O=P;if(f.cmpPos(b,O)>0){var D=O;O=b,b=D}u.state.sublimeKilled=u.getRange(b,O),u.replaceRange("",b,O)}},k[C[w+o+"X"]="swapWithSublimeMark"]=function(u){var P=u.state.sublimeMark&&u.state.sublimeMark.find();P&&(u.state.sublimeMark.clear(),u.state.sublimeMark=u.setBookmark(u.getCursor()),u.setCursor(P))},k[C[w+o+"Y"]="sublimeYank"]=function(u){u.state.sublimeKilled!=null&&u.replaceSelection(u.state.sublimeKilled,null,"paste")},C[w+o+"G"]="clearBookmarks",k[C[w+o+"C"]="showInCenter"]=function(u){var P=u.cursorCoords(null,"local");u.scrollTo(null,(P.top+P.bottom)/2-u.getScrollInfo().clientHeight/2)},k[C["Shift-Alt-Up"]="selectLinesUpward"]=function(u){u.operation(function(){for(var P=u.listSelections(),b=0;b<P.length;b++){var O=P[b];O.head.line>u.firstLine()&&u.addSelection(T(O.head.line-1,O.head.ch))}})},k[C["Shift-Alt-Down"]="selectLinesDownward"]=function(u){u.operation(function(){for(var P=u.listSelections(),b=0;b<P.length;b++){var O=P[b];O.head.line<u.lastLine()&&u.addSelection(T(O.head.line+1,O.head.ch))}})};function h(u){var P=u.getCursor("from"),b=u.getCursor("to");if(f.cmpPos(P,b)==0){var O=A(u,P);if(!O.word)return;P=O.from,b=O.to}return{from:P,to:b,query:u.getRange(P,b),word:O}}function x(u,P){var b=h(u);if(b){var O=b.query,D=u.getSearchCursor(O,P?b.to:b.from);(P?D.findNext():D.findPrevious())?u.setSelection(D.from(),D.to()):(D=u.getSearchCursor(O,P?T(u.firstLine(),0):u.clipPos(T(u.lastLine()))),(P?D.findNext():D.findPrevious())?u.setSelection(D.from(),D.to()):b.word&&u.setSelection(b.from,b.to))}}k[C[o+"F3"]="findUnder"]=function(u){x(u,!0)},k[C["Shift-"+o+"F3"]="findUnderPrevious"]=function(u){x(u,!1)},k[C["Alt-F3"]="findAllUnder"]=function(u){var P=h(u);if(P){for(var b=u.getSearchCursor(P.query),O=[],D=-1;b.findNext();)O.push({anchor:b.from(),head:b.to()}),b.from().line<=P.from.line&&b.from().ch<=P.from.ch&&D++;u.setSelections(O,D)}},C["Shift-"+o+"["]="fold",C["Shift-"+o+"]"]="unfold",C[w+o+"0"]=C[w+o+"j"]="unfoldAll",C[o+"I"]="findIncremental",C["Shift-"+o+"I"]="findIncrementalReverse",C[o+"H"]="replace",C.F3="findNext",C["Shift-F3"]="findPrev",f.normalizeKeyMap(C)})},{"../addon/edit/matchbrackets":20,"../addon/search/searchcursor":27,"../lib/codemirror":30}],30:[function(c,F,I){(function(f){typeof I=="object"&&typeof F=="object"?F.exports=f():this.CodeMirror=f()})(function(){var f=navigator.userAgent,C=navigator.platform,k=/gecko\/\d/i.test(f),T=/MSIE \d/.test(f),y=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(f),o=T||y,d=o&&(T?document.documentMode||6:y[1]),M=/WebKit\//.test(f),m=M&&/Qt\/\d+\.\d+/.test(f),p=/Chrome\//.test(f),A=/Opera\//.test(f),L=/Apple Computer/.test(navigator.vendor),S=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(f),R=/PhantomJS/.test(f),v=/AppleWebKit/.test(f)&&/Mobile\/\w+/.test(f),w=v||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(f),l=v||/Mac/.test(C),h=/win/i.test(C),x=A&&f.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(A=!1,M=!0);var u=l&&(m||A&&(x==null||x<12.11)),P=k||o&&d>=9,b=!1,O=!1;function D(e,t){if(!(this instanceof D))return new D(e,t);this.options=t=t?$t(t):{},$t(as,t,!1),te(t);var r=t.value;typeof r=="string"&&(r=new Mt(r,t.mode,null,t.lineSeparator)),this.doc=r;var i=new D.inputStyles[t.inputStyle](this),n=this.display=new $(e,r,i);n.wrapper.CodeMirror=this,me(this),ae(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!w&&n.input.focus(),pe(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ri,keySeq:null,specialChars:null};var a=this;o&&d<11&&setTimeout(function(){a.display.input.reset(!0)},20),$o(this),Ws(),jr(this),this.curOp.forceUpdate=!0,to(this,r),t.autofocus&&!w||a.hasFocus()?setTimeout(Di(On,this),20):gi(this);for(var s in Vr)Vr.hasOwnProperty(s)&&Vr[s](this,t[s],Oa);ut(this),t.finishInit&&t.finishInit(this);for(var g=0;g<Nn.length;++g)Nn[g](this);Ur(this),M&&t.lineWrapping&&getComputedStyle(n.lineDiv).textRendering=="optimizelegibility"&&(n.lineDiv.style.textRendering="auto")}function $(e,t,r){var i=this;this.input=r,i.scrollbarFiller=Ee("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=Ee("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Ee("div",null,"CodeMirror-code"),i.selectionDiv=Ee("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Ee("div",null,"CodeMirror-cursors"),i.measure=Ee("div",null,"CodeMirror-measure"),i.lineMeasure=Ee("div",null,"CodeMirror-measure"),i.lineSpace=Ee("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Ee("div",[Ee("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Ee("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=Ee("div",null,null,"position: absolute; height: "+co+"px; width: 1px;"),i.gutters=Ee("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Ee("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Ee("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),o&&d<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!M&&!(k&&w)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function W(e){e.doc.mode=D.getMode(e.options,e.doc.modeOption),V(e)}function V(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,J(e,100),e.state.modeGen++,e.curOp&&St(e)}function Q(e){e.options.lineWrapping?(Fi(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Ni(e.display.wrapper,"CodeMirror-wrap"),ye(e)),ee(e),St(e),di(e),setTimeout(function(){Oe(e)},100)}function ue(e){var t=Tr(e.display),r=e.options.lineWrapping,i=r&&Math.max(5,e.display.scroller.clientWidth/vi(e.display)-3);return function(n){if(Pr(e.doc,n))return 0;var a=0;if(n.widgets)for(var s=0;s<n.widgets.length;s++)n.widgets[s].height&&(a+=n.widgets[s].height);return r?a+(Math.ceil(n.text.length/i)||1)*t:a+t}}function ee(e){var t=e.doc,r=ue(e);t.iter(function(i){var n=r(i);n!=i.height&&Ut(i,n)})}function ae(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),di(e)}function he(e){me(e),St(e),setTimeout(function(){Je(e)},20)}function me(e){var t=e.display.gutters,r=e.options.gutters;Hr(t);for(var i=0;i<r.length;++i){var n=r[i],a=t.appendChild(Ee("div",null,"CodeMirror-gutter "+n));n=="CodeMirror-linenumbers"&&(e.display.lineGutter=a,a.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",ie(e)}function ie(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function re(e){if(e.height==0)return 0;for(var t=e.text.length,r,i=e;r=Ba(i);){var n=r.find(0,!0);i=n.from.line,t+=n.from.ch-n.to.ch}for(i=e;r=Si(i);){var n=r.find(0,!0);t-=i.text.length-n.from.ch,i=n.to.line,t+=i.text.length-n.to.ch}return t}function ye(e){var t=e.display,r=e.doc;t.maxLine=Pe(r,r.first),t.maxLineLength=re(t.maxLine),t.maxLineChanged=!0,r.iter(function(i){var n=re(i);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=i)})}function te(e){var t=mt(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function Le(e){var t=e.display,r=t.gutters.offsetWidth,i=Math.round(e.doc.height+Me(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:i,scrollHeight:i+Ve(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function ve(e,t,r){this.cm=r;var i=this.vert=Ee("div",[Ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=Ee("div",[Ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(n),De(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),De(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedOverlay=!1,o&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}ve.prototype=$t({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var n=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(r?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+a+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(i==0&&this.overlayHack(),this.checkedOverlay=!0),{right:r?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=l&&!S?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,r=function(i){Mi(i)!=t.vert&&Mi(i)!=t.horiz&&at(t.cm,va)(i)};De(this.vert,"mousedown",r),De(this.horiz,"mousedown",r)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},ve.prototype);function ge(){}ge.prototype=$t({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},ge.prototype),D.scrollbarModel={native:ve,null:ge};function pe(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Ni(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new D.scrollbarModel[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),De(t,"mousedown",function(){e.state.focused&&setTimeout(function(){e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){r=="horizontal"?zr(e,t):pi(e,t)},e),e.display.scrollbars.addClass&&Fi(e.display.wrapper,e.display.scrollbars.addClass)}function Oe(e,t){t||(t=Le(e));var r=e.display.barWidth,i=e.display.barHeight;ze(e,t);for(var n=0;n<4&&r!=e.display.barWidth||i!=e.display.barHeight;n++)r!=e.display.barWidth&&e.options.lineWrapping&&Ce(e),ze(e,Le(e)),r=e.display.barWidth,i=e.display.barHeight}function ze(e,t){var r=e.display,i=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=i.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=i.bottom)+"px",i.right&&i.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=i.bottom+"px",r.scrollbarFiller.style.width=i.right+"px"):r.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=i.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function Ue(e,t,r){var i=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;i=Math.floor(i-ke(e));var n=r&&r.bottom!=null?r.bottom:i+e.wrapper.clientHeight,a=Dr(t,i),s=Dr(t,n);if(r&&r.ensure){var g=r.ensure.from.line,E=r.ensure.to.line;g<a?(a=g,s=Dr(t,er(Pe(t,g))+e.wrapper.clientHeight)):Math.min(E,t.lastLine())>=s&&(a=Dr(t,er(Pe(t,E))-e.wrapper.clientHeight),s=E)}return{from:a,to:Math.max(s,a+1)}}function Je(e){var t=e.display,r=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var i=U(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,a=i+"px",s=0;s<r.length;s++)if(!r[s].hidden){e.options.fixedGutter&&r[s].gutter&&(r[s].gutter.style.left=a);var g=r[s].alignable;if(g)for(var E=0;E<g.length;E++)g[E].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+n+"px")}}function ut(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=Z(e.options,t.first+t.size-1),i=e.display;if(r.length!=i.lineNumChars){var n=i.measure.appendChild(Ee("div",[Ee("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=n.firstChild.offsetWidth,s=n.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ie(e),!0}return!1}function Z(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function U(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function _(e,t,r){var i=e.display;this.viewport=t,this.visible=Ue(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=$e(e),this.force=r,this.dims=Ae(e),this.events=[]}_.prototype.signal=function(e,t){It(e,t)&&this.events.push(arguments)},_.prototype.finish=function(){for(var e=0;e<this.events.length;e++)lt.apply(null,this.events[e])};function N(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ve(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ve(e)+"px",t.scrollbarsClipped=!0)}function X(e,t){var r=e.display,i=e.doc;if(t.editorIsHidden)return ar(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&da(e)==0)return!1;ut(e)&&(ar(e),t.dims=Ae(e));var n=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(n,t.visible.to+e.options.viewportMargin);r.viewFrom<a&&a-r.viewFrom<20&&(a=Math.max(i.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(n,r.viewTo)),O&&(a=$n(e.doc,a),s=Ua(e.doc,s));var g=a!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;_o(e,a,s),r.viewOffset=er(Pe(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var E=da(e);if(!g&&E==0&&!t.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var H=Xt();return E>4&&(r.lineDiv.style.display="none"),We(e,r.updateLineNumbers,t.dims),E>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,H&&Xt()!=H&&H.offsetHeight&&H.focus(),Hr(r.cursorDiv),Hr(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,g&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,J(e,400)),r.updateLineNumbers=null,!0}function z(e,t){for(var r=t.viewport,i=!0;!((!i||!e.options.lineWrapping||t.oldDisplayWidth==$e(e))&&(r&&r.top!=null&&(r={top:Math.min(e.doc.height+Me(e.display)-pt(e),r.top)}),t.visible=Ue(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)||!X(e,t));i=!1){Ce(e);var n=Le(e);nr(e),ne(e,n),Oe(e,n)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function oe(e,t){var r=new _(e,t);if(X(e,r)){Ce(e),z(e,r);var i=Le(e);nr(e),ne(e,i),Oe(e,i),r.finish()}}function ne(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var r=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=r+"px",e.display.gutters.style.height=Math.max(r+Ve(e),t.clientHeight)+"px"}function Ce(e){for(var t=e.display,r=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var n=t.view[i],a;if(!n.hidden){if(o&&d<8){var s=n.node.offsetTop+n.node.offsetHeight;a=s-r,r=s}else{var g=n.node.getBoundingClientRect();a=g.bottom-g.top}var E=n.line.height-a;if(a<2&&(a=Tr(t)),(E>.001||E<-.001)&&(Ut(n.line,a),Se(n.line),n.rest))for(var H=0;H<n.rest.length;H++)Se(n.rest[H])}}}function Se(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Ae(e){for(var t=e.display,r={},i={},n=t.gutters.clientLeft,a=t.gutters.firstChild,s=0;a;a=a.nextSibling,++s)r[e.options.gutters[s]]=a.offsetLeft+a.clientLeft+n,i[e.options.gutters[s]]=a.clientWidth;return{fixedPos:U(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function We(e,t,r){var i=e.display,n=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild;function g(q){var de=q.nextSibling;return M&&l&&e.display.currentWheelTarget==q?q.style.display="none":q.parentNode.removeChild(q),de}for(var E=i.view,H=i.viewFrom,j=0;j<E.length;j++){var B=E[j];if(!B.hidden)if(!B.node||B.node.parentNode!=a){var G=Nt(e,B,H,r);a.insertBefore(G,s)}else{for(;s!=B.node;)s=g(s);var K=n&&t!=null&&t<=H&&B.lineNumber;B.changes&&(mt(B.changes,"gutter")>-1&&(K=!1),Ke(e,B,H,r)),K&&(Hr(B.lineNumber),B.lineNumber.appendChild(document.createTextNode(Z(e.options,H)))),s=B.node.nextSibling}H+=B.size}for(;s;)s=g(s)}function Ke(e,t,r,i){for(var n=0;n<t.changes.length;n++){var a=t.changes[n];a=="text"?et(e,t):a=="gutter"?Ze(e,t,r,i):a=="class"?it(t):a=="widget"&&nt(e,t,i)}t.changes=null}function Fe(e){return e.node==e.text&&(e.node=Ee("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&d<8&&(e.node.style.zIndex=2)),e.node}function rt(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=Fe(e);e.background=r.insertBefore(Ee("div",null,t),r.firstChild)}}function je(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Ja(e,t)}function et(e,t){var r=t.text.className,i=je(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,it(t)):r&&(t.text.className=r)}function it(e){rt(e),e.line.wrapClass?Fe(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function Ze(e,t,r,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=Fe(t);t.gutterBackground=Ee("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),n.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var n=Fe(t),s=t.gutter=Ee("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),n.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=s.appendChild(Ee("div",Z(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var g=0;g<e.options.gutters.length;++g){var E=e.options.gutters[g],H=a.hasOwnProperty(E)&&a[E];H&&s.appendChild(Ee("div",[H],"CodeMirror-gutter-elt","left: "+i.gutterLeft[E]+"px; width: "+i.gutterWidth[E]+"px"))}}}function nt(e,t,r){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,n;i;i=n){var n=i.nextSibling;i.className=="CodeMirror-linewidget"&&t.node.removeChild(i)}fr(e,t,r)}function Nt(e,t,r,i){var n=je(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),it(t),Ze(e,t,r,i),fr(e,t,i),t.node}function fr(e,t,r){if(Wi(e,t.line,t,r,!0),t.rest)for(var i=0;i<t.rest.length;i++)Wi(e,t.rest[i],t,r,!1)}function Wi(e,t,r,i,n){if(t.widgets)for(var a=Fe(r),s=0,g=t.widgets;s<g.length;++s){var E=g[s],H=Ee("div",[E.node],"CodeMirror-linewidget");E.handleMouseEvents||H.setAttribute("cm-ignore-events","true"),ni(E,H,r,i),e.display.input.setUneditable(H),n&&E.above?a.insertBefore(H,r.gutter||r.text):a.appendChild(H),kt(E,"redraw")}}function ni(e,t,r,i){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var n=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(n-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}var le=D.Pos=function(e,t){if(!(this instanceof le))return new le(e,t);this.line=e,this.ch=t},_e=D.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function ai(e){return le(e.line,e.ch)}function cr(e,t){return _e(e,t)<0?t:e}function Kt(e,t){return _e(e,t)<0?e:t}function Bi(e){e.state.focused||(e.display.input.focus(),On(e))}function Dt(e){return e.options.readOnly||e.doc.cantEdit}var Lt=null;function hr(e,t,r,i,n){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var s=e.state.pasteIncoming||n=="paste",g=a.splitLines(t),E=null;if(s&&i.ranges.length>1)if(Lt&&Lt.join(`
`)==t){if(i.ranges.length%Lt.length==0){E=[];for(var H=0;H<Lt.length;H++)E.push(a.splitLines(Lt[H]))}}else g.length==i.ranges.length&&(E=wn(g,function(de){return[de]}));for(var H=i.ranges.length-1;H>=0;H--){var j=i.ranges[H],B=j.from(),G=j.to();j.empty()&&(r&&r>0?B=le(B.line,B.ch-r):e.state.overwrite&&!s&&(G=le(G.line,Math.min(Pe(a,G.line).text.length,G.ch+Qe(g).length))));var K=e.curOp.updateInput,q={from:B,to:G,text:E?E[H%E.length]:g,origin:n||(s?"paste":e.state.cutIncoming?"cut":"+input")};Xr(e.doc,q),kt(e,"inputRead",e,q)}t&&!s&&vr(e,t),Kr(e),e.curOp.updateInput=K,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function dr(e,t){var r=e.clipboardData&&e.clipboardData.getData("text/plain");if(r)return e.preventDefault(),!Dt(t)&&!t.options.disableInput&&Pt(t,function(){hr(t,r,0,null,"paste")}),!0}function vr(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var r=e.doc.sel,i=r.ranges.length-1;i>=0;i--){var n=r.ranges[i];if(!(n.head.ch>100||i&&r.ranges[i-1].head.line==n.head.line)){var a=e.getModeAt(n.head),s=!1;if(a.electricChars){for(var g=0;g<a.electricChars.length;g++)if(t.indexOf(a.electricChars.charAt(g))>-1){s=yi(e,n.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Pe(e.doc,n.head.line).text.slice(0,n.head.ch))&&(s=yi(e,n.head.line,"smart"));s&&kt(e,"electricInput",e,n.head.line)}}}function oi(e){for(var t=[],r=[],i=0;i<e.doc.sel.ranges.length;i++){var n=e.doc.sel.ranges[i].head.line,a={anchor:le(n,0),head:le(n+1,0)};r.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:r}}function si(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function pr(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ri,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function gr(){var e=Ee("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Ee("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return M?e.style.width="1000px":e.setAttribute("wrap","off"),v&&(e.style.border="1px solid black"),si(e),t}pr.prototype=$t({init:function(e){var t=this,r=this.cm,i=this.wrapper=gr(),n=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild),v&&(n.style.width="0px"),De(n,"input",function(){o&&d>=9&&t.hasSelection&&(t.hasSelection=null),t.poll()}),De(n,"paste",function(s){if(dr(s,r))return!0;r.state.pasteIncoming=!0,t.fastPoll()});function a(s){if(r.somethingSelected())Lt=r.getSelections(),t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,n.value=Lt.join(`
`),ei(n));else if(r.options.lineWiseCopyCut){var g=oi(r);Lt=g.text,s.type=="cut"?r.setSelections(g.ranges,null,tr):(t.prevInput="",n.value=g.text.join(`
`),ei(n))}else return;s.type=="cut"&&(r.state.cutIncoming=!0)}De(n,"cut",a),De(n,"copy",a),De(e.scroller,"paste",function(s){qt(e,s)||(r.state.pasteIncoming=!0,t.focus())}),De(e.lineSpace,"selectstart",function(s){qt(e,s)||xt(s)}),De(n,"compositionstart",function(){var s=r.getCursor("from");t.composing&&t.composing.range.clear(),t.composing={start:s,range:r.markText(s,r.getCursor("to"),{className:"CodeMirror-composing"})}}),De(n,"compositionend",function(){t.composing&&(t.poll(),t.composing.range.clear(),t.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,r=e.doc,i=hi(e);if(e.options.moveInputWithCursor){var n=Qt(e,r.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+s.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+s.left-a.left))}return i},showSelection:function(e){var t=this.cm,r=t.display;Ot(r.cursorDiv,e.cursors),Ot(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,r,i=this.cm,n=i.doc;if(i.somethingSelected()){this.prevInput="";var a=n.sel.primary();t=xo&&(a.to().line-a.from().line>100||(r=i.getSelection()).length>1e3);var s=t?"-":r||i.getSelection();this.textarea.value=s,i.state.focused&&ei(this.textarea),o&&d>=9&&(this.hasSelection=s)}else e||(this.prevInput=this.textarea.value="",o&&d>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!w||Xt()!=this.textarea))try{this.textarea.focus()}catch{}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){var e=!1,t=this;t.pollingFast=!0;function r(){var i=t.poll();!i&&!e?(e=!0,t.polling.set(60,r)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,r)},poll:function(){var e=this.cm,t=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Gs(t)&&!r&&!this.composing||Dt(e)||e.options.disableInput||e.state.keySeq)return!1;var i=t.value;if(i==r&&!e.somethingSelected())return!1;if(o&&d>=9&&this.hasSelection===i||l&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var n=i.charCodeAt(0);if(n==8203&&!r&&(r="​"),n==8666)return this.reset(),this.cm.execCommand("undo")}for(var a=0,s=Math.min(r.length,i.length);a<s&&r.charCodeAt(a)==i.charCodeAt(a);)++a;var g=this;return Pt(e,function(){hr(e,i.slice(a),r.length-a,null,g.composing?"*compose":null),i.length>1e3||i.indexOf(`
`)>-1?t.value=g.prevInput="":g.prevInput=i,g.composing&&(g.composing.range.clear(),g.composing.range=e.markText(g.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){o&&d>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var t=this,r=t.cm,i=r.display,n=t.textarea,a=Er(r,e),s=i.scroller.scrollTop;if(!a||A)return;var g=r.options.resetSelectionOnContextMenu;g&&r.doc.sel.contains(a)==-1&&at(r,st)(r.doc,ft(a),tr);var E=n.style.cssText;if(t.wrapper.style.position="absolute",n.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",M)var H=window.scrollY;i.input.focus(),M&&window.scrollTo(null,H),i.input.reset(),r.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=!0,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll);function j(){if(n.selectionStart!=null){var K=r.somethingSelected(),q="​"+(K?n.value:"");n.value="⇚",n.value=q,t.prevInput=K?"":"​",n.selectionStart=1,n.selectionEnd=q.length,i.selForContextMenu=r.doc.sel}}function B(){if(t.contextMenuPending=!1,t.wrapper.style.position="relative",n.style.cssText=E,o&&d<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=s),n.selectionStart!=null){(!o||o&&d<9)&&j();var K=0,q=function(){i.selForContextMenu==r.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&t.prevInput=="​"?at(r,on.selectAll)(r):K++<10?i.detectingSelectAll=setTimeout(q,500):i.input.reset()};i.detectingSelectAll=setTimeout(q,200)}}if(o&&d>=9&&j(),P){mn(e);var G=function(){zt(window,"mouseup",G),setTimeout(B,20)};De(window,"mouseup",G)}else setTimeout(B,50)},readOnlyChanged:function(e){e||this.reset()},setUneditable:Oi,needsContentAttribute:!1},pr.prototype);function Nr(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ri,this.gracePeriod=!1}Nr.prototype=$t({init:function(e){var t=this,r=t.cm,i=t.div=e.lineDiv;si(i),De(i,"paste",function(a){dr(a,r)}),De(i,"compositionstart",function(a){var s=a.data;if(t.composing={sel:r.doc.sel,data:s,startData:s},!!s){var g=r.doc.sel.primary(),E=r.getLine(g.head.line),H=E.indexOf(s,Math.max(0,g.head.ch-s.length));H>-1&&H<=g.head.ch&&(t.composing.sel=ft(le(g.head.line,H),le(g.head.line,H+s.length)))}}),De(i,"compositionupdate",function(a){t.composing.data=a.data}),De(i,"compositionend",function(a){var s=t.composing;s&&(a.data!=s.startData&&!/\u200b/.test(a.data)&&(s.data=a.data),setTimeout(function(){s.handled||t.applyComposition(s),t.composing==s&&(t.composing=null)},50))}),De(i,"touchstart",function(){t.forceCompositionEnd()}),De(i,"input",function(){t.composing||(Dt(r)||!t.pollContent())&&Pt(t.cm,function(){St(r)})});function n(a){if(r.somethingSelected())Lt=r.getSelections(),a.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var s=oi(r);Lt=s.text,a.type=="cut"&&r.operation(function(){r.setSelections(s.ranges,0,tr),r.replaceSelection("",null,"cut")})}else return;if(a.clipboardData&&!v)a.preventDefault(),a.clipboardData.clearData(),a.clipboardData.setData("text/plain",Lt.join(`
`));else{var g=gr(),E=g.firstChild;r.display.lineSpace.insertBefore(g,r.display.lineSpace.firstChild),E.value=Lt.join(`
`);var H=document.activeElement;ei(E),setTimeout(function(){r.display.lineSpace.removeChild(g),H.focus()},50)}}De(i,"copy",n),De(i,"cut",n)},prepareSelection:function(){var e=hi(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){!e||!this.cm.display.view.length||(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),r=Yt(this.cm,e.anchorNode,e.anchorOffset),i=Yt(this.cm,e.focusNode,e.focusOffset);if(!(r&&!r.bad&&i&&!i.bad&&_e(Kt(r,i),t.from())==0&&_e(cr(r,i),t.to())==0)){var n=mr(this.cm,t.from()),a=mr(this.cm,t.to());if(!(!n&&!a)){var s=this.cm.display.view,g=e.rangeCount&&e.getRangeAt(0);if(!n)n={node:s[0].measure.map[2],offset:0};else if(!a){var E=s[s.length-1].measure,H=E.maps?E.maps[E.maps.length-1]:E.map;a={node:H[H.length-1],offset:H[H.length-2]-H[H.length-3]}}try{var j=lr(n.node,n.offset,a.offset,a.node)}catch{}j&&(e.removeAllRanges(),e.addRange(j),g&&e.anchorNode==null?e.addRange(g):k&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Ot(this.cm.display.cursorDiv,e.cursors),Ot(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Yn(this.div,t)},focus:function(){this.cm.options.readOnly!="nocursor"&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var e=this;this.selectionInEditor()?this.pollSelection():Pt(this.cm,function(){e.cm.curOp.selectionChanged=!0});function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}this.polling.set(this.cm.options.pollInterval,t)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var r=Yt(t,e.anchorNode,e.anchorOffset),i=Yt(t,e.focusNode,e.focusOffset);r&&i&&Pt(t,function(){st(t.doc,ft(r,i),tr),(r.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,r=e.doc.sel.primary(),i=r.from(),n=r.to();if(i.line<t.viewFrom||n.line>t.viewTo-1)return!1;var a;if(i.line==t.viewFrom||(a=Lr(e,i.line))==0)var s=qe(t.view[0].line),g=t.view[0].node;else var s=qe(t.view[a].line),g=t.view[a-1].node.nextSibling;var E=Lr(e,n.line);if(E==t.view.length-1)var H=t.viewTo-1,j=t.lineDiv.lastChild;else var H=qe(t.view[E+1].line)-1,j=t.view[E+1].node.previousSibling;for(var B=e.doc.splitLines(Fr(e,g,j,s,H)),G=Or(e.doc,le(s,0),le(H,Pe(e.doc,H).text.length));B.length>1&&G.length>1;)if(Qe(B)==Qe(G))B.pop(),G.pop(),H--;else if(B[0]==G[0])B.shift(),G.shift(),s++;else break;for(var K=0,q=0,de=B[0],be=G[0],we=Math.min(de.length,be.length);K<we&&de.charCodeAt(K)==be.charCodeAt(K);)++K;for(var He=Qe(B),xe=Qe(G),Be=Math.min(He.length-(B.length==1?K:0),xe.length-(G.length==1?K:0));q<Be&&He.charCodeAt(He.length-q-1)==xe.charCodeAt(xe.length-q-1);)++q;B[B.length-1]=He.slice(0,He.length-q),B[0]=B[0].slice(K);var Te=le(s,K),Re=le(H,G.length?Qe(G).length-q:0);if(B.length>1||B[0]||_e(Te,Re))return Gr(e.doc,B,Te,Re,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){!this.composing||this.composing.handled||(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){Dt(this.cm)?at(this.cm,St)(this.cm):e.data&&e.data!=e.startData&&at(this.cm,hr)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),Dt(this.cm)||at(this.cm,hr)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String(e!="nocursor")},onContextMenu:Oi,resetPosition:Oi,needsContentAttribute:!0},Nr.prototype);function mr(e,t){var r=Zt(e,t.line);if(!r||r.hidden)return null;var i=Pe(e.doc,t.line),n=ct(r,i,t.line),a=Ft(i),s="left";if(a){var g=kn(a,t.ch);s=g%2?"right":"left"}var E=aa(n.map,t.ch,s);return E.offset=E.collapse=="right"?E.end:E.start,E}function Bt(e,t){return t&&(e.bad=!0),e}function Yt(e,t,r){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[r],!i)return Bt(e.clipPos(le(e.display.viewTo-1)),!0);t=null,r=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var a=e.display.view[n];if(a.node==i)return li(a,t,r)}}function li(e,t,r){var i=e.text.firstChild,n=!1;if(!t||!Yn(i,t))return Bt(le(qe(e.line),0),!0);if(t==i&&(n=!0,t=i.childNodes[r],r=0,!t)){var a=e.rest?Qe(e.rest):e.line;return Bt(le(qe(a),a.text.length),n)}var s=t.nodeType==3?t:null,g=t;for(!s&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(s=t.firstChild,r&&(r=s.nodeValue.length));g.parentNode!=i;)g=g.parentNode;var E=e.measure,H=E.maps;function j(de,be,we){for(var He=-1;He<(H?H.length:0);He++)for(var xe=He<0?E.map:H[He],Be=0;Be<xe.length;Be+=3){var Te=xe[Be+2];if(Te==de||Te==be){var Re=qe(He<0?e.line:e.rest[He]),Ge=xe[Be]+we;return(we<0||Te!=de)&&(Ge=xe[Be+(we?1:0)]),le(Re,Ge)}}}var B=j(s,g,r);if(B)return Bt(B,n);for(var G=g.nextSibling,K=s?s.nodeValue.length-r:0;G;G=G.nextSibling){if(B=j(G,G.firstChild,0),B)return Bt(le(B.line,B.ch-K),n);K+=G.textContent.length}for(var q=g.previousSibling,K=r;q;q=q.previousSibling){if(B=j(q,q.firstChild,-1),B)return Bt(le(B.line,B.ch+K),n);K+=G.textContent.length}}function Fr(e,t,r,i,n){var a="",s=!1,g=e.doc.lineSeparator();function E(j){return function(B){return B.id==j}}function H(j){if(j.nodeType==1){var B=j.getAttribute("cm-text");if(B!=null){B==""&&(B=j.textContent.replace(/\u200b/g,"")),a+=B;return}var G=j.getAttribute("cm-marker"),K;if(G){var q=e.findMarks(le(i,0),le(n+1,0),E(+G));q.length&&(K=q[0].find())&&(a+=Or(e.doc,K.from,K.to).join(g));return}if(j.getAttribute("contenteditable")=="false")return;for(var de=0;de<j.childNodes.length;de++)H(j.childNodes[de]);/^(pre|div|p)$/i.test(j.nodeName)&&(s=!0)}else if(j.nodeType==3){var be=j.nodeValue;if(!be)return;s&&(a+=g,s=!1),a+=be}}for(;H(t),t!=r;)t=t.nextSibling;return a}D.inputStyles={textarea:pr,contenteditable:Nr};function At(e,t){this.ranges=e,this.primIndex=t}At.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],i=e.ranges[t];if(_e(r.anchor,i.anchor)!=0||_e(r.head,i.head)!=0)return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ye(ai(this.ranges[t].anchor),ai(this.ranges[t].head));return new At(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var i=this.ranges[r];if(_e(t,i.from())>=0&&_e(e,i.to())<=0)return r}return-1}};function Ye(e,t){this.anchor=e,this.head=t}Ye.prototype={from:function(){return Kt(this.anchor,this.head)},to:function(){return cr(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function vt(e,t){var r=e[t];e.sort(function(H,j){return _e(H.from(),j.from())}),t=mt(e,r);for(var i=1;i<e.length;i++){var n=e[i],a=e[i-1];if(_e(a.to(),n.from())>=0){var s=Kt(a.from(),n.from()),g=cr(a.to(),n.to()),E=a.empty()?n.from()==n.head:a.from()==a.head;i<=t&&--t,e.splice(--i,2,new Ye(E?g:s,E?s:g))}}return new At(e,t)}function ft(e,t){return new At([new Ye(e,t||e)],0)}function ji(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ie(e,t){if(t.line<e.first)return le(e.first,0);var r=e.first+e.size-1;return t.line>r?le(r,Pe(e,r).text.length):Ln(t,Pe(e,t.line).text.length)}function Ln(e,t){var r=e.ch;return r==null||r>t?le(e.line,t):r<0?le(e.line,0):e}function Vt(e,t){return t>=e.first&&t<e.first+e.size}function ui(e,t){for(var r=[],i=0;i<t.length;i++)r[i]=Ie(e,t[i]);return r}function ir(e,t,r,i){if(e.cm&&e.cm.display.shift||e.extend){var n=t.anchor;if(i){var a=_e(r,n)<0;a!=_e(i,n)<0?(n=r,r=i):a!=_e(r,i)<0&&(r=i)}return new Ye(n,r)}else return new Ye(i||r,r)}function yr(e,t,r,i){st(e,new At([ir(e,e.sel.primary(),t,r)],0),i)}function fi(e,t,r){for(var i=[],n=0;n<e.sel.ranges.length;n++)i[n]=ir(e,e.sel.ranges[n],t[n],null);var a=vt(i,e.sel.primIndex);st(e,a,r)}function br(e,t,r,i){var n=e.sel.ranges.slice(0);n[t]=r,st(e,vt(n,e.sel.primIndex),i)}function Ui(e,t,r,i){st(e,ft(t,r),i)}function zi(e,t){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var n=0;n<i.length;n++)this.ranges[n]=new Ye(Ie(e,i[n].anchor),Ie(e,i[n].head))}};return lt(e,"beforeSelectionChange",e,r),e.cm&&lt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?vt(r.ranges,r.ranges.length-1):t}function _r(e,t,r){var i=e.history.done,n=Qe(i);n&&n.ranges?(i[i.length-1]=t,wr(e,t,r)):st(e,t,r)}function st(e,t,r){wr(e,t,r),Ds(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function wr(e,t,r){(It(e,"beforeSelectionChange")||e.cm&&It(e.cm,"beforeSelectionChange"))&&(t=zi(e,t));var i=r&&r.bias||(_e(t.primary().head,e.sel.primary().head)<0?-1:1);$r(e,ci(e,t,i,!0)),!(r&&r.scroll===!1)&&e.cm&&Kr(e.cm)}function $r(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,fo(e.cm)),kt(e,"cursorActivity",e))}function xr(e){$r(e,ci(e,e.sel,null,!1))}function ci(e,t,r,i){for(var n,a=0;a<t.ranges.length;a++){var s=t.ranges[a],g=Cr(e,s.anchor,r,i),E=Cr(e,s.head,r,i);(n||g!=s.anchor||E!=s.head)&&(n||(n=t.ranges.slice(0,a)),n[a]=new Ye(g,E))}return n?vt(n,t.primIndex):t}function Cr(e,t,r,i){var n=!1,a=t,s=r||1;e.cantEdit=!1;e:for(;;){var g=Pe(e,a.line);if(g.markedSpans)for(var E=0;E<g.markedSpans.length;++E){var H=g.markedSpans[E],j=H.marker;if((H.from==null||(j.inclusiveLeft?H.from<=a.ch:H.from<a.ch))&&(H.to==null||(j.inclusiveRight?H.to>=a.ch:H.to>a.ch))){if(i&&(lt(j,"beforeCursorEnter"),j.explicitlyCleared))if(g.markedSpans){--E;continue}else break;if(!j.atomic)continue;var B=j.find(s<0?-1:1);if(_e(B,a)==0&&(B.ch+=s,B.ch<0?B.line>e.first?B=Ie(e,le(B.line-1)):B=null:B.ch>g.text.length&&(B.line<e.first+e.size-1?B=le(B.line+1,0):B=null),!B)){if(n)return i?(e.cantEdit=!0,le(e.first,0)):Cr(e,t,r,!0);n=!0,B=t,s=-s}a=B;continue e}}return a}}function nr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function hi(e,t){for(var r=e.doc,i={},n=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),s=0;s<r.sel.ranges.length;s++)if(!(t===!1&&s==r.sel.primIndex)){var g=r.sel.ranges[s],E=g.empty();(E||e.options.showCursorWhenSelecting)&&Wr(e,g.head,n),E||Xi(e,g,a)}return i}function Wr(e,t,r){var i=Qt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=r.appendChild(Ee("div"," ","CodeMirror-cursor"));if(n.style.left=i.left+"px",n.style.top=i.top+"px",n.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var a=r.appendChild(Ee("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=(i.other.bottom-i.other.top)*.85+"px"}}function Xi(e,t,r){var i=e.display,n=e.doc,a=document.createDocumentFragment(),s=Xe(e.display),g=s.left,E=Math.max(i.sizerWidth,$e(e)-i.sizer.offsetLeft)-s.right;function H(He,xe,Be,Te){xe<0&&(xe=0),xe=Math.round(xe),Te=Math.round(Te),a.appendChild(Ee("div",null,"CodeMirror-selected","position: absolute; left: "+He+"px; top: "+xe+"px; width: "+(Be??E-He)+"px; height: "+(Te-xe)+"px"))}function j(He,xe,Be){var Te=Pe(n,He),Re=Te.text.length,Ge,ot;function yt(ht,Gt){return An(e,le(He,ht),"div",Te,Gt)}return Ys(Ft(Te),xe||0,Be??Re,function(ht,Gt,rr){var Ct=yt(ht,"left"),dt,Tt,ur;if(ht==Gt)dt=Ct,Tt=ur=Ct.left;else{if(dt=yt(Gt-1,"right"),rr=="rtl"){var ti=Ct;Ct=dt,dt=ti}Tt=Ct.left,ur=dt.right}xe==null&&ht==0&&(Tt=g),dt.top-Ct.top>3&&(H(Tt,Ct.top,null,Ct.bottom),Tt=g,Ct.bottom<dt.top&&H(Tt,Ct.bottom,null,dt.top)),Be==null&&Gt==Re&&(ur=E),(!Ge||Ct.top<Ge.top||Ct.top==Ge.top&&Ct.left<Ge.left)&&(Ge=Ct),(!ot||dt.bottom>ot.bottom||dt.bottom==ot.bottom&&dt.right>ot.right)&&(ot=dt),Tt<g+1&&(Tt=g),H(Tt,dt.top,ur-Tt,dt.bottom)}),{start:Ge,end:ot}}var B=t.from(),G=t.to();if(B.line==G.line)j(B.line,B.ch,G.ch);else{var K=Pe(n,B.line),q=Pe(n,G.line),de=jt(K)==jt(q),be=j(B.line,B.ch,de?K.text.length+1:null).end,we=j(G.line,de?0:null,G.ch).start;de&&(be.top<we.top-2?(H(be.right,be.top,null,be.bottom),H(g,we.top,we.left,we.bottom)):H(be.right,be.top,we.left-be.right,be.bottom)),be.bottom<we.top&&H(g,be.bottom,null,we.top)}r.appendChild(a)}function Y(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function J(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Di(se,e))}function se(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,i=or(t.mode,fe(e,t.frontier)),n=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(t.frontier>=e.display.viewFrom){var s=a.styles,g=a.text.length>e.options.maxHighlightLength,E=Va(e,a,g?or(t.mode,i):i,!0);a.styles=E.styles;var H=a.styleClasses,j=E.classes;j?a.styleClasses=j:H&&(a.styleClasses=null);for(var B=!s||s.length!=a.styles.length||H!=j&&(!H||!j||H.bgClass!=j.bgClass||H.textClass!=j.textClass),G=0;!B&&G<s.length;++G)B=s[G]!=a.styles[G];B&&n.push(t.frontier),a.stateAfter=g?i:or(t.mode,i)}else a.text.length<=e.options.maxHighlightLength&&jn(e,a.text,i),a.stateAfter=t.frontier%5==0?or(t.mode,i):null;if(++t.frontier,+new Date>r)return J(e,e.options.workDelay),!0}),n.length&&Pt(e,function(){for(var a=0;a<n.length;a++)Jt(e,n[a],"text")})}}function ce(e,t,r){for(var i,n,a=e.doc,s=r?-1:t-(e.doc.mode.innerMode?1e3:100),g=t;g>s;--g){if(g<=a.first)return a.first;var E=Pe(a,g-1);if(E.stateAfter&&(!r||g<=a.frontier))return g;var H=_t(E.text,null,e.options.tabSize);(n==null||i>H)&&(n=g-1,i=H)}return n}function fe(e,t,r){var i=e.doc,n=e.display;if(!i.mode.startState)return!0;var a=ce(e,t,r),s=a>i.first&&Pe(i,a-1).stateAfter;return s?s=or(i.mode,s):s=os(i.mode),i.iter(a,t,function(g){jn(e,g.text,s);var E=a==t-1||a%5==0||a>=n.viewFrom&&a<n.viewTo;g.stateAfter=E?or(i.mode,s):null,++a}),r&&(i.frontier=a),s}function ke(e){return e.lineSpace.offsetTop}function Me(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Xe(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Ot(e.measure,Ee("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function Ve(e){return co-e.display.nativeBarWidth}function $e(e){return e.display.scroller.clientWidth-Ve(e)-e.display.barWidth}function pt(e){return e.display.scroller.clientHeight-Ve(e)-e.display.barHeight}function tt(e,t,r){var i=e.options.lineWrapping,n=i&&$e(e);if(!t.measure.heights||i&&t.measure.width!=n){var a=t.measure.heights=[];if(i){t.measure.width=n;for(var s=t.text.firstChild.getClientRects(),g=0;g<s.length-1;g++){var E=s[g],H=s[g+1];Math.abs(E.bottom-H.bottom)>2&&a.push((E.bottom+H.top)/2-r.top)}}a.push(r.bottom-r.top)}}function ct(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var i=0;i<e.rest.length;i++)if(qe(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function bt(e,t){t=jt(t);var r=qe(t),i=e.display.externalMeasured=new ha(e.doc,t,r);i.lineN=r;var n=i.built=Ja(e,i);return i.text=n.pre,Ot(e.display.lineMeasure,n.pre),i}function Et(e,t,r,i){return Gi(e,Sr(e,t),r,i)}function Zt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Lr(e,t)];var r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size)return r}function Sr(e,t){var r=qe(t),i=Zt(e,r);i&&!i.text?i=null:i&&i.changes&&(Ke(e,i,r,Ae(e)),e.curOp.forceUpdate=!0),i||(i=bt(e,t));var n=ct(i,t,r);return{line:t,view:i,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Gi(e,t,r,i,n){t.before&&(r=-1);var a=r+(i||""),s;return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(tt(e,t.view,t.rect),t.hasHeights=!0),s=Eo(e,t,r,i),s.bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:n?s.rtop:s.top,bottom:n?s.rbottom:s.bottom}}var En={left:0,right:0,top:0,bottom:0};function aa(e,t,r){for(var i,n,a,s,g=0;g<e.length;g+=3){var E=e[g],H=e[g+1];if(t<E?(n=0,a=1,s="left"):t<H?(n=t-E,a=n+1):(g==e.length-3||t==H&&e[g+3]>t)&&(a=H-E,n=a-1,t>=H&&(s="right")),n!=null){if(i=e[g+2],E==H&&r==(i.insertLeft?"left":"right")&&(s=r),r=="left"&&n==0)for(;g&&e[g-2]==e[g-3]&&e[g-1].insertLeft;)i=e[(g-=3)+2],s="left";if(r=="right"&&n==H-E)for(;g<e.length-3&&e[g+3]==e[g+4]&&!e[g+5].insertLeft;)i=e[(g+=3)+2],s="right";break}}return{node:i,start:n,end:a,collapse:s,coverStart:E,coverEnd:H}}function Eo(e,t,r,i){var n=aa(t.map,r,i),a=n.node,s=n.start,g=n.end,E=n.collapse,H;if(a.nodeType==3){for(var j=0;j<4;j++){for(;s&&Hi(t.line.text.charAt(n.coverStart+s));)--s;for(;n.coverStart+g<n.coverEnd&&Hi(t.line.text.charAt(n.coverStart+g));)++g;if(o&&d<9&&s==0&&g==n.coverEnd-n.coverStart)H=a.parentNode.getBoundingClientRect();else if(o&&e.options.lineWrapping){var B=lr(a,s,g).getClientRects();B.length?H=B[i=="right"?B.length-1:0]:H=En}else H=lr(a,s,g).getBoundingClientRect()||En;if(H.left||H.right||s==0)break;g=s,s=s-1,E="right"}o&&d<11&&(H=Mo(e.display.measure,H))}else{s>0&&(E=i="right");var B;e.options.lineWrapping&&(B=a.getClientRects()).length>1?H=B[i=="right"?B.length-1:0]:H=a.getBoundingClientRect()}if(o&&d<9&&!s&&(!H||!H.left&&!H.right)){var G=a.parentNode.getClientRects()[0];G?H={left:G.left,right:G.left+vi(e.display),top:G.top,bottom:G.bottom}:H=En}for(var K=H.top-t.rect.top,q=H.bottom-t.rect.top,de=(K+q)/2,be=t.view.measure.heights,j=0;j<be.length-1&&!(de<be[j]);j++);var we=j?be[j-1]:0,He=be[j],xe={left:(E=="right"?H.right:H.left)-t.rect.left,right:(E=="left"?H.left:H.right)-t.rect.left,top:we,bottom:He};return!H.left&&!H.right&&(xe.bogus=!0),e.options.singleCursorHeightPerLine||(xe.rtop=K,xe.rbottom=q),xe}function Mo(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ks(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*i,bottom:t.bottom*i}}function oa(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function sa(e){e.display.externalMeasure=null,Hr(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)oa(e.display.view[t])}function di(e){sa(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function la(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ua(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Mn(e,t,r,i){if(t.widgets){for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].above){var a=ki(t.widgets[n]);r.top+=a,r.bottom+=a}}if(i=="line")return r;i||(i="local");var s=er(t);if(i=="local"?s+=ke(e.display):s-=e.display.viewOffset,i=="page"||i=="window"){var g=e.display.lineSpace.getBoundingClientRect();s+=g.top+(i=="window"?0:ua());var E=g.left+(i=="window"?0:la());r.left+=E,r.right+=E}return r.top+=s,r.bottom+=s,r}function fa(e,t,r){if(r=="div")return t;var i=t.left,n=t.top;if(r=="page")i-=la(),n-=ua();else if(r=="local"||!r){var a=e.display.sizer.getBoundingClientRect();i+=a.left,n+=a.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:n-s.top}}function An(e,t,r,i,n){return i||(i=Pe(e.doc,t.line)),Mn(e,i,Et(e,i,t.ch,n),r)}function Qt(e,t,r,i,n,a){i=i||Pe(e.doc,t.line),n||(n=Sr(e,i));function s(G,K){var q=Gi(e,n,G,K?"right":"left",a);return K?q.left=q.right:q.right=q.left,Mn(e,i,q,r)}function g(G,K){var q=E[K],de=q.level%2;return G==qn(q)&&K&&q.level<E[K-1].level?(q=E[--K],G=ea(q)-(q.level%2?0:1),de=!0):G==ea(q)&&K<E.length-1&&q.level<E[K+1].level&&(q=E[++K],G=qn(q)-q.level%2,de=!1),de&&G==q.to&&G>q.from?s(G-1):s(G,de)}var E=Ft(i),H=t.ch;if(!E)return s(H);var j=kn(E,H),B=g(H,j);return _i!=null&&(B.other=g(H,_i)),B}function ca(e,i){var r=0,i=Ie(e.doc,i);e.options.lineWrapping||(r=vi(e.display)*i.ch);var n=Pe(e.doc,i.line),a=er(n)+ke(e.display);return{left:r,right:r,top:a,bottom:a+n.height}}function Ki(e,t,r,i){var n=le(e,t);return n.xRel=i,r&&(n.outside=!0),n}function Pn(e,t,r){var i=e.doc;if(r+=e.display.viewOffset,r<0)return Ki(i.first,0,!0,-1);var n=Dr(i,r),a=i.first+i.size-1;if(n>a)return Ki(i.first+i.size-1,Pe(i,a).text.length,!0,1);t<0&&(t=0);for(var s=Pe(i,n);;){var g=Ao(e,s,n,t,r),E=Si(s),H=E&&E.find(0,!0);if(E&&(g.ch>H.from.ch||g.ch==H.from.ch&&g.xRel>0))n=qe(s=H.to.line);else return g}}function Ao(e,t,r,i,n){var a=n-er(t),s=!1,g=2*e.display.wrapper.clientWidth,E=Sr(e,t);function H(yt){var ht=Qt(e,le(r,yt),"line",t,E);return s=!0,a>ht.bottom?ht.left-g:a<ht.top?ht.left+g:(s=!1,ht.left)}var j=Ft(t),B=t.text.length,G=Cn(t),K=Sn(t),q=H(G),de=s,be=H(K),we=s;if(i>be)return Ki(r,K,we,1);for(;;){if(j?K==G||K==ra(t,G,1):K-G<=1){for(var He=i<q||i-q<=be-i?G:K,xe=i-(He==G?q:be);Hi(t.text.charAt(He));)++He;var Be=Ki(r,He,He==G?de:we,xe<-1?-1:xe>1?1:0);return Be}var Te=Math.ceil(B/2),Re=G+Te;if(j){Re=G;for(var Ge=0;Ge<Te;++Ge)Re=ra(t,Re,1)}var ot=H(Re);ot>i?(K=Re,be=ot,(we=s)&&(be+=1e3),B=Te):(G=Re,q=ot,de=s,B-=Te)}}var kr;function Tr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(kr==null){kr=Ee("pre");for(var t=0;t<49;++t)kr.appendChild(document.createTextNode("x")),kr.appendChild(Ee("br"));kr.appendChild(document.createTextNode("x"))}Ot(e.measure,kr);var r=kr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Hr(e.measure),r||1}function vi(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Ee("span","xxxxxxxxxx"),r=Ee("pre",[t]);Ot(e.measure,r);var i=t.getBoundingClientRect(),n=(i.right-i.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}var Br=null,Po=0;function jr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Po},Br?Br.ops.push(e.curOp):e.curOp.ownsGroup=Br={ops:[e.curOp],delayedCallbacks:[]}}function Ro(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var i=0;i<e.ops.length;i++){var n=e.ops[i];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(r<t.length)}function Ur(e){var t=e.curOp,r=t.ownsGroup;if(r)try{Ro(r)}finally{Br=null;for(var i=0;i<r.ops.length;i++)r.ops[i].cm.curOp=null;Oo(r)}}function Oo(e){for(var t=e.ops,r=0;r<t.length;r++)Do(t[r]);for(var r=0;r<t.length;r++)Ho(t[r]);for(var r=0;r<t.length;r++)Io(t[r]);for(var r=0;r<t.length;r++)No(t[r]);for(var r=0;r<t.length;r++)Fo(t[r])}function Do(e){var t=e.cm,r=t.display;N(t),e.updateMaxLine&&ye(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new _(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ho(e){e.updatedDisplay=e.mustUpdate&&X(e.cm,e.update)}function Io(e){var t=e.cm,r=t.display;e.updatedDisplay&&Ce(t),e.barMeasure=Le(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Et(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Ve(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-$e(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function No(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&zr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&ne(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Oe(t,e.barMeasure),e.selectionChanged&&Y(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&e.focus==Xt()&&Bi(e.cm)}function Fo(e){var t=e.cm,r=t.display,i=t.doc;if(e.updatedDisplay&&z(t,e.update),r.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),e.scrollTop!=null&&(r.scroller.scrollTop!=e.scrollTop||e.forceScroll)&&(i.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(i.scrollTop),r.scroller.scrollTop=i.scrollTop),e.scrollLeft!=null&&(r.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)&&(i.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-$e(t),e.scrollLeft)),r.scrollbars.setScrollLeft(i.scrollLeft),r.scroller.scrollLeft=i.scrollLeft,Je(t)),e.scrollToPos){var n=is(t,Ie(i,e.scrollToPos.from),Ie(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&rs(t,n)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var g=0;g<a.length;++g)a[g].lines.length||lt(a[g],"hide");if(s)for(var g=0;g<s.length;++g)s[g].lines.length&&lt(s[g],"unhide");r.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&lt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Pt(e,t){if(e.curOp)return t();jr(e);try{return t()}finally{Ur(e)}}function at(e,t){return function(){if(e.curOp)return t.apply(e,arguments);jr(e);try{return t.apply(e,arguments)}finally{Ur(e)}}}function gt(e){return function(){if(this.curOp)return e.apply(this,arguments);jr(this);try{return e.apply(this,arguments)}finally{Ur(this)}}}function wt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);jr(t);try{return e.apply(this,arguments)}finally{Ur(t)}}}function ha(e,t,r){this.line=t,this.rest=ys(t),this.size=this.rest?qe(Qe(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Pr(e,t)}function Yi(e,t,r){for(var i=[],n,a=t;a<r;a=n){var s=new ha(e.doc,Pe(e.doc,a),a);n=a+s.size,i.push(s)}return i}function St(e,t,r,i){t==null&&(t=e.doc.first),r==null&&(r=e.doc.first+e.doc.size),i||(i=0);var n=e.display;if(i&&r<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)O&&$n(e.doc,t)<n.viewTo&&ar(e);else if(r<=n.viewFrom)O&&Ua(e.doc,r+i)>n.viewFrom?ar(e):(n.viewFrom+=i,n.viewTo+=i);else if(t<=n.viewFrom&&r>=n.viewTo)ar(e);else if(t<=n.viewFrom){var a=Vi(e,r,r+i,1);a?(n.view=n.view.slice(a.index),n.viewFrom=a.lineN,n.viewTo+=i):ar(e)}else if(r>=n.viewTo){var a=Vi(e,t,t,-1);a?(n.view=n.view.slice(0,a.index),n.viewTo=a.lineN):ar(e)}else{var s=Vi(e,t,t,-1),g=Vi(e,r,r+i,1);s&&g?(n.view=n.view.slice(0,s.index).concat(Yi(e,s.lineN,g.lineN)).concat(n.view.slice(g.index)),n.viewTo+=i):ar(e)}var E=n.externalMeasured;E&&(r<E.lineN?E.lineN+=i:t<E.lineN+E.size&&(n.externalMeasured=null))}function Jt(e,t,r){e.curOp.viewChanged=!0;var i=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[Lr(e,t)];if(a.node!=null){var s=a.changes||(a.changes=[]);mt(s,r)==-1&&s.push(r)}}}function ar(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Lr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var r=e.display.view,i=0;i<r.length;i++)if(t-=r[i].size,t<0)return i}function Vi(e,t,r,i){var n=Lr(e,t),a,s=e.display.view;if(!O||r==e.doc.first+e.doc.size)return{index:n,lineN:r};for(var g=0,E=e.display.viewFrom;g<n;g++)E+=s[g].size;if(E!=t){if(i>0){if(n==s.length-1)return null;a=E+s[n].size-t,n++}else a=E-t;t+=a,r+=a}for(;$n(e.doc,r)!=r;){if(n==(i<0?0:s.length-1))return null;r+=i*s[n-(i<0?1:0)].size,n+=i}return{index:n,lineN:r}}function _o(e,t,r){var i=e.display,n=i.view;n.length==0||t>=i.viewTo||r<=i.viewFrom?(i.view=Yi(e,t,r),i.viewFrom=t):(i.viewFrom>t?i.view=Yi(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Lr(e,t))),i.viewFrom=t,i.viewTo<r?i.view=i.view.concat(Yi(e,i.viewTo,r)):i.viewTo>r&&(i.view=i.view.slice(0,Lr(e,r)))),i.viewTo=r}function da(e){for(var t=e.display.view,r=0,i=0;i<t.length;i++){var n=t[i];!n.hidden&&(!n.node||n.changes)&&++r}return r}function $o(e){var t=e.display;De(t.scroller,"mousedown",at(e,va)),o&&d<11?De(t.scroller,"dblclick",at(e,function(E){if(!Ht(e,E)){var H=Er(e,E);if(!(!H||ga(e,E)||qt(e.display,E))){xt(E);var j=e.findWordAt(H);yr(e.doc,j.anchor,j.head)}}})):De(t.scroller,"dblclick",function(E){Ht(e,E)||xt(E)}),P||De(t.scroller,"contextmenu",function(E){Ta(e,E)});var r,i={end:0};function n(){t.activeTouch&&(r=setTimeout(function(){t.activeTouch=null},1e3),i=t.activeTouch,i.end=+new Date)}function a(E){if(E.touches.length!=1)return!1;var H=E.touches[0];return H.radiusX<=1&&H.radiusY<=1}function s(E,H){if(H.left==null)return!0;var j=H.left-E.left,B=H.top-E.top;return j*j+B*B>20*20}De(t.scroller,"touchstart",function(E){if(!a(E)){clearTimeout(r);var H=+new Date;t.activeTouch={start:H,moved:!1,prev:H-i.end<=300?i:null},E.touches.length==1&&(t.activeTouch.left=E.touches[0].pageX,t.activeTouch.top=E.touches[0].pageY)}}),De(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),De(t.scroller,"touchend",function(E){var H=t.activeTouch;if(H&&!qt(t,E)&&H.left!=null&&!H.moved&&new Date-H.start<300){var j=e.coordsChar(t.activeTouch,"page"),B;!H.prev||s(H,H.prev)?B=new Ye(j,j):!H.prev.prev||s(H,H.prev.prev)?B=e.findWordAt(j):B=new Ye(le(j.line,0),Ie(e.doc,le(j.line+1,0))),e.setSelection(B.anchor,B.head),e.focus(),xt(E)}n()}),De(t.scroller,"touchcancel",n),De(t.scroller,"scroll",function(){t.scroller.clientHeight&&(pi(e,t.scroller.scrollTop),zr(e,t.scroller.scrollLeft,!0),lt(e,"scroll",e))}),De(t.scroller,"mousewheel",function(E){wa(e,E)}),De(t.scroller,"DOMMouseScroll",function(E){wa(e,E)}),De(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(E){Ht(e,E)||mn(E)},over:function(E){Ht(e,E)||(Ko(e,E),mn(E))},start:function(E){Go(e,E)},drop:at(e,Xo),leave:function(){ya(e)}};var g=t.input.getField();De(g,"keyup",function(E){Sa.call(e,E)}),De(g,"keydown",at(e,Ca)),De(g,"keypress",at(e,ka)),De(g,"focus",Di(On,e)),De(g,"blur",Di(gi,e))}function Wo(e,t,r){var i=r&&r!=D.Init;if(!t!=!i){var n=e.display.dragFunctions,a=t?De:zt;a(e.display.scroller,"dragstart",n.start),a(e.display.scroller,"dragenter",n.enter),a(e.display.scroller,"dragover",n.over),a(e.display.scroller,"dragleave",n.leave),a(e.display.scroller,"drop",n.drop)}}function Bo(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function qt(e,t){for(var r=Mi(t);r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function Er(e,t,r,i){var n=e.display;if(!r&&Mi(t).getAttribute("cm-not-content")=="true")return null;var a,s,g=n.lineSpace.getBoundingClientRect();try{a=t.clientX-g.left,s=t.clientY-g.top}catch{return null}var E=Pn(e,a,s),H;if(i&&E.xRel==1&&(H=Pe(e.doc,E.line).text).length==E.ch){var j=_t(H,H.length,e.options.tabSize)-H.length;E=le(E.line,Math.max(0,Math.round((a-Xe(e.display).left)/vi(e.display))-j))}return E}function va(e){var t=this,r=t.display;if(!(r.activeTouch&&r.input.supportsTouch()||Ht(t,e))){if(r.shift=e.shiftKey,qt(r,e)){M||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));return}if(!ga(t,e)){var i=Er(t,e);switch(window.focus(),lo(e)){case 1:t.state.selectingText?t.state.selectingText(e):i?jo(t,e,i):Mi(e)==r.scroller&&xt(e);break;case 2:M&&(t.state.lastMiddleDown=+new Date),i&&yr(t.doc,i),setTimeout(function(){r.input.focus()},20),xt(e);break;case 3:P?Ta(t,e):Jo(t);break}}}}var Zi,Qi;function jo(e,t,r){o?setTimeout(Di(Bi,e),0):e.curOp.focus=Xt();var i=+new Date,n;Qi&&Qi.time>i-400&&_e(Qi.pos,r)==0?n="triple":Zi&&Zi.time>i-400&&_e(Zi.pos,r)==0?(n="double",Qi={time:i,pos:r}):(n="single",Zi={time:i,pos:r});var a=e.doc.sel,s=l?t.metaKey:t.ctrlKey,g;e.options.dragDrop&&js&&!Dt(e)&&n=="single"&&(g=a.contains(r))>-1&&(_e((g=a.ranges[g]).from(),r)<0||r.xRel>0)&&(_e(g.to(),r)>0||r.xRel<0)?Uo(e,t,r,s):zo(e,t,r,n,s)}function Uo(e,t,r,i){var n=e.display,a=+new Date,s=at(e,function(g){M&&(n.scroller.draggable=!1),e.state.draggingText=!1,zt(document,"mouseup",s),zt(n.scroller,"drop",s),Math.abs(t.clientX-g.clientX)+Math.abs(t.clientY-g.clientY)<10&&(xt(g),!i&&+new Date-200<a&&yr(e.doc,r),M||o&&d==9?setTimeout(function(){document.body.focus(),n.input.focus()},20):n.input.focus())});M&&(n.scroller.draggable=!0),e.state.draggingText=s,n.scroller.dragDrop&&n.scroller.dragDrop(),De(document,"mouseup",s),De(n.scroller,"drop",s)}function zo(e,t,r,i,n){var a=e.display,s=e.doc;xt(t);var g,E,H=s.sel,j=H.ranges;if(n&&!t.shiftKey?(E=s.sel.contains(r),E>-1?g=j[E]:g=new Ye(r,r)):(g=s.sel.primary(),E=s.sel.primIndex),t.altKey)i="rect",n||(g=new Ye(r,r)),r=Er(e,t,!0,!0),E=-1;else if(i=="double"){var B=e.findWordAt(r);e.display.shift||s.extend?g=ir(s,g,B.anchor,B.head):g=B}else if(i=="triple"){var G=new Ye(le(r.line,0),Ie(s,le(r.line+1,0)));e.display.shift||s.extend?g=ir(s,g,G.anchor,G.head):g=G}else g=ir(s,g,r);n?E==-1?(E=j.length,st(s,vt(j.concat([g]),E),{scroll:!1,origin:"*mouse"})):j.length>1&&j[E].empty()&&i=="single"&&!t.shiftKey?(st(s,vt(j.slice(0,E).concat(j.slice(E+1)),0),{scroll:!1,origin:"*mouse"}),H=s.sel):br(s,E,g,Kn):(E=0,st(s,new At([g],0),Kn),H=s.sel);var K=r;function q(Te){if(_e(K,Te)!=0)if(K=Te,i=="rect"){for(var Re=[],Ge=e.options.tabSize,ot=_t(Pe(s,r.line).text,r.ch,Ge),yt=_t(Pe(s,Te.line).text,Te.ch,Ge),ht=Math.min(ot,yt),Gt=Math.max(ot,yt),rr=Math.min(r.line,Te.line),Ct=Math.min(e.lastLine(),Math.max(r.line,Te.line));rr<=Ct;rr++){var dt=Pe(s,rr).text,Tt=vo(dt,ht,Ge);ht==Gt?Re.push(new Ye(le(rr,Tt),le(rr,Tt))):dt.length>Tt&&Re.push(new Ye(le(rr,Tt),le(rr,vo(dt,Gt,Ge))))}Re.length||Re.push(new Ye(r,r)),st(s,vt(H.ranges.slice(0,E).concat(Re),E),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Te)}else{var ur=g,ti=ur.anchor,ia=Te;if(i!="single"){if(i=="double")var ri=e.findWordAt(Te);else var ri=new Ye(le(Te.line,0),Ie(s,le(Te.line+1,0)));_e(ri.anchor,ti)>0?(ia=ri.head,ti=Kt(ur.from(),ri.anchor)):(ia=ri.anchor,ti=cr(ur.to(),ri.head))}var Re=H.ranges.slice(0);Re[E]=new Ye(Ie(s,ti),ia),st(s,vt(Re,E),Kn)}}var de=a.wrapper.getBoundingClientRect(),be=0;function we(Te){var Re=++be,Ge=Er(e,Te,!0,i=="rect");if(Ge)if(_e(Ge,K)!=0){e.curOp.focus=Xt(),q(Ge);var ot=Ue(a,s);(Ge.line>=ot.to||Ge.line<ot.from)&&setTimeout(at(e,function(){be==Re&&we(Te)}),150)}else{var yt=Te.clientY<de.top?-20:Te.clientY>de.bottom?20:0;yt&&setTimeout(at(e,function(){be==Re&&(a.scroller.scrollTop+=yt,we(Te))}),50)}}function He(Te){e.state.selectingText=!1,be=1/0,xt(Te),a.input.focus(),zt(document,"mousemove",xe),zt(document,"mouseup",Be),s.history.lastSelOrigin=null}var xe=at(e,function(Te){lo(Te)?we(Te):He(Te)}),Be=at(e,He);e.state.selectingText=Be,De(document,"mousemove",xe),De(document,"mouseup",Be)}function pa(e,t,r,i,n){try{var a=t.clientX,s=t.clientY}catch{return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&xt(t);var g=e.display,E=g.lineDiv.getBoundingClientRect();if(s>E.bottom||!It(e,r))return Gn(t);s-=E.top-g.viewOffset;for(var H=0;H<e.options.gutters.length;++H){var j=g.gutters.childNodes[H];if(j&&j.getBoundingClientRect().right>=a){var B=Dr(e.doc,s),G=e.options.gutters[H];return n(e,r,e,B,G,t),Gn(t)}}}function ga(e,t){return pa(e,t,"gutterClick",!0,kt)}var ma=0;function Xo(e){var t=this;if(ya(t),!(Ht(t,e)||qt(t.display,e))){xt(e),o&&(ma=+new Date);var r=Er(t,e,!0),i=e.dataTransfer.files;if(!(!r||Dt(t)))if(i&&i.length&&window.FileReader&&window.File)for(var n=i.length,a=Array(n),s=0,g=function(j,B){if(!(t.options.allowDropFileTypes&&mt(t.options.allowDropFileTypes,j.type)==-1)){var G=new FileReader;G.onload=at(t,function(){var K=G.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(K)&&(K=""),a[B]=K,++s==n){r=Ie(t.doc,r);var q={from:r,to:r,text:t.doc.splitLines(a.join(t.doc.lineSeparator())),origin:"paste"};Xr(t.doc,q),_r(t.doc,ft(r,Mr(q)))}}),G.readAsText(j)}},E=0;E<n;++E)g(i[E],E);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e),setTimeout(function(){t.display.input.focus()},20);return}try{var a=e.dataTransfer.getData("Text");if(a){if(t.state.draggingText&&!(l?e.altKey:e.ctrlKey))var H=t.listSelections();if(wr(t.doc,ft(r,r)),H)for(var E=0;E<H.length;++E)Gr(t.doc,"",H[E].anchor,H[E].head,"drag");t.replaceSelection(a,"around","paste"),t.display.input.focus()}}catch{}}}}function Go(e,t){if(o&&(!e.state.draggingText||+new Date-ma<100)){mn(t);return}if(!(Ht(e,t)||qt(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!L)){var r=Ee("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",A&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),A&&r.parentNode.removeChild(r)}}function Ko(e,t){var r=Er(e,t);if(r){var i=document.createDocumentFragment();Wr(e,r,i),e.display.dragCursor||(e.display.dragCursor=Ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Ot(e.display.dragCursor,i)}}function ya(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function pi(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,k||oe(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),k&&oe(e),J(e,100))}function zr(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,Je(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var Ji=0,Rt=null;o?Rt=-.53:k?Rt=15:p?Rt=-.7:L&&(Rt=-1/3);var ba=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),r==null&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:r==null&&(r=e.wheelDelta),{x:t,y:r}};D.wheelEventPixels=function(e){var t=ba(e);return t.x*=Rt,t.y*=Rt,t};function wa(e,t){var r=ba(t),i=r.x,n=r.y,a=e.display,s=a.scroller,g=s.scrollWidth>s.clientWidth,E=s.scrollHeight>s.clientHeight;if(i&&g||n&&E){if(n&&l&&M){e:for(var H=t.target,j=a.view;H!=s;H=H.parentNode)for(var B=0;B<j.length;B++)if(j[B].node==H){e.display.currentWheelTarget=H;break e}}if(i&&!k&&!A&&Rt!=null){n&&E&&pi(e,Math.max(0,Math.min(s.scrollTop+n*Rt,s.scrollHeight-s.clientHeight))),zr(e,Math.max(0,Math.min(s.scrollLeft+i*Rt,s.scrollWidth-s.clientWidth))),(!n||n&&E)&&xt(t),a.wheelStartX=null;return}if(n&&Rt!=null){var G=n*Rt,K=e.doc.scrollTop,q=K+a.wrapper.clientHeight;G<0?K=Math.max(0,K+G-50):q=Math.min(e.doc.height,q+G+50),oe(e,{top:K,bottom:q})}Ji<20&&(a.wheelStartX==null?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=n,setTimeout(function(){if(a.wheelStartX!=null){var de=s.scrollLeft-a.wheelStartX,be=s.scrollTop-a.wheelStartY,we=be&&a.wheelDY&&be/a.wheelDY||de&&a.wheelDX&&de/a.wheelDX;a.wheelStartX=a.wheelStartY=null,we&&(Rt=(Rt*Ji+we)/(Ji+1),++Ji)}},200)):(a.wheelDX+=i,a.wheelDY+=n))}}function qi(e,t,r){if(typeof t=="string"&&(t=on[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,n=!1;try{Dt(e)&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),n=t(e)!=ho}finally{e.display.shift=i,e.state.suppressEdits=!1}return n}function Yo(e,t,r){for(var i=0;i<e.state.keyMaps.length;i++){var n=xi(t,e.state.keyMaps[i],r,e);if(n)return n}return e.options.extraKeys&&xi(t,e.options.extraKeys,r,e)||xi(t,e.options.keyMap,r,e)}var Vo=new Ri;function en(e,t,r,i){var n=e.state.keySeq;if(n){if(ls(t))return"handled";Vo.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),t=n+" "+t}var a=Yo(e,t,i);return a=="multi"&&(e.state.keySeq=t),a=="handled"&&kt(e,"keyHandled",e,t,r),(a=="handled"||a=="multi")&&(xt(r),Y(e)),n&&!a&&/\'$/.test(t)?(xt(r),!0):!!a}function xa(e,t){var r=us(t,!0);return r?t.shiftKey&&!e.state.keySeq?en(e,"Shift-"+r,t,function(i){return qi(e,i,!0)})||en(e,r,t,function(i){if(typeof i=="string"?/^go[A-Z]/.test(i):i.motion)return qi(e,i)}):en(e,r,t,function(i){return qi(e,i)}):!1}function Zo(e,t,r){return en(e,"'"+r+"'",t,function(i){return qi(e,i,!0)})}var Rn=null;function Ca(e){var t=this;if(t.curOp.focus=Xt(),!Ht(t,e)){o&&d<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=r==16||e.shiftKey;var i=xa(t,e);A&&(Rn=i?r:null,!i&&r==88&&!xo&&(l?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),r==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Qo(t)}}function Qo(e){var t=e.display.lineDiv;Fi(t,"CodeMirror-crosshair");function r(i){(i.keyCode==18||!i.altKey)&&(Ni(t,"CodeMirror-crosshair"),zt(document,"keyup",r),zt(document,"mouseover",r))}De(document,"keyup",r),De(document,"mouseover",r)}function Sa(e){e.keyCode==16&&(this.doc.sel.shift=!1),Ht(this,e)}function ka(e){var t=this;if(!(qt(t.display,e)||Ht(t,e)||e.ctrlKey&&!e.altKey||l&&e.metaKey)){var r=e.keyCode,i=e.charCode;if(A&&r==Rn){Rn=null,xt(e);return}if(!(A&&(!e.which||e.which<10)&&xa(t,e))){var n=String.fromCharCode(i??r);Zo(t,e,n)||t.display.input.onKeyPress(e)}}}function Jo(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,gi(e))},100)}function On(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(lt(e,"focus",e),e.state.focused=!0,Fi(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),M&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Y(e))}function gi(e){e.state.delayingBlurEvent||(e.state.focused&&(lt(e,"blur",e),e.state.focused=!1,Ni(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ta(e,t){qt(e.display,t)||qo(e,t)||Ht(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function qo(e,t){return It(e,"gutterContextMenu")?pa(e,t,"gutterContextMenu",!1,lt):!1}var Mr=D.changeEnd=function(e){return e.text?le(e.from.line+e.text.length-1,Qe(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};function La(e,t){if(_e(e,t.from)<0)return e;if(_e(e,t.to)<=0)return Mr(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Mr(t).ch-t.to.ch),le(r,i)}function Dn(e,t){for(var r=[],i=0;i<e.sel.ranges.length;i++){var n=e.sel.ranges[i];r.push(new Ye(La(n.anchor,t),La(n.head,t)))}return vt(r,e.sel.primIndex)}function Ea(e,t,r){return e.line==t.line?le(r.line,e.ch-t.ch+r.ch):le(r.line+(e.line-t.line),e.ch)}function es(e,t,r){for(var i=[],n=le(e.first,0),a=n,s=0;s<t.length;s++){var g=t[s],E=Ea(g.from,n,a),H=Ea(Mr(g),n,a);if(n=g.to,a=H,r=="around"){var j=e.sel.ranges[s],B=_e(j.head,j.anchor)<0;i[s]=new Ye(B?H:E,B?E:H)}else i[s]=new Ye(E,E)}return new At(i,e.sel.primIndex)}function Ma(e,t,r){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(i.update=function(n,a,s,g){n&&(this.from=Ie(e,n)),a&&(this.to=Ie(e,a)),s&&(this.text=s),g!==void 0&&(this.origin=g)}),lt(e,"beforeChange",e,i),e.cm&&lt(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Xr(e,t,r){if(e.cm){if(!e.cm.curOp)return at(e.cm,Xr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!((It(e,"beforeChange")||e.cm&&It(e.cm,"beforeChange"))&&(t=Ma(e,t,!0),!t))){var i=b&&!r&&ms(e,t.from,t.to);if(i)for(var n=i.length-1;n>=0;--n)Aa(e,{from:i[n].from,to:i[n].to,text:n?[""]:t.text});else Aa(e,t)}}function Aa(e,t){if(!(t.text.length==1&&t.text[0]==""&&_e(t.from,t.to)==0)){var r=Dn(e,t);io(e,t,r,e.cm?e.cm.curOp.id:NaN),mi(e,t,r,_n(e,t));var i=[];Rr(e,function(n,a){!a&&mt(i,n.history)==-1&&(so(n.history,t),i.push(n.history)),mi(n,t,null,_n(n,t))})}}function tn(e,t,r){if(!(e.cm&&e.cm.state.suppressEdits)){for(var i=e.history,n,a=e.sel,s=t=="undo"?i.done:i.undone,g=t=="undo"?i.undone:i.done,E=0;E<s.length&&(n=s[E],!(r?n.ranges&&!n.equals(e.sel):!n.ranges));E++);if(E!=s.length){for(i.lastOrigin=i.lastSelOrigin=null;n=s.pop(),n.ranges;){if(gn(n,g),r&&!n.equals(e.sel)){st(e,n,{clearRedo:!1});return}a=n}var H=[];gn(a,g),g.push({changes:H,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var j=It(e,"beforeChange")||e.cm&&It(e.cm,"beforeChange"),E=n.changes.length-1;E>=0;--E){var B=n.changes[E];if(B.origin=t,j&&!Ma(e,B,!1)){s.length=0;return}H.push(Xn(e,B));var G=E?Dn(e,B):Qe(s);mi(e,B,G,Na(e,B)),!E&&e.cm&&e.cm.scrollIntoView({from:B.from,to:Mr(B)});var K=[];Rr(e,function(de,be){!be&&mt(K,de.history)==-1&&(so(de.history,B),K.push(de.history)),mi(de,B,null,Na(de,B))})}}}}function Pa(e,t){if(t!=0&&(e.first+=t,e.sel=new At(wn(e.sel.ranges,function(n){return new Ye(le(n.anchor.line+t,n.anchor.ch),le(n.head.line+t,n.head.ch))}),e.sel.primIndex),e.cm)){St(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,i=r.viewFrom;i<r.viewTo;i++)Jt(e.cm,i,"gutter")}}function mi(e,t,r,i){if(e.cm&&!e.cm.curOp)return at(e.cm,mi)(e,t,r,i);if(t.to.line<e.first){Pa(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);Pa(e,n),t={from:le(e.first,0),to:le(t.to.line+n,t.to.ch),text:[Qe(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:le(a,Pe(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Or(e,t.from,t.to),r||(r=Dn(e,t)),e.cm?ts(e.cm,t,i):Un(e,t,i),wr(e,r,tr)}}function ts(e,t,r){var i=e.doc,n=e.display,a=t.from,s=t.to,g=!1,E=a.line;e.options.lineWrapping||(E=qe(jt(Pe(i,a.line))),i.iter(E,s.line+1,function(K){if(K==n.maxLine)return g=!0,!0})),i.sel.contains(t.from,t.to)>-1&&fo(e),Un(i,t,r,ue(e)),e.options.lineWrapping||(i.iter(E,a.line+t.text.length,function(K){var q=re(K);q>n.maxLineLength&&(n.maxLine=K,n.maxLineLength=q,n.maxLineChanged=!0,g=!1)}),g&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,a.line),J(e,400);var H=t.text.length-(s.line-a.line)-1;t.full?St(e):a.line==s.line&&t.text.length==1&&!eo(e.doc,t)?Jt(e,a.line,"text"):St(e,a.line,s.line+1,H);var j=It(e,"changes"),B=It(e,"change");if(B||j){var G={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};B&&kt(e,"change",e,G),j&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(G)}e.display.selForContextMenu=null}function Gr(e,t,r,i,n){if(i||(i=r),_e(i,r)<0){var a=i;i=r,r=a}typeof t=="string"&&(t=e.splitLines(t)),Xr(e,{from:r,to:i,text:t,origin:n})}function rs(e,t){if(!Ht(e,"scrollCursorIntoView")){var r=e.display,i=r.sizer.getBoundingClientRect(),n=null;if(t.top+i.top<0?n=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!R){var a=Ee("div","​",null,"position: absolute; top: "+(t.top-r.viewOffset-ke(e.display))+"px; height: "+(t.bottom-t.top+Ve(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(n),e.display.lineSpace.removeChild(a)}}}function is(e,t,r,i){i==null&&(i=0);for(var n=0;n<5;n++){var a=!1,s=Qt(e,t),g=!r||r==t?s:Qt(e,r),E=rn(e,Math.min(s.left,g.left),Math.min(s.top,g.top)-i,Math.max(s.left,g.left),Math.max(s.bottom,g.bottom)+i),H=e.doc.scrollTop,j=e.doc.scrollLeft;if(E.scrollTop!=null&&(pi(e,E.scrollTop),Math.abs(e.doc.scrollTop-H)>1&&(a=!0)),E.scrollLeft!=null&&(zr(e,E.scrollLeft),Math.abs(e.doc.scrollLeft-j)>1&&(a=!0)),!a)break}return s}function ns(e,t,r,i,n){var a=rn(e,t,r,i,n);a.scrollTop!=null&&pi(e,a.scrollTop),a.scrollLeft!=null&&zr(e,a.scrollLeft)}function rn(e,t,r,i,n){var a=e.display,s=Tr(e.display);r<0&&(r=0);var g=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:a.scroller.scrollTop,E=pt(e),H={};n-r>E&&(n=r+E);var j=e.doc.height+Me(a),B=r<s,G=n>j-s;if(r<g)H.scrollTop=B?0:r;else if(n>g+E){var K=Math.min(r,(G?j:n)-E);K!=g&&(H.scrollTop=K)}var q=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:a.scroller.scrollLeft,de=$e(e)-(e.options.fixedGutter?a.gutters.offsetWidth:0),be=i-t>de;return be&&(i=t+de),t<10?H.scrollLeft=0:t<q?H.scrollLeft=Math.max(0,t-(be?0:10)):i>de+q-3&&(H.scrollLeft=i+(be?0:10)-de),H}function Hn(e,t,r){r!=null&&nn(e),r!=null&&(e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+r)}function Kr(e){nn(e);var t=e.getCursor(),r=t,i=t;e.options.lineWrapping||(r=t.ch?le(t.line,t.ch-1):t,i=le(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function nn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=ca(e,t.from),i=ca(e,t.to),n=rn(e,Math.min(r.left,i.left),Math.min(r.top,i.top)-t.margin,Math.max(r.right,i.right),Math.max(r.bottom,i.bottom)+t.margin);e.scrollTo(n.scrollLeft,n.scrollTop)}}function yi(e,t,r,i){var n=e.doc,a;r==null&&(r="add"),r=="smart"&&(n.mode.indent?a=fe(e,t):r="prev");var s=e.options.tabSize,g=Pe(n,t),E=_t(g.text,null,s);g.stateAfter&&(g.stateAfter=null);var H=g.text.match(/^\s*/)[0],j;if(!i&&!/\S/.test(g.text))j=0,r="not";else if(r=="smart"&&(j=n.mode.indent(a,g.text.slice(H.length),g.text),j==ho||j>150)){if(!i)return;r="prev"}r=="prev"?t>n.first?j=_t(Pe(n,t-1).text,null,s):j=0:r=="add"?j=E+e.options.indentUnit:r=="subtract"?j=E-e.options.indentUnit:typeof r=="number"&&(j=E+r),j=Math.max(0,j);var B="",G=0;if(e.options.indentWithTabs)for(var K=Math.floor(j/s);K;--K)G+=s,B+="	";if(G<j&&(B+=po(j-G)),B!=H)return Gr(n,B,le(t,0),le(t,H.length),"+input"),g.stateAfter=null,!0;for(var K=0;K<n.sel.ranges.length;K++){var q=n.sel.ranges[K];if(q.head.line==t&&q.head.ch<H.length){var G=le(t,H.length);br(n,K,new Ye(G,G));break}}}function an(e,t,r,i){var n=t,a=t;return typeof t=="number"?a=Pe(e,ji(e,t)):n=qe(t),n==null?null:(i(a,n)&&e.cm&&Jt(e.cm,n,r),a)}function Yr(e,t){for(var r=e.doc.sel.ranges,i=[],n=0;n<r.length;n++){for(var a=t(r[n]);i.length&&_e(a.from,Qe(i).to)<=0;){var s=i.pop();if(_e(s.from,a.from)<0){a.from=s.from;break}}i.push(a)}Pt(e,function(){for(var g=i.length-1;g>=0;g--)Gr(e.doc,"",i[g].from,i[g].to,"+delete");Kr(e)})}function In(e,t,r,i,n){var a=t.line,s=t.ch,g=r,E=Pe(e,a),H=!0;function j(){var xe=a+r;return xe<e.first||xe>=e.first+e.size?H=!1:(a=xe,E=Pe(e,xe))}function B(xe){var Be=(n?ra:ko)(E,s,r,!0);if(Be==null)if(!xe&&j())n?s=(r<0?Sn:Cn)(E):s=r<0?E.text.length:0;else return H=!1;else s=Be;return!0}if(i=="char")B();else if(i=="column")B(!0);else if(i=="word"||i=="group")for(var G=null,K=i=="group",q=e.cm&&e.cm.getHelper(t,"wordChars"),de=!0;!(r<0&&!B(!de));de=!1){var be=E.text.charAt(s)||`
`,we=xn(be,q)?"w":K&&be==`
`?"n":!K||/\s/.test(be)?null:"p";if(K&&!de&&!we&&(we="s"),G&&G!=we){r<0&&(r=1,B());break}if(we&&(G=we),r>0&&!B(!de))break}var He=Cr(e,le(a,s),g,!0);return H||(He.hitSide=!0),He}function Ra(e,t,r,i){var n=e.doc,a=t.left,s;if(i=="page"){var g=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);s=t.top+r*(g-(r<0?1.5:.5)*Tr(e.display))}else i=="line"&&(s=r>0?t.bottom+3:t.top-3);for(;;){var E=Pn(e,a,s);if(!E.outside)break;if(r<0?s<=0:s>=n.height){E.hitSide=!0;break}s+=r*5}return E}D.prototype={constructor:D,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,i=r[e];r[e]==t&&e!="mode"||(r[e]=t,Vr.hasOwnProperty(e)&&at(this,Vr[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](sn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:gt(function(e,t){var r=e.token?e:D.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,St(this)}),removeOverlay:gt(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var i=t[r].modeSpec;if(i==e||typeof e=="string"&&i.name==e){t.splice(r,1),this.state.modeGen++,St(this);return}}}),indentLine:gt(function(e,t,r){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Vt(this.doc,e)&&yi(this,e,t,r)}),indentSelection:gt(function(e){for(var t=this.doc.sel.ranges,r=-1,i=0;i<t.length;i++){var n=t[i];if(n.empty())n.head.line>r&&(yi(this,n.head.line,e,!0),r=n.head.line,i==this.doc.sel.primIndex&&Kr(this));else{var a=n.from(),s=n.to(),g=Math.max(r,a.line);r=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var E=g;E<r;++E)yi(this,E,e);var H=this.doc.sel.ranges;a.ch==0&&t.length==H.length&&H[i].from().ch>0&&br(this.doc,i,new Ye(a,H[i].to()),tr)}}}),getTokenAt:function(e,t){return Ka(this,e,t)},getLineTokens:function(e,t){return Ka(this,le(e),t,!0)},getTokenTypeAt:function(e){e=Ie(this.doc,e);var t=Za(this,Pe(this.doc,e.line)),r=0,i=(t.length-1)/2,n=e.ch,a;if(n==0)a=t[2];else for(;;){var s=r+i>>1;if((s?t[s*2-1]:0)>=n)i=s;else if(t[s*2+1]<n)r=s+1;else{a=t[s*2+2];break}}var g=a?a.indexOf("cm-overlay "):-1;return g<0?a:g==0?null:a.slice(0,g-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?D.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Zr.hasOwnProperty(t))return r;var i=Zr[t],n=this.getModeAt(e);if(typeof n[t]=="string")i[n[t]]&&r.push(i[n[t]]);else if(n[t])for(var a=0;a<n[t].length;a++){var s=i[n[t][a]];s&&r.push(s)}else n.helperType&&i[n.helperType]?r.push(i[n.helperType]):i[n.name]&&r.push(i[n.name]);for(var a=0;a<i._global.length;a++){var g=i._global[a];g.pred(n,this)&&mt(r,g.val)==-1&&r.push(g.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=ji(r,e??r.first+r.size-1),fe(this,e+1,t)},cursorCoords:function(e,t){var r,i=this.doc.sel.primary();return e==null?r=i.head:typeof e=="object"?r=Ie(this.doc,e):r=e?i.from():i.to(),Qt(this,r,t||"page")},charCoords:function(e,t){return An(this,Ie(this.doc,e),t||"page")},coordsChar:function(e,t){return e=fa(this,e,t||"page"),Pn(this,e.left,e.top)},lineAtHeight:function(e,t){return e=fa(this,{top:e,left:0},t||"page").top,Dr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r=!1,i;if(typeof e=="number"){var n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,r=!0),i=Pe(this.doc,e)}else i=e;return Mn(this,i,{top:0,left:0},t||"page").top+(r?this.doc.height-er(i):0)},defaultTextHeight:function(){return Tr(this.display)},defaultCharWidth:function(){return vi(this.display)},setGutterMarker:gt(function(e,t,r){return an(this.doc,e,"gutter",function(i){var n=i.gutterMarkers||(i.gutterMarkers={});return n[t]=r,!r&&yo(n)&&(i.gutterMarkers=null),!0})}),clearGutter:gt(function(e){var t=this,r=t.doc,i=r.first;r.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Jt(t,i,"gutter"),yo(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),lineInfo:function(e){if(typeof e=="number"){if(!Vt(this.doc,e))return null;var t=e;if(e=Pe(this.doc,e),!e)return null}else{var t=qe(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,i,n){var a=this.display;e=Qt(this,Ie(this.doc,e));var s=e.bottom,g=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),i=="over")s=e.top;else if(i=="above"||i=="near"){var E=Math.max(a.wrapper.clientHeight,this.doc.height),H=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);(i=="above"||e.bottom+t.offsetHeight>E)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=E&&(s=e.bottom),g+t.offsetWidth>H&&(g=H-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="",n=="right"?(g=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(n=="left"?g=0:n=="middle"&&(g=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=g+"px"),r&&ns(this,g,s,g+t.offsetWidth,s+t.offsetHeight)},triggerOnKeyDown:gt(Ca),triggerOnKeyPress:gt(ka),triggerOnKeyUp:Sa,execCommand:function(e){if(on.hasOwnProperty(e))return on[e].call(null,this)},triggerElectric:gt(function(e){vr(this,e)}),findPosH:function(e,t,r,i){var n=1;t<0&&(n=-1,t=-t);for(var a=0,s=Ie(this.doc,e);a<t&&(s=In(this.doc,s,n,r,i),!s.hitSide);++a);return s},moveH:gt(function(e,t){var r=this;r.extendSelectionsBy(function(i){return r.display.shift||r.doc.extend||i.empty()?In(r.doc,i.head,e,t,r.options.rtlMoveVisually):e<0?i.from():i.to()},Pi)}),deleteH:gt(function(e,t){var r=this.doc.sel,i=this.doc;r.somethingSelected()?i.replaceSelection("",null,"+delete"):Yr(this,function(n){var a=In(i,n.head,e,t,!1);return e<0?{from:a,to:n.head}:{from:n.head,to:a}})}),findPosV:function(e,t,r,i){var n=1,a=i;t<0&&(n=-1,t=-t);for(var s=0,g=Ie(this.doc,e);s<t;++s){var E=Qt(this,g,"div");if(a==null?a=E.left:E.left=a,g=Ra(this,E,n,r),g.hitSide)break}return g},moveV:gt(function(e,t){var r=this,i=this.doc,n=[],a=!r.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(g){if(a)return e<0?g.from():g.to();var E=Qt(r,g.head,"div");g.goalColumn!=null&&(E.left=g.goalColumn),n.push(E.left);var H=Ra(r,E,e,t);return t=="page"&&g==i.sel.primary()&&Hn(r,null,An(r,H,"div").top-E.top),H},Pi),n.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=n[s]}),findWordAt:function(e){var t=this.doc,r=Pe(t,e.line).text,i=e.ch,n=e.ch;if(r){var a=this.getHelper(e,"wordChars");(e.xRel<0||n==r.length)&&i?--i:++n;for(var s=r.charAt(i),g=xn(s,a)?function(E){return xn(E,a)}:/\s/.test(s)?function(E){return/\s/.test(E)}:function(E){return!/\s/.test(E)&&!xn(E)};i>0&&g(r.charAt(i-1));)--i;for(;n<r.length&&g(r.charAt(n));)++n}return new Ye(le(e.line,i),le(e.line,n))},toggleOverwrite:function(e){e!=null&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Fi(this.display.cursorDiv,"CodeMirror-overwrite"):Ni(this.display.cursorDiv,"CodeMirror-overwrite"),lt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Xt()},scrollTo:gt(function(e,t){(e!=null||t!=null)&&nn(this),e!=null&&(this.curOp.scrollLeft=e),t!=null&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ve(this)-this.display.barHeight,width:e.scrollWidth-Ve(this)-this.display.barWidth,clientHeight:pt(this),clientWidth:$e(this)}},scrollIntoView:gt(function(e,t){if(e==null?(e={from:this.doc.sel.primary().head,to:null},t==null&&(t=this.options.cursorScrollMargin)):typeof e=="number"?e={from:le(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,e.from.line!=null)nn(this),this.curOp.scrollToPos=e;else{var r=rn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:gt(function(e,t){var r=this;function i(a){return typeof a=="number"||/^\d+$/.test(String(a))?a+"px":a}e!=null&&(r.display.wrapper.style.width=i(e)),t!=null&&(r.display.wrapper.style.height=i(t)),r.options.lineWrapping&&sa(this);var n=r.display.viewFrom;r.doc.iter(n,r.display.viewTo,function(a){if(a.widgets){for(var s=0;s<a.widgets.length;s++)if(a.widgets[s].noHScroll){Jt(r,n,"widget");break}}++n}),r.curOp.forceUpdate=!0,lt(r,"refresh",this)}),operation:function(e){return Pt(this,e)},refresh:gt(function(){var e=this.display.cachedTextHeight;St(this),this.curOp.forceUpdate=!0,di(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),ie(this),(e==null||Math.abs(e-Tr(this.display))>.5)&&ee(this),lt(this,"refresh",this)}),swapDoc:gt(function(e){var t=this.doc;return t.cm=null,to(this,e),di(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,kt(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},qr(D);var as=D.defaults={},Vr=D.optionHandlers={};function Ne(e,t,r,i){D.defaults[e]=t,r&&(Vr[e]=i?function(n,a,s){s!=Oa&&r(n,a,s)}:r)}var Oa=D.Init={toString:function(){return"CodeMirror.Init"}};Ne("value","",function(e,t){e.setValue(t)},!0),Ne("mode",null,function(e,t){e.doc.modeOption=t,W(e)},!0),Ne("indentUnit",2,W,!0),Ne("indentWithTabs",!1),Ne("smartIndent",!0),Ne("tabSize",4,function(e){V(e),di(e),St(e)},!0),Ne("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,!!t){var r=[],i=e.doc.first;e.doc.iter(function(a){for(var s=0;;){var g=a.text.indexOf(t,s);if(g==-1)break;s=g+t.length,r.push(le(i,g))}i++});for(var n=r.length-1;n>=0;n--)Gr(e.doc,t,r[n],le(r[n].line,r[n].ch+t.length))}}),Ne("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),r!=D.Init&&e.refresh()}),Ne("specialCharPlaceholder",ks,function(e){e.refresh()},!0),Ne("electricChars",!0),Ne("inputStyle",w?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Ne("rtlMoveVisually",!h),Ne("wholeLineUpdateBefore",!0),Ne("theme","default",function(e){ae(e),he(e)},!0),Ne("keyMap","default",function(e,t,r){var i=sn(t),n=r!=D.Init&&sn(r);n&&n.detach&&n.detach(e,i),i.attach&&i.attach(e,n||null)}),Ne("extraKeys",null),Ne("lineWrapping",!1,Q,!0),Ne("gutters",[],function(e){te(e.options),he(e)},!0),Ne("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?U(e.display)+"px":"0",e.refresh()},!0),Ne("coverGutterNextToScrollbar",!1,function(e){Oe(e)},!0),Ne("scrollbarStyle","native",function(e){pe(e),Oe(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Ne("lineNumbers",!1,function(e){te(e.options),he(e)},!0),Ne("firstLineNumber",1,he,!0),Ne("lineNumberFormatter",function(e){return e},he,!0),Ne("showCursorWhenSelecting",!1,nr,!0),Ne("resetSelectionOnContextMenu",!0),Ne("lineWiseCopyCut",!0),Ne("readOnly",!1,function(e,t){t=="nocursor"?(gi(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Ne("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Ne("dragDrop",!0,Wo),Ne("allowDropFileTypes",null),Ne("cursorBlinkRate",530),Ne("cursorScrollMargin",0),Ne("cursorHeight",1,nr,!0),Ne("singleCursorHeightPerLine",!0,nr,!0),Ne("workTime",100),Ne("workDelay",100),Ne("flattenSpans",!0,V,!0),Ne("addModeClass",!1,V,!0),Ne("pollInterval",100),Ne("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Ne("historyEventDelay",1250),Ne("viewportMargin",10,function(e){e.refresh()},!0),Ne("maxHighlightLength",1e4,V,!0),Ne("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Ne("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Ne("autofocus",null);var Da=D.modes={},bi=D.mimeModes={};D.defineMode=function(e,t){!D.defaults.mode&&e!="null"&&(D.defaults.mode=e),arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Da[e]=t},D.defineMIME=function(e,t){bi[e]=t},D.resolveMode=function(e){if(typeof e=="string"&&bi.hasOwnProperty(e))e=bi[e];else if(e&&typeof e.name=="string"&&bi.hasOwnProperty(e.name)){var t=bi[e.name];typeof t=="string"&&(t={name:t}),e=go(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return D.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},D.getMode=function(e,r){var r=D.resolveMode(r),i=Da[r.name];if(!i)return D.getMode(e,"text/plain");var n=i(e,r);if(wi.hasOwnProperty(r.name)){var a=wi[r.name];for(var s in a)a.hasOwnProperty(s)&&(n.hasOwnProperty(s)&&(n["_"+s]=n[s]),n[s]=a[s])}if(n.name=r.name,r.helperType&&(n.helperType=r.helperType),r.modeProps)for(var s in r.modeProps)n[s]=r.modeProps[s];return n},D.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),D.defineMIME("text/plain","null");var wi=D.modeExtensions={};D.extendMode=function(e,t){var r=wi.hasOwnProperty(e)?wi[e]:wi[e]={};$t(t,r)},D.defineExtension=function(e,t){D.prototype[e]=t},D.defineDocExtension=function(e,t){Mt.prototype[e]=t},D.defineOption=Ne;var Nn=[];D.defineInitHook=function(e){Nn.push(e)};var Zr=D.helpers={};D.registerHelper=function(e,t,r){Zr.hasOwnProperty(e)||(Zr[e]=D[e]={_global:[]}),Zr[e][t]=r},D.registerGlobalHelper=function(e,t,r,i){D.registerHelper(e,t,i),Zr[e]._global.push({pred:r,val:i})};var or=D.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var i in t){var n=t[i];n instanceof Array&&(n=n.concat([])),r[i]=n}return r},os=D.startState=function(e,t,r){return e.startState?e.startState(t,r):!0};D.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var on=D.commands={selectAll:function(e){e.setSelection(le(e.firstLine(),0),le(e.lastLine()),tr)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),tr)},killLine:function(e){Yr(e,function(t){if(t.empty()){var r=Pe(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:le(t.head.line+1,0)}:{from:t.head,to:le(t.head.line,r)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){Yr(e,function(t){return{from:le(t.from().line,0),to:Ie(e.doc,le(t.to().line+1,0))}})},delLineLeft:function(e){Yr(e,function(t){return{from:le(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){Yr(e,function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){Yr(e,function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:i}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(le(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(le(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Co(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return So(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Vs(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},Pi)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},Pi)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return i.ch<e.getLine(i.line).search(/\S/)?So(e,t.head):i},Pi)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),i=e.options.tabSize,n=0;n<r.length;n++){var a=r[n].from(),s=_t(e.getLine(a.line),a.ch,i);t.push(new Array(i-s%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Pt(e,function(){for(var t=e.listSelections(),r=[],i=0;i<t.length;i++){var n=t[i].head,a=Pe(e.doc,n.line).text;if(a){if(n.ch==a.length&&(n=new le(n.line,n.ch-1)),n.ch>0)n=new le(n.line,n.ch+1),e.replaceRange(a.charAt(n.ch-1)+a.charAt(n.ch-2),le(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var s=Pe(e.doc,n.line-1).text;s&&e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),le(n.line-1,s.length-1),le(n.line,1),"+transpose")}}r.push(new Ye(n,n))}e.setSelections(r)})},newlineAndIndent:function(e){Pt(e,function(){for(var t=e.listSelections().length,r=0;r<t;r++){var i=e.listSelections()[r];e.replaceRange(e.doc.lineSeparator(),i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0)}Kr(e)})},toggleOverwrite:function(e){e.toggleOverwrite()}},sr=D.keyMap={};sr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},sr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},sr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},sr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},sr.default=l?sr.macDefault:sr.pcDefault;function ss(r){for(var t=r.split(/-(?!$)/),r=t[t.length-1],i,n,a,s,g=0;g<t.length-1;g++){var E=t[g];if(/^(cmd|meta|m)$/i.test(E))s=!0;else if(/^a(lt)?$/i.test(E))i=!0;else if(/^(c|ctrl|control)$/i.test(E))n=!0;else if(/^s(hift)$/i.test(E))a=!0;else throw new Error("Unrecognized modifier name: "+E)}return i&&(r="Alt-"+r),n&&(r="Ctrl-"+r),s&&(r="Cmd-"+r),a&&(r="Shift-"+r),r}D.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(i=="..."){delete e[r];continue}for(var n=wn(r.split(" "),ss),a=0;a<n.length;a++){var s,g;a==n.length-1?(g=n.join(" "),s=i):(g=n.slice(0,a+1).join(" "),s="...");var E=t[g];if(!E)t[g]=s;else if(E!=s)throw new Error("Inconsistent bindings for "+g)}delete e[r]}for(var H in t)e[H]=t[H];return e};var xi=D.lookupKey=function(e,t,r,i){t=sn(t);var n=t.call?t.call(e,i):t[e];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&r(n))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return xi(e,t.fallthrough,r,i);for(var a=0;a<t.fallthrough.length;a++){var s=xi(e,t.fallthrough[a],r,i);if(s)return s}}},ls=D.isModifierKey=function(e){var t=typeof e=="string"?e:Ir[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"},us=D.keyName=function(e,t){if(A&&e.keyCode==34&&e.char)return!1;var r=Ir[e.keyCode],i=r;return i==null||e.altGraphKey?!1:(e.altKey&&r!="Alt"&&(i="Alt-"+i),(u?e.metaKey:e.ctrlKey)&&r!="Ctrl"&&(i="Ctrl-"+i),(u?e.ctrlKey:e.metaKey)&&r!="Cmd"&&(i="Cmd-"+i),!t&&e.shiftKey&&r!="Shift"&&(i="Shift-"+i),i)};function sn(e){return typeof e=="string"?sr[e]:e}D.fromTextArea=function(e,t){if(t=t?$t(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var r=Xt();t.autofocus=r==e||e.getAttribute("autofocus")!=null&&r==document.body}function i(){e.value=g.getValue()}if(e.form&&(De(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var n=e.form,a=n.submit;try{var s=n.submit=function(){i(),n.submit=a,n.submit(),n.submit=s}}catch{}}t.finishInit=function(E){E.save=i,E.getTextArea=function(){return e},E.toTextArea=function(){E.toTextArea=isNaN,i(),e.parentNode.removeChild(E.getWrapperElement()),e.style.display="",e.form&&(zt(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=a))}},e.style.display="none";var g=D(function(E){e.parentNode.insertBefore(E,e.nextSibling)},t);return g};var ln=D.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ln.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var r=t==e;else var r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=_t(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?_t(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return _t(this.string,null,this.tabSize)-(this.lineStart?_t(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if(typeof e=="string"){var i=function(s){return r?s.toLowerCase():s},n=this.string.substr(this.pos,e.length);if(i(n)==i(e))return t!==!1&&(this.pos+=e.length),!0}else{var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&t!==!1&&(this.pos+=a[0].length),a)}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Fn=0,Ar=D.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Fn};qr(Ar),Ar.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&jr(e),It(this,"clear")){var r=this.find();r&&kt(this,"clear",r.from,r.to)}for(var i=null,n=null,a=0;a<this.lines.length;++a){var s=this.lines[a],g=Ci(s.markedSpans,this);e&&!this.collapsed?Jt(e,qe(s),"text"):e&&(g.to!=null&&(n=qe(s)),g.from!=null&&(i=qe(s))),s.markedSpans=ds(s.markedSpans,g),g.from==null&&this.collapsed&&!Pr(this.doc,s)&&e&&Ut(s,Tr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var E=jt(this.lines[a]),H=re(E);H>e.display.maxLineLength&&(e.display.maxLine=E,e.display.maxLineLength=H,e.display.maxLineChanged=!0)}i!=null&&e&&this.collapsed&&St(e,i,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&xr(e.doc)),e&&kt(e,"markerCleared",e,this),t&&Ur(e),this.parent&&this.parent.clear()}},Ar.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var r,i,n=0;n<this.lines.length;++n){var a=this.lines[n],s=Ci(a.markedSpans,this);if(s.from!=null&&(r=le(t?a:qe(a),s.from),e==-1))return r;if(s.to!=null&&(i=le(t?a:qe(a),s.to),e==1))return i}return r&&{from:r,to:i}},Ar.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;!e||!r||Pt(r,function(){var i=e.line,n=qe(e.line),a=Zt(r,n);if(a&&(oa(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Pr(t.doc,i)&&t.height!=null){var s=t.height;t.height=null;var g=ki(t)-s;g&&Ut(i,i.height+g)}})},Ar.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||mt(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ar.prototype.detachLine=function(e){if(this.lines.splice(mt(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Fn=0;function Qr(e,t,r,i,n){if(i&&i.shared)return fs(e,t,r,i,n);if(e.cm&&!e.cm.curOp)return at(e.cm,Qr)(e,t,r,i,n);var a=new Ar(e,n),s=_e(t,r);if(i&&$t(i,a,!1),s>0||s==0&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=Ee("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(ja(e,t.line,t,r,a)||t.line!=r.line&&ja(e,r.line,t,r,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");O=!0}a.addToHistory&&io(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var g=t.line,E=e.cm,H;if(e.iter(g,r.line+1,function(B){E&&a.collapsed&&!E.options.lineWrapping&&jt(B)==E.display.maxLine&&(H=!0),a.collapsed&&g!=t.line&&Ut(B,0),vs(B,new fn(a,g==t.line?t.ch:null,g==r.line?r.ch:null)),++g}),a.collapsed&&e.iter(t.line,r.line+1,function(B){Pr(e,B)&&Ut(B,0)}),a.clearOnEnter&&De(a,"beforeCursorEnter",function(){a.clear()}),a.readOnly&&(b=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++Fn,a.atomic=!0),E){if(H&&(E.curOp.updateMaxLine=!0),a.collapsed)St(E,t.line,r.line+1);else if(a.className||a.title||a.startStyle||a.endStyle||a.css)for(var j=t.line;j<=r.line;j++)Jt(E,j,"text");a.atomic&&xr(E.doc),kt(E,"markerAdded",E,a)}return a}var un=D.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};qr(un),un.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();kt(this,"clear")}},un.prototype.find=function(e,t){return this.primary.find(e,t)};function fs(e,t,r,i,n){i=$t(i),i.shared=!1;var a=[Qr(e,t,r,i,n)],s=a[0],g=i.widgetNode;return Rr(e,function(E){g&&(i.widgetNode=g.cloneNode(!0)),a.push(Qr(E,Ie(E,t),Ie(E,r),i,n));for(var H=0;H<E.linked.length;++H)if(E.linked[H].isParent)return;s=Qe(a)}),new un(a,s)}function Ha(e){return e.findMarks(le(e.first,0),e.clipPos(le(e.lastLine())),function(t){return t.parent})}function cs(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=i.find(),a=e.clipPos(n.from),s=e.clipPos(n.to);if(_e(a,s)){var g=Qr(e,a,s,i.primary,i.primary.type);i.markers.push(g),g.parent=i}}}function hs(e){for(var t=0;t<e.length;t++){var r=e[t],i=[r.primary.doc];Rr(r.primary.doc,function(s){i.push(s)});for(var n=0;n<r.markers.length;n++){var a=r.markers[n];mt(i,a.doc)==-1&&(a.parent=null,r.markers.splice(n--,1))}}}function fn(e,t,r){this.marker=e,this.from=t,this.to=r}function Ci(e,t){if(e)for(var r=0;r<e.length;++r){var i=e[r];if(i.marker==t)return i}}function ds(e,t){for(var r,i=0;i<e.length;++i)e[i]!=t&&(r||(r=[])).push(e[i]);return r}function vs(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function ps(e,t,r){if(e)for(var i=0,n;i<e.length;++i){var a=e[i],s=a.marker,g=a.from==null||(s.inclusiveLeft?a.from<=t:a.from<t);if(g||a.from==t&&s.type=="bookmark"&&(!r||!a.marker.insertLeft)){var E=a.to==null||(s.inclusiveRight?a.to>=t:a.to>t);(n||(n=[])).push(new fn(s,a.from,E?null:a.to))}}return n}function gs(e,t,r){if(e)for(var i=0,n;i<e.length;++i){var a=e[i],s=a.marker,g=a.to==null||(s.inclusiveRight?a.to>=t:a.to>t);if(g||a.from==t&&s.type=="bookmark"&&(!r||a.marker.insertLeft)){var E=a.from==null||(s.inclusiveLeft?a.from<=t:a.from<t);(n||(n=[])).push(new fn(s,E?null:a.from-t,a.to==null?null:a.to-t))}}return n}function _n(e,t){if(t.full)return null;var r=Vt(e,t.from.line)&&Pe(e,t.from.line).markedSpans,i=Vt(e,t.to.line)&&Pe(e,t.to.line).markedSpans;if(!r&&!i)return null;var n=t.from.ch,a=t.to.ch,s=_e(t.from,t.to)==0,g=ps(r,n,s),E=gs(i,a,s),H=t.text.length==1,j=Qe(t.text).length+(H?n:0);if(g)for(var B=0;B<g.length;++B){var G=g[B];if(G.to==null){var K=Ci(E,G.marker);K?H&&(G.to=K.to==null?null:K.to+j):G.to=n}}if(E)for(var B=0;B<E.length;++B){var G=E[B];if(G.to!=null&&(G.to+=j),G.from==null){var K=Ci(g,G.marker);K||(G.from=j,H&&(g||(g=[])).push(G))}else G.from+=j,H&&(g||(g=[])).push(G)}g&&(g=Ia(g)),E&&E!=g&&(E=Ia(E));var q=[g];if(!H){var de=t.text.length-2,be;if(de>0&&g)for(var B=0;B<g.length;++B)g[B].to==null&&(be||(be=[])).push(new fn(g[B].marker,null,null));for(var B=0;B<de;++B)q.push(be);q.push(E)}return q}function Ia(e){for(var t=0;t<e.length;++t){var r=e[t];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Na(e,t){var r=Is(e,t),i=_n(e,t);if(!r)return i;if(!i)return r;for(var n=0;n<r.length;++n){var a=r[n],s=i[n];if(a&&s)e:for(var g=0;g<s.length;++g){for(var E=s[g],H=0;H<a.length;++H)if(a[H].marker==E.marker)continue e;a.push(E)}else s&&(r[n]=s)}return r}function ms(e,t,r){var i=null;if(e.iter(t.line,r.line+1,function(K){if(K.markedSpans)for(var q=0;q<K.markedSpans.length;++q){var de=K.markedSpans[q].marker;de.readOnly&&(!i||mt(i,de)==-1)&&(i||(i=[])).push(de)}}),!i)return null;for(var n=[{from:t,to:r}],a=0;a<i.length;++a)for(var s=i[a],g=s.find(0),E=0;E<n.length;++E){var H=n[E];if(!(_e(H.to,g.from)<0||_e(H.from,g.to)>0)){var j=[E,1],B=_e(H.from,g.from),G=_e(H.to,g.to);(B<0||!s.inclusiveLeft&&!B)&&j.push({from:H.from,to:g.from}),(G>0||!s.inclusiveRight&&!G)&&j.push({from:g.to,to:H.to}),n.splice.apply(n,j),E+=j.length-1}}return n}function Fa(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function _a(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function cn(e){return e.inclusiveLeft?-1:0}function hn(e){return e.inclusiveRight?1:0}function $a(e,t){var r=e.lines.length-t.lines.length;if(r!=0)return r;var i=e.find(),n=t.find(),a=_e(i.from,n.from)||cn(e)-cn(t);if(a)return-a;var s=_e(i.to,n.to)||hn(e)-hn(t);return s||t.id-e.id}function Wa(e,t){var r=O&&e.markedSpans,i;if(r)for(var n,a=0;a<r.length;++a)n=r[a],n.marker.collapsed&&(t?n.from:n.to)==null&&(!i||$a(i,n.marker)<0)&&(i=n.marker);return i}function Ba(e){return Wa(e,!0)}function Si(e){return Wa(e,!1)}function ja(e,t,r,i,n){var a=Pe(e,t),s=O&&a.markedSpans;if(s)for(var g=0;g<s.length;++g){var E=s[g];if(E.marker.collapsed){var H=E.marker.find(0),j=_e(H.from,r)||cn(E.marker)-cn(n),B=_e(H.to,i)||hn(E.marker)-hn(n);if(!(j>=0&&B<=0||j<=0&&B>=0)&&(j<=0&&(_e(H.to,r)>0||E.marker.inclusiveRight&&n.inclusiveLeft)||j>=0&&(_e(H.from,i)<0||E.marker.inclusiveLeft&&n.inclusiveRight)))return!0}}}function jt(e){for(var t;t=Ba(e);)e=t.find(-1,!0).line;return e}function ys(e){for(var t,r;t=Si(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function $n(e,t){var r=Pe(e,t),i=jt(r);return r==i?t:qe(i)}function Ua(e,t){if(t>e.lastLine())return t;var r=Pe(e,t),i;if(!Pr(e,r))return t;for(;i=Si(r);)r=i.find(1,!0).line;return qe(r)+1}function Pr(e,t){var r=O&&t.markedSpans;if(r){for(var i,n=0;n<r.length;++n)if(i=r[n],!!i.marker.collapsed){if(i.from==null)return!0;if(!i.marker.widgetNode&&i.from==0&&i.marker.inclusiveLeft&&Wn(e,t,i))return!0}}}function Wn(e,t,r){if(r.to==null){var i=r.marker.find(1,!0);return Wn(e,i.line,Ci(i.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var n,a=0;a<t.markedSpans.length;++a)if(n=t.markedSpans[a],n.marker.collapsed&&!n.marker.widgetNode&&n.from==r.to&&(n.to==null||n.to!=r.from)&&(n.marker.inclusiveLeft||r.marker.inclusiveRight)&&Wn(e,t,n))return!0}var dn=D.LineWidget=function(e,t,r){if(r)for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i]);this.doc=e,this.node=t};qr(dn);function za(e,t,r){er(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Hn(e,null,r)}dn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,i=qe(r);if(!(i==null||!t)){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(r.widgets=null);var a=ki(this);Ut(r,Math.max(0,r.height-a)),e&&Pt(e,function(){za(e,r,-a),Jt(e,i,"widget")})}},dn.prototype.changed=function(){var e=this.height,t=this.doc.cm,r=this.line;this.height=null;var i=ki(this)-e;i&&(Ut(r,r.height+i),t&&Pt(t,function(){t.curOp.forceUpdate=!0,za(t,r,i)}))};function ki(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Yn(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),Ot(t.display.measure,Ee("div",[e.node],null,r))}return e.height=e.node.offsetHeight}function bs(e,t,r,i){var n=new dn(e,r,i),a=e.cm;return a&&n.noHScroll&&(a.display.alignWidgets=!0),an(e,t,"widget",function(s){var g=s.widgets||(s.widgets=[]);if(n.insertAt==null?g.push(n):g.splice(Math.min(g.length-1,Math.max(0,n.insertAt)),0,n),n.line=s,a&&!Pr(e,s)){var E=er(s)<e.scrollTop;Ut(s,s.height+ki(n)),E&&Hn(a,null,n.height),a.curOp.forceUpdate=!0}return!0}),n}var Ti=D.Line=function(e,t,r){this.text=e,_a(this,t),this.height=r?r(this):1};qr(Ti),Ti.prototype.lineNo=function(){return qe(this)};function ws(e,t,r,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Fa(e),_a(e,r);var n=i?i(e):1;n!=e.height&&Ut(e,n)}function xs(e){e.parent=null,Fa(e)}function Xa(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var i=r[1]?"bgClass":"textClass";t[i]==null?t[i]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+r[2])}return e}function Ga(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=D.innerMode(e,t);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function Bn(e,t,r,i){for(var n=0;n<10;n++){i&&(i[0]=D.innerMode(e,r).mode);var a=e.token(t,r);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}function Ka(e,t,r,i){function n(G){return{start:j.start,end:j.pos,string:j.current(),type:g||null,state:G?or(a.mode,H):H}}var a=e.doc,s=a.mode,g;t=Ie(a,t);var E=Pe(a,t.line),H=fe(e,t.line,r),j=new ln(E.text,e.options.tabSize),B;for(i&&(B=[]);(i||j.pos<t.ch)&&!j.eol();)j.start=j.pos,g=Bn(s,j,H),i&&B.push(n(!0));return i?B:n()}function Ya(e,t,r,i,n,a,s){var g=r.flattenSpans;g==null&&(g=e.options.flattenSpans);var E=0,H=null,j=new ln(t,e.options.tabSize),B,G=e.options.addModeClass&&[null];for(t==""&&Xa(Ga(r,i),a);!j.eol();){if(j.pos>e.options.maxHighlightLength?(g=!1,s&&jn(e,t,i,j.pos),j.pos=t.length,B=null):B=Xa(Bn(r,j,i,G),a),G){var K=G[0].name;K&&(B="m-"+(B?K+" "+B:K))}if(!g||H!=B){for(;E<j.start;)E=Math.min(j.start,E+5e4),n(E,H);H=B}j.start=j.pos}for(;E<j.pos;){var q=Math.min(j.pos,E+5e4);n(q,H),E=q}}function Va(e,t,r,i){var n=[e.state.modeGen],a={};Ya(e,t.text,e.doc.mode,r,function(j,B){n.push(j,B)},a,i);for(var s=0;s<e.state.overlays.length;++s){var g=e.state.overlays[s],E=1,H=0;Ya(e,t.text,g.mode,!0,function(j,B){for(var G=E;H<j;){var K=n[E];K>j&&n.splice(E,1,j,n[E+1],K),E+=2,H=Math.min(j,K)}if(B)if(g.opaque)n.splice(G,E-G,j,"cm-overlay "+B),E=G+2;else for(;G<E;G+=2){var q=n[G+1];n[G+1]=(q?q+" ":"")+"cm-overlay "+B}},a)}return{styles:n,classes:a.bgClass||a.textClass?a:null}}function Za(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=fe(e,qe(t)),n=Va(e,t,t.text.length>e.options.maxHighlightLength?or(e.doc.mode,i):i);t.stateAfter=i,t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function jn(e,t,r,i){var n=e.doc.mode,a=new ln(t,e.options.tabSize);for(a.start=a.pos=i||0,t==""&&Ga(n,r);!a.eol();)Bn(n,a,r),a.start=a.pos}var Cs={},Ss={};function Qa(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Ss:Cs;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function Ja(e,t){var r=Ee("span",null,null,M?"padding-right: .1px":null),i={pre:Ee("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,splitSpaces:(o||M)&&e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var a=n?t.rest[n-1]:t.line,s;i.pos=0,i.addToken=Ts,zs(e.display.measure)&&(s=Ft(a))&&(i.addToken=Es(i.addToken,s)),i.map=[];var g=t!=e.display.externalMeasured&&qe(a);Ms(a,i,Za(e,a,g)),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=Vn(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=Vn(a.styleClasses.textClass,i.textClass||""))),i.map.length==0&&i.map.push(0,0,i.content.appendChild(Us(e.display.measure))),n==0?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return M&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),lt(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=Vn(i.pre.className,i.textClass||"")),i}function ks(e){var t=Ee("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Ts(e,t,r,i,n,a,s){if(t){var g=e.splitSpaces?t.replace(/ {3,}/g,Ls):t,E=e.cm.state.specialChars,H=!1;if(E.test(t))for(var j=document.createDocumentFragment(),B=0;;){E.lastIndex=B;var G=E.exec(t),K=G?G.index-B:t.length-B;if(K){var q=document.createTextNode(g.slice(B,B+K));o&&d<9?j.appendChild(Ee("span",[q])):j.appendChild(q),e.map.push(e.pos,e.pos+K,q),e.col+=K,e.pos+=K}if(!G)break;if(B+=K+1,G[0]=="	"){var de=e.cm.options.tabSize,be=de-e.col%de,q=j.appendChild(Ee("span",po(be),"cm-tab"));q.setAttribute("role","presentation"),q.setAttribute("cm-text","	"),e.col+=be}else if(G[0]=="\r"||G[0]==`
`){var q=j.appendChild(Ee("span",G[0]=="\r"?"␍":"␤","cm-invalidchar"));q.setAttribute("cm-text",G[0]),e.col+=1}else{var q=e.cm.options.specialCharPlaceholder(G[0]);q.setAttribute("cm-text",G[0]),o&&d<9?j.appendChild(Ee("span",[q])):j.appendChild(q),e.col+=1}e.map.push(e.pos,e.pos+1,q),e.pos++}else{e.col+=t.length;var j=document.createTextNode(g);e.map.push(e.pos,e.pos+t.length,j),o&&d<9&&(H=!0),e.pos+=t.length}if(r||i||n||H||s){var we=r||"";i&&(we+=i),n&&(we+=n);var He=Ee("span",[j],we,s);return a&&(He.title=a),e.content.appendChild(He)}e.content.appendChild(j)}}function Ls(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":" ";return t+=" ",t}function Es(e,t){return function(r,i,n,a,s,g,E){n=n?n+" cm-force-border":"cm-force-border";for(var H=r.pos,j=H+i.length;;){for(var B=0;B<t.length;B++){var G=t[B];if(G.to>H&&G.from<=H)break}if(G.to>=j)return e(r,i,n,a,s,g,E);e(r,i.slice(0,G.to-H),n,a,null,g,E),a=null,i=i.slice(G.to-H),H=G.to}}}function qa(e,t,r,i){var n=!i&&r.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!i&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",r.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t}function Ms(e,t,r){var i=e.markedSpans,n=e.text,a=0;if(!i){for(var E=1;E<r.length;E+=2)t.addToken(t,n.slice(a,a=r[E]),Qa(r[E+1],t.cm.options));return}for(var s=n.length,g=0,E=1,H="",j,B,G=0,K,q,de,be,we;;){if(G==g){K=q=de=be=B="",we=null,G=1/0;for(var He=[],xe=0;xe<i.length;++xe){var Be=i[xe],Te=Be.marker;Te.type=="bookmark"&&Be.from==g&&Te.widgetNode?He.push(Te):Be.from<=g&&(Be.to==null||Be.to>g||Te.collapsed&&Be.to==g&&Be.from==g)?(Be.to!=null&&Be.to!=g&&G>Be.to&&(G=Be.to,q=""),Te.className&&(K+=" "+Te.className),Te.css&&(B=Te.css),Te.startStyle&&Be.from==g&&(de+=" "+Te.startStyle),Te.endStyle&&Be.to==G&&(q+=" "+Te.endStyle),Te.title&&!be&&(be=Te.title),Te.collapsed&&(!we||$a(we.marker,Te)<0)&&(we=Be)):Be.from>g&&G>Be.from&&(G=Be.from)}if(we&&(we.from||0)==g){if(qa(t,(we.to==null?s+1:we.to)-g,we.marker,we.from==null),we.to==null)return;we.to==g&&(we=!1)}if(!we&&He.length)for(var xe=0;xe<He.length;++xe)qa(t,0,He[xe])}if(g>=s)break;for(var Re=Math.min(s,G);;){if(H){var Ge=g+H.length;if(!we){var ot=Ge>Re?H.slice(0,Re-g):H;t.addToken(t,ot,j?j+K:K,de,g+ot.length==G?q:"",be,B)}if(Ge>=Re){H=H.slice(Re-g),g=Re;break}g=Ge,de=""}H=n.slice(a,a=r[E++]),j=Qa(r[E++],t.cm.options)}}}function eo(e,t){return t.from.ch==0&&t.to.ch==0&&Qe(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Un(e,t,r,i){function n(be){return r?r[be]:null}function a(be,we,He){ws(be,we,He,i),kt(be,"change",be,t)}function s(be,we){for(var He=be,xe=[];He<we;++He)xe.push(new Ti(H[He],n(He),i));return xe}var g=t.from,E=t.to,H=t.text,j=Pe(e,g.line),B=Pe(e,E.line),G=Qe(H),K=n(H.length-1),q=E.line-g.line;if(t.full)e.insert(0,s(0,H.length)),e.remove(H.length,e.size-H.length);else if(eo(e,t)){var de=s(0,H.length-1);a(B,B.text,K),q&&e.remove(g.line,q),de.length&&e.insert(g.line,de)}else if(j==B)if(H.length==1)a(j,j.text.slice(0,g.ch)+G+j.text.slice(E.ch),K);else{var de=s(1,H.length-1);de.push(new Ti(G+j.text.slice(E.ch),K,i)),a(j,j.text.slice(0,g.ch)+H[0],n(0)),e.insert(g.line+1,de)}else if(H.length==1)a(j,j.text.slice(0,g.ch)+H[0]+B.text.slice(E.ch),n(0)),e.remove(g.line+1,q);else{a(j,j.text.slice(0,g.ch)+H[0],n(0)),a(B,G+B.text.slice(E.ch),K);var de=s(1,H.length-1);q>1&&e.remove(g.line+1,q-1),e.insert(g.line+1,de)}kt(e,"change",e,t)}function Li(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}Li.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,i=e+t;r<i;++r){var n=this.lines[r];this.height-=n.height,xs(n),kt(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,r){for(var i=e+t;e<i;++e)if(r(this.lines[e]))return!0}};function Ei(e){this.children=e;for(var t=0,r=0,i=0;i<e.length;++i){var n=e[i];t+=n.chunkSize(),r+=n.height,n.parent=this}this.size=t,this.height=r,this.parent=null}Ei.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],n=i.chunkSize();if(e<n){var a=Math.min(t,n-e),s=i.height;if(i.removeInner(e,a),this.height-=s-i.height,n==a&&(this.children.splice(r--,1),i.parent=null),(t-=a)==0)break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Li))){var g=[];this.collapse(g),this.children=[new Li(g)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var i=0;i<this.children.length;++i){var n=this.children[i],a=n.chunkSize();if(e<=a){if(n.insertInner(e,t,r),n.lines&&n.lines.length>50){for(;n.lines.length>50;){var s=n.lines.splice(n.lines.length-25,25),g=new Li(s);n.height-=g.height,this.children.splice(i+1,0,g),g.parent=this}this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Ei(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=mt(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Ei(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var i=0;i<this.children.length;++i){var n=this.children[i],a=n.chunkSize();if(e<a){var s=Math.min(t,a-e);if(n.iterN(e,s,r))return!0;if((t-=s)==0)break;e=0}else e-=a}}};var As=0,Mt=D.Doc=function(e,t,r,i){if(!(this instanceof Mt))return new Mt(e,t,r,i);r==null&&(r=0),Ei.call(this,[new Li([new Ti("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=le(r,0);this.sel=ft(n),this.history=new pn(null),this.id=++As,this.modeOption=t,this.lineSep=i,typeof e=="string"&&(e=this.splitLines(e)),Un(this,{from:n,to:n,text:e}),st(this,ft(n),tr)};Mt.prototype=go(Ei.prototype,{constructor:Mt,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,i=0;i<t.length;++i)r+=t[i].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=zn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:wt(function(e){var t=le(this.first,0),r=this.first+this.size-1;Xr(this,{from:t,to:le(r,Pe(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),st(this,ft(t))}),replaceRange:function(e,t,r,i){t=Ie(this,t),r=r?Ie(this,r):t,Gr(this,e,t,r,i)},getRange:function(e,t,r){var i=Or(this,Ie(this,e),Ie(this,t));return r===!1?i:i.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Vt(this,e))return Pe(this,e)},getLineNumber:function(e){return qe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Pe(this,e)),jt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ie(this,e)},getCursor:function(e){var t=this.sel.primary(),r;return e==null||e=="head"?r=t.head:e=="anchor"?r=t.anchor:e=="end"||e=="to"||e===!1?r=t.to():r=t.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:wt(function(e,t,r){Ui(this,Ie(this,typeof e=="number"?le(e,t||0):e),null,r)}),setSelection:wt(function(e,t,r){Ui(this,Ie(this,e),Ie(this,t||e),r)}),extendSelection:wt(function(e,t,r){yr(this,Ie(this,e),t&&Ie(this,t),r)}),extendSelections:wt(function(e,t){fi(this,ui(this,e))}),extendSelectionsBy:wt(function(e,t){fi(this,wn(this.sel.ranges,e),t)}),setSelections:wt(function(e,t,r){if(e.length){for(var i=0,n=[];i<e.length;i++)n[i]=new Ye(Ie(this,e[i].anchor),Ie(this,e[i].head));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),st(this,vt(n,t),r)}}),addSelection:wt(function(e,t,r){var i=this.sel.ranges.slice(0);i.push(new Ye(Ie(this,e),Ie(this,t||e))),st(this,vt(i,i.length-1),r)}),getSelection:function(e){for(var t=this.sel.ranges,r,i=0;i<t.length;i++){var n=Or(this,t[i].from(),t[i].to());r=r?r.concat(n):n}return e===!1?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,i=0;i<r.length;i++){var n=Or(this,r[i].from(),r[i].to());e!==!1&&(n=n.join(e||this.lineSeparator())),t[i]=n}return t},replaceSelection:function(e,t,r){for(var i=[],n=0;n<this.sel.ranges.length;n++)i[n]=e;this.replaceSelections(i,t,r||"+input")},replaceSelections:wt(function(e,t,r){for(var i=[],n=this.sel,a=0;a<n.ranges.length;a++){var s=n.ranges[a];i[a]={from:s.from(),to:s.to(),text:this.splitLines(e[a]),origin:r}}for(var g=t&&t!="end"&&es(this,i,t),a=i.length-1;a>=0;a--)Xr(this,i[a]);g?_r(this,g):this.cm&&Kr(this.cm)}),undo:wt(function(){tn(this,"undo")}),redo:wt(function(){tn(this,"redo")}),undoSelection:wt(function(){tn(this,"undo",!0)}),redoSelection:wt(function(){tn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new pn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Jr(this.history.done),undone:Jr(this.history.undone)}},setHistory:function(e){var t=this.history=new pn(this.history.maxGeneration);t.done=Jr(e.done.slice(0),null,!0),t.undone=Jr(e.undone.slice(0),null,!0)},addLineClass:wt(function(e,t,r){return an(this,e,t=="gutter"?"gutter":"class",function(i){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!i[n])i[n]=r;else{if(Ii(r).test(i[n]))return!1;i[n]+=" "+r}return!0})}),removeLineClass:wt(function(e,t,r){return an(this,e,t=="gutter"?"gutter":"class",function(i){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",a=i[n];if(a)if(r==null)i[n]=null;else{var s=a.match(Ii(r));if(!s)return!1;var g=s.index+s[0].length;i[n]=a.slice(0,s.index)+(!s.index||g==a.length?"":" ")+a.slice(g)||null}else return!1;return!0})}),addLineWidget:wt(function(e,t,r){return bs(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Qr(this,Ie(this,e),Ie(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=Ie(this,e),Qr(this,e,e,r,"bookmark")},findMarksAt:function(e){e=Ie(this,e);var t=[],r=Pe(this,e.line).markedSpans;if(r)for(var i=0;i<r.length;++i){var n=r[i];(n.from==null||n.from<=e.ch)&&(n.to==null||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,r){e=Ie(this,e),t=Ie(this,t);var i=[],n=e.line;return this.iter(e.line,t.line+1,function(a){var s=a.markedSpans;if(s)for(var g=0;g<s.length;g++){var E=s[g];!(n==e.line&&e.ch>E.to||E.from==null&&n!=e.line||n==t.line&&E.from>t.ch)&&(!r||r(E.marker))&&i.push(E.marker.parent||E.marker)}++n}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var i=0;i<r.length;++i)r[i].from!=null&&e.push(r[i].marker)}),e},posFromIndex:function(e){var t,r=this.first;return this.iter(function(i){var n=i.text.length+1;if(n>e)return t=e,!0;e-=n,++r}),Ie(this,le(r,t))},indexFromPos:function(e){e=Ie(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(r){t+=r.text.length+1}),t)},copy:function(e){var t=new Mt(zn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<r&&(r=e.to);var i=new Mt(zn(this,t,r),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],cs(i,Ha(this)),i},unlinkDoc:function(e){if(e instanceof D&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),hs(Ha(this));break}}if(e.history==this.history){var i=[e.id];Rr(e,function(n){i.push(n.id)},!0),e.history=new pn(null),e.history.done=Jr(this.history.done,i),e.history.undone=Jr(this.history.undone,i)}},iterLinkedDocs:function(e){Rr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Xs(e)},lineSeparator:function(){return this.lineSep||`
`}}),Mt.prototype.eachLine=Mt.prototype.iter;var Ps="iter insert remove copy getEditor constructor".split(" ");for(var vn in Mt.prototype)Mt.prototype.hasOwnProperty(vn)&&mt(Ps,vn)<0&&(D.prototype[vn]=function(e){return function(){return e.apply(this.doc,arguments)}}(Mt.prototype[vn]));qr(Mt);function Rr(e,t,r){function i(n,a,s){if(n.linked)for(var g=0;g<n.linked.length;++g){var E=n.linked[g];if(E.doc!=a){var H=s&&E.sharedHist;r&&!H||(t(E.doc,H),i(E.doc,n,H))}}}i(e,null,!0)}function to(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ee(e),W(e),e.options.lineWrapping||ye(e),e.options.mode=t.modeOption,St(e)}function Pe(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var i=0;;++i){var n=r.children[i],a=n.chunkSize();if(t<a){r=n;break}t-=a}return r.lines[t]}function Or(e,t,r){var i=[],n=t.line;return e.iter(t.line,r.line+1,function(a){var s=a.text;n==r.line&&(s=s.slice(0,r.ch)),n==t.line&&(s=s.slice(t.ch)),i.push(s),++n}),i}function zn(e,t,r){var i=[];return e.iter(t,r,function(n){i.push(n.text)}),i}function Ut(e,t){var r=t-e.height;if(r)for(var i=e;i;i=i.parent)i.height+=r}function qe(e){if(e.parent==null)return null;for(var t=e.parent,r=mt(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var n=0;i.children[n]!=t;++n)r+=i.children[n].chunkSize();return r+t.first}function Dr(e,t){var r=e.first;e:do{for(var i=0;i<e.children.length;++i){var n=e.children[i],a=n.height;if(t<a){e=n;continue e}t-=a,r+=n.chunkSize()}return r}while(!e.lines);for(var i=0;i<e.lines.length;++i){var s=e.lines[i],g=s.height;if(t<g)break;t-=g}return r+i}function er(e){e=jt(e);for(var t=0,r=e.parent,i=0;i<r.lines.length;++i){var n=r.lines[i];if(n==e)break;t+=n.height}for(var a=r.parent;a;r=a,a=r.parent)for(var i=0;i<a.children.length;++i){var s=a.children[i];if(s==r)break;t+=s.height}return t}function Ft(e){var t=e.order;return t==null&&(t=e.order=Qs(e.text)),t}function pn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Xn(e,t){var r={from:ai(t.from),to:Mr(t),text:Or(e,t.from,t.to)};return no(e,r,t.from.line,t.to.line+1),Rr(e,function(i){no(i,r,t.from.line,t.to.line+1)},!0),r}function ro(e){for(;e.length;){var t=Qe(e);if(t.ranges)e.pop();else break}}function Rs(e,t){if(t)return ro(e.done),Qe(e.done);if(e.done.length&&!Qe(e.done).ranges)return Qe(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Qe(e.done)}function io(e,t,r,i){var n=e.history;n.undone.length=0;var a=+new Date,s;if((n.lastOp==i||n.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&n.lastModTime>a-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))&&(s=Rs(n,n.lastOp==i))){var g=Qe(s.changes);_e(t.from,t.to)==0&&_e(t.from,g.to)==0?g.to=Mr(t):s.changes.push(Xn(e,t))}else{var E=Qe(n.done);for((!E||!E.ranges)&&gn(e.sel,n.done),s={changes:[Xn(e,t)],generation:n.generation},n.done.push(s);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(r),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=a,n.lastOp=n.lastSelOp=i,n.lastOrigin=n.lastSelOrigin=t.origin,g||lt(e,"historyAdded")}function Os(e,t,r,i){var n=t.charAt(0);return n=="*"||n=="+"&&r.ranges.length==i.ranges.length&&r.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ds(e,t,r,i){var n=e.history,a=i&&i.origin;r==n.lastSelOp||a&&n.lastSelOrigin==a&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==a||Os(e,a,Qe(n.done),t))?n.done[n.done.length-1]=t:gn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=a,n.lastSelOp=r,i&&i.clearRedo!==!1&&ro(n.undone)}function gn(e,t){var r=Qe(t);r&&r.ranges&&r.equals(e)||t.push(e)}function no(e,t,r,i){var n=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,i),function(s){s.markedSpans&&((n||(n=t["spans_"+e.id]={}))[a]=s.markedSpans),++a})}function Hs(e){if(!e)return null;for(var t=0,r;t<e.length;++t)e[t].marker.explicitlyCleared?r||(r=e.slice(0,t)):r&&r.push(e[t]);return r?r.length?r:null:e}function Is(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var i=0,n=[];i<t.text.length;++i)n.push(Hs(r[i]));return n}function Jr(e,t,r){for(var i=0,n=[];i<e.length;++i){var a=e[i];if(a.ranges){n.push(r?At.prototype.deepCopy.call(a):a);continue}var s=a.changes,g=[];n.push({changes:g});for(var E=0;E<s.length;++E){var H=s[E],j;if(g.push({from:H.from,to:H.to,text:H.text}),t)for(var B in H)(j=B.match(/^spans_(\d+)$/))&&mt(t,Number(j[1]))>-1&&(Qe(g)[B]=H[B],delete H[B])}}return n}function ao(e,t,r,i){r<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function oo(e,t,r,i){for(var n=0;n<e.length;++n){var a=e[n],s=!0;if(a.ranges){a.copied||(a=e[n]=a.deepCopy(),a.copied=!0);for(var g=0;g<a.ranges.length;g++)ao(a.ranges[g].anchor,t,r,i),ao(a.ranges[g].head,t,r,i);continue}for(var g=0;g<a.changes.length;++g){var E=a.changes[g];if(r<E.from.line)E.from=le(E.from.line+i,E.from.ch),E.to=le(E.to.line+i,E.to.ch);else if(t<=E.to.line){s=!1;break}}s||(e.splice(0,n+1),n=0)}}function so(e,t){var r=t.from.line,i=t.to.line,n=t.text.length-(i-r)-1;oo(e.done,r,i,n),oo(e.undone,r,i,n)}var xt=D.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Ns=D.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function Gn(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}var mn=D.e_stop=function(e){xt(e),Ns(e)};function Mi(e){return e.target||e.srcElement}function lo(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),l&&e.ctrlKey&&t==1&&(t=3),t}var De=D.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var i=e._handlers||(e._handlers={}),n=i[t]||(i[t]=[]);n.push(r)}},uo=[];function yn(e,t,r){var i=e._handlers&&e._handlers[t];return r?i&&i.length>0?i.slice():uo:i||uo}var zt=D.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else for(var i=yn(e,t,!1),n=0;n<i.length;++n)if(i[n]==r){i.splice(n,1);break}},lt=D.signal=function(e,t){var r=yn(e,t,!0);if(r.length)for(var i=Array.prototype.slice.call(arguments,2),n=0;n<r.length;++n)r[n].apply(null,i)},Ai=null;function kt(e,t){var r=yn(e,t,!1);if(!r.length)return;var i=Array.prototype.slice.call(arguments,2),n;Br?n=Br.delayedCallbacks:Ai?n=Ai:(n=Ai=[],setTimeout(Fs,0));function a(g){return function(){g.apply(null,i)}}for(var s=0;s<r.length;++s)n.push(a(r[s]))}function Fs(){var e=Ai;Ai=null;for(var t=0;t<e.length;++t)e[t]()}function Ht(e,t,r){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),lt(e,r||t.type,e,t),Gn(t)||t.codemirrorIgnore}function fo(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)mt(r,t[i])==-1&&r.push(t[i])}function It(e,t){return yn(e,t).length>0}function qr(e){e.prototype.on=function(t,r){De(this,t,r)},e.prototype.off=function(t,r){zt(this,t,r)}}var co=30,ho=D.Pass={toString:function(){return"CodeMirror.Pass"}},tr={scroll:!1},Kn={origin:"*mouse"},Pi={origin:"+move"};function Ri(){this.id=null}Ri.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var _t=D.countColumn=function(e,t,r,i,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var a=i||0,s=n||0;;){var g=e.indexOf("	",a);if(g<0||g>=t)return s+(t-a);s+=g-a,s+=r-s%r,a=g+1}},vo=D.findColumn=function(e,t,r){for(var i=0,n=0;;){var a=e.indexOf("	",i);a==-1&&(a=e.length);var s=a-i;if(a==e.length||n+s>=t)return i+Math.min(s,t-n);if(n+=a-i,n+=r-n%r,i=a+1,n>=t)return i}},bn=[""];function po(e){for(;bn.length<=e;)bn.push(Qe(bn)+" ");return bn[e]}function Qe(e){return e[e.length-1]}var ei=function(e){e.select()};v?ei=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(ei=function(e){try{e.select()}catch{}});function mt(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function wn(e,t){for(var r=[],i=0;i<e.length;i++)r[i]=t(e[i],i);return r}function Oi(){}function go(e,t){var r;return Object.create?r=Object.create(e):(Oi.prototype=e,r=new Oi),t&&$t(t,r),r}function $t(e,t,r){t||(t={});for(var i in e)e.hasOwnProperty(i)&&(r!==!1||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function Di(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}var _s=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,mo=D.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||_s.test(e))};function xn(e,t){return t?t.source.indexOf("\\w")>-1&&mo(e)?!0:t.test(e):mo(e)}function yo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var $s=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Hi(e){return e.charCodeAt(0)>=768&&$s.test(e)}function Ee(e,t,r,i){var n=document.createElement(e);if(r&&(n.className=r),i&&(n.style.cssText=i),typeof t=="string")n.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)n.appendChild(t[a]);return n}var lr;document.createRange?lr=function(e,t,r,i){var n=document.createRange();return n.setEnd(i||e,r),n.setStart(e,t),n}:lr=function(e,t,r){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",t),i};function Hr(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Ot(e,t){return Hr(e).appendChild(t)}var Yn=D.contains=function(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)};function Xt(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}o&&d<11&&(Xt=function(){try{return document.activeElement}catch{return document.body}});function Ii(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Ni=D.rmClass=function(e,t){var r=e.className,i=Ii(t).exec(r);if(i){var n=r.slice(i.index+i[0].length);e.className=r.slice(0,i.index)+(n?i[1]+n:"")}},Fi=D.addClass=function(e,t){var r=e.className;Ii(t).test(r)||(e.className+=(r?" ":"")+t)};function Vn(e,t){for(var r=e.split(" "),i=0;i<r.length;i++)r[i]&&!Ii(r[i]).test(t)&&(t+=" "+r[i]);return t}function bo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&e(i)}}var wo=!1;function Ws(){wo||(Bs(),wo=!0)}function Bs(){var e;De(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,bo(Bo)},100))}),De(window,"blur",function(){bo(gi)})}var js=function(){if(o&&d<9)return!1;var e=Ee("div");return"draggable"in e||"dragDrop"in e}(),Zn;function Us(e){if(Zn==null){var t=Ee("span","​");Ot(e,Ee("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(Zn=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&d<8))}var r=Zn?Ee("span","​"):Ee("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var Qn;function zs(e){if(Qn!=null)return Qn;var t=Ot(e,document.createTextNode("AخA")),r=lr(t,0,1).getBoundingClientRect();if(!r||r.left==r.right)return!1;var i=lr(t,1,2).getBoundingClientRect();return Qn=i.right-r.right<3}var Xs=D.splitLines=`

b`.split(/\n/).length!=3?function(e){for(var t=0,r=[],i=e.length;t<=i;){var n=e.indexOf(`
`,t);n==-1&&(n=e.length);var a=e.slice(t,e.charAt(n-1)=="\r"?n-1:n),s=a.indexOf("\r");s!=-1?(r.push(a.slice(0,s)),t+=s+1):(r.push(a),t=n+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Gs=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},xo=function(){var e=Ee("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Jn=null;function Ks(e){if(Jn!=null)return Jn;var t=Ot(e,Ee("span","x")),r=t.getBoundingClientRect(),i=lr(t,0,1).getBoundingClientRect();return Jn=Math.abs(r.left-i.left)>1}var Ir=D.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var e=0;e<10;e++)Ir[e+48]=Ir[e+96]=String(e);for(var e=65;e<=90;e++)Ir[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Ir[e+111]=Ir[e+63235]="F"+e})();function Ys(e,t,r,i){if(!e)return i(t,r,"ltr");for(var n=!1,a=0;a<e.length;++a){var s=e[a];(s.from<r&&s.to>t||t==r&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,r),s.level==1?"rtl":"ltr"),n=!0)}n||i(t,r,"ltr")}function qn(e){return e.level%2?e.to:e.from}function ea(e){return e.level%2?e.from:e.to}function Cn(e){var t=Ft(e);return t?qn(t[0]):0}function Sn(e){var t=Ft(e);return t?ea(Qe(t)):e.text.length}function Co(e,t){var r=Pe(e.doc,t),i=jt(r);i!=r&&(t=qe(i));var n=Ft(i),a=n?n[0].level%2?Sn(i):Cn(i):0;return le(t,a)}function Vs(e,t){for(var r,i=Pe(e.doc,t);r=Si(i);)i=r.find(1,!0).line,t=null;var n=Ft(i),a=n?n[0].level%2?Cn(i):Sn(i):i.text.length;return le(t??qe(i),a)}function So(e,t){var r=Co(e,t.line),i=Pe(e.doc,r.line),n=Ft(i);if(!n||n[0].level==0){var a=Math.max(0,i.text.search(/\S/)),s=t.line==r.line&&t.ch<=a&&t.ch;return le(r.line,s?0:a)}return r}function Zs(e,t,r){var i=e[0].level;return t==i?!0:r==i?!1:t<r}var _i;function kn(e,t){_i=null;for(var r=0,i;r<e.length;++r){var n=e[r];if(n.from<t&&n.to>t)return r;if(n.from==t||n.to==t)if(i==null)i=r;else return Zs(e,n.level,e[i].level)?(n.from!=n.to&&(_i=i),r):(n.from!=n.to&&(_i=r),i)}return i}function ta(e,t,r,i){if(!i)return t+r;do t+=r;while(t>0&&Hi(e.text.charAt(t)));return t}function ra(e,t,r,i){var n=Ft(e);if(!n)return ko(e,t,r,i);for(var a=kn(n,t),s=n[a],g=ta(e,t,s.level%2?-r:r,i);;){if(g>s.from&&g<s.to)return g;if(g==s.from||g==s.to)return kn(n,g)==a?g:(s=n[a+=r],r>0==s.level%2?s.to:s.from);if(s=n[a+=r],!s)return null;r>0==s.level%2?g=ta(e,s.to,-1,i):g=ta(e,s.from,1,i)}}function ko(e,t,r,i){var n=t+r;if(i)for(;n>0&&Hi(e.text.charAt(n));)n+=r;return n<0||n>e.text.length?null:n}var Qs=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function r(j){return j<=247?e.charAt(j):1424<=j&&j<=1524?"R":1536<=j&&j<=1773?t.charAt(j-1536):1774<=j&&j<=2220?"r":8192<=j&&j<=8203?"w":j==8204?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,g=/[1n]/,E="L";function H(j,B,G){this.level=j,this.from=B,this.to=G}return function(j){if(!i.test(j))return!1;for(var B=j.length,G=[],K=0,q;K<B;++K)G.push(q=r(j.charCodeAt(K)));for(var K=0,de=E;K<B;++K){var q=G[K];q=="m"?G[K]=de:de=q}for(var K=0,be=E;K<B;++K){var q=G[K];q=="1"&&be=="r"?G[K]="n":a.test(q)&&(be=q,q=="r"&&(G[K]="R"))}for(var K=1,de=G[0];K<B-1;++K){var q=G[K];q=="+"&&de=="1"&&G[K+1]=="1"?G[K]="1":q==","&&de==G[K+1]&&(de=="1"||de=="n")&&(G[K]=de),de=q}for(var K=0;K<B;++K){var q=G[K];if(q==",")G[K]="N";else if(q=="%"){for(var we=K+1;we<B&&G[we]=="%";++we);for(var He=K&&G[K-1]=="!"||we<B&&G[we]=="1"?"1":"N",xe=K;xe<we;++xe)G[xe]=He;K=we-1}}for(var K=0,be=E;K<B;++K){var q=G[K];be=="L"&&q=="1"?G[K]="L":a.test(q)&&(be=q)}for(var K=0;K<B;++K)if(n.test(G[K])){for(var we=K+1;we<B&&n.test(G[we]);++we);for(var Be=(K?G[K-1]:E)=="L",Te=(we<B?G[we]:E)=="L",He=Be||Te?"L":"R",xe=K;xe<we;++xe)G[xe]=He;K=we-1}for(var Re=[],Ge,K=0;K<B;)if(s.test(G[K])){var ot=K;for(++K;K<B&&s.test(G[K]);++K);Re.push(new H(0,ot,K))}else{var yt=K,ht=Re.length;for(++K;K<B&&G[K]!="L";++K);for(var xe=yt;xe<K;)if(g.test(G[xe])){yt<xe&&Re.splice(ht,0,new H(1,yt,xe));var Gt=xe;for(++xe;xe<K&&g.test(G[xe]);++xe);Re.splice(ht,0,new H(2,Gt,xe)),yt=xe}else++xe;yt<K&&Re.splice(ht,0,new H(1,yt,K))}return Re[0].level==1&&(Ge=j.match(/^\s+/))&&(Re[0].from=Ge[0].length,Re.unshift(new H(0,0,Ge[0].length))),Qe(Re).level==1&&(Ge=j.match(/\s+$/))&&(Qe(Re).to-=Ge[0].length,Re.push(new H(0,B-Ge[0].length,B))),Re[0].level==2&&Re.unshift(new H(1,Re[0].to,Re[0].to)),Re[0].level!=Qe(Re).level&&Re.push(new H(Re[0].level,B,B)),Re}}();return D.version="5.8.0",D})},{}],31:[function(c,F,I){(function(f){f(typeof I=="object"&&typeof F=="object"?c("../../lib/codemirror"):CodeMirror)})(function(f){f.defineMode("clike",function(l,h){var x=l.indentUnit,u=h.statementIndentUnit||x,P=h.dontAlignCalls,b=h.keywords||{},O=h.types||{},D=h.builtin||{},$=h.blockKeywords||{},W=h.defKeywords||{},V=h.atoms||{},Q=h.hooks||{},ue=h.multiLineStrings,ee=h.indentStatements!==!1,ae=h.indentSwitch!==!1,he=h.namespaceSeparator,me=h.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,ie=h.isNumberChar||/\d/,re=h.isOperatorChar||/[+\-*&%=<>!?|\/]/,ye=h.endStatement||/^[;:,]$/,te,Le;function ve(U,_){var N=U.next();if(Q[N]){var X=Q[N](U,_);if(X!==!1)return X}if(N=='"'||N=="'")return _.tokenize=ge(N),_.tokenize(U,_);if(me.test(N))return te=N,null;if(ie.test(N))return U.eatWhile(/[\w\.]/),"number";if(N=="/"){if(U.eat("*"))return _.tokenize=pe,pe(U,_);if(U.eat("/"))return U.skipToEnd(),"comment"}if(re.test(N))return U.eatWhile(re),"operator";if(U.eatWhile(/[\w\$_\xa1-\uffff]/),he)for(;U.match(he);)U.eatWhile(/[\w\$_\xa1-\uffff]/);var z=U.current();return k(b,z)?(k($,z)&&(te="newstatement"),k(W,z)&&(Le=!0),"keyword"):k(O,z)?"variable-3":k(D,z)?(k($,z)&&(te="newstatement"),"builtin"):k(V,z)?"atom":"variable"}function ge(U){return function(_,N){for(var X=!1,z,oe=!1;(z=_.next())!=null;){if(z==U&&!X){oe=!0;break}X=!X&&z=="\\"}return(oe||!(X||ue))&&(N.tokenize=null),"string"}}function pe(U,_){for(var N=!1,X;X=U.next();){if(X=="/"&&N){_.tokenize=null;break}N=X=="*"}return"comment"}function Oe(U,_,N,X,z){this.indented=U,this.column=_,this.type=N,this.align=X,this.prev=z}function ze(U){return U=="statement"||U=="switchstatement"||U=="namespace"}function Ue(U,_,N){var X=U.indented;return U.context&&ze(U.context.type)&&!ze(N)&&(X=U.context.indented),U.context=new Oe(X,_,N,null,U.context)}function Je(U){var _=U.context.type;return(_==")"||_=="]"||_=="}")&&(U.indented=U.context.indented),U.context=U.context.prev}function ut(U,_){if(_.prevToken=="variable"||_.prevToken=="variable-3"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(U.string.slice(0,U.start)))return!0}function Z(U){for(;;){if(!U||U.type=="top")return!0;if(U.type=="}"&&U.prev.type!="namespace")return!1;U=U.prev}}return{startState:function(U){return{tokenize:null,context:new Oe((U||0)-x,0,"top",!1),indented:0,startOfLine:!0,prevToken:null}},token:function(U,_){var N=_.context;if(U.sol()&&(N.align==null&&(N.align=!1),_.indented=U.indentation(),_.startOfLine=!0),U.eatSpace())return null;te=Le=null;var X=(_.tokenize||ve)(U,_);if(X=="comment"||X=="meta")return X;if(N.align==null&&(N.align=!0),ye.test(te))for(;ze(_.context.type);)Je(_);else if(te=="{")Ue(_,U.column(),"}");else if(te=="[")Ue(_,U.column(),"]");else if(te=="(")Ue(_,U.column(),")");else if(te=="}"){for(;ze(N.type);)N=Je(_);for(N.type=="}"&&(N=Je(_));ze(N.type);)N=Je(_)}else if(te==N.type)Je(_);else if(ee&&((N.type=="}"||N.type=="top")&&te!=";"||ze(N.type)&&te=="newstatement")){var z="statement";te=="newstatement"&&ae&&U.current()=="switch"?z="switchstatement":X=="keyword"&&U.current()=="namespace"&&(z="namespace"),Ue(_,U.column(),z)}if(X=="variable"&&(_.prevToken=="def"||h.typeFirstDefinitions&&ut(U,_)&&Z(_.context)&&U.match(/^\s*\(/,!1))&&(X="def"),Q.token){var oe=Q.token(U,_,X);oe!==void 0&&(X=oe)}return X=="def"&&h.styleDefs===!1&&(X="variable"),_.startOfLine=!1,_.prevToken=Le?"def":X||te,X},indent:function(U,_){if(U.tokenize!=ve&&U.tokenize!=null)return f.Pass;var N=U.context,X=_&&_.charAt(0);if(ze(N.type)&&X=="}"&&(N=N.prev),Q.indent){var z=Q.indent(U,N,_);if(typeof z=="number")return z}var oe=X==N.type,ne=N.prev&&N.prev.type=="switchstatement";return ze(N.type)?N.indented+(X=="{"?0:u):N.align&&(!P||N.type!=")")?N.column+(oe?0:1):N.type==")"&&!oe?N.indented+u:N.indented+(oe?0:x)+(!oe&&ne&&!/^(?:case|default)\b/.test(_)?x:0)},electricInput:ae?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});function C(l){for(var h={},x=l.split(" "),u=0;u<x.length;++u)h[x[u]]=!0;return h}function k(l,h){return typeof l=="function"?l(h):l.propertyIsEnumerable(h)}var T="auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile",y="int long char short double float unsigned signed void size_t ptrdiff_t";function o(l,h){if(!h.startOfLine)return!1;for(;;)if(l.skipTo("\\")){if(l.next(),l.eol()){h.tokenize=o;break}}else{l.skipToEnd(),h.tokenize=null;break}return"meta"}function d(l,h){return h.prevToken=="variable-3"?"variable-3":!1}function M(l){return l.eatWhile(/[\w\.']/),"number"}function m(l,h){if(l.backUp(1),l.match(/(R|u8R|uR|UR|LR)/)){var x=l.match(/"([^\s\\()]{0,16})\(/);return x?(h.cpp11RawStringDelim=x[1],h.tokenize=L,L(l,h)):!1}return l.match(/(u8|u|U|L)/)?l.match(/["']/,!1)?"string":!1:(l.next(),!1)}function p(l){var h=/(\w+)::(\w+)$/.exec(l);return h&&h[1]==h[2]}function A(l,h){for(var x;(x=l.next())!=null;)if(x=='"'&&!l.eat('"')){h.tokenize=null;break}return"string"}function L(l,h){var x=h.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),u=l.match(new RegExp(".*?\\)"+x+'"'));return u?h.tokenize=null:l.skipToEnd(),"string"}function S(l,h){typeof l=="string"&&(l=[l]);var x=[];function u(b){if(b)for(var O in b)b.hasOwnProperty(O)&&x.push(O)}u(h.keywords),u(h.types),u(h.builtin),u(h.atoms),x.length&&(h.helperType=l[0],f.registerHelper("hintWords",l[0],x));for(var P=0;P<l.length;++P)f.defineMIME(l[P],h)}S(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:C(T),types:C(y+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:C("case do else for if switch while struct"),defKeywords:C("struct"),typeFirstDefinitions:!0,atoms:C("null true false"),hooks:{"#":o,"*":d},modeProps:{fold:["brace","include"]}}),S(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:C(T+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:C(y+" bool wchar_t"),blockKeywords:C("catch class do else finally for if struct switch try while"),defKeywords:C("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:C("true false null"),hooks:{"#":o,"*":d,u:m,U:m,L:m,R:m,0:M,1:M,2:M,3:M,4:M,5:M,6:M,7:M,8:M,9:M,token:function(l,h,x){if(x=="variable"&&l.peek()=="("&&(h.prevToken==";"||h.prevToken==null||h.prevToken=="}")&&p(l.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),S("text/x-java",{name:"clike",keywords:C("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:C("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:C("catch class do else finally for if switch try while"),defKeywords:C("class interface package enum"),typeFirstDefinitions:!0,atoms:C("true false null"),endStatement:/^[;:]$/,hooks:{"@":function(l){return l.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),S("text/x-csharp",{name:"clike",keywords:C("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:C("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:C("catch class do else finally for foreach if struct switch try while"),defKeywords:C("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:C("true false null"),hooks:{"@":function(l,h){return l.eat('"')?(h.tokenize=A,A(l,h)):(l.eatWhile(/[\w\$_]/),"meta")}}});function R(l,h){for(var x=!1;!l.eol();){if(!x&&l.match('"""')){h.tokenize=null;break}x=l.next()=="\\"&&!x}return"string"}S("text/x-scala",{name:"clike",keywords:C("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:C("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:C("catch class do else finally for forSome if match switch try while"),defKeywords:C("class def object package trait type val var"),atoms:C("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(l){return l.eatWhile(/[\w\$_]/),"meta"},'"':function(l,h){return l.match('""')?(h.tokenize=R,h.tokenize(l,h)):!1},"'":function(l){return l.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"}},modeProps:{closeBrackets:{triples:'"'}}}),S("text/x-kotlin",{name:"clike",keywords:C("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as?file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline"),types:C("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:C("catch class do else finally for if where try while enum"),defKeywords:C("class val var object package interface fun"),atoms:C("true false null this"),modeProps:{closeBrackets:{triples:'"'}}}),S(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:C("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:C("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:C("for while do if else struct"),builtin:C("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:C("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":o},modeProps:{fold:["brace","include"]}}),S("text/x-nesc",{name:"clike",keywords:C(T+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:C(y),blockKeywords:C("case do else for if switch while struct"),atoms:C("null true false"),hooks:{"#":o},modeProps:{fold:["brace","include"]}}),S("text/x-objectivec",{name:"clike",keywords:C(T+"inline restrict _Bool _Complex _Imaginery BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:C(y),atoms:C("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(l){return l.eatWhile(/[\w\$]/),"keyword"},"#":o,indent:function(l,h,x){if(h.type=="statement"&&/^@\w/.test(x))return h.indented}},modeProps:{fold:"brace"}}),S("text/x-squirrel",{name:"clike",keywords:C("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:C(y),blockKeywords:C("case catch class else for foreach if switch try while"),defKeywords:C("function local class"),typeFirstDefinitions:!0,atoms:C("true false null"),hooks:{"#":o},modeProps:{fold:["brace","include"]}});var v=null;function w(l){return function(h,x){for(var u=!1,P,b=!1;!h.eol();){if(!u&&h.match('"')&&(l=="single"||h.match('""'))){b=!0;break}if(!u&&h.match("``")){v=w(l),b=!0;break}P=h.next(),u=l=="single"&&!u&&P=="\\"}return b&&(x.tokenize=null),"string"}}S("text/x-ceylon",{name:"clike",keywords:C("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(l){var h=l.charAt(0);return h===h.toUpperCase()&&h!==h.toLowerCase()},blockKeywords:C("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:C("class dynamic function interface module object package value"),builtin:C("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,isNumberChar:/[\d#$]/,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:C("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(l){return l.eatWhile(/[\w\$_]/),"meta"},'"':function(l,h){return h.tokenize=w(l.match('""')?"triple":"single"),h.tokenize(l,h)},"`":function(l,h){return!v||!l.match("`")?!1:(h.tokenize=v,v=null,h.tokenize(l,h))},"'":function(l){return l.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(l,h,x){if((x=="variable"||x=="variable-3")&&h.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})},{"../../lib/codemirror":30}],32:[function(c,F,I){c("../modules/web.dom.iterable"),c("../modules/es6.string.iterator"),F.exports=c("../modules/core.get-iterator")},{"../modules/core.get-iterator":95,"../modules/es6.string.iterator":104,"../modules/web.dom.iterable":106}],33:[function(c,F,I){c("../../modules/es6.object.assign"),F.exports=c("../../modules/$.core").Object.assign},{"../../modules/$.core":49,"../../modules/es6.object.assign":97}],34:[function(c,F,I){var f=c("../../modules/$");F.exports=function(k,T){return f.create(k,T)}},{"../../modules/$":71}],35:[function(c,F,I){var f=c("../../modules/$");F.exports=function(k,T,y){return f.setDesc(k,T,y)}},{"../../modules/$":71}],36:[function(c,F,I){var f=c("../../modules/$");c("../../modules/es6.object.get-own-property-descriptor"),F.exports=function(k,T){return f.getDesc(k,T)}},{"../../modules/$":71,"../../modules/es6.object.get-own-property-descriptor":98}],37:[function(c,F,I){c("../../modules/es6.object.keys"),F.exports=c("../../modules/$.core").Object.keys},{"../../modules/$.core":49,"../../modules/es6.object.keys":99}],38:[function(c,F,I){c("../../modules/es6.object.set-prototype-of"),F.exports=c("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":49,"../../modules/es6.object.set-prototype-of":100}],39:[function(c,F,I){c("../modules/es6.object.to-string"),c("../modules/es6.string.iterator"),c("../modules/web.dom.iterable"),c("../modules/es6.promise"),F.exports=c("../modules/$.core").Promise},{"../modules/$.core":49,"../modules/es6.object.to-string":101,"../modules/es6.promise":102,"../modules/es6.string.iterator":104,"../modules/web.dom.iterable":106}],40:[function(c,F,I){c("../modules/es6.object.to-string"),c("../modules/es6.string.iterator"),c("../modules/web.dom.iterable"),c("../modules/es6.set"),c("../modules/es7.set.to-json"),F.exports=c("../modules/$.core").Set},{"../modules/$.core":49,"../modules/es6.object.to-string":101,"../modules/es6.set":103,"../modules/es6.string.iterator":104,"../modules/es7.set.to-json":105,"../modules/web.dom.iterable":106}],41:[function(c,F,I){F.exports=function(f){if(typeof f!="function")throw TypeError(f+" is not a function!");return f}},{}],42:[function(c,F,I){F.exports=function(){}},{}],43:[function(c,F,I){var f=c("./$.is-object");F.exports=function(C){if(!f(C))throw TypeError(C+" is not an object!");return C}},{"./$.is-object":64}],44:[function(c,F,I){var f=c("./$.cof"),C=c("./$.wks")("toStringTag"),k=f(function(){return arguments}())=="Arguments";F.exports=function(T){var y,o,d;return T===void 0?"Undefined":T===null?"Null":typeof(o=(y=Object(T))[C])=="string"?o:k?f(y):(d=f(y))=="Object"&&typeof y.callee=="function"?"Arguments":d}},{"./$.cof":45,"./$.wks":93}],45:[function(c,F,I){var f={}.toString;F.exports=function(C){return f.call(C).slice(8,-1)}},{}],46:[function(c,F,I){var f=c("./$"),C=c("./$.hide"),k=c("./$.redefine-all"),T=c("./$.ctx"),y=c("./$.strict-new"),o=c("./$.defined"),d=c("./$.for-of"),M=c("./$.iter-define"),m=c("./$.iter-step"),p=c("./$.uid")("id"),A=c("./$.has"),L=c("./$.is-object"),S=c("./$.set-species"),R=c("./$.descriptors"),v=Object.isExtensible||L,w=R?"_s":"size",l=0,h=function(u,P){if(!L(u))return typeof u=="symbol"?u:(typeof u=="string"?"S":"P")+u;if(!A(u,p)){if(!v(u))return"F";if(!P)return"E";C(u,p,++l)}return"O"+u[p]},x=function(u,P){var b=h(P),O;if(b!=="F")return u._i[b];for(O=u._f;O;O=O.n)if(O.k==P)return O};F.exports={getConstructor:function(u,P,b,O){var D=u(function($,W){y($,D,P),$._i=f.create(null),$._f=void 0,$._l=void 0,$[w]=0,W!=null&&d(W,b,$[O],$)});return k(D.prototype,{clear:function(){for(var W=this,V=W._i,Q=W._f;Q;Q=Q.n)Q.r=!0,Q.p&&(Q.p=Q.p.n=void 0),delete V[Q.i];W._f=W._l=void 0,W[w]=0},delete:function($){var W=this,V=x(W,$);if(V){var Q=V.n,ue=V.p;delete W._i[V.i],V.r=!0,ue&&(ue.n=Q),Q&&(Q.p=ue),W._f==V&&(W._f=Q),W._l==V&&(W._l=ue),W[w]--}return!!V},forEach:function(W){for(var V=T(W,arguments.length>1?arguments[1]:void 0,3),Q;Q=Q?Q.n:this._f;)for(V(Q.v,Q.k,this);Q&&Q.r;)Q=Q.p},has:function(W){return!!x(this,W)}}),R&&f.setDesc(D.prototype,"size",{get:function(){return o(this[w])}}),D},def:function(u,P,b){var O=x(u,P),D,$;return O?O.v=b:(u._l=O={i:$=h(P,!0),k:P,v:b,p:D=u._l,n:void 0,r:!1},u._f||(u._f=O),D&&(D.n=O),u[w]++,$!=="F"&&(u._i[$]=O)),u},getEntry:x,setStrong:function(u,P,b){M(u,P,function(O,D){this._t=O,this._k=D,this._l=void 0},function(){for(var O=this,D=O._k,$=O._l;$&&$.r;)$=$.p;return!O._t||!(O._l=$=$?$.n:O._t._f)?(O._t=void 0,m(1)):D=="keys"?m(0,$.k):D=="values"?m(0,$.v):m(0,[$.k,$.v])},b?"entries":"values",!b,!0),S(P)}}},{"./$":71,"./$.ctx":50,"./$.defined":51,"./$.descriptors":52,"./$.for-of":56,"./$.has":58,"./$.hide":59,"./$.is-object":64,"./$.iter-define":67,"./$.iter-step":69,"./$.redefine-all":77,"./$.set-species":81,"./$.strict-new":85,"./$.uid":92}],47:[function(c,F,I){var f=c("./$.for-of"),C=c("./$.classof");F.exports=function(k){return function(){if(C(this)!=k)throw TypeError(k+"#toJSON isn't generic");var y=[];return f(this,!1,y.push,y),y}}},{"./$.classof":44,"./$.for-of":56}],48:[function(c,F,I){var f=c("./$"),C=c("./$.global"),k=c("./$.export"),T=c("./$.fails"),y=c("./$.hide"),o=c("./$.redefine-all"),d=c("./$.for-of"),M=c("./$.strict-new"),m=c("./$.is-object"),p=c("./$.set-to-string-tag"),A=c("./$.descriptors");F.exports=function(L,S,R,v,w,l){var h=C[L],x=h,u=w?"set":"add",P=x&&x.prototype,b={};return!A||typeof x!="function"||!(l||P.forEach&&!T(function(){new x().entries().next()}))?(x=v.getConstructor(S,L,w,u),o(x.prototype,R)):(x=S(function(O,D){M(O,x,L),O._c=new h,D!=null&&d(D,w,O[u],O)}),f.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(O){var D=O=="add"||O=="set";O in P&&!(l&&O=="clear")&&y(x.prototype,O,function($,W){if(!D&&l&&!m($))return O=="get"?void 0:!1;var V=this._c[O]($===0?0:$,W);return D?this:V})}),"size"in P&&f.setDesc(x.prototype,"size",{get:function(){return this._c.size}})),p(x,L),b[L]=x,k(k.G+k.W+k.F,b),l||v.setStrong(x,L,w),x}},{"./$":71,"./$.descriptors":52,"./$.export":54,"./$.fails":55,"./$.for-of":56,"./$.global":57,"./$.hide":59,"./$.is-object":64,"./$.redefine-all":77,"./$.set-to-string-tag":82,"./$.strict-new":85}],49:[function(c,F,I){var f=F.exports={version:"1.2.6"};typeof __e=="number"&&(__e=f)},{}],50:[function(c,F,I){var f=c("./$.a-function");F.exports=function(C,k,T){if(f(C),k===void 0)return C;switch(T){case 1:return function(y){return C.call(k,y)};case 2:return function(y,o){return C.call(k,y,o)};case 3:return function(y,o,d){return C.call(k,y,o,d)}}return function(){return C.apply(k,arguments)}}},{"./$.a-function":41}],51:[function(c,F,I){F.exports=function(f){if(f==null)throw TypeError("Can't call method on  "+f);return f}},{}],52:[function(c,F,I){F.exports=!c("./$.fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./$.fails":55}],53:[function(c,F,I){var f=c("./$.is-object"),C=c("./$.global").document,k=f(C)&&f(C.createElement);F.exports=function(T){return k?C.createElement(T):{}}},{"./$.global":57,"./$.is-object":64}],54:[function(c,F,I){var f=c("./$.global"),C=c("./$.core"),k=c("./$.ctx"),T="prototype",y=function(o,d,M){var m=o&y.F,p=o&y.G,A=o&y.S,L=o&y.P,S=o&y.B,R=o&y.W,v=p?C:C[d]||(C[d]={}),w=p?f:A?f[d]:(f[d]||{})[T],l,h,x;p&&(M=d);for(l in M)h=!m&&w&&l in w,!(h&&l in v)&&(x=h?w[l]:M[l],v[l]=p&&typeof w[l]!="function"?M[l]:S&&h?k(x,f):R&&w[l]==x?function(u){var P=function(b){return this instanceof u?new u(b):u(b)};return P[T]=u[T],P}(x):L&&typeof x=="function"?k(Function.call,x):x,L&&((v[T]||(v[T]={}))[l]=x))};y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,F.exports=y},{"./$.core":49,"./$.ctx":50,"./$.global":57}],55:[function(c,F,I){F.exports=function(f){try{return!!f()}catch{return!0}}},{}],56:[function(c,F,I){var f=c("./$.ctx"),C=c("./$.iter-call"),k=c("./$.is-array-iter"),T=c("./$.an-object"),y=c("./$.to-length"),o=c("./core.get-iterator-method");F.exports=function(d,M,m,p){var A=o(d),L=f(m,p,M?2:1),S=0,R,v,w;if(typeof A!="function")throw TypeError(d+" is not iterable!");if(k(A))for(R=y(d.length);R>S;S++)M?L(T(v=d[S])[0],v[1]):L(d[S]);else for(w=A.call(d);!(v=w.next()).done;)C(w,L,v.value,M)}},{"./$.an-object":43,"./$.ctx":50,"./$.is-array-iter":63,"./$.iter-call":65,"./$.to-length":90,"./core.get-iterator-method":94}],57:[function(c,F,I){var f=F.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=f)},{}],58:[function(c,F,I){var f={}.hasOwnProperty;F.exports=function(C,k){return f.call(C,k)}},{}],59:[function(c,F,I){var f=c("./$"),C=c("./$.property-desc");F.exports=c("./$.descriptors")?function(k,T,y){return f.setDesc(k,T,C(1,y))}:function(k,T,y){return k[T]=y,k}},{"./$":71,"./$.descriptors":52,"./$.property-desc":76}],60:[function(c,F,I){F.exports=c("./$.global").document&&document.documentElement},{"./$.global":57}],61:[function(c,F,I){F.exports=function(f,C,k){var T=k===void 0;switch(C.length){case 0:return T?f():f.call(k);case 1:return T?f(C[0]):f.call(k,C[0]);case 2:return T?f(C[0],C[1]):f.call(k,C[0],C[1]);case 3:return T?f(C[0],C[1],C[2]):f.call(k,C[0],C[1],C[2]);case 4:return T?f(C[0],C[1],C[2],C[3]):f.call(k,C[0],C[1],C[2],C[3])}return f.apply(k,C)}},{}],62:[function(c,F,I){var f=c("./$.cof");F.exports=Object("z").propertyIsEnumerable(0)?Object:function(C){return f(C)=="String"?C.split(""):Object(C)}},{"./$.cof":45}],63:[function(c,F,I){var f=c("./$.iterators"),C=c("./$.wks")("iterator"),k=Array.prototype;F.exports=function(T){return T!==void 0&&(f.Array===T||k[C]===T)}},{"./$.iterators":70,"./$.wks":93}],64:[function(c,F,I){F.exports=function(f){return typeof f=="object"?f!==null:typeof f=="function"}},{}],65:[function(c,F,I){var f=c("./$.an-object");F.exports=function(C,k,T,y){try{return y?k(f(T)[0],T[1]):k(T)}catch(d){var o=C.return;throw o!==void 0&&f(o.call(C)),d}}},{"./$.an-object":43}],66:[function(c,F,I){var f=c("./$"),C=c("./$.property-desc"),k=c("./$.set-to-string-tag"),T={};c("./$.hide")(T,c("./$.wks")("iterator"),function(){return this}),F.exports=function(y,o,d){y.prototype=f.create(T,{next:C(1,d)}),k(y,o+" Iterator")}},{"./$":71,"./$.hide":59,"./$.property-desc":76,"./$.set-to-string-tag":82,"./$.wks":93}],67:[function(c,F,I){var f=c("./$.library"),C=c("./$.export"),k=c("./$.redefine"),T=c("./$.hide"),y=c("./$.has"),o=c("./$.iterators"),d=c("./$.iter-create"),M=c("./$.set-to-string-tag"),m=c("./$").getProto,p=c("./$.wks")("iterator"),A=!([].keys&&"next"in[].keys()),L="@@iterator",S="keys",R="values",v=function(){return this};F.exports=function(w,l,h,x,u,P,b){d(h,l,x);var O=function(me){if(!A&&me in V)return V[me];switch(me){case S:return function(){return new h(this,me)};case R:return function(){return new h(this,me)}}return function(){return new h(this,me)}},D=l+" Iterator",$=u==R,W=!1,V=w.prototype,Q=V[p]||V[L]||u&&V[u],ue=Q||O(u),ee,ae;if(Q){var he=m(ue.call(new w));M(he,D,!0),!f&&y(V,L)&&T(he,p,v),$&&Q.name!==R&&(W=!0,ue=function(){return Q.call(this)})}if((!f||b)&&(A||W||!V[p])&&T(V,p,ue),o[l]=ue,o[D]=v,u)if(ee={values:$?ue:O(R),keys:P?ue:O(S),entries:$?O("entries"):ue},b)for(ae in ee)ae in V||k(V,ae,ee[ae]);else C(C.P+C.F*(A||W),l,ee);return ee}},{"./$":71,"./$.export":54,"./$.has":58,"./$.hide":59,"./$.iter-create":66,"./$.iterators":70,"./$.library":72,"./$.redefine":78,"./$.set-to-string-tag":82,"./$.wks":93}],68:[function(c,F,I){var f=c("./$.wks")("iterator"),C=!1;try{var k=[7][f]();k.return=function(){C=!0},Array.from(k,function(){throw 2})}catch{}F.exports=function(T,y){if(!y&&!C)return!1;var o=!1;try{var d=[7],M=d[f]();M.next=function(){return{done:o=!0}},d[f]=function(){return M},T(d)}catch{}return o}},{"./$.wks":93}],69:[function(c,F,I){F.exports=function(f,C){return{value:C,done:!!f}}},{}],70:[function(c,F,I){F.exports={}},{}],71:[function(c,F,I){var f=Object;F.exports={create:f.create,getProto:f.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:f.getOwnPropertyDescriptor,setDesc:f.defineProperty,setDescs:f.defineProperties,getKeys:f.keys,getNames:f.getOwnPropertyNames,getSymbols:f.getOwnPropertySymbols,each:[].forEach}},{}],72:[function(c,F,I){F.exports=!0},{}],73:[function(c,F,I){var f=c("./$.global"),C=c("./$.task").set,k=f.MutationObserver||f.WebKitMutationObserver,T=f.process,y=f.Promise,o=c("./$.cof")(T)=="process",d,M,m,p=function(){var S,R,v;for(o&&(S=T.domain)&&(T.domain=null,S.exit());d;)R=d.domain,v=d.fn,R&&R.enter(),v(),R&&R.exit(),d=d.next;M=void 0,S&&S.enter()};if(o)m=function(){T.nextTick(p)};else if(k){var A=1,L=document.createTextNode("");new k(p).observe(L,{characterData:!0}),m=function(){L.data=A=-A}}else y&&y.resolve?m=function(){y.resolve().then(p)}:m=function(){C.call(f,p)};F.exports=function(R){var v={fn:R,next:void 0,domain:o&&T.domain};M&&(M.next=v),d||(d=v,m()),M=v}},{"./$.cof":45,"./$.global":57,"./$.task":87}],74:[function(c,F,I){var f=c("./$"),C=c("./$.to-object"),k=c("./$.iobject");F.exports=c("./$.fails")(function(){var T=Object.assign,y={},o={},d=Symbol(),M="abcdefghijklmnopqrst";return y[d]=7,M.split("").forEach(function(m){o[m]=m}),T({},y)[d]!=7||Object.keys(T({},o)).join("")!=M})?function(y,o){for(var d=C(y),M=arguments,m=M.length,p=1,A=f.getKeys,L=f.getSymbols,S=f.isEnum;m>p;)for(var R=k(M[p++]),v=L?A(R).concat(L(R)):A(R),w=v.length,l=0,h;w>l;)S.call(R,h=v[l++])&&(d[h]=R[h]);return d}:Object.assign},{"./$":71,"./$.fails":55,"./$.iobject":62,"./$.to-object":91}],75:[function(c,F,I){var f=c("./$.export"),C=c("./$.core"),k=c("./$.fails");F.exports=function(T,y){var o=(C.Object||{})[T]||Object[T],d={};d[T]=y(o),f(f.S+f.F*k(function(){o(1)}),"Object",d)}},{"./$.core":49,"./$.export":54,"./$.fails":55}],76:[function(c,F,I){F.exports=function(f,C){return{enumerable:!(f&1),configurable:!(f&2),writable:!(f&4),value:C}}},{}],77:[function(c,F,I){var f=c("./$.redefine");F.exports=function(C,k){for(var T in k)f(C,T,k[T]);return C}},{"./$.redefine":78}],78:[function(c,F,I){F.exports=c("./$.hide")},{"./$.hide":59}],79:[function(c,F,I){F.exports=Object.is||function(C,k){return C===k?C!==0||1/C===1/k:C!=C&&k!=k}},{}],80:[function(c,F,I){var f=c("./$").getDesc,C=c("./$.is-object"),k=c("./$.an-object"),T=function(y,o){if(k(y),!C(o)&&o!==null)throw TypeError(o+": can't set as prototype!")};F.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(y,o,d){try{d=c("./$.ctx")(Function.call,f(Object.prototype,"__proto__").set,2),d(y,[]),o=!(y instanceof Array)}catch{o=!0}return function(m,p){return T(m,p),o?m.__proto__=p:d(m,p),m}}({},!1):void 0),check:T}},{"./$":71,"./$.an-object":43,"./$.ctx":50,"./$.is-object":64}],81:[function(c,F,I){var f=c("./$.core"),C=c("./$"),k=c("./$.descriptors"),T=c("./$.wks")("species");F.exports=function(y){var o=f[y];k&&o&&!o[T]&&C.setDesc(o,T,{configurable:!0,get:function(){return this}})}},{"./$":71,"./$.core":49,"./$.descriptors":52,"./$.wks":93}],82:[function(c,F,I){var f=c("./$").setDesc,C=c("./$.has"),k=c("./$.wks")("toStringTag");F.exports=function(T,y,o){T&&!C(T=o?T:T.prototype,k)&&f(T,k,{configurable:!0,value:y})}},{"./$":71,"./$.has":58,"./$.wks":93}],83:[function(c,F,I){var f=c("./$.global"),C="__core-js_shared__",k=f[C]||(f[C]={});F.exports=function(T){return k[T]||(k[T]={})}},{"./$.global":57}],84:[function(c,F,I){var f=c("./$.an-object"),C=c("./$.a-function"),k=c("./$.wks")("species");F.exports=function(T,y){var o=f(T).constructor,d;return o===void 0||(d=f(o)[k])==null?y:C(d)}},{"./$.a-function":41,"./$.an-object":43,"./$.wks":93}],85:[function(c,F,I){F.exports=function(f,C,k){if(!(f instanceof C))throw TypeError(k+": use the 'new' operator!");return f}},{}],86:[function(c,F,I){var f=c("./$.to-integer"),C=c("./$.defined");F.exports=function(k){return function(T,y){var o=String(C(T)),d=f(y),M=o.length,m,p;return d<0||d>=M?k?"":void 0:(m=o.charCodeAt(d),m<55296||m>56319||d+1===M||(p=o.charCodeAt(d+1))<56320||p>57343?k?o.charAt(d):m:k?o.slice(d,d+2):(m-55296<<10)+(p-56320)+65536)}}},{"./$.defined":51,"./$.to-integer":88}],87:[function(c,F,I){var f=c("./$.ctx"),C=c("./$.invoke"),k=c("./$.html"),T=c("./$.dom-create"),y=c("./$.global"),o=y.process,d=y.setImmediate,M=y.clearImmediate,m=y.MessageChannel,p=0,A={},L="onreadystatechange",S,R,v,w=function(){var h=+this;if(A.hasOwnProperty(h)){var x=A[h];delete A[h],x()}},l=function(h){w.call(h.data)};(!d||!M)&&(d=function(x){for(var u=[],P=1;arguments.length>P;)u.push(arguments[P++]);return A[++p]=function(){C(typeof x=="function"?x:Function(x),u)},S(p),p},M=function(x){delete A[x]},c("./$.cof")(o)=="process"?S=function(h){o.nextTick(f(w,h,1))}:m?(R=new m,v=R.port2,R.port1.onmessage=l,S=f(v.postMessage,v,1)):y.addEventListener&&typeof postMessage=="function"&&!y.importScripts?(S=function(h){y.postMessage(h+"","*")},y.addEventListener("message",l,!1)):L in T("script")?S=function(h){k.appendChild(T("script"))[L]=function(){k.removeChild(this),w.call(h)}}:S=function(h){setTimeout(f(w,h,1),0)}),F.exports={set:d,clear:M}},{"./$.cof":45,"./$.ctx":50,"./$.dom-create":53,"./$.global":57,"./$.html":60,"./$.invoke":61}],88:[function(c,F,I){var f=Math.ceil,C=Math.floor;F.exports=function(k){return isNaN(k=+k)?0:(k>0?C:f)(k)}},{}],89:[function(c,F,I){var f=c("./$.iobject"),C=c("./$.defined");F.exports=function(k){return f(C(k))}},{"./$.defined":51,"./$.iobject":62}],90:[function(c,F,I){var f=c("./$.to-integer"),C=Math.min;F.exports=function(k){return k>0?C(f(k),9007199254740991):0}},{"./$.to-integer":88}],91:[function(c,F,I){var f=c("./$.defined");F.exports=function(C){return Object(f(C))}},{"./$.defined":51}],92:[function(c,F,I){var f=0,C=Math.random();F.exports=function(k){return"Symbol(".concat(k===void 0?"":k,")_",(++f+C).toString(36))}},{}],93:[function(c,F,I){var f=c("./$.shared")("wks"),C=c("./$.uid"),k=c("./$.global").Symbol;F.exports=function(T){return f[T]||(f[T]=k&&k[T]||(k||C)("Symbol."+T))}},{"./$.global":57,"./$.shared":83,"./$.uid":92}],94:[function(c,F,I){var f=c("./$.classof"),C=c("./$.wks")("iterator"),k=c("./$.iterators");F.exports=c("./$.core").getIteratorMethod=function(T){if(T!=null)return T[C]||T["@@iterator"]||k[f(T)]}},{"./$.classof":44,"./$.core":49,"./$.iterators":70,"./$.wks":93}],95:[function(c,F,I){var f=c("./$.an-object"),C=c("./core.get-iterator-method");F.exports=c("./$.core").getIterator=function(k){var T=C(k);if(typeof T!="function")throw TypeError(k+" is not iterable!");return f(T.call(k))}},{"./$.an-object":43,"./$.core":49,"./core.get-iterator-method":94}],96:[function(c,F,I){var f=c("./$.add-to-unscopables"),C=c("./$.iter-step"),k=c("./$.iterators"),T=c("./$.to-iobject");F.exports=c("./$.iter-define")(Array,"Array",function(y,o){this._t=T(y),this._i=0,this._k=o},function(){var y=this._t,o=this._k,d=this._i++;return!y||d>=y.length?(this._t=void 0,C(1)):o=="keys"?C(0,d):o=="values"?C(0,y[d]):C(0,[d,y[d]])},"values"),k.Arguments=k.Array,f("keys"),f("values"),f("entries")},{"./$.add-to-unscopables":42,"./$.iter-define":67,"./$.iter-step":69,"./$.iterators":70,"./$.to-iobject":89}],97:[function(c,F,I){var f=c("./$.export");f(f.S+f.F,"Object",{assign:c("./$.object-assign")})},{"./$.export":54,"./$.object-assign":74}],98:[function(c,F,I){var f=c("./$.to-iobject");c("./$.object-sap")("getOwnPropertyDescriptor",function(C){return function(T,y){return C(f(T),y)}})},{"./$.object-sap":75,"./$.to-iobject":89}],99:[function(c,F,I){var f=c("./$.to-object");c("./$.object-sap")("keys",function(C){return function(T){return C(f(T))}})},{"./$.object-sap":75,"./$.to-object":91}],100:[function(c,F,I){var f=c("./$.export");f(f.S,"Object",{setPrototypeOf:c("./$.set-proto").set})},{"./$.export":54,"./$.set-proto":80}],101:[function(c,F,I){},{}],102:[function(c,F,I){var f=c("./$"),C=c("./$.library"),k=c("./$.global"),T=c("./$.ctx"),y=c("./$.classof"),o=c("./$.export"),d=c("./$.is-object"),M=c("./$.an-object"),m=c("./$.a-function"),p=c("./$.strict-new"),A=c("./$.for-of"),L=c("./$.set-proto").set,S=c("./$.same-value"),R=c("./$.wks")("species"),v=c("./$.species-constructor"),w=c("./$.microtask"),l="Promise",h=k.process,x=y(h)=="process",u=k[l],P=function(){},b,O=function(ie){var re=new u(P),ye;return ie&&(re.constructor=function(te){te(P,P)}),(ye=u.resolve(re)).catch(P),ye===re},D=function(){var ie=!1;function re(te){var Le=new u(te);return L(Le,re.prototype),Le}try{if(ie=u&&u.resolve&&O(),L(re,u),re.prototype=f.create(u.prototype,{constructor:{value:re}}),re.resolve(5).then(function(){})instanceof re||(ie=!1),ie&&c("./$.descriptors")){var ye=!1;u.resolve(f.setDesc({},"then",{get:function(){ye=!0}})),ie=ye}}catch{ie=!1}return ie}(),$=function(ie,re){return C&&ie===u&&re===b?!0:S(ie,re)},W=function(ie){var re=M(ie)[R];return re??ie},V=function(ie){var re;return d(ie)&&typeof(re=ie.then)=="function"?re:!1},Q=function(ie){var re,ye;this.promise=new ie(function(te,Le){if(re!==void 0||ye!==void 0)throw TypeError("Bad Promise constructor");re=te,ye=Le}),this.resolve=m(re),this.reject=m(ye)},ue=function(ie){try{ie()}catch(re){return{error:re}}},ee=function(ie,re){if(!ie.n){ie.n=!0;var ye=ie.c;w(function(){for(var te=ie.v,Le=ie.s==1,ve=0,ge=function(pe){var Oe=Le?pe.ok:pe.fail,ze=pe.resolve,Ue=pe.reject,Je,ut;try{Oe?(Le||(ie.h=!0),Je=Oe===!0?te:Oe(te),Je===pe.promise?Ue(TypeError("Promise-chain cycle")):(ut=V(Je))?ut.call(Je,ze,Ue):ze(Je)):Ue(te)}catch(Z){Ue(Z)}};ye.length>ve;)ge(ye[ve++]);ye.length=0,ie.n=!1,re&&setTimeout(function(){var pe=ie.p,Oe,ze;ae(pe)&&(x?h.emit("unhandledRejection",te,pe):(Oe=k.onunhandledrejection)?Oe({promise:pe,reason:te}):(ze=k.console)&&ze.error&&ze.error("Unhandled promise rejection",te)),ie.a=void 0},1)})}},ae=function(ie){var re=ie._d,ye=re.a||re.c,te=0,Le;if(re.h)return!1;for(;ye.length>te;)if(Le=ye[te++],Le.fail||!ae(Le.promise))return!1;return!0},he=function(ie){var re=this;re.d||(re.d=!0,re=re.r||re,re.v=ie,re.s=2,re.a=re.c.slice(),ee(re,!0))},me=function(ie){var re=this,ye;if(!re.d){re.d=!0,re=re.r||re;try{if(re.p===ie)throw TypeError("Promise can't be resolved itself");(ye=V(ie))?w(function(){var te={r:re,d:!1};try{ye.call(ie,T(me,te,1),T(he,te,1))}catch(Le){he.call(te,Le)}}):(re.v=ie,re.s=1,ee(re,!1))}catch(te){he.call({r:re,d:!1},te)}}};D||(u=function(re){m(re);var ye=this._d={p:p(this,u,l),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{re(T(me,ye,1),T(he,ye,1))}catch(te){he.call(ye,te)}},c("./$.redefine-all")(u.prototype,{then:function(re,ye){var te=new Q(v(this,u)),Le=te.promise,ve=this._d;return te.ok=typeof re=="function"?re:!0,te.fail=typeof ye=="function"&&ye,ve.c.push(te),ve.a&&ve.a.push(te),ve.s&&ee(ve,!1),Le},catch:function(ie){return this.then(void 0,ie)}})),o(o.G+o.W+o.F*!D,{Promise:u}),c("./$.set-to-string-tag")(u,l),c("./$.set-species")(l),b=c("./$.core")[l],o(o.S+o.F*!D,l,{reject:function(re){var ye=new Q(this),te=ye.reject;return te(re),ye.promise}}),o(o.S+o.F*(!D||O(!0)),l,{resolve:function(re){if(re instanceof u&&$(re.constructor,this))return re;var ye=new Q(this),te=ye.resolve;return te(re),ye.promise}}),o(o.S+o.F*!(D&&c("./$.iter-detect")(function(ie){u.all(ie).catch(function(){})})),l,{all:function(re){var ye=W(this),te=new Q(ye),Le=te.resolve,ve=te.reject,ge=[],pe=ue(function(){A(re,!1,ge.push,ge);var Oe=ge.length,ze=Array(Oe);Oe?f.each.call(ge,function(Ue,Je){var ut=!1;ye.resolve(Ue).then(function(Z){ut||(ut=!0,ze[Je]=Z,--Oe||Le(ze))},ve)}):Le(ze)});return pe&&ve(pe.error),te.promise},race:function(re){var ye=W(this),te=new Q(ye),Le=te.reject,ve=ue(function(){A(re,!1,function(ge){ye.resolve(ge).then(te.resolve,Le)})});return ve&&Le(ve.error),te.promise}})},{"./$":71,"./$.a-function":41,"./$.an-object":43,"./$.classof":44,"./$.core":49,"./$.ctx":50,"./$.descriptors":52,"./$.export":54,"./$.for-of":56,"./$.global":57,"./$.is-object":64,"./$.iter-detect":68,"./$.library":72,"./$.microtask":73,"./$.redefine-all":77,"./$.same-value":79,"./$.set-proto":80,"./$.set-species":81,"./$.set-to-string-tag":82,"./$.species-constructor":84,"./$.strict-new":85,"./$.wks":93}],103:[function(c,F,I){var f=c("./$.collection-strong");c("./$.collection")("Set",function(C){return function(){return C(this,arguments.length>0?arguments[0]:void 0)}},{add:function(k){return f.def(this,k=k===0?0:k,k)}},f)},{"./$.collection":48,"./$.collection-strong":46}],104:[function(c,F,I){var f=c("./$.string-at")(!0);c("./$.iter-define")(String,"String",function(C){this._t=String(C),this._i=0},function(){var C=this._t,k=this._i,T;return k>=C.length?{value:void 0,done:!0}:(T=f(C,k),this._i+=T.length,{value:T,done:!1})})},{"./$.iter-define":67,"./$.string-at":86}],105:[function(c,F,I){var f=c("./$.export");f(f.P,"Set",{toJSON:c("./$.collection-to-json")("Set")})},{"./$.collection-to-json":47,"./$.export":54}],106:[function(c,F,I){c("./es6.array.iterator");var f=c("./$.iterators");f.NodeList=f.HTMLCollection=f.Array},{"./$.iterators":70,"./es6.array.iterator":96}],107:[function(c,F,I){(function(f){/*!
		ISC License

		Copyright (c) 2014-2018, Andrea Giammarchi, @WebReflection

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted, provided that the above
		copyright notice and this permission notice appear in all copies.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
		OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.

		*/function C(k,T){var y=k.document,o=k.Object,d=function(Y){var J=/^[A-Z]+[a-z]/,se=function(pt){var tt=[],ct;for(ct in fe)pt.test(ct)&&tt.push(ct);return tt},ce=function(pt,tt){tt=tt.toLowerCase(),tt in fe||(fe[pt]=(fe[pt]||[]).concat(tt),fe[tt]=fe[tt.toUpperCase()]=pt)},fe=(o.create||o)(null),ke={},Me,Xe,Ve,$e;for(Xe in Y)for($e in Y[Xe])for(Ve=Y[Xe][$e],fe[$e]=Ve,Me=0;Me<Ve.length;Me++)fe[Ve[Me].toLowerCase()]=fe[Ve[Me].toUpperCase()]=$e;return ke.get=function(tt){return typeof tt=="string"?fe[tt]||(J.test(tt)?[]:""):se(tt)},ke.set=function(tt,ct){return J.test(tt)?ce(tt,ct):ce(ct,tt),ke},ke}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});typeof T!="object"&&(T={type:T||"auto"});var M="registerElement",m=k.Math.random()*1e5>>0,p="__"+M+m,A="addEventListener",L="attached",S="Callback",R="detached",v="extends",w="attributeChanged"+S,l=L+S,h="connected"+S,x="disconnected"+S,u="created"+S,P=R+S,b="ADDITION",O="MODIFICATION",D="REMOVAL",$="DOMAttrModified",W="DOMContentLoaded",V="DOMSubtreeModified",Q="<",ue="=",ee=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ae=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],he=[],me=[],ie="",re=y.documentElement,ye=he.indexOf||function(Y){for(var J=this.length;J--&&this[J]!==Y;);return J},te=o.prototype,Le=te.hasOwnProperty,ve=te.isPrototypeOf,ge=o.defineProperty,pe=[],Oe=o.getOwnPropertyDescriptor,ze=o.getOwnPropertyNames,Ue=o.getPrototypeOf,Je=o.setPrototypeOf,ut=!!o.__proto__,Z="__dreCEv1",U=k.customElements,_=!/^force/.test(T.type)&&!!(U&&U.define&&U.get&&U.whenDefined),N=o.create||o,X=k.Map||function(){var J=[],se=[],ce;return{get:function(fe){return se[ye.call(J,fe)]},set:function(fe,ke){ce=ye.call(J,fe),ce<0?se[J.push(fe)-1]=ke:se[ce]=ke}}},z=k.Promise||function(Y){var J=[],se=!1,ce={catch:function(){return ce},then:function(ke){return J.push(ke),se&&setTimeout(fe,1),ce}};function fe(ke){for(se=!0;J.length;)J.shift()(ke)}return Y(fe),ce},oe=!1,ne=N(null),Ce=N(null),Se=new X,Ae=function(Y){return Y.toLowerCase()},We=o.create||function Y(J){return J?(Y.prototype=J,new Y):this},Ke=Je||(ut?function(Y,J){return Y.__proto__=J,Y}:ze&&Oe?function(){function Y(J,se){for(var ce,fe=ze(se),ke=0,Me=fe.length;ke<Me;ke++)ce=fe[ke],Le.call(J,ce)||ge(J,ce,Oe(se,ce))}return function(J,se){do Y(J,se);while((se=Ue(se))&&!ve.call(se,J));return J}}():function(Y,J){for(var se in J)Y[se]=J[se];return Y}),Fe=k.MutationObserver||k.WebKitMutationObserver,rt=k.HTMLAnchorElement,je=(k.HTMLElement||k.Element||k.Node).prototype,et=!ve.call(je,re),it=et?function(Y,J,se){return Y[J]=se.value,Y}:ge,Ze=et?function(Y){return Y.nodeType===1}:function(Y){return ve.call(je,Y)},nt=et&&[],Nt=je.attachShadow,fr=je.cloneNode,Wi=je.closest||function(Y){for(var J=this;J&&J.nodeName!==Y;)J=J.parentNode;return J},ni=je.dispatchEvent,le=je.getAttribute,_e=je.hasAttribute,ai=je.removeAttribute,cr=je.setAttribute,Kt=y.createElement,Bi=y.importNode,Dt=Kt,Lt=Fe&&{attributes:!0,characterData:!0,attributeOldValue:!0},hr=Fe||function(Y){gr=!1,re.removeEventListener($,hr)},dr,vr=0,oi=M in y&&!/^force-all/.test(T.type),si=!0,pr=!1,gr=!0,Nr=!0,mr=!0,Bt,Yt,li,Fr,At,Ye,vt,ft;Fe&&(ft=y.createElement("div"),ft.innerHTML="<div><div></div></div>",new Fe(function(Y,J){if(Y[0]&&Y[0].type=="childList"&&!Y[0].removedNodes[0].childNodes.length){ft=Oe(je,"innerHTML");var se=ft&&ft.set;se&&ge(je,"innerHTML",{set:function(ce){for(;this.lastChild;)this.removeChild(this.lastChild);se.call(this,ce)}})}J.disconnect(),ft=null}).observe(ft,{childList:!0,subtree:!0}),ft.innerHTML=""),oi||(Je||ut?(Ye=function(Y,J){ve.call(J,Y)||_r(Y,J)},vt=_r):(Ye=function(Y,J){Y[p]||(Y[p]=o(!0),_r(Y,J))},vt=Ye),et?(gr=!1,function(){var Y=Oe(je,A),J=Y.value,se=function(ke){var Me=new CustomEvent($,{bubbles:!0});Me.attrName=ke,Me.prevValue=le.call(this,ke),Me.newValue=null,Me[D]=Me.attrChange=2,ai.call(this,ke),ni.call(this,Me)},ce=function(ke,Me){var Xe=_e.call(this,ke),Ve=Xe&&le.call(this,ke),$e=new CustomEvent($,{bubbles:!0});cr.call(this,ke,Me),$e.attrName=ke,$e.prevValue=Xe?Ve:null,$e.newValue=Me,Xe?$e[O]=$e.attrChange=1:$e[b]=$e.attrChange=0,ni.call(this,$e)},fe=function(ke){var Me=ke.currentTarget,Xe=Me[p],Ve=ke.propertyName,$e;Xe.hasOwnProperty(Ve)&&(Xe=Xe[Ve],$e=new CustomEvent($,{bubbles:!0}),$e.attrName=Xe.name,$e.prevValue=Xe.value||null,$e.newValue=Xe.value=Me[Ve]||null,$e.prevValue==null?$e[b]=$e.attrChange=0:$e[O]=$e.attrChange=1,ni.call(Me,$e))};Y.value=function(ke,Me,Xe){ke===$&&this[w]&&this.setAttribute!==ce&&(this[p]={className:{name:"class",value:this.className}},this.setAttribute=ce,this.removeAttribute=se,J.call(this,"propertychange",fe)),J.call(this,ke,Me,Xe)},ge(je,A,Y)}()):Fe||(re[A]($,hr),re.setAttribute(p,1),re.removeAttribute(p),gr&&(Bt=function(Y){var J=this,se,ce,fe;if(J===Y.target){se=J[p],J[p]=ce=li(J);for(fe in ce)if(fe in se){if(ce[fe]!==se[fe])return Yt(1,J,fe,se[fe],ce[fe],O)}else return Yt(0,J,fe,se[fe],ce[fe],b);for(fe in se)if(!(fe in ce))return Yt(2,J,fe,se[fe],ce[fe],D)}},Yt=function(Y,J,se,ce,fe,ke){var Me={attrChange:Y,currentTarget:J,attrName:se,prevValue:ce,newValue:fe};Me[ke]=Y,yr(Me)},li=function(Y){for(var J,se,ce={},fe=Y.attributes,ke=0,Me=fe.length;ke<Me;ke++)J=fe[ke],se=J.name,se!=="setAttribute"&&(ce[se]=J.value);return ce})),y[M]=function(J,se){if(Xe=J.toUpperCase(),si&&(si=!1,Fe?(Fr=function($e,pt){function tt(ct,bt){for(var Et=0,Zt=ct.length;Et<Zt;bt(ct[Et++]));}return new Fe(function(ct){for(var bt,Et,Zt,Sr=0,Gi=ct.length;Sr<Gi;Sr++)bt=ct[Sr],bt.type==="childList"?(tt(bt.addedNodes,$e),tt(bt.removedNodes,pt)):(Et=bt.target,mr&&Et[w]&&bt.attributeName!=="style"&&(Zt=le.call(Et,bt.attributeName),Zt!==bt.oldValue&&Et[w](bt.attributeName,bt.oldValue,Zt)))})}(Vt(L),Vt(R)),At=function($e){return Fr.observe($e,{childList:!0,subtree:!0}),$e},At(y),Nt&&(je.attachShadow=function(){return At(Nt.apply(this,arguments))})):(dr=[],y[A]("DOMNodeInserted",fi(L)),y[A]("DOMNodeRemoved",fi(R))),y[A](W,br),y[A]("readystatechange",br),y.importNode=function($e,pt){switch($e.nodeType){case 1:return zi(y,Bi,[$e,!!pt]);case 11:for(var tt=y.createDocumentFragment(),ct=$e.childNodes,bt=ct.length,Et=0;Et<bt;Et++)tt.appendChild(y.importNode(ct[Et],!!pt));return tt;default:return fr.call($e,!!pt)}},je.cloneNode=function($e){return zi(this,fr,[!!$e])}),pr)return pr=!1;if(-2<ye.call(he,ue+Xe)+ye.call(he,Q+Xe)&&wr(J),!ee.test(Xe)||-1<ye.call(ae,Xe))throw new Error("The type "+J+" is invalid");var ce=function(){return ke?y.createElement(Me,Xe):y.createElement(Me)},fe=se||te,ke=Le.call(fe,v),Me=ke?se[v].toUpperCase():Xe,Xe,Ve;return ke&&-1<ye.call(he,Q+Me)&&wr(Me),Ve=he.push((ke?ue:Q)+Xe)-1,ie=ie.concat(ie.length?",":"",ke?Me+'[is="'+J.toLowerCase()+'"]':Me),ce.prototype=me[Ve]=Le.call(fe,"prototype")?fe.prototype:We(je),ie.length&&Ie(y.querySelectorAll(ie),L),ce},y.createElement=Dt=function(Y,J){var se=nr(J),ce=se?Kt.call(y,Y,Ae(se)):Kt.call(y,Y),fe=""+Y,ke=ye.call(he,(se?ue:Q)+(se||fe).toUpperCase()),Me=-1<ke;return se&&(ce.setAttribute("is",se=se.toLowerCase()),Me&&(Me=ir(fe.toUpperCase(),se))),mr=!y.createElement.innerHTMLHelper,Me&&vt(ce,me[ke]),ce}),addEventListener("beforeunload",function(){delete y.createElement,delete y.importNode,delete y[M]},!1);function ji(){var Y=dr.splice(0,dr.length);for(vr=0;Y.length;)Y.shift().call(null,Y.shift())}function Ie(Y,J){for(var se=0,ce=Y.length;se<ce;se++)$r(Y[se],J)}function Ln(Y){for(var J=0,se=Y.length,ce;J<se;J++)ce=Y[J],vt(ce,me[ui(ce)])}function Vt(Y){return function(J){Ze(J)&&($r(J,Y),ie.length&&Ie(J.querySelectorAll(ie),Y))}}function ui(Y){var J=le.call(Y,"is"),se=Y.nodeName.toUpperCase(),ce=ye.call(he,J?ue+J.toUpperCase():Q+se);return J&&-1<ce&&!ir(se,J)?-1:ce}function ir(Y,J){return-1<ie.indexOf(Y+'[is="'+J+'"]')}function yr(Y){var J=Y.currentTarget,se=Y.attrChange,ce=Y.attrName,fe=Y.target,ke=Y[b]||2,Me=Y[D]||3;mr&&(!fe||fe===J)&&J[w]&&ce!=="style"&&(Y.prevValue!==Y.newValue||Y.newValue===""&&(se===ke||se===Me))&&J[w](ce,se===ke?null:Y.prevValue,se===Me?null:Y.newValue)}function fi(Y){var J=Vt(Y);return function(se){dr.push(J,se.target),vr&&clearTimeout(vr),vr=setTimeout(ji,1)}}function br(Y){Nr&&(Nr=!1,Y.currentTarget.removeEventListener(W,br)),ie.length&&Ie((Y.target||y).querySelectorAll(ie),Y.detail===R?R:L),et&&st()}function Ui(Y,J){var se=this;cr.call(se,Y,J),Bt.call(se,{target:se})}function zi(Y,J,se){var ce=J.apply(Y,se),fe=ui(ce);return-1<fe&&vt(ce,me[fe]),se.pop()&&ie.length&&Ln(ce.querySelectorAll(ie)),ce}function _r(Y,J){Ke(Y,J),Fr?Fr.observe(Y,Lt):(gr&&(Y.setAttribute=Ui,Y[p]=li(Y),Y[A](V,Bt)),Y[A]($,yr)),Y[u]&&mr&&(Y.created=!0,Y[u](),Y.created=!1)}function st(){for(var Y,J=0,se=nt.length;J<se;J++)Y=nt[J],re.contains(Y)||(se--,nt.splice(J--,1),$r(Y,R))}function wr(Y){throw new Error("A "+Y+" type is already registered")}function $r(Y,J){var se,ce=ui(Y),fe;-1<ce&&!Wi.call(Y,"TEMPLATE")&&(Ye(Y,me[ce]),ce=0,J===L&&!Y[L]?(Y[R]=!1,Y[L]=!0,fe="connected",ce=1,et&&ye.call(nt,Y)<0&&nt.push(Y)):J===R&&!Y[R]&&(Y[L]=!1,Y[R]=!0,fe="disconnected",ce=1),ce&&(se=Y[J+S]||Y[fe+S])&&se.call(Y))}function xr(){}xr.prototype={constructor:xr,define:_?function(Y,J,se){if(se)ci(Y,J,se);else{var ce=Y.toUpperCase();ne[ce]={constructor:J,create:[ce]},Se.set(J,ce),U.define(Y,J)}}:ci,get:_?function(Y){return U.get(Y)||Cr(Y)}:Cr,whenDefined:_?function(Y){return z.race([U.whenDefined(Y),Wr(Y)])}:Wr};function ci(Y,J,se){var ce=se&&se[v]||"",fe=J.prototype,ke=We(fe),Me=J.observedAttributes||pe,Xe={prototype:ke};it(ke,u,{value:function(){if(oe)oe=!1;else if(!this[Z]){this[Z]=!0,new J(this),fe[u]&&fe[u].call(this);var Ve=ne[Se.get(J)];(!_||Ve.create.length>1)&&hi(this)}}}),it(ke,w,{value:function(Ve){-1<ye.call(Me,Ve)&&fe[w]&&fe[w].apply(this,arguments)}}),fe[h]&&it(ke,l,{value:fe[h]}),fe[x]&&it(ke,P,{value:fe[x]}),ce&&(Xe[v]=ce),Y=Y.toUpperCase(),ne[Y]={constructor:J,create:ce?[ce,Ae(Y)]:[Y]},Se.set(J,Y),y[M](Y.toLowerCase(),Xe),Wr(Y),Ce[Y].r()}function Cr(Y){var J=ne[Y.toUpperCase()];return J&&J.constructor}function nr(Y){return typeof Y=="string"?Y:Y&&Y.is||""}function hi(Y){for(var J=Y[w],se=J?Y.attributes:pe,ce=se.length,fe;ce--;)fe=se[ce],J.call(Y,fe.name||fe.nodeName,null,fe.value||fe.nodeValue)}function Wr(Y){return Y=Y.toUpperCase(),Y in Ce||(Ce[Y]={},Ce[Y].p=new z(function(J){Ce[Y].r=J})),Ce[Y].p}function Xi(){U&&delete k.customElements,ge(k,"customElements",{configurable:!0,value:new xr}),ge(k,"CustomElementRegistry",{configurable:!0,value:xr});for(var Y=function(ce){var fe=k[ce];if(fe){k[ce]=function(Me){var Xe,Ve;return Me||(Me=this),Me[Z]||(oe=!0,Xe=ne[Se.get(Me.constructor)],Ve=_&&Xe.create.length===1,Me=Ve?Reflect.construct(fe,pe,Xe.constructor):y.createElement.apply(y,Xe.create),Me[Z]=!0,oe=!1,Ve||hi(Me)),Me},k[ce].prototype=fe.prototype;try{fe.prototype.constructor=k[ce]}catch{ge(fe,Z,{value:k[ce]})}}},J=d.get(/^HTML[A-Z]*[a-z]/),se=J.length;se--;Y(J[se]));y.createElement=function(ce,fe){var ke=nr(fe);return ke?Dt.call(this,ce,Ae(ke)):Dt.call(this,ce)},oi||(pr=!0,y[M](""))}if(!U||/^force/.test(T.type))Xi();else if(!T.noBuiltIn)try{(function(Y,J,se){var ce=new RegExp(`^<a\\s+is=('|")`+se+"\\1></a>$");if(J[v]="a",Y.prototype=We(rt.prototype),Y.prototype.constructor=Y,k.customElements.define(se,Y,J),!ce.test(y.createElement("a",{is:se}).outerHTML)||!ce.test(new Y().outerHTML))throw J})(function Y(){return Reflect.construct(rt,[],Y)},{},"document-register-element-a"+m)}catch{Xi()}if(!T.noBuiltIn)try{if(Kt.call(y,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{Ae=function(J){return{is:J.toLowerCase()}}}}F.exports=C,C(f)}).call(this,typeof ii<"u"?ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],108:[function(c,F,I){(function(f){var C;typeof window<"u"?C=window:typeof f<"u"?C=f:typeof self<"u"?C=self:C={},F.exports=C}).call(this,typeof ii<"u"?ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],109:[function(c,F,I){(function(f){(function(C,k){typeof I=="object"&&typeof F<"u"?F.exports=k():C.GlslCanvas=k()})(this,function(){var C=typeof window<"u"?window:typeof f<"u"?f:typeof self<"u"?self:{},k;typeof window<"u"?k=window:typeof C<"u"?k=C:typeof self<"u"?k=self:k={};var T=k,y=d,o=Object.prototype.toString;function d(Z){if(!Z)return!1;var U=o.call(Z);return U==="[object Function]"||typeof Z=="function"&&U!=="[object RegExp]"||typeof window<"u"&&(Z===window.setTimeout||Z===window.alert||Z===window.confirm||Z===window.prompt)}var M=function(Z){return Z.replace(/^\s+|\s+$/g,"")},m=function(Z){return Object.prototype.toString.call(Z)==="[object Array]"},p=function(Z){if(!Z)return{};for(var U={},_=M(Z).split(`
`),N=0;N<_.length;N++){var X=_[N],z=X.indexOf(":"),oe=M(X.slice(0,z)).toLowerCase(),ne=M(X.slice(z+1));typeof U[oe]>"u"?U[oe]=ne:m(U[oe])?U[oe].push(ne):U[oe]=[U[oe],ne]}return U},A=S,L=Object.prototype.hasOwnProperty;function S(){for(var Z={},U=0;U<arguments.length;U++){var _=arguments[U];for(var N in _)L.call(_,N)&&(Z[N]=_[N])}return Z}var R=x,v=x;x.XMLHttpRequest=T.XMLHttpRequest||b,x.XDomainRequest="withCredentials"in new x.XMLHttpRequest?x.XMLHttpRequest:T.XDomainRequest,w(["get","put","post","patch","head","delete"],function(Z){x[Z==="delete"?"del":Z]=function(U,_,N){return _=h(U,_,N),_.method=Z.toUpperCase(),u(_)}});function w(Z,U){for(var _=0;_<Z.length;_++)U(Z[_])}function l(Z){for(var U in Z)if(Z.hasOwnProperty(U))return!1;return!0}function h(Z,U,_){var N=Z;return y(U)?(_=U,typeof Z=="string"&&(N={uri:Z})):N=A(U,{uri:Z}),N.callback=_,N}function x(Z,U,_){return U=h(Z,U,_),u(U)}function u(Z){if(typeof Z.callback>"u")throw new Error("callback argument missing");var U=!1,_=function(nt,Nt,fr){U||(U=!0,Z.callback(nt,Nt,fr))};function N(){ne.readyState===4&&setTimeout(oe,0)}function X(){var Ze=void 0;if(ne.response?Ze=ne.response:Ze=ne.responseText||P(ne),je)try{Ze=JSON.parse(Ze)}catch{}return Ze}function z(Ze){return clearTimeout(et),Ze instanceof Error||(Ze=new Error(""+(Ze||"Unknown XMLHttpRequest Error"))),Ze.statusCode=0,_(Ze,it)}function oe(){if(!Se){var Ze;clearTimeout(et),Z.useXDR&&ne.status===void 0?Ze=200:Ze=ne.status===1223?204:ne.status;var nt=it,Nt=null;return Ze!==0?(nt={body:X(),statusCode:Ze,method:We,headers:{},url:Ae,rawRequest:ne},ne.getAllResponseHeaders&&(nt.headers=p(ne.getAllResponseHeaders()))):Nt=new Error("Internal XMLHttpRequest Error"),_(Nt,nt,nt.body)}}var ne=Z.xhr||null;ne||(Z.cors||Z.useXDR?ne=new x.XDomainRequest:ne=new x.XMLHttpRequest);var Ce,Se,Ae=ne.url=Z.uri||Z.url,We=ne.method=Z.method||"GET",Ke=Z.body||Z.data,Fe=ne.headers=Z.headers||{},rt=!!Z.sync,je=!1,et,it={body:void 0,headers:{},statusCode:0,method:We,url:Ae,rawRequest:ne};if("json"in Z&&Z.json!==!1&&(je=!0,Fe.accept||Fe.Accept||(Fe.Accept="application/json"),We!=="GET"&&We!=="HEAD"&&(Fe["content-type"]||Fe["Content-Type"]||(Fe["Content-Type"]="application/json"),Ke=JSON.stringify(Z.json===!0?Ke:Z.json))),ne.onreadystatechange=N,ne.onload=oe,ne.onerror=z,ne.onprogress=function(){},ne.onabort=function(){Se=!0},ne.ontimeout=z,ne.open(We,Ae,!rt,Z.username,Z.password),rt||(ne.withCredentials=!!Z.withCredentials),!rt&&Z.timeout>0&&(et=setTimeout(function(){if(!Se){Se=!0,ne.abort("timeout");var Ze=new Error("XMLHttpRequest timeout");Ze.code="ETIMEDOUT",z(Ze)}},Z.timeout)),ne.setRequestHeader)for(Ce in Fe)Fe.hasOwnProperty(Ce)&&ne.setRequestHeader(Ce,Fe[Ce]);else if(Z.headers&&!l(Z.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Z&&(ne.responseType=Z.responseType),"beforeSend"in Z&&typeof Z.beforeSend=="function"&&Z.beforeSend(ne),ne.send(Ke||null),ne}function P(Z){try{if(Z.responseType==="document")return Z.responseXML;var U=Z.responseXML&&Z.responseXML.documentElement.nodeName==="parsererror";if(Z.responseType===""&&!U)return Z.responseXML}catch{}return null}function b(){}R.default=v;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},D=function(Z,U){if(!(Z instanceof U))throw new TypeError("Cannot call a class as a function")},$=function(){function Z(U,_){for(var N=0;N<_.length;N++){var X=_[N];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(U,X.key,X)}}return function(U,_,N){return _&&Z(U.prototype,_),N&&Z(U,N),U}}(),W=function(Z){if(Array.isArray(Z)){for(var U=0,_=Array(Z.length);U<Z.length;U++)_[U]=Z[U];return _}else return Array.from(Z)},V="";function Q(Z){return`
<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>
<td align="center">
<div style="display: table-cell; vertical-align: middle;">
<div style="">`+Z+`</div>
</div>
</td></tr></table>
`}var ue=`
	This page requires a browser that supports WebGL.<br/>
	<a href="http://get.webgl.org">Click here to upgrade your browser.</a>
`,ee=`
	It does not appear your computer can support WebGL.<br/>
	<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>
`,ae=1,he=2;function me(Z,U,_){function N(oe){var ne=Z.parentNode;ne&&(ne.innerHTML=Q(oe))}function X(oe,ne){typeof _=="function"?_(oe):N(ne)}if(!window.WebGLRenderingContext)return X(ae,ue),null;var z=ie(Z,U);return z?z.getExtension("OES_standard_derivatives"):X(he,ee),z}function ie(Z,U){for(var _=["webgl","experimental-webgl"],N=null,X=0;X<_.length;++X)try{N=Z.getContext(_[X],U)}catch{if(N)break}return N}function re(Z,U,_,N){var X=Z.gl,z=X.createShader(_);X.shaderSource(z,U),X.compileShader(z);var oe=X.getShaderParameter(z,X.COMPILE_STATUS);return oe?z:(V=X.getShaderInfoLog(z),console.error("*** Error compiling shader "+z+":"+V),Z.trigger("error",{shader:z,source:U,type:_,error:V,offset:N||0}),X.deleteShader(z),null)}function ye(Z,U,_,N){for(var X=Z.gl,z=X.createProgram(),oe=0;oe<U.length;++oe)X.attachShader(z,U[oe]);X.linkProgram(z);var ne=X.getProgramParameter(z,X.LINK_STATUS);return ne?z:(V=X.getProgramInfoLog(z),console.log("Error in program linking:"+V),X.deleteProgram(z),null)}function te(Z){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_=[];for(var N in Z){var X=Z[N],z=void 0;if(U&&(N=U+"."+N),typeof X=="number")_.push({type:"float",method:"1f",name:N,value:X});else if(Array.isArray(X)){if(typeof X[0]=="number")X.length===1?_.push({type:"float",method:"1f",name:N,value:X}):X.length>=2&&X.length<=4?_.push({type:"vec"+X.length,method:X.length+"fv",name:N,value:X}):X.length>4&&_.push({type:"float[]",method:"1fv",name:N+"[0]",value:X});else if(typeof X[0]=="string")_.push({type:"sampler2D",method:"1i",name:N,value:X});else if(Array.isArray(X[0])&&typeof X[0][0]=="number"){if(X[0].length>=2&&X[0].length<=4)for(z=0;z<X.length;z++)_.push({type:"vec"+X[0].length,method:X[z].length+"fv",name:N+"["+z+"]",value:X[z]})}else if(O(X[0])==="object")for(z=0;z<X.length;z++)_.push.apply(_,W(te(X[z],N+"["+z+"]")))}else typeof X=="boolean"?_.push({type:"bool",method:"1i",name:N,value:X}):typeof X=="string"?_.push({type:"sampler2D",method:"1i",name:N,value:X}):(typeof X>"u"?"undefined":O(X))==="object"&&_.push.apply(_,W(te(X,N)))}return _}function Le(Z){var U=Z.getBoundingClientRect();return U.top+U.height>0&&U.top<(window.innerHeight||document.documentElement.clientHeight)}function ve(Z){return(Z&Z-1)===0}function ge(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function pe(Z,U){return Z&&U?Z.toString()!==U.toString():!1}function Oe(Z){var U=new XMLHttpRequest;return U.open("GET",Z,!1),U.send(),U.status==200?U.responseText:""}function ze(Z){var U=new Set;return Object.assign(Z,{on:function(N,X){var z={};z[N]=X,U.add(z)},off:function(N,X){if(X){var z={};z[N]=X,U.delete(z)}else{var oe=!0,ne=!1,Ce=void 0;try{for(var Se=U[Symbol.iterator](),Ae;!(oe=(Ae=Se.next()).done);oe=!0){var We=Ae.value,Ke=!0,Fe=!1,rt=void 0;try{for(var je=Object.keys(We)[Symbol.iterator](),et;!(Ke=(et=je.next()).done);Ke=!0){var it=et.value;if(it===N){U.delete(We);return}}}catch(Ze){Fe=!0,rt=Ze}finally{try{!Ke&&je.return&&je.return()}finally{if(Fe)throw rt}}}}catch(Ze){ne=!0,Ce=Ze}finally{try{!oe&&Se.return&&Se.return()}finally{if(ne)throw Ce}}}},listSubscriptions:function(){var N=!0,X=!1,z=void 0;try{for(var oe=U[Symbol.iterator](),ne;!(N=(ne=oe.next()).done);N=!0){var Ce=ne.value;console.log(Ce)}}catch(Se){X=!0,z=Se}finally{try{!N&&oe.return&&oe.return()}finally{if(X)throw z}}},subscribe:function(N){U.add(N)},unsubscribe:function(N){U.delete(N)},unsubscribeAll:function(){U.clear()},trigger:function(N){for(var X=arguments.length,z=Array(X>1?X-1:0),oe=1;oe<X;oe++)z[oe-1]=arguments[oe];var ne=!0,Ce=!1,Se=void 0;try{for(var Ae=U[Symbol.iterator](),We;!(ne=(We=Ae.next()).done);ne=!0){var Ke=We.value;typeof Ke[N]=="function"&&Ke[N].apply(Ke,W(z))}}catch(Fe){Ce=!0,Se=Fe}finally{try{!ne&&Ae.return&&Ae.return()}finally{if(Ce)throw Se}}}})}var Ue=function(){function Z(U,_){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};D(this,Z),ze(this),this.gl=U,this.texture=U.createTexture(),this.texture&&(this.valid=!0),this.bind(),this.name=_,this.source=null,this.sourceType=null,this.loading=null,this.setData(1,1,new Uint8Array([0,0,0,255]),{filtering:"linear"}),this.setFiltering(N.filtering),this.load(N)}return $(Z,[{key:"destroy",value:function(){this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,this.valid=!1)}},{key:"bind",value:function(_){this.valid&&(typeof _=="number"&&Z.activeUnit!==_&&(this.gl.activeTexture(this.gl.TEXTURE0+_),Z.activeUnit=_),Z.activeTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),Z.activeTexture=this.texture))}},{key:"load",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.loading=null,typeof _.url=="string"?(this.url===void 0||_.url!==this.url)&&this.setUrl(_.url,_):_.element?this.setElement(_.element,_):_.data&&_.width&&_.height&&this.setData(_.width,_.height,_.data,_)}},{key:"setUrl",value:function(_){var N=this,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.valid)return this.url=_,this.source=this.url,this.sourceType="url",this.loading=new Promise(function(z,oe){var ne=_.split(".").pop().toLowerCase(),Ce=ne==="ogv"||ne==="webm"||ne==="mp4",Se=void 0;Ce?(Se=document.createElement("video"),Se.autoplay=!0,Se.muted=!0,setTimeout(function(){Se.play()},1),X.filtering="nearest"):Se=new Image,Se.onload=function(){try{N.setElement(Se,X)}catch(Ae){console.log("Texture '"+N.name+"': failed to load url: '"+N.source+"'",Ae,X)}z(N)},Se.onerror=function(Ae){console.log("Texture '"+N.name+"': failed to load url: '"+N.source+"'",Ae,X),z(N)},ge()&&N.source.slice(0,5)==="data:"||(Se.crossOrigin="anonymous"),Se.src=N.source,Ce&&N.setElement(Se,X)}),this.loading}},{key:"setData",value:function(_,N,X){var z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.width=_,this.height=N,this.source=X,this.sourceType="data",this.update(z),this.setFiltering(z),this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(_,N){var X=this,z=_;if(typeof _=="string"&&(_=document.querySelector(_)),_ instanceof HTMLCanvasElement||_ instanceof HTMLImageElement||_ instanceof HTMLVideoElement)this.source=_,this.sourceType="element",_ instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight,_.addEventListener("canplaythrough",function(){X.intervalID=setInterval(function(){X.update(N)},15)},!0),_.addEventListener("ended",function(){_.currentTime=0,_.play()},!0)):this.update(N),this.setFiltering(N);else{var oe="the 'element' parameter (`element: "+JSON.stringify(z)+"`) must be a CSS ";oe+="selector string, or a <canvas>, <image> or <video> object",console.log("Texture '"+this.name+"': "+oe,N)}return this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.valid&&(this.bind(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,_.UNPACK_FLIP_Y_WEBGL!==!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.sourceType==="element"&&(this.source instanceof HTMLCanvasElement||this.source instanceof HTMLVideoElement||this.source instanceof HTMLImageElement&&this.source.complete)?(this.source instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight):(this.width=this.source.width,this.height=this.source.height),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source)):this.sourceType==="data"&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source),this.trigger("loaded",this))}},{key:"setFiltering",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.valid){this.powerOf2=ve(this.width)&&ve(this.height),this.filtering=_.filtering||"linear";var N=this.gl;this.bind(),this.powerOf2?(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,_.TEXTURE_WRAP_S||N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,_.TEXTURE_WRAP_T||N.REPEAT),this.filtering==="mipmap"?(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR_MIPMAP_LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),N.generateMipmap(N.TEXTURE_2D)):this.filtering==="linear"?(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR)):this.filtering==="nearest"&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.NEAREST),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.NEAREST))):(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),this.filtering==="mipmap"&&(this.filtering="linear"),this.filtering==="nearest"?(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.NEAREST),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.NEAREST)):(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR)))}}}]),Z}();Ue.getMaxTextureSize=function(Z){return Z.getParameter(Z.MAX_TEXTURE_SIZE)},Ue.activeUnit=-1;var Je=function(){function Z(U,_,N){var X=this;D(this,Z),ze(this),_=_||{},N=N||{},U.hasAttribute("data-fullscreen")&&(U.getAttribute("data-fullscreen")=="1"||U.getAttribute("data-fullscreen")=="true")?(this.width=window.innerWidth,this.height=window.innerHeight,U.width=window.innerWidth,U.height=window.innerHeight):(this.width=U.clientWidth,this.height=U.clientHeight),this.canvas=U,this.gl=void 0,this.deps={},this.program=void 0,this.textures={},this.buffers={},this.uniforms={},this.vbo={},this.isValid=!1,this.animationFrameRequest=void 0,this.BUFFER_COUNT=0,this.vertexString=_.vertexString||`
#ifdef GL_ES
precision mediump float;
#endif

attribute vec2 a_position;
attribute vec2 a_texcoord;

varying vec2 v_texcoord;

void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
    v_texcoord = a_texcoord;
}
`,this.fragmentString=_.fragmentString||`
#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_texcoord;

void main(){
    gl_FragColor = vec4(0.0);
}
`;var z=me(U,_,N.onError);if(!z)return;if(this.gl=z,this.timeLoad=this.timePrev=performance.now(),this.timeDelta=0,this.forceRender=!0,this.paused=!1,this.realToCSSPixels=window.devicePixelRatio||1,U.style.backgroundColor=_.backgroundColor||"rgba(1,1,1,0)",U.hasAttribute("data-fragment"))this.fragmentString=U.getAttribute("data-fragment");else if(U.hasAttribute("data-fragment-url")){var oe=U.getAttribute("data-fragment-url");R.get(oe,function(je,et,it){X.load(it,X.vertexString)})}if(U.hasAttribute("data-vertex"))this.vertexString=U.getAttribute("data-vertex");else if(U.hasAttribute("data-vertex-url")){var ne=U.getAttribute("data-vertex-url");R.get(ne,function(je,et,it){X.load(X.fragmentString,it)})}if(this.load(),!this.program)return;var Ce=z.getAttribLocation(this.program,"a_texcoord");this.vbo.texCoords=z.createBuffer(),this.gl.bindBuffer(z.ARRAY_BUFFER,this.vbo.texCoords),this.gl.bufferData(z.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),z.STATIC_DRAW),this.gl.enableVertexAttribArray(Ce),this.gl.vertexAttribPointer(Ce,2,z.FLOAT,!1,0,0);var Se=z.getAttribLocation(this.program,"a_position");if(this.vbo.vertices=z.createBuffer(),this.gl.bindBuffer(z.ARRAY_BUFFER,this.vbo.vertices),this.gl.bufferData(z.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),z.STATIC_DRAW),this.gl.enableVertexAttribArray(Se),this.gl.vertexAttribPointer(Se,2,z.FLOAT,!1,0,0),U.hasAttribute("data-textures")){var Ae=U.getAttribute("data-textures").split(",");for(var We in Ae)this.setUniform("u_tex"+We,Ae[We])}var Ke={x:0,y:0};document.addEventListener("mousemove",function(je){Ke.x=je.clientX||je.pageX,Ke.y=je.clientY||je.pageY},!1);var Fe=this;function rt(){Fe.nMouse>1&&Fe.setMouse(Ke),Fe.resize()&&(Fe.forceRender=!0),Fe.render(),Fe.animationFrameRequest=window.requestAnimationFrame(rt)}return this.setMouse({x:0,y:0}),rt(),this}return $(Z,[{key:"destroy",value:function(){cancelAnimationFrame(this.animationFrameRequest),this.animated=!1,this.isValid=!1;for(var _ in this.textures)_.destroy&&_.destroy();this.textures={};for(var N in this.attribs)this.gl.deleteBuffer(this.attribs[N]);this.gl.useProgram(null),this.gl.deleteProgram(this.program);for(var X in this.buffers){var z=this.buffers[X];this.gl.deleteProgram(z.program)}this.program=null,this.gl=null}},{key:"load",value:function(_,N){var X=this;N&&(this.vertexString=N),_&&(this.fragmentString=_);var z=this.fragmentString.split(/\r?\n/);this.fragmentString=`#define PLATFORM_WEBGL
#line 0
`,z.forEach(function(et,it){var Ze=et.trim();if(Ze.startsWith('#include "lygia')){var nt=Ze.substring(15).replace(/\'|\"|\;|\s/g,"");if(nt.endsWith("glsl")){if(X.deps[nt]===void 0){var Nt="https://lygia.xyz"+nt;X.deps[nt]=Oe(Nt)}X.fragmentString+=X.deps[nt]+`
#line `+(it+1)+`
`}}else X.fragmentString+=et+`
`}),this.animated=!1,this.nDelta=(this.fragmentString.match(/u_delta/g)||[]).length,this.nTime=(this.fragmentString.match(/u_time/g)||[]).length,this.nDate=(this.fragmentString.match(/u_date/g)||[]).length,this.nMouse=(this.fragmentString.match(/u_mouse/g)||[]).length,this.animated=this.nDate>1||this.nTime>1||this.nMouse>1;var oe=this.fragmentString.search(/sampler2D/g);if(oe)for(var ne=this.fragmentString.split(`
`),Ce=0;Ce<ne.length;Ce++){var Se=ne[Ce].match(/uniform\s*sampler2D\s*([\w]*);\s*\/\/\s*([\w|\:\/\/|\.|\-|\_]*)/i);if(Se){var Ae=Se[2].split(".").pop().toLowerCase();Se[1]&&Se[2]&&(Ae==="jpg"||Ae==="jpeg"||Ae==="png"||Ae==="ogv"||Ae==="webm"||Ae==="mp4")&&this.setUniform(Se[1],Se[2])}var We=ne[Ce].match(/\s*void\s*main\s*/g);if(We)break}var Ke=re(this,this.vertexString,this.gl.VERTEX_SHADER),Fe=re(this,this.fragmentString,this.gl.FRAGMENT_SHADER);Fe?this.isValid=!0:(Fe=re(this,`void main(){
	gl_FragColor = vec4(1.0);
}`,this.gl.FRAGMENT_SHADER),this.isValid=!1);var rt=ye(this,[Ke,Fe]);this.gl.useProgram(rt),this.gl.deleteShader(Ke),this.gl.deleteShader(Fe),this.program=rt,this.change=!0,this.BUFFER_COUNT=0;var je=this.getBuffers(this.fragmentString);Object.keys(je).length&&this.loadPrograms(je),this.buffers=je,this.texureIndex=this.BUFFER_COUNT,this.trigger("load",{}),this.forceRender=!0,this.render()}},{key:"test",value:function(_,N,X){var z=this.vertexString,oe=this.fragmentString,ne=this.paused,Ce=this.gl.getExtension("EXT_disjoint_timer_query"),Se=Ce.createQueryEXT(),Ae=this.isValid;(N||X)&&(this.load(N,X),Ae=this.isValid,this.forceRender=!0,this.render()),this.paused=!0,Ce.beginQueryEXT(Ce.TIME_ELAPSED_EXT,Se),this.forceRender=!0,this.render(),Ce.endQueryEXT(Ce.TIME_ELAPSED_EXT);var We=this;function Ke(){We.paused=ne,(N||X)&&We.load(oe,z)}function Fe(){We.forceRender=!0,We.render();var rt=Ce.getQueryObjectEXT(Se,Ce.QUERY_RESULT_AVAILABLE_EXT),je=We.gl.getParameter(Ce.GPU_DISJOINT_EXT);if(rt&&!je){var et={wasValid:Ae,frag:N||We.fragmentString,vert:X||We.vertexString,timeElapsedMs:Ce.getQueryObjectEXT(Se,Ce.QUERY_RESULT_EXT)/1e6};Ke(),_(et)}else window.requestAnimationFrame(Fe)}Fe()}},{key:"loadTexture",value:function(_,N,X){var z=this;X||(X={}),typeof N=="string"?X.url=N:(typeof N>"u"?"undefined":O(N))==="object"&&N.data&&N.width&&N.height?(X.data=N.data,X.width=N.width,X.height=N.height):(typeof N>"u"?"undefined":O(N))==="object"&&(X.element=N),this.textures[_]?this.textures[_]&&(this.textures[_].load(X),this.textures[_].on("loaded",function(oe){z.forceRender=!0})):(this.textures[_]=new Ue(this.gl,_,X),this.textures[_].on("loaded",function(oe){z.forceRender=!0}))}},{key:"refreshUniforms",value:function(){this.uniforms={}}},{key:"setUniform",value:function(_){for(var N={},X=arguments.length,z=Array(X>1?X-1:0),oe=1;oe<X;oe++)z[oe-1]=arguments[oe];N[_]=z,this.setUniforms(N)}},{key:"setUniforms",value:function(_){var N=te(_);for(var X in N)N[X].type==="sampler2D"?this.loadTexture(N[X].name,N[X].value[0]):this.uniform(N[X].method,N[X].type,N[X].name,N[X].value);this.forceRender=!0}},{key:"setMouse",value:function(_){var N=this.canvas.getBoundingClientRect();if(_&&_.x&&_.x>=N.left&&_.x<=N.right&&_.y&&_.y>=N.top&&_.y<=N.bottom){var X=(_.x-N.left)*this.realToCSSPixels,z=this.canvas.height-(_.y-N.top)*this.realToCSSPixels;this.uniform("2f","vec2","u_mouse",X,z)}}},{key:"uniform",value:function(_,N,X){this.uniforms[X]=this.uniforms[X]||{};for(var z=this.uniforms[X],oe=arguments.length,ne=Array(oe>3?oe-3:0),Ce=3;Ce<oe;Ce++)ne[Ce-3]=arguments[Ce];var Se=pe(z.value,ne);if(Se||this.change||!z.location||!z.value){z.name=X,z.type=N,z.value=ne,z.method="uniform"+_,this.gl.useProgram(this.program),z.location=this.gl.getUniformLocation(this.program,X),this.gl[z.method].apply(this.gl,[z.location].concat(z.value));for(var Ae in this.buffers){var We=this.buffers[Ae];this.gl.useProgram(We.program);var Ke=this.gl.getUniformLocation(We.program,X);this.gl[z.method].apply(this.gl,[Ke].concat(z.value))}}}},{key:"uniformTexture",value:function(_,N,X){if(this.textures[_]===void 0)this.loadTexture(_,N,X);else{this.uniform("1i","sampler2D",_,this.texureIndex);for(var z in this.buffers){var oe=this.buffers[z];this.gl.useProgram(oe.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[_].texture)}this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[_].texture),this.uniform("2f","vec2",_+"Resolution",this.textures[_].width,this.textures[_].height)}}},{key:"resize",value:function(){if(this.width!==this.canvas.clientWidth||this.height!==this.canvas.clientHeight){this.realToCSSPixels=window.devicePixelRatio||1;var _=Math.floor(this.gl.canvas.clientWidth*this.realToCSSPixels),N=Math.floor(this.gl.canvas.clientHeight*this.realToCSSPixels);return(this.gl.canvas.width!==_||this.gl.canvas.height!==N)&&(this.gl.canvas.width=_,this.gl.canvas.height=N,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.resizeSwappableBuffers(),!0}else return!1}},{key:"render",value:function(){if(this.visible=Le(this.canvas),this.forceRender||this.change||this.animated&&this.visible&&!this.paused){var _=new Date,N=performance.now();this.timeDelta=(N-this.timePrev)/1e3,this.timePrev=N,this.nDelta>1&&this.uniform("1f","float","u_delta",this.timeDelta),this.nTime>1&&this.uniform("1f","float","u_time",(N-this.timeLoad)/1e3),this.nDate&&this.uniform("4f","float","u_date",_.getFullYear(),_.getMonth(),_.getDate(),_.getHours()*3600+_.getMinutes()*60+_.getSeconds()+_.getMilliseconds()*.001),this.uniform("2f","vec2","u_resolution",this.canvas.width,this.canvas.height);for(var X in this.buffers){var z=this.buffers[X];this.uniform("1i","sampler2D",z.name,z.bundle.input.index)}this.texureIndex=this.BUFFER_COUNT;for(var oe in this.textures)this.uniformTexture(oe),this.texureIndex++;this.renderPrograms(),this.trigger("render",{}),this.change=!1,this.forceRender=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"renderPrograms",value:function(){var _=this.gl,N=_.canvas.width,X=_.canvas.height;_.viewport(0,0,N,X);for(var z in this.buffers){var oe=this.buffers[z];oe.bundle.render(N,X,oe.program,oe.name),_.bindFramebuffer(_.FRAMEBUFFER,null)}_.useProgram(this.program),_.drawArrays(_.TRIANGLES,0,6)}},{key:"getBuffers",value:function(_){var N={};return _&&_.replace(/(?:^\s*)((?:#if|#elif)(?:\s*)(defined\s*\(\s*BUFFER_)(\d+)(?:\s*\))|(?:#ifdef)(?:\s*BUFFER_)(\d+)(?:\s*))/gm,function(){var X=arguments[3]||arguments[4];N["u_buffer"+X]={fragment:"#define BUFFER_"+X+`
`+_}}),N}},{key:"loadPrograms",value:function(_){var N=this,X=this.gl,z=re(N,N.vertexString,X.VERTEX_SHADER);for(var oe in _){var ne=_[oe],Ce=re(N,ne.fragment,X.FRAGMENT_SHADER,1);Ce?N.isValid=!0:(Ce=re(N,`void main(){
	gl_FragColor = vec4(1.0);
}`,X.FRAGMENT_SHADER),N.isValid=!1);var Se=ye(N,[z,Ce]);ne.name=oe,ne.program=Se,ne.bundle=N.createSwappableBuffer(N.canvas.width,N.canvas.height,Se),X.deleteShader(Ce)}X.deleteShader(z)}},{key:"createSwappableBuffer",value:function(_,N,X){var z=this.createBuffer(_,N,X),oe=this.createBuffer(_,N,X),ne=this.gl;return{input:z,output:oe,swap:function(){var Se=z;z=oe,oe=Se,this.input=z,this.output=oe},render:function(Se,Ae,We,Ke){ne.useProgram(We),ne.viewport(0,0,Se,Ae),ne.bindFramebuffer(ne.FRAMEBUFFER,this.input.buffer),ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,this.output.texture,0),ne.drawArrays(ne.TRIANGLES,0,6),this.swap()},resize:function(Se,Ae,We,Ke){ne.useProgram(We),ne.viewport(0,0,Se,Ae),this.input.resize(Se,Ae),this.output.resize(Se,Ae)}}}},{key:"createBuffer",value:function(_,N,X){var z=this.gl,oe=this.BUFFER_COUNT;this.BUFFER_COUNT+=2,z.getExtension("OES_texture_float");var ne=z.createTexture();z.activeTexture(z.TEXTURE0+oe),z.bindTexture(z.TEXTURE_2D,ne),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,_,N,0,z.RGBA,z.FLOAT,null),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE);var Ce=z.createFramebuffer();return{index:oe,texture:ne,buffer:Ce,W:_,H:N,resize:function(Ae,We){z.bindFramebuffer(z.FRAMEBUFFER,Ce);var Ke=Math.min(Ae,this.W),Fe=Math.min(We,this.H),rt=new Float32Array(Ke*Fe*4);z.readPixels(0,0,Ke,Fe,z.RGBA,z.FLOAT,rt),z.bindFramebuffer(z.FRAMEBUFFER,null);var je=oe+1,et=z.createTexture();z.activeTexture(z.TEXTURE0+je),z.bindTexture(z.TEXTURE_2D,et),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,Ae,We,0,z.RGBA,z.FLOAT,null),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texSubImage2D(z.TEXTURE_2D,0,0,0,Ke,Fe,z.RGBA,z.FLOAT,rt);var it=z.createFramebuffer();z.bindFramebuffer(z.FRAMEBUFFER,null),z.deleteTexture(ne),z.activeTexture(z.TEXTURE0+oe),z.bindTexture(z.TEXTURE_2D,et),oe=this.index=oe,ne=this.texture=et,Ce=this.buffer=it,this.W=Ae,this.H=We}}}},{key:"resizeSwappableBuffers",value:function(){var _=this.gl,N=_.canvas.width,X=_.canvas.height;_.viewport(0,0,N,X);for(var z in this.buffers){var oe=this.buffers[z];oe.bundle.resize(N,X,oe.program,oe.name)}_.useProgram(this.program)}},{key:"version",value:function(){return"0.1.7"}}]),Z}();function ut(){var Z=document.getElementsByClassName("glslCanvas");if(Z.length>0){window.glslCanvases=[];for(var U=0;U<Z.length;U++){var _=new Je(Z[U]);_.isValid&&window.glslCanvases.push(_)}}}return window.addEventListener("load",function(){ut()}),Je})}).call(this,typeof ii<"u"?ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],110:[function(c,F,I){F.exports=C;var f=Object.prototype.toString;function C(k){if(!k)return!1;var T=f.call(k);return T==="[object Function]"||typeof k=="function"&&T!=="[object RegExp]"||typeof window<"u"&&(k===window.setTimeout||k===window.alert||k===window.confirm||k===window.prompt)}},{}],111:[function(c,F,I){var f=function(k){return k.replace(/^\s+|\s+$/g,"")},C=function(k){return Object.prototype.toString.call(k)==="[object Array]"};F.exports=function(k){if(!k)return{};for(var T={},y=f(k).split(`
`),o=0;o<y.length;o++){var d=y[o],M=d.indexOf(":"),m=f(d.slice(0,M)).toLowerCase(),p=f(d.slice(M+1));typeof T[m]>"u"?T[m]=p:C(T[m])?T[m].push(p):T[m]=[T[m],p]}return T}},{}],112:[function(c,F,I){var f=c("global/window"),C=c("is-function"),k=c("parse-headers"),T=c("xtend");F.exports=M,F.exports.default=M,M.XMLHttpRequest=f.XMLHttpRequest||A,M.XDomainRequest="withCredentials"in new M.XMLHttpRequest?M.XMLHttpRequest:f.XDomainRequest,y(["get","put","post","patch","head","delete"],function(L){M[L==="delete"?"del":L]=function(S,R,v){return R=d(S,R,v),R.method=L.toUpperCase(),m(R)}});function y(L,S){for(var R=0;R<L.length;R++)S(L[R])}function o(L){for(var S in L)if(L.hasOwnProperty(S))return!1;return!0}function d(L,S,R){var v=L;return C(S)?(R=S,typeof L=="string"&&(v={uri:L})):v=T(S,{uri:L}),v.callback=R,v}function M(L,S,R){return S=d(L,S,R),m(S)}function m(L){if(typeof L.callback>"u")throw new Error("callback argument missing");var S=!1,R=function(ae,he,me){S||(S=!0,L.callback(ae,he,me))};function v(){x.readyState===4&&setTimeout(h,0)}function w(){var ee=void 0;if(x.response?ee=x.response:ee=x.responseText||p(x),V)try{ee=JSON.parse(ee)}catch{}return ee}function l(ee){return clearTimeout(Q),ee instanceof Error||(ee=new Error(""+(ee||"Unknown XMLHttpRequest Error"))),ee.statusCode=0,R(ee,ue)}function h(){if(!P){var ee;clearTimeout(Q),L.useXDR&&x.status===void 0?ee=200:ee=x.status===1223?204:x.status;var ae=ue,he=null;return ee!==0?(ae={body:w(),statusCode:ee,method:O,headers:{},url:b,rawRequest:x},x.getAllResponseHeaders&&(ae.headers=k(x.getAllResponseHeaders()))):he=new Error("Internal XMLHttpRequest Error"),R(he,ae,ae.body)}}var x=L.xhr||null;x||(L.cors||L.useXDR?x=new M.XDomainRequest:x=new M.XMLHttpRequest);var u,P,b=x.url=L.uri||L.url,O=x.method=L.method||"GET",D=L.body||L.data,$=x.headers=L.headers||{},W=!!L.sync,V=!1,Q,ue={body:void 0,headers:{},statusCode:0,method:O,url:b,rawRequest:x};if("json"in L&&L.json!==!1&&(V=!0,$.accept||$.Accept||($.Accept="application/json"),O!=="GET"&&O!=="HEAD"&&($["content-type"]||$["Content-Type"]||($["Content-Type"]="application/json"),D=JSON.stringify(L.json===!0?D:L.json))),x.onreadystatechange=v,x.onload=h,x.onerror=l,x.onprogress=function(){},x.onabort=function(){P=!0},x.ontimeout=l,x.open(O,b,!W,L.username,L.password),W||(x.withCredentials=!!L.withCredentials),!W&&L.timeout>0&&(Q=setTimeout(function(){if(!P){P=!0,x.abort("timeout");var ee=new Error("XMLHttpRequest timeout");ee.code="ETIMEDOUT",l(ee)}},L.timeout)),x.setRequestHeader)for(u in $)$.hasOwnProperty(u)&&x.setRequestHeader(u,$[u]);else if(L.headers&&!o(L.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in L&&(x.responseType=L.responseType),"beforeSend"in L&&typeof L.beforeSend=="function"&&L.beforeSend(x),x.send(D||null),x}function p(L){try{if(L.responseType==="document")return L.responseXML;var S=L.responseXML&&L.responseXML.documentElement.nodeName==="parsererror";if(L.responseType===""&&!S)return L.responseXML}catch{}return null}function A(){}},{"global/window":108,"is-function":110,"parse-headers":111,xtend:113}],113:[function(c,F,I){F.exports=C;var f=Object.prototype.hasOwnProperty;function C(){for(var k={},T=0;T<arguments.length;T++){var y=arguments[T];for(var o in y)f.call(y,o)&&(k[o]=y[o])}return k}},{}],114:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/core-js/object/keys").default,T=c("babel-runtime/core-js/object/create").default,y=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0}),c("document-register-element");var o=c("./core/Shader"),d=y(o),M=c("./core/Editor"),m=c("./ui/Menu"),p=y(m),A=c("./ui/Helpers"),L=y(A),S=c("./ui/ErrorsDisplay"),R=y(S),v=c("./ui/VisualDebugger"),w=y(v),l=c("./ui/ExportIcon"),h=y(l),x=c("./io/FileDrop"),u=y(x),P=c("./io/HashWatch"),b=y(P),O=c("./io/BufferManager"),D=y(O),$=c("./io/LocalStorage"),W=y($),V=c("xhr"),Q=y(V),ue=c("./tools/mixin"),ee=c("./tools/download"),ae=c("./tools/common"),he=c("codemirror"),me=y(he),ie="last-content",re=`// Author:
// Title:

#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;

void main() {
    vec2 st = gl_FragCoord.xy/u_resolution.xy;
    st.x *= u_resolution.x/u_resolution.y;

    vec3 color = vec3(0.);
    color = vec3(st.x,st.y,abs(sin(u_time)));

    gl_FragColor = vec4(color,1.0);
}`,ye=function(){function Le(ve,ge){var pe=this;if(C(this,Le),this.createFontLink(),(0,ue.subscribeMixin)(this),typeof ve=="object"&&ve.nodeType&&ve.nodeType===1)this.container=ve;else if(typeof ve=="string"){if(this.container=document.querySelector(ve),!this.container)throw new Error("element "+ve+" not present")}else{console.log("Error, type "+typeof ve+" of "+ve+" is unknown");return}if(this.options={},this.change=!1,this.autoupdate=!0,this.lygia_glob=null,ge&&(this.options=ge),this.options.imgs===void 0&&(this.options.imgs=[]),this.options.display_menu===void 0&&(this.options.display_menu=!0),this.container.hasAttribute("data-textures")){var Oe=this.container.getAttribute("data-textures").split(",");for(var ze in Oe)this.options.imgs.push(Oe[ze])}if(this.options.theme||(this.options.theme="default"),!this.options.frag){var Ue=this.container.innerHTML.replace(/&lt;br&gt;/g,"");Ue=Ue.replace(/<br>/g,""),Ue=Ue.replace(/&nbsp;/g,""),Ue=Ue.replace(/&lt;/g,"<"),Ue=Ue.replace(/&gt;/g,">"),Ue=Ue.replace(/&amp;/g,"&"),this.options.frag=Ue||re,Ue&&(this.container.innerHTML="")}if(this.options.frag_header||(this.options.frag_header=""),this.options.frag_footer||(this.options.frag_footer=""),this.options.watchHash&&new b.default(this),this.options.menu&&(this.menu=new p.default(this)),this.options.multipleBuffers&&(this.bufferManager=new D.default(this)),this.options.fileDrops&&new u.default(this),this.options.indentUnit===void 0&&(this.options.indentUnit=4),this.options.tabSize===void 0&&(this.options.tabSize=4),this.options.indentWithTabs===void 0&&(this.options.indentWithTabs=!1),this.options.lineWrapping===void 0&&(this.options.lineWrapping=!0),this.options.autofocus===void 0&&(this.options.autofocus=!0),this.shader=new d.default(this),this.editor=(0,M.initEditor)(this),this.helpers=new L.default(this),this.errorsDisplay=new R.default(this),this.visualDebugger=new w.default(this),this.options.exportIcon&&(this.export=new h.default(this)),this.editor.on("change",function(){pe.autoupdate&&pe.update()}),this.options.canvas_follow&&(this.shader.el.style.position="relative",this.options.canvas_float&&(this.shader.el.style.float=this.options.canvas_float),this.editor.on("cursorActivity",function(Z){var U=Z.heightAtLine(Z.getCursor().line+1,"local")-pe.shader.el.clientHeight;U<0&&(U=0),pe.shader.el.style.top=U.toString()+"px"})),this.editor.on("inputRead",function(Z,U){var _=Z.getCursor(),N=Z.getTokenAt(_),X=N.string.trim();X.startsWith("#include")&&function(){var z=X.substring(10);pe.lygia_glob===null&&(0,ae.getJSON)("https://lygia.xyz/glsl.json",function(Ae,We){Ae===null&&(pe.lygia_glob=We)}),console.log("autocomplete for",z);var oe=N.start,ne=_.ch,Ce=_.line,Se=[];pe.lygia_glob!==null&&(pe.lygia_glob.forEach(function(Ae){Ae.startsWith(z)&&Se.push('#include "'+Ae+'"')}),Se.sort()),Se.length>0&&me.default.showHint(Z,function(){var Ae={list:Se,from:me.default.Pos(Ce,oe),to:me.default.Pos(Ce,ne)};return console.log(Ae),Ae},{completeSingle:!0,alignWithWord:!0})}()}),window.addEventListener("beforeunload",function(Z){var U={};if(pe.bufferManager&&k(pe.bufferManager.buffers).length!==0)for(var _ in pe.bufferManager.buffers)U[_]=pe.bufferManager.buffers[_].getValue();else U[new Date().getTime().toString()]=pe.editor.getValue();pe.options.menu&&W.default.setItem(ie,JSON.stringify(U))}),this.options.menu){var Je=JSON.parse(W.default.getItem(ie));if(Je)for(var ut in Je)this.open(Je[ut],ut);else this.new()}else this.new();return this}return f(Le,[{key:"new",value:function(){this.setContent(this.options.frag||re,new Date().getTime().toString()),this.trigger("new_content",{}),this.options.frag=null}},{key:"setContent",value:function(ge,pe){this.shader&&this.shader.canvas&&(this.debugging&&(this.debugging=!1,(0,M.focusAll)(this.editor)),this.shader.canvas.load(this.options.frag_header+ge+this.options.frag_footer)),this.editor&&(pe!==void 0&&this.bufferManager!==void 0?(this.bufferManager.open(pe,ge),this.bufferManager.select(pe)):(this.editor.setValue(ge),this.editor.setSize(null,this.editor.getDoc().height+"px"),this.editor.setSize(null,"auto"),this.filename=pe)),this.change=!0}},{key:"open",value:function(ge,pe){var Oe=this;typeof ge=="object"?function(){var ze=new FileReader,Ue=Oe;ze.onload=function(Je){Ue.setContent(Je.target.result,ge.name)},ze.readAsText(ge)}():typeof ge=="string"&&(/\.frag$/.test(ge)||/\.fs$/.test(ge)?Q.default.get(ge,function(ze,Ue,Je){if(ze){console.log("Error downloading ",ge,ze);return}Oe.setContent(Je,pe)}):this.setContent(ge,pe))}},{key:"getContent",value:function(){return this.editor.getValue()}},{key:"getAuthor",value:function(){var ge=this.getContent(),pe=ge.match(/\/\/\s*[A|a]uthor\s*[\:]?\s*([\w|\s|\@|\(|\)|\-|\_]*)/i);if(pe&&!(pe[1]===" "||pe[1]==="")){var Oe=pe[1].replace(/(\r\n|\n|\r)/gm,"");return Oe}else return"unknown"}},{key:"getTitle",value:function(){var ge=this.getContent(),pe=ge.match(/\/\/\s*[T|t]itle\s*:\s*([\w|\s|\@|\(|\)|\-|\_]*)/i);if(pe&&!(pe[1]===" "||pe[1]==="")){var Oe=pe[1].replace(/(\r\n|\n|\r)/gm,"");return Oe}else return this.bufferManager!==void 0?this.bufferManager.current:"unknown"}},{key:"getOfToken",value:function(){return this.storage.get("accessToken")}},{key:"download",value:function(){var ge=this.getContent(),pe=this.getTitle();pe!==""&&(pe+="-"),pe+=new Date().getTime();var Oe=new Blob([ge],{type:"text/plain"});(0,ee.saveAs)(Oe,pe+".frag"),this.editor.doc.markClean(),this.change=!1}},{key:"update",value:function(){this.debugging&&(this.debugging=!1,(0,M.focusAll)(this.editor)),this.visualDebugger.testingResults.length&&this.visualDebugger.clean(),this.shader.canvas.load(this.options.frag_header+this.editor.getValue()+this.options.frag_footer)}},{key:"createFontLink",value:function(){var ge=document.getElementsByTagName("head")[0],pe=document.createElement("link");pe.href="https://fonts.googleapis.com/icon?family=Material+Icons",pe.type="text/css",pe.rel="stylesheet",pe.media="screen,print",ge.appendChild(pe),document.getElementsByTagName("head")[0].appendChild(pe)}},{key:"togglePresentationWindow",value:function(ge){this.pWindowOpen=ge,ge?this.shader.openWindow():this.shader.closeWindow()}},{key:"onClosePresentationWindow",value:function(){this.pWindowOpen=!1}}]),Le}();I.default=ye,window.GlslEditor=ye;var te=function(){};te.prototype=T(HTMLElement.prototype),te.prototype.createdCallback=function(){for(var ve={canvas_size:150,canvas_follow:!0,tooltips:!0},ge=0;ge<this.attributes.length;ge++){var pe=this.attributes[ge];if(pe.specified){var Oe=pe.value;Oe==="true"?Oe=!0:Oe==="false"?Oe=!1:parseInt(Oe)&&(Oe=parseInt(Oe)),ve[pe.name]=Oe}}this.glslEditor=new ye(this,ve)},document.registerElement("glsl-editor",te),F.exports=I.default},{"./core/Editor":115,"./core/Shader":116,"./io/BufferManager":117,"./io/FileDrop":118,"./io/HashWatch":119,"./io/LocalStorage":120,"./tools/common":121,"./tools/download":123,"./tools/mixin":126,"./ui/ErrorsDisplay":128,"./ui/ExportIcon":129,"./ui/Helpers":130,"./ui/Menu":131,"./ui/VisualDebugger":133,"babel-runtime/core-js/object/create":3,"babel-runtime/core-js/object/keys":6,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14,codemirror:30,"document-register-element":107,xhr:112}],115:[function(c,F,I){c("babel-runtime/core-js/promise").default;var f=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0}),I.initEditor=y,I.unfocusLine=o,I.unfocusAll=d,I.focusLine=M,I.focusAll=m;var C=c("codemirror"),k=f(C);c("codemirror/addon/search/search"),c("codemirror/addon/search/searchcursor"),c("codemirror/addon/comment/comment"),c("codemirror/addon/dialog/dialog"),c("codemirror/addon/edit/matchbrackets"),c("codemirror/addon/edit/closebrackets"),c("codemirror/addon/wrap/hardwrap"),c("codemirror/addon/fold/foldcode"),c("codemirror/addon/fold/foldgutter"),c("codemirror/addon/fold/indent-fold"),c("codemirror/addon/hint/show-hint"),c("codemirror/addon/hint/javascript-hint"),c("codemirror/addon/display/rulers"),c("codemirror/addon/display/panel"),c("codemirror/addon/hint/show-hint"),c("codemirror/mode/clike/clike.js"),c("codemirror/keymap/sublime");var T="ge_editor-unfocus";function y(p){p.options.lineNumbers===void 0&&(p.options.lineNumbers=!0);var A=document.createElement("div");A.setAttribute("class","ge_editor"),p.menu&&(A.style.paddingTop=(p.menu.el.clientHeight||p.menu.el.offsetHeight||p.menu.el.scrollHeight)+"px"),p.container.appendChild(A);var L=(0,k.default)(A,{value:p.options.frag,viewportMargin:1/0,lineNumbers:p.options.lineNumbers,matchBrackets:!0,mode:"x-shader/x-fragment",keyMap:"sublime",autoCloseBrackets:!0,extraKeys:{"Ctrl-Space":"autocomplete"},showCursorWhenSelecting:!0,theme:p.options.theme,dragDrop:!1,indentUnit:p.options.indentUnit,tabSize:p.options.tabSize,indentWithTabs:p.options.indentWithTabs,gutters:p.options.lineNumbers?["CodeMirror-linenumbers","breakpoints"]:!1,lineWrapping:p.options.lineWrapping,autofocus:p.options.autofocus});return L}function o(p,A){A!==null&&(p.getDoc().addLineClass(A,"gutter",T),p.getDoc().addLineClass(A,"text",T))}function d(p){for(var A=0,L=p.getDoc().lineCount();A<=L;A++)o(p,A)}function M(p,A){A!==null&&(p.getDoc().removeLineClass(A,"gutter",T),p.getDoc().removeLineClass(A,"text",T))}function m(p){for(var A=0,L=p.getDoc().lineCount();A<=L;A++)M(p,A)}},{"babel-runtime/core-js/promise":8,"babel-runtime/helpers/interop-require-default":14,codemirror:30,"codemirror/addon/comment/comment":15,"codemirror/addon/dialog/dialog":16,"codemirror/addon/display/panel":17,"codemirror/addon/display/rulers":18,"codemirror/addon/edit/closebrackets":19,"codemirror/addon/edit/matchbrackets":20,"codemirror/addon/fold/foldcode":21,"codemirror/addon/fold/foldgutter":22,"codemirror/addon/fold/indent-fold":23,"codemirror/addon/hint/javascript-hint":24,"codemirror/addon/hint/show-hint":25,"codemirror/addon/search/search":26,"codemirror/addon/search/searchcursor":27,"codemirror/addon/wrap/hardwrap":28,"codemirror/keymap/sublime":29,"codemirror/mode/clike/clike.js":31}],116:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var T=c("glslCanvas"),y=k(T),o=c("../tools/interactiveDom"),d=c("../tools/mediaCapture"),M=k(d),m=c("../ui/MenuItem"),p=k(m),A=c("../tools/download"),L="ge_control",S="ge_control_panel",R=function(){function v(w){var l=this;C(this,v),this.main=w,this.options=w.options,this.frag="",this.el=document.createElement("div"),this.el.setAttribute("class","ge_canvas_container"),this.elCanvas=document.createElement("canvas"),this.elCanvas.setAttribute("class","ge_canvas"),this.elCanvas.setAttribute("data-fragment",this.options.frag_header+this.options.frag+this.options.frag_footer),this.el.appendChild(this.elCanvas);var h=new y.default(this.elCanvas,{premultipliedAlpha:!1,preserveDrawingBuffer:!0,backgroundColor:"rgba(1,1,1,1)"}),x=this.options.canvas_width||this.options.canvas_size||"250",u=this.options.canvas_height||this.options.canvas_size||"250";if(h.canvas.style.width=x+"px",h.canvas.style.height=u+"px",h.resize(),this.canvas=h,this.options.imgs&&this.options.imgs.length>0)for(var P in this.options.imgs)this.canvas.setUniform("u_tex"+P,this.options.imgs[P]);if(this.mediaCapture=new M.default,this.mediaCapture.setCanvas(this.elCanvas),this.canvas.on("render",function(){l.mediaCapture.completeScreenshot()}),w.options.displayMenu){this.controlsContainer=document.createElement("ul"),this.controlsContainer.className=L,this.controlPanel=document.createElement("ul"),this.controlPanel.className=S,this.controlsContainer.appendChild(this.controlPanel),this.el.appendChild(this.controlsContainer),this.controls={},this.controls.playPause=new p.default(this.controlPanel,"ge_control_element",'<i class="material-icons">pause</i>',function(O){O.stopPropagation(),O.preventDefault(),h.paused?(h.play(),l.controls.playPause.name='<i class="material-icons">pause</i>'):(h.pause(),l.controls.playPause.name='<i class="material-icons">play_arrow</i>')}),this.isCapturing=!1;var b=new p.default(this.controlPanel,"ge_control_element",'<i class="material-icons">&#xE061;</i>',function(O){O.stopPropagation(),O.preventDefault(),l.isCapturing?l.stopVideoCapture():l.startVideoCapture()});this.controls.rec=b,this.controls.rec.button.style.color="red",this.controls.presentationMode=new p.default(this.controlPanel,"ge_control_element",'<i class="material-icons">open_in_new</i>',function(O){O.stopPropagation(),O.preventDefault(),w.pWindowOpen?w.togglePresentationWindow(!1):w.togglePresentationWindow(!0)}),this.elControl=this.el.getElementsByClassName(L)[0],this.elControl.addEventListener("mouseenter",function(O){l.showControls()}),this.elControl.addEventListener("mouseleave",function(O){l.hideControls()}),this.elCanvas.addEventListener("mousemove",function(O){O.offsetY>l.elCanvas.clientHeight*.66?l.showControls():l.hideControls()}),this.hideControls()}(w.options.canvas_draggable||w.options.canvas_resizable||w.options.canvas_snapable)&&((0,o.subscribeInteractiveDom)(this.el,{move:w.options.canvas_draggable,resize:w.options.canvas_resizable,snap:w.options.canvas_snapable}),w.options.canvas_size==="halfscreen"&&this.el.snapRight(),this.el.on("move",function(O){O.el.style.width=O.el.clientWidth+"px",O.el.style.height=O.el.clientHeight+"px"}),this.el.on("resize",function(O){h.canvas.style.width=O.el.clientWidth+"px",h.canvas.style.height=O.el.clientHeight+"px",h.resize()})),w.menu&&(this.el.style.top=(w.menu.el.clientHeight||w.menu.el.offsetHeight||w.menu.el.scrollHeight)+"px"),w.container.appendChild(this.el),h.resize()}return f(v,[{key:"hideControls",value:function(){this.elControl&&this.elControl.className===L&&(this.elControl.className=L+" "+L+"_hidden")}},{key:"showControls",value:function(){this.elControl&&this.elControl.className===L+" "+L+"_hidden"&&(this.elControl.className=L)}},{key:"requestRedraw",value:function(){this.canvas.forceRender=!0,this.canvas.render()}},{key:"screenshot",value:function(){return this.requestRedraw(),this.mediaCapture.screenshot()}},{key:"startVideoCapture",value:function(){this.requestRedraw(),this.mediaCapture.startVideoCapture()&&(this.isCapturing=!0,this.controls.rec.button.style.color="white",this.controls.rec.name='<i class="material-icons">&#xE061;</i>')}},{key:"stopVideoCapture",value:function(){this.isCapturing&&(this.isCapturing=!1,this.controls.rec.button.style.color="red",this.controls.rec.name='<i class="material-icons">stop</i>',this.mediaCapture.stopVideoCapture().then(function(l){(0,A.saveAs)(l.blob,Number(new Date)+".webm")}))}},{key:"openWindow",value:function(){this.originalSize={width:this.canvas.canvas.clientWidth,height:this.canvas.canvas.clientHeight},this.presentationWindow=window.open("","_blank","presentationWindow"),this.setUpPresentationWindow()}},{key:"closeWindow",value:function(){this.presentationWindow&&this.presentationWindow.close()}},{key:"setCanvasSize",value:function(l,h){this.canvas.canvas.style.width=l+"px",this.canvas.canvas.style.height=h+"px"}},{key:"setUpPresentationWindow",value:function(){this.presentationWindow.document.body.appendChild(this.canvas.canvas);var l=this.presentationWindow.document,h=l.createElement("div");h.appendChild(l.createTextNode("Projector mode"));var x=this.presentationWindow.document.createElement("span");h.appendChild(x),x.appendChild(l.createTextNode(" - If the canvas doesn't update, drag this window and reveal the editor")),l.body.appendChild(h),l.title="GLSL Editor",l.body.style.padding="0",l.body.style.margin="0",l.body.style.background="#171e22",l.body.style.overflow="hidden",h.style.position="absolute",h.style.width="100%",h.style.background="rgba(0, 0, 0, 0.5)",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.right="0",h.style.padding="16px",h.style.color="#ffffff",h.style.fontSize="14px",h.style.fontFamily="Helvetica, Geneva, sans-serif",h.style.fontWeight="400",h.style.letterSpacing="0.1em",h.style.textAlign="center",h.style.opacity="1",h.style.zIndex="9999",h.style.setProperty("-webkit-transition","opacity 1.5s"),h.style.setProperty("-moz-transition","opacity 1.5s"),h.style.setProperty("transition","opacity 1.5s"),x.style.color="rgba(255, 255, 255, 0.5)",setTimeout(function(){h.style.opacity=0},4e3),this.setCanvasSize(this.presentationWindow.innerWidth,this.presentationWindow.innerHeight),this.presentationWindow.addEventListener("resize",this.onPresentationWindowResize.bind(this)),this.presentationWindow.addEventListener("unload",this.onPresentationWindowClose.bind(this))}},{key:"onPresentationWindowClose",value:function(){this.el.appendChild(this.canvas.canvas),this.setCanvasSize(this.originalSize.width,this.originalSize.height),this.canvas.resize(),this.main.onClosePresentationWindow(),this.main.menu.onClosePresentationWindow(),this.presentationWindow=null}},{key:"onPresentationWindowResize",value:function(){this.presentationWindow&&(this.setCanvasSize(this.presentationWindow.innerWidth,this.presentationWindow.innerHeight),this.canvas.resize())}}]),v}();I.default=R,F.exports=I.default},{"../tools/download":123,"../tools/interactiveDom":124,"../tools/mediaCapture":125,"../ui/MenuItem":132,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14,glslCanvas:109}],117:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/core-js/object/keys").default,T=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var y=c("codemirror"),o=T(y);c("codemirror/mode/clike/clike.js");var d=function(){function M(m){C(this,M),this.main=m,this.buffers={},this.tabs={},this.current="untitled"}return f(M,[{key:"open",value:function(p,A){var L=this;this.el||(this.el=document.createElement("ul"),this.el.className="ge_panel"),this.main.change&&this.current==="untitled"&&(console.log("Open Current in a different tab"),this.open(this.current,this.main.getContent())),this.buffers[p]=o.default.Doc(A,"x-shader/x-fragment");var S=document.createElement("li");S.setAttribute("class","ge_panel_tab"),S.textContent=p,o.default.on(S,"click",function(){L.select(p)});var R=S.appendChild(document.createElement("a"));R.textContent="x",R.setAttribute("class","ge_panel_tab_close"),o.default.on(R,"click",function(){L.close(p)}),this.el.appendChild(S),this.tabs[p]=S,this.el&&!this.panel&&this.getLength()>1&&(this.panel=this.main.editor.addPanel(this.el,{position:"top"}))}},{key:"select",value:function(p){var A=this.buffers[p];if(A!==void 0){A.getEditor()&&(A=A.linkedDoc({sharedHist:!0}));var L=this.main.editor.swapDoc(A),S=L.iterLinkedDocs(function(v){S=v});if(S){for(var R in this.buffers)this.buffers[R]===L&&(this.buffers[R]=S);L.unlinkDoc(S)}this.main.options.autofocus&&this.main.editor.focus(),this.main.setContent(this.main.getContent()),this.tabs[this.current]&&this.tabs[this.current].setAttribute("class","ge_panel_tab"),this.tabs[p].setAttribute("class","ge_panel_tab_active"),this.current=p,this.main.editor.setSize(null,"auto"),this.main.editor.getWrapperElement().style.height="auto",this.main.trigger("new_content",{})}}},{key:"close",value:function(p){var A=p===this.getCurrent();if(this.el.removeChild(this.tabs[p]),delete this.tabs[p],delete this.buffers[p],this.getLength()===1&&(this.panel.clear(),this.panel=void 0,this.el=void 0),A)for(var L in this.tabs){this.select(L);break}}},{key:"getCurrent",value:function(){return this.current}},{key:"getLength",value:function(){return k(this.buffers).length}}]),M}();I.default=d,F.exports=I.default},{"babel-runtime/core-js/object/keys":6,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14,codemirror:30,"codemirror/mode/clike/clike.js":31}],118:[function(c,F,I){var f=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var C=function k(T){f(this,k),T.container.addEventListener("dragenter",function(y){var o=y.dataTransfer.types;o!==null&&(o.indexOf?o.indexOf("Files")!==-1:o.contains("application/x-moz-file"))&&(y.preventDefault(),y.dataTransfer.dropEffect="copy")},!0),T.container.addEventListener("dragover",function(y){y.preventDefault()},!1),T.container.addEventListener("dragleave",function(y){y.preventDefault()},!0),T.container.addEventListener("drop",function(y){if(y.preventDefault(),y.dataTransfer.files.length>0){var o=y.dataTransfer.files[0];T.open(o)}},!1)};I.default=C,F.exports=I.default},{"babel-runtime/helpers/class-call-check":10}],119:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var k=function(){function y(o){var d=this;C(this,y),this.main=o,this.check(),window.addEventListener("hashchange",function(){d.check()},!1)}return f(y,[{key:"check",value:function(){if(window.location.hash!==""){this.main.options.imgs=[];var d=location.hash.split("&");for(var M in d){var m=d[M].substr(d[M].lastIndexOf(".")+1),p=d[M];p.search("#")===0&&(p=p.substr(1));var A=p.split("/").pop();m==="frag"?this.main.open(p,A.replace(/\.[^/.]+$/,"")):(m==="png"||m==="jpg"||m==="PNG"||m==="JPG")&&this.main.options.imgs.push(p)}}var L=T(window.location.search.slice(1));if(L)for(var S in L)if(S==="log")if(this.main.bufferManager){var R=L.log.split(",");for(var M in R)this.main.open("https://thebookofshaders.com/log/"+R[M]+".frag",R[M])}else this.main.open("https://thebookofshaders.com/log/"+L.log+".frag",L.log);else{var v=L[S];v==="true"||v==="false"?v=v=="true":parseFloat(v)&&(v=parseFloat(v)),this.main.options[S]=v}}}]),y}();I.default=k;function T(y){var o={},d=y.split("&");for(var M in d){var m=d[M].split("=");o[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return o}F.exports=I.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],120:[function(c,F,I){Object.defineProperty(I,"__esModule",{value:!0});var f="glslEditor-",C={setItem:function(T,y){window.localStorage&&window.localStorage.setItem(f+T,y)},pushItem:function(T,y){var o=void 0;o=this.getItem(T);try{o=JSON.parse(o),o.arr=o.arr||[]}catch{o={arr:[]}}o.arr.push(y),this.setItem(T,JSON.stringify(o))},getItem:function(T){if(window.localStorage)return window.localStorage.getItem(f+T)},removeItem:function(T){window.localStorage&&window.localStorage.removeItem(f+T)},clear:function(){if(window.localStorage)for(var T in window.localStorage)T.indexOf(f)===0&&window.localStorage.removeItem(f+T)}};I.default=C,F.exports=I.default},{}],121:[function(c,F,I){Object.defineProperty(I,"__esModule",{value:!0}),I.getDomOrigin=f,I.getDevicePixelRatio=C,I.getJSON=k;function f(T){var y=T.getBoundingClientRect?T.getBoundingClientRect():{top:0,left:0},o=T&&T.ownerDocument,d=o.body,M=o.defaultView||o.parentWindow||window,m=o.documentElement||d.parentNode,p=m.clientTop||d.clientTop||0,A=m.clientLeft||d.clientLeft||0;return{left:y.left+(M.pageXOffset||m.scrollLeft)-A,top:y.top+(M.pageYOffset||m.scrollTop)-p}}function C(T){var y=window.devicePixelRatio||1,o=T.webkitBackingStorePixelRatio||T.mozBackingStorePixelRatio||T.msBackingStorePixelRatio||T.oBackingStorePixelRatio||T.backingStorePixelRatio||1;return y/o}function k(T,y){var o=new XMLHttpRequest;o.open("GET",T,!0),o.responseType="json",o.onload=function(){var d=o.status;y(d===200?null:d,o.response)},o.send()}},{}],122:[function(c,F,I){Object.defineProperty(I,"__esModule",{value:!0}),I.isCommented=f,I.isLineAfterMain=C,I.getVariableType=k,I.getShaderForTypeVarInLine=T,I.getResultRange=y,I.getMedian=o,I.getDeltaSum=d,I.getHits=M;function f(m,p,A){var L=m.getTokenAt({line:p,ch:A.index});return L&&L.type?L.type==="comment":!1}function C(m,p){for(var A=m.getDoc().size,L=new RegExp("void main\\s*\\(\\s*[void]*\\)","i"),S=0;S<p&&S<A;S++){var R=L.exec(m.getLine(S));if(R)return!0}return!1}function k(m,p){for(var A=m.getDoc().size,L=new RegExp("\\s*uniform\\s+(float|vec2|vec3|vec4)\\s+"+p+"\\s*;"),S=new RegExp("void main\\s*\\(\\s*[void]*\\)","i"),R=!1,v=new RegExp("(float|vec\\d)\\s+("+p+")\\s*[;]?","i"),w=0;w<A;w++)if(R){var x=v.exec(m.getLine(w));if(x&&x[1]&&!f(m,w,x))return x[1]}else{var l=S.exec(m.getLine(w));if(l)R=!0;else{var h=L.exec(m.getLine(w));if(h&&!f(m,w,h))return h[1]}}return"none"}function T(m,p,A,L){for(var S="",R=0;R<L+1&&R<m.getDoc().size;R++)m.getLine(R)&&(S+=m.getLine(R)+`
`);return S+="	gl_FragColor = ",p==="float"?S+="vec4(vec3("+A+"),1.)":p==="vec2"?S+="vec4(vec3("+A+",0.),1.)":p==="vec3"?S+="vec4("+A+",1.)":p==="vec4"&&(S+=A),S+=`;
}
`,S}function y(m){var p="10000000.0",A=0,L="0.0",S=0;for(var R in m)m[R].ms<p&&(p=m[R].ms,A=m[R].line),m[R].ms>L&&(L=m[R].ms,S=m[R].line);return{min:{line:A,ms:p},max:{line:S,ms:L}}}function o(m){m.sort(function(A,L){return A-L});var p=Math.floor(m.length/2);return m.length%2?m[p]:(m[p-1]+m[p])/2}function d(m){var p=0;for(var A in m)m[A].delta>0&&(p+=m[A].delta);return p}function M(m){var p=0;for(var A in m)m[A].delta>0&&p++;return p}},{}],123:[function(c,F,I){Object.defineProperty(I,"__esModule",{value:!0}),I.saveAs=f;function f(C,k){var T=URL.createObjectURL(C),y=document.createElement("a");y.setAttribute("download",k),y.setAttribute("href",T),y.click()}},{}],124:[function(c,F,I){Object.defineProperty(I,"__esModule",{value:!0}),I.subscribeInteractiveDom=y;var f=c("./mixin"),C=-30,k=10;function T(o,d,M,m,p){o.style.left=d+"px",o.style.top=M+"px",o.style.width=m+"px",o.style.height=p+"px"}function y(o,d){(0,f.subscribeMixin)(o),d=d||{},d.resize=d.resize!==void 0?d.resize:!1,d.move=d.move!==void 0?d.move:!1,d.snap=d.snap!==void 0?d.snap:!1;var M=100,m=100,p=null,A,L,S,R,v,w,l,h,x,u,P=!1,b=document.createElement("div");b.className="ghostdom",d.snap&&o.parentElement.appendChild(b),o.addEventListener("mousedown",V),document.addEventListener("mousemove",Q),document.addEventListener("mouseup",ue),o.addEventListener("touchstart",D,{passive:!1}),document.addEventListener("touchmove",$,{passive:!1}),document.addEventListener("touchend",W,{passive:!1});function O(){T(b,h.left,h.top,h.width,h.height),b.style.opacity=0}function D(te){te.preventDefault(),te.stopPropagation(),te.touches.length===1&&ee(te.changedTouches[0])}function $(te){te.preventDefault(),te.stopPropagation(),te.touches.length===1&&ie(te.changedTouches[0])}function W(te){te.preventDefault(),te.stopPropagation(),te.touches.length===0&&ye(te.changedTouches[0])}function V(te){te.preventDefault(),te.stopPropagation(),ee(te)}function Q(te){te.preventDefault(),te.stopPropagation(),ie(te)}function ue(te){te.preventDefault(),te.stopPropagation(),ye(te)}function ee(te){he(te);var Le=d.resize&&(A||L||R||S);p={x,y:u,cx:te.clientX,cy:te.clientY,w:h.width,h:h.height,isResizing:Le,isMoving:!Le&&ae(),onTopEdge:R,onLeftEdge:S,onRightEdge:A,onBottomEdge:L}}function ae(){return d.move&&x>0&&x<h.width&&u>0&&u<h.height}function he(te){h=o.getBoundingClientRect(),x=te.clientX-h.left,u=te.clientY-h.top,R=u<k,S=x<k,A=x>=h.width-k,L=u>=h.height-k,v=window.innerWidth-k,w=window.innerHeight-k}var me;function ie(te){he(te),me=te,P=!0}function re(){if(requestAnimationFrame(re),!!P){if(P=!1,p&&p.isResizing){if(p.onRightEdge&&(o.style.width=Math.max(x,M)+"px"),p.onBottomEdge&&(o.style.height=Math.max(u,m)+"px"),p.onLeftEdge){var te=Math.max(p.cx-me.clientX+p.w,M);te>M&&(o.style.width=te+"px",o.style.removeProperty("right"),o.style.left=me.clientX+"px")}if(p.onTopEdge){var Le=Math.max(p.cy-me.clientY+p.h,m);Le>m&&(o.style.height=Le+"px",o.style.removeProperty("bottom"),o.style.top=me.clientY+"px")}O(),o.trigger("resize",{finish:!1,el:o});return}if(p&&p.isMoving){if(d.snap){if(h.top<C||h.left<C||h.right>window.innerWidth-C||h.bottom>window.innerHeight-C?(T(b,0,0,window.innerWidth,window.innerHeight),b.style.opacity=.2):h.top<k?(T(b,0,0,window.innerWidth,window.innerHeight/2),b.style.opacity=.2):h.left<k?(T(b,0,0,window.innerWidth/2,window.innerHeight),b.style.opacity=.2):h.right>v?(T(b,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),b.style.opacity=.2):h.bottom>w?(T(b,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),b.style.opacity=.2):O(),l){T(o,me.clientX-l.width/2,me.clientY-Math.min(p.y,l.height),l.width,l.height);return}o.style.removeProperty("right"),o.style.removeProperty("bottom"),o.style.top=me.clientY-p.y+"px",o.style.left=me.clientX-p.x+"px"}else{var ve=me.clientX-p.x,ge=me.clientY-p.y;ve<0?ve=0:ge<0?ge=0:ve+o.offsetWidth>window.innerWidth?ve=window.innerWidth-o.offsetWidth:ge+o.offsetHeight>window.innerHeight&&(ge=window.innerHeight-o.offsetHeight),o.style.removeProperty("right"),o.style.removeProperty("bottom"),o.style.left=ve+"px",o.style.top=ge+"px"}o.trigger("move",{finish:!1,el:o});return}d.resize&&(A&&L||S&&R)?o.style.cursor="nwse-resize":d.resize&&(A&&R||L&&S)?o.style.cursor="nesw-resize":d.resize&&(A||S)?o.style.cursor="ew-resize":d.resize&&(L||R)?o.style.cursor="ns-resize":ae()?o.style.cursor="move":o.style.cursor="default"}}re();function ye(te){if(he(te),p&&p.isResizing&&o.trigger("resize",{finish:!0,el:o}),d.snap&&p&&p.isMoving){var Le={width:h.width,height:h.height};h.top<C||h.left<C||h.right>window.innerWidth-C||h.bottom>window.innerHeight-C?(T(o,0,0,window.innerWidth,window.innerHeight),l=Le):h.top<k?(T(o,0,0,window.innerWidth,window.innerHeight/2),l=Le):h.left<k?(T(o,0,0,window.innerWidth/2,window.innerHeight),l=Le):h.right>v?(T(o,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),l=Le):h.bottom>w?(T(o,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),l=Le):l=null,O(),o.trigger("move",{finish:!0,el:o}),o.trigger("resize",{finish:!0,el:o})}p=null}return o.snapRight=function(){var te={width:o.width,height:o.height};T(o,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),l=te,o.trigger("move",{finish:!0,el:o}),o.trigger("resize",{finish:!0,el:o})},o}},{"./mixin":126}],125:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/core-js/promise").default;Object.defineProperty(I,"__esModule",{value:!0});var T=c("./urls"),y=function(){function o(){C(this,o),this.queueScreenshot=null,this.videoCapture=null}return f(o,[{key:"setCanvas",value:function(M){this.canvas=M}},{key:"screenshot",value:function(){var M=this;return this.queueScreenshot!=null?this.queueScreenshot.promise:(this.queueScreenshot={},this.queueScreenshot.promise=new k(function(m,p){M.queueScreenshot.resolve=m,M.queueScreenshot.reject=p}),this.queueScreenshot.promise)}},{key:"completeScreenshot",value:function(){if(this.queueScreenshot!=null){for(var M=this.canvas.toDataURL("image/png"),m=atob(M.slice(22)),p=new Uint8Array(m.length),A=0;A<m.length;++A)p[A]=m.charCodeAt(A);var L=new Blob([p],{type:"image/png"});this.queueScreenshot.resolve({url:M,blob:L,type:"png"}),this.queueScreenshot=null}}},{key:"startVideoCapture",value:function(){var M=this;if(typeof window.MediaRecorder!="function"||!this.canvas||typeof this.canvas.captureStream!="function")return console.log("warn: Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.videoCapture)return console.log("warn: Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{(function(){var m=M.videoCapture={};m.chunks=[],m.stream=M.canvas.captureStream(),m.options={mimeType:"video/webm"},m.mediaRecorder=new MediaRecorder(m.stream,m.options),m.mediaRecorder.ondataavailable=function(p){if(p.data.size>0&&m.chunks.push(p.data),m.resolve){var A=new Blob(m.chunks,{type:m.options.mimeType}),L=(0,T.createObjectURL)(A);if(m.stream){var S=m.stream.getTracks()||[];S.forEach(function(R){R.stop(),m.stream.removeTrack(R)})}m.stream=null,m.mediaRecorder=null,M.videoCapture=null,m.resolve({url:L,blob:A,type:"webm"})}},m.mediaRecorder.start()})()}catch(m){return this.videoCapture=null,console.log("error: Scene video capture failed",m),!1}return!0}},{key:"stopVideoCapture",value:function(){var M=this;return this.videoCapture?(this.videoCapture.promise=new k(function(m,p){M.videoCapture.resolve=m,M.videoCapture.reject=p}),this.videoCapture.mediaRecorder.stop(),this.videoCapture.promise):(console.log("warn: No scene video capture in progress, call Scene.startVideoCapture() first"),k.resolve({}))}}]),o}();I.default=y,F.exports=I.default},{"./urls":127,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],126:[function(c,F,I){var f=c("babel-runtime/core-js/set").default,C=c("babel-runtime/core-js/object/assign").default,k=c("babel-runtime/core-js/get-iterator").default,T=c("babel-runtime/core-js/object/keys").default;Object.defineProperty(I,"__esModule",{value:!0}),I.subscribeMixin=y;function y(o){var d=new f;return C(o,{on:function(m,p){var A={};A[m]=p,d.add(A)},off:function(m,p){if(p){var A={};A[m]=p,d.delete(A)}else{var L=!0,S=!1,R=void 0;try{for(var v=k(d),w;!(L=(w=v.next()).done);L=!0){var l=w.value,h=!0,x=!1,u=void 0;try{for(var P=k(T(l)),b;!(h=(b=P.next()).done);h=!0){var O=b.value;if(O===m){d.delete(l);return}}}catch(D){x=!0,u=D}finally{try{!h&&P.return&&P.return()}finally{if(x)throw u}}}}catch(D){S=!0,R=D}finally{try{!L&&v.return&&v.return()}finally{if(S)throw R}}}},offAll:function(){d.clear()},trigger:function(m){var p=!0,A=!1,L=void 0;try{for(var S=arguments.length,R=Array(S>1?S-1:0),v=1;v<S;v++)R[v-1]=arguments[v];for(var w=k(d),l;!(p=(l=w.next()).done);p=!0){var h=l.value;typeof h[m]=="function"&&h[m].apply(h,R)}}catch(x){A=!0,L=x}finally{try{!p&&w.return&&w.return()}finally{if(A)throw L}}},listSubscriptions:function(){var m=!0,p=!1,A=void 0;try{for(var L=k(d),S;!(m=(S=L.next()).done);m=!0){var R=S.value;console.log(R)}}catch(v){p=!0,A=v}finally{try{!m&&L.return&&L.return()}finally{if(p)throw A}}}})}},{"babel-runtime/core-js/get-iterator":1,"babel-runtime/core-js/object/assign":2,"babel-runtime/core-js/object/keys":6,"babel-runtime/core-js/set":9}],127:[function(c,F,I){Object.defineProperty(I,"__esModule",{value:!0}),I.createObjectURL=C;var f=void 0;function C(k){return f===void 0&&(f=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL,typeof f!="function"&&(f=null,console.log("window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs"))),f?f(k):k}},{}],128:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var k=function(){function T(y){var o=this;C(this,T),this.main=y,this.widgets=[],this.main.shader.canvas.on("error",function(d){o.main.visualDebugger&&o.main.visualDebugger.testing?o.clean():(o.clean(),o.addError(d))}),this.main.editor.on("changes",function(d,M){o.main.shader.canvas.isValid&&o.clean()})}return f(T,[{key:"clean",value:function(){for(var o=0;o<this.widgets.length;o++)this.main.editor.removeLineWidget(this.widgets[o]);this.widgets.length=0}},{key:"addError",value:function(o){var d=/ERROR:\s+\d+:(\d+):\s+('.*)/g,M=d.exec(o.error);if(M){var m=0;this.main.options.frag_header.length>0&&(m+=(this.main.options.frag_header.match(/\r?\n/g)||"").length);var p=parseInt(M[1])-m,A=M[2],L=document.createElement("div"),S=L.appendChild(document.createElement("span"));S.className="ge-error-icon",S.innerHTML="x",L.appendChild(document.createTextNode(A)),L.className="ge-error",this.widgets.push(this.main.editor.addLineWidget(p,L))}}}]),T}();I.default=k,F.exports=I.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],129:[function(c,F,I){var f=c("babel-runtime/helpers/class-call-check").default,C=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var k=c("./modals/ExportModal"),T=C(k),y=function o(d){var M=this;f(this,o),this.main=d,this.el=document.createElement("div"),this.el.setAttribute("class","ge_export_icon"),this.el.innerHTML="△",this.el.addEventListener("click",function(m){(d.change||!M.modal)&&(M.modal=new T.default("ge_export",{main:d})),M.modal.presentModal(m.target.offsetLeft,m.target.offsetTop)},!0),this.main.container.appendChild(this.el)};I.default=y,F.exports=I.default},{"./modals/ExportModal":134,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/interop-require-default":14}],130:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var T=c("./pickers/ColorPicker"),y=k(T),o=c("./pickers/Vec3Picker"),d=k(o),M=c("./pickers/Vec2Picker"),m=k(M),p=c("./pickers/FloatPicker"),A=k(p),L=c("./pickers/types/Color"),S=k(L),R=c("./modals/Modal"),v=k(R);RegExp.prototype.execAll=function(l){for(var h=null,x=[];h=this.exec(l);){var u=[];for(var P in h)parseInt(P)==P&&u.push(h[P]);u.index=h.index,x.push(u)}return x};var w=function(){function l(h){var x=this;C(this,l),this.main=h,this.main.debugging=!1;var u=window.getComputedStyle(h.editor.getWrapperElement(),null),P=new S.default(u.background!==""?u.background:u.backgroundColor),b=new S.default(u.color);this.properties={bgColor:P.getString("rgb"),fnColor:b.getString("rgb"),dimColor:"rgb(127, 127, 127)",selColor:"rgb(40, 168, 107)",linkButton:!0};var O=this.main.editor.getWrapperElement();O.addEventListener("contextmenu",function(D){var $=x.main.editor.getCursor(!0),W=x.main.editor.getTokenAt($);W.type==="variable"?x.main.visualDebugger.debug(W.string,$.line):x.main.update()}),O.addEventListener("mouseup",function(D){if(!x.main.editor.somethingSelected()){var $=x.main.editor.getCursor(!0),W=x.getMatch($),V=x.main.editor.getTokenAt($);if(W){if(x.main.visualDebugger.clean(D),x.main.update(),x.activeModal&&x.activeModal.isVisible){x.activeModal.removeModal();return}W.type==="color"&&(x.activeModal=new y.default(W.string,x.properties),x.activeModal.showAt(x.main.editor),x.activeModal.on("changed",function(ue){var ee=ue.getString("vec"),ae={line:$.line,ch:W.start},he={line:$.line,ch:W.end};W.end=W.start+ee.length,x.main.editor.replaceRange(ee,ae,he,"+"+W.type)}),x.activeModal.on("linkButton",function(ue){x.activeModal=new d.default(ue.getString("vec"),x.properties),x.activeModal.showAt(x.main.editor),x.activeModal.on("changed",function(ee){var ae=ee.getString("vec3"),he={line:$.line,ch:W.start},me={line:$.line,ch:W.end};W.end=W.start+ae.length,x.main.editor.replaceRange(ae,he,me,"+"+W.type)})})),W.type==="vec3"?(x.activeModal=new d.default(W.string,x.properties),x.activeModal.showAt(x.main.editor),x.activeModal.on("changed",function(ue){var ee=ue.getString("vec3"),ae={line:$.line,ch:W.start},he={line:$.line,ch:W.end};W.end=W.start+ee.length,x.main.editor.replaceRange(ee,ae,he,"+"+W.type)})):W.type==="vec2"?(x.activeModal=new m.default(W.string,x.properties),x.activeModal.showAt(x.main.editor),x.activeModal.on("changed",function(ue){var ee=ue.getString(),ae={line:$.line,ch:W.start},he={line:$.line,ch:W.end};W.end=W.start+ee.length,x.main.editor.replaceRange(ee,ae,he,"+"+W.type)})):W.type==="number"&&(x.activeModal=new A.default(W.string,x.properties),x.activeModal.showAt(x.main.editor),x.activeModal.on("changed",function(ue){var ee=ue.getString(),ae={line:$.line,ch:W.start},he={line:$.line,ch:W.end};W.end=W.start+ee.length,x.main.editor.replaceRange(ee,ae,he,"+"+W.type)}))}else if(x.main.options.tooltips&&(V.type==="builtin"||V.type==="variable-3")){x.main.visualDebugger.clean(D);var Q='<p>Learn more about: <a href="https://thebookofshaders.com/glossary/?search='+V.string+'" target="_blank">'+V.string+"</a></p>";x.activeModal=new v.default("ge_tooltip",{innerHTML:Q}),x.activeModal.showAt(x.main.editor)}else V.type==="variable"&&x.main.visualDebugger&&(x.main.visualDebugger.clean(D),x.main.visualDebugger.iluminate(V.string))}})}return f(l,[{key:"getMatch",value:function(x){var u=["color","vec3","vec2","number"],P=void 0;for(var b in u)if(P=this.getTypeMatch(x,u[b]),P)return P}},{key:"getTypeMatch",value:function(x,u){if(u){var P=void 0;switch(u.toLowerCase()){case"color":P=/vec[3|4]\([\d|.|,\s]*\)/g;break;case"vec3":P=/vec3\([-|\d|.|,\s]*\)/g;break;case"vec2":P=/vec2\([-|\d|.|,\s]*\)/g;break;case"number":P=/[-]?\d+\.\d+|\d+\.|\.\d+/g;break;default:console.error("invalid match selection");return}var b=this.main.editor.getLine(x.line),O=P.execAll(b);if(O)for(var D=0;D<O.length;D++){var $=O[D][0],W=$.length,V=O[D].index,Q=O[D].index+W;if(x.ch>=V&&x.ch<=Q)return{type:u,start:V,end:Q,string:$}}}}}]),l}();I.default=w,F.exports=I.default},{"./modals/Modal":135,"./pickers/ColorPicker":136,"./pickers/FloatPicker":137,"./pickers/Vec2Picker":139,"./pickers/Vec3Picker":140,"./pickers/types/Color":141,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14}],131:[function(c,F,I){var f=c("babel-runtime/helpers/class-call-check").default,C=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var k=c("./MenuItem"),T=C(k),y=c("./modals/ExportModal"),o=C(y),d=function M(m){var p=this;f(this,M),this.main=m,this.menus={},this.el=document.createElement("ul"),this.el.setAttribute("class","ge_menu_bar"),this.menus.new=new T.default(this.el,"ge_menu",'<i class="material-icons">add</i> New',function(A){m.new()}),this.fileInput=document.createElement("input"),this.fileInput.setAttribute("type","file"),this.fileInput.setAttribute("accept","text/x-yaml"),this.fileInput.style.display="none",this.fileInput.addEventListener("change",function(A){m.open(A.target.files[0])}),this.menus.open=new T.default(this.el,"ge_menu",'<i class="material-icons">folder_open</i>  Open',function(A){p.fileInput.click()}),this.menus.test=new T.default(this.el,"ge_menu",'<i class="material-icons">timeline</i> Test',function(A){m.visualDebugger.check()}),this.menus.share=new T.default(this.el,"ge_menu",'<i class="material-icons">arrow_upward</i> Export',function(A){(m.change||!p.exportModal)&&(p.exportModal=new o.default("ge_export",{main:m,position:"fixed"}));var L=p.menus.share.el.getBoundingClientRect();p.exportModal.presentModal(L.left-5,L.top+L.height+5)}),this.menus.autoupdate=new T.default(this.el,"ge_menu",' <i class="material-icons">autorenew</i> Update: ON',function(A){m.autoupdate?(m.autoupdate=!1,p.menus.autoupdate.name='<i class="material-icons">autorenew</i> Update: OFF'):(m.autoupdate=!0,m.update(),p.menus.autoupdate.name='<i class="material-icons">autorenew</i> Update: ON')}),m.container.appendChild(this.el)};I.default=d,F.exports=I.default},{"./MenuItem":132,"./modals/ExportModal":134,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/interop-require-default":14}],132:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var k=function(){function T(y,o,d,M){C(this,T),this.el=document.createElement("li"),this.button=document.createElement("button"),this.button.className=o+"_button",this.el.appendChild(this.button),this.el.setAttribute("class",o),this.button.innerHTML=d,this.className=o,this.hiddenClass=o+"--hidden",this.button.addEventListener("click",M,!0),y&&y.appendChild(this.el)}return f(T,[{key:"hide",value:function(){this.el.setAttribute("class",this.className+" "+this.hiddenClass)}},{key:"show",value:function(){this.el.setAttribute("class",this.className)}},{key:"name",set:function(o){this.button.innerHTML=o}}]),T}();I.default=k,F.exports=I.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],133:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var k=c("../tools/debugging"),T=c("../core/Editor.js"),y={},o=30,d=function(){function p(A){var L=this;C(this,p),this.main=A,this.breakpoint=null,y=A,this.testing=!1,this.testingFrag="",this.testingLine=0,this.testingResults=[],this.testingSamples=[],this.main.editor.on("gutterClick",function(S,R){var v=S.lineInfo(R);if(v&&v.gutterMarkers&&v.gutterMarkers.breakpoints){var w=new RegExp("\\s*[float|vec2|vec3|vec4]?\\s+([\\w|\\_]*)[\\.\\w]*?\\s+[\\+|\\-|\\\\|\\*]?\\=","i"),l=w.exec(v.text);l&&(L.debug(l[1],v.line),L.breakpoint=v.line)}})}return f(p,[{key:"check",value:function(){this.testingResults=[];for(var L=this.main.editor,S=L.getDoc().size,R=0,v=0;v<S;v++)if((0,k.isLineAfterMain)(L,v)){R=v;break}this.testLine(R)}},{key:"testLine",value:function(L){var S=y.editor,R=y.visualDebugger;if(L>=S.getDoc().size){R.testingLine=0,R.testing=!1;var v=R.testingResults,w=(0,k.getResultRange)(v),l=(0,k.getDeltaSum)(v),h=(0,k.getHits)(v);console.log("Test: ",w.max.ms+"ms",v),S.clearGutter("breakpoints");for(var x in v){var u=v[x].delta/l*100,P=v[x].delta/l*30,b="<div>"+v[x].ms.toFixed(2);v[x].delta>0&&(b+='<span class="ge_assing_marker_pct ',u>100/h&&(b+="ge_assing_marker_slower"),b+='" style="width: '+P.toFixed(0)+'px;" data="'+u.toFixed(0)+'%"></span>'),S.setGutterMarker(v[x].line,"breakpoints",M(b+"</div>"))}return}if((0,k.isLineAfterMain)(S,L)){var O=y.shader.canvas,D=new RegExp("\\s*[float|vec2|vec3|vec4]?\\s+([\\w|\\_]*)[\\.\\w]*?\\s+[\\+|\\-|\\\\|\\*]?\\=","i"),$=D.exec(S.getLine(L));if($){var W=$[1],V=(0,k.getVariableType)(S,W);if(V==="none"){R.testLine(L+1);return}R.testing=!0,R.testingLine=L,R.testingFrag=(0,k.getShaderForTypeVarInLine)(S,V,W,L),R.testingSamples=[],(0,T.unfocusAll)(S),(0,T.focusLine)(S,L),y.debugging=!0,O.test(this.onTest,R.testingFrag)}else R.testLine(L+1)}else R.testLine(L+1)}},{key:"onTest",value:function(L){var S=y.editor,R=y.shader.canvas,v=y.visualDebugger;if(L.wasValid){var w=L.timeElapsedMs;if(v.testingSamples.length<o-1)v.testingSamples.push(w),R.test(v.onTest,v.testingFrag);else{(0,T.focusAll)(S),y.debugging=!1,v.testingSamples.push(w),w=(0,k.getMedian)(v.testingSamples);var l=(0,k.getResultRange)(v.testingResults),h=w-l.max.ms;v.testingResults.length===0&&(h=0),v.testingResults.push({line:v.testingLine,ms:L.timeElapsedMs,delta:h}),S.setGutterMarker(v.testingLine,"breakpoints",M(w.toFixed(2))),v.testLine(v.testingLine+1)}}else console.log(L),v.testLine(v.testingLine+1)}},{key:"debug",value:function(L,S){if((0,T.focusAll)(this.main.editor),this.main.debugging=!1,(0,k.isLineAfterMain)(this.main.editor,S)){var R=(0,k.getVariableType)(this.main.editor,L);R!=="none"&&(event.preventDefault(),this.main.shader.canvas.load((0,k.getShaderForTypeVarInLine)(this.main.editor,R,L,S)),(0,T.unfocusAll)(this.main.editor),(0,T.focusLine)(this.main.editor,S),this.main.debugging=!0)}else this.main.update()}},{key:"iluminate",value:function(L){if(!(this.main.debbuging&&this.variable===this.variable)){var S=this.main.editor;this.overlay=m(L),S.addOverlay(this.overlay),S.showMatchesOnScrollbar&&(this.annotate&&(this.annotate.clear(),this.annotate=null),this.annotate=S.showMatchesOnScrollbar(L,!0))}}},{key:"clean",value:function(L){if(!(L&&L.target&&L.target.className==="ge_assing_marker")){var S=this.main.editor;S.clearGutter("breakpoints"),this.overlay&&S.removeOverlay(this.overlay,!0),this.type=null,this.main.debbuging&&this.main.shader.canvas.load(this.main.options.frag_header+this.main.editor.getValue()+this.main.options.frag_footer),this.main.debbuging=!1}}}]),p}();I.default=d;function M(p,A){var L=document.createElement("div");return L.setAttribute("class","ge_assing_marker"),L.innerHTML=p,L}function m(p,A){return typeof p=="string"?p=new RegExp(p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gi"):p.global||(p=new RegExp(p.source,p.ignoreCase?"gi":"g")),{token:function(S){p.lastIndex=S.pos;var R=p.exec(S.string);if(R&&R.index===S.pos)return S.pos+=R[0].length||1,"searching";R?S.pos=R.index:S.skipToEnd()}}}F.exports=I.default},{"../core/Editor.js":115,"../tools/debugging":122,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],134:[function(c,F,I){var f=c("babel-runtime/helpers/get").default,C=c("babel-runtime/helpers/inherits").default,k=c("babel-runtime/helpers/class-call-check").default,T=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var y=c("../MenuItem"),o=T(y),d=c("./Modal"),M=T(d),m=function(p){C(A,p);function A(L,S){k(this,A),f(Object.getPrototypeOf(A.prototype),"constructor",this).call(this,L,S),this.main=S.main,this.save=new o.default(this.el,"ge_sub_menu","Download file",function(R){S.main.download()})}return A}(M.default);I.default=m,F.exports=I.default},{"../MenuItem":132,"./Modal":135,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],135:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0}),I.addEvent=y,I.removeEvent=o;var k=c("../../tools/mixin"),T=function(){function d(M,m){C(this,d),(0,k.subscribeMixin)(this),this.CSS_PREFIX=M,m=m||{};for(var p in m)this[p]=m[p];if(this.el=document.createElement("div"),this.el.className=this.CSS_PREFIX+"_modal ge_modal",this.el.style.backgroundColor=this.bgColor,this.el.innerHTML=this.innerHTML||"",this.elements)for(var A=0;A<this.elements.length;A++)this.el.appendChild(this.elements[A]);this.isVisible=!1}return f(d,[{key:"close",value:function(){this.trigger("close")}},{key:"showAt",value:function(m){var p=m.cursorCoords(!0,"page"),A=p.left,L=p.top;L+=30,this.presentModal(A,L)}},{key:"presentModal",value:function(m,p){var A=this;window.setTimeout(function(){A.onClickOutsideHandler=y(document.body,"click",A.onClickOutside,A),A.onKeyPressHandler=y(window,"keydown",A.onKeyPress,A)},0),this.isVisible=!0,this.el.style.left=m+"px",this.el.style.top=p+"px",this.el.style.width=this.width+"px",this.el.style.height=this.height+"px",this.position&&(this.el.style.position=this.position),document.body.appendChild(this.el),this.trigger("show")}},{key:"getModalClass",value:function(){return this.CSS_PREFIX+"modal"}},{key:"onKeyPress",value:function(m){this.removeModal()}},{key:"onClickOutside",value:function(m){if(m.target!==document.body){var p=m.target;if(p){for(;p!==document.documentElement&&!p.classList.contains(this.getModalClass());)p=p.parentNode;p.classList.contains(this.getModalClass())||this.removeModal()}}}},{key:"removeModal",value:function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),o(document.body,"click",this.onClickOutsideHandler),this.onClickOutsideHandler=null,o(window,"keydown",this.onKeyPressHandler),this.onKeyPressHandler=null,this.close(),this.isVisible=!1}}]),d}();I.default=T;function y(d,M,m,p){var A=void 0;return d.addEventListener(M,A=function(L){m.call(p,L)},!1),A}function o(d,M,m){d.removeEventListener(M,m,!1)}},{"../../tools/mixin":126,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],136:[function(c,F,I){var f=c("babel-runtime/helpers/get").default,C=c("babel-runtime/helpers/inherits").default,k=c("babel-runtime/helpers/create-class").default,T=c("babel-runtime/helpers/class-call-check").default,y=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var o=c("./Picker"),d=y(o),M=c("./types/Color"),m=y(M),p=c("../../tools/common"),A=c("../../tools/interactiveDom"),L=void 0,S=0,R=void 0,v=function(h){C(x,h);function x(){var u=arguments.length<=0||arguments[0]===void 0?"vec3(1.0,0.0,0.0)":arguments[0],P=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];T(this,x),f(Object.getPrototypeOf(x.prototype),"constructor",this).call(this,"ge_colorpicker_",P),this.width=250,this.height=250,this.disc={width:200,height:200},this.barlum={width:25,height:200},this.setValue(u),this.init()}return k(x,[{key:"init",value:function(){var P=this;if(!R){var b=document.createElement("div"),O=document.createElement("div"),D=document.createElement("div"),$=document.createElement("canvas"),W=document.createElement("div"),V=document.createElement("div"),Q=document.createElement("div"),ue=document.createElement("div"),ee=document.createElement("canvas"),ae=document.createElement("div"),he=document.createElement("div"),me=document.createElement("div");b.className=this.CSS_PREFIX+"modal ge_picker_modal",b.style.backgroundColor=this.bgColor,O.className=this.CSS_PREFIX+"patch",O.style.backgroundColor=this.bgColor,D.className=this.CSS_PREFIX+"hsv-map",$.className=this.CSS_PREFIX+"disc",$.style.backgroundColor=this.bgColor,W.className=this.CSS_PREFIX+"disc-cover",V.className=this.CSS_PREFIX+"disc-cursor",Q.className=this.CSS_PREFIX+"bar-bg",ue.className=this.CSS_PREFIX+"bar-white",ee.className=this.CSS_PREFIX+"bar-luminance",ae.className=this.CSS_PREFIX+"bar-cursors",he.className=this.CSS_PREFIX+"bar-cursor-left",me.className=this.CSS_PREFIX+"bar-cursor-right",D.id="cp-map",ae.id="cp-bar",b.appendChild(O),b.appendChild(D),D.appendChild($),D.appendChild(W),D.appendChild(V),D.appendChild(Q),D.appendChild(ue),D.appendChild(ee),D.appendChild(ae),ae.appendChild(he),ae.appendChild(me),R=b}if(this.el=R.cloneNode(!0),(0,A.subscribeInteractiveDom)(this.el,{move:!0,resize:!1,snap:!1}),this.dom={},this.dom.hsvMap=this.el.querySelector(".ge_colorpicker_hsv-map"),this.dom.hsvMapCover=this.dom.hsvMap.children[1],this.dom.hsvMapCursor=this.dom.hsvMap.children[2],this.dom.hsvBarBGLayer=this.dom.hsvMap.children[3],this.dom.hsvBarWhiteLayer=this.dom.hsvMap.children[4],this.dom.hsvBarCursors=this.dom.hsvMap.children[6],this.dom.hsvLeftCursor=this.dom.hsvBarCursors.children[0],this.dom.hsvRightCursor=this.dom.hsvBarCursors.children[1],this.dom.colorDisc=this.el.querySelector(".ge_colorpicker_disc"),this.dom.luminanceBar=this.el.querySelector(".ge_colorpicker_bar-luminance"),this.linkButton){var ie=document.createElement("div");ie.innerHTML="+",ie.className=this.CSS_PREFIX+"link-button",ie.style.color=this.fgColor,this.el.appendChild(ie),ie.addEventListener("click",function(){P.trigger("linkButton",P.value),typeof P.linkButton=="function"&&P.linkButton(P.value),P.removeModal()})}}},{key:"draw",value:function(){var P=this.el.querySelector(".ge_colorpicker_patch");P.style.backgroundColor=this.value.getString("rgb");var b=this.value.colors,O=this.dom.colorDisc.offsetHeight/2,D=Math.PI*2,$=Math.cos(D-b.hsv.h*D),W=Math.sin(D-b.hsv.h*D),V=b.hsv.s*(O-5);this.dom.hsvMapCover.style.opacity=1-b.hsv.v/255,this.dom.hsvBarWhiteLayer.style.opacity=1-b.hsv.s,this.dom.hsvBarBGLayer.style.backgroundColor="rgb("+b.hueRGB.r+","+b.hueRGB.g+","+b.hueRGB.b+")",this.dom.hsvMapCursor.style.cssText="left: "+($*V+O)+"px;top: "+(W*V+O)+"px;border-color: "+(b.luminance>.22?"#333;":"#ddd"),b.luminance>.22?this.dom.hsvBarCursors.classList.add("ge_colorpicker_dark"):this.dom.hsvBarCursors.classList.remove("ge_colorpicker_dark"),this.dom.hsvLeftCursor&&(this.dom.hsvLeftCursor.style.top=this.dom.hsvRightCursor.style.top=(1-b.hsv.v/255)*O*2+"px")}},{key:"presentModal",value:function(P,b){f(Object.getPrototypeOf(x.prototype),"presentModal",this).call(this,P,b),this.onHsvDownHandler=(0,o.addEvent)(this.dom.hsvMap,"mousedown",this.onHsvDown,this);var O=this.dom.colorDisc;if(O.getContext){var D=O.getContext("2d"),$=(0,p.getDevicePixelRatio)(D),W=this.disc.width/$,V=this.disc.height/$;this.dom.colorDisc.width=W*$,this.dom.colorDisc.height=V*$,D.scale($,$),w(D,[W/2,V/2],[W/2-1,V/2-1],360,function(ee,ae){var he=ee.createRadialGradient(1,1,1,1,1,0);he.addColorStop(0,"hsl("+(360-ae+0)+", 100%, 50%)"),he.addColorStop(1,"#fff"),ee.fillStyle=he,ee.fill()}),l(D,[W/2,V/2],[W/2,V/2],this.bgColor,2/$);var Q=this.dom.luminanceBar.getContext("2d");this.dom.luminanceBar.width=this.barlum.width,this.dom.luminanceBar.height=this.barlum.height*$,Q.scale($,$);var ue=Q.createLinearGradient(0,0,0,this.barlum.height/$);ue.addColorStop(0,"transparent"),ue.addColorStop(1,"black"),Q.fillStyle=ue,Q.fillRect(0,0,30,200)}this.draw()}},{key:"setValue",value:function(P){this.value=new m.default(P)}},{key:"onHsvDown",value:function(P){var b=P.target||P.srcElement;P.preventDefault(),L=b.id?b:b.parentNode,S=L.offsetHeight,this.onHsvMoveHandler=(0,o.addEvent)(this.el,"mousemove",this.onHsvMove,this),this.onHsvUpHandler=(0,o.addEvent)(window,"mouseup",this.onHsvUp,this),this.onHsvMove(P),this.dom.hsvMap.classList.add("ge_colorpicker_no-cursor"),this.renderer.start()}},{key:"onHsvMove",value:function(P){P.preventDefault(),P.stopPropagation();var b=void 0,O=void 0,D=void 0,$=void 0,W=void 0;if(P.target===this.dom.hsvMapCover&&L===this.dom.hsvMap)b=S/2,O=P.offsetX-b,D=P.offsetY-b,$=(360-(Math.atan2(D,O)*180/Math.PI+(D<0?360:0)))/360,W=Math.sqrt(O*O+D*D)/b,this.value.set({h:$,s:W},"hsv");else if(P.target===this.dom.hsvBarCursors&&L===this.dom.hsvBarCursors){var V=(S-P.offsetY)/S;V=Math.max(0,Math.min(1,V))*255,this.value.set({v:V},"hsv")}this.trigger("changed",this.value)}},{key:"onHsvUp",value:function(P){this.renderer.stop(),this.dom.hsvMap.classList.remove("ge_colorpicker_no-cursor"),this.destroyEvents()}},{key:"destroyEvents",value:function(){(0,o.removeEvent)(this.el,"mousemove",this.onHsvMoveHandler),this.onHsvMoveHandler=null,(0,o.removeEvent)(window,"mouseup",this.onHsvUpHandler),this.onHsvUpHandler=null}},{key:"close",value:function(){this.destroyEvents(),(0,o.removeEvent)(this.dom.hsvMap,"mousedown",this.onHsvDownHandler),this.onHsvDownHandler=null}}]),x}(d.default);I.default=v;function w(h,x,u,P,b){var O=x[0]||x,D=x[1]||x,$=u[0]||u,W=u[1]||u,V=360,Q=Math.PI/180;for(h.save(),h.translate(O-$,D-W),h.scale($,W),P=V/P||360;V>0;V-=P)h.beginPath(),P!==360&&h.moveTo(1,1),h.arc(1,1,1,(V-P/2-1)*Q,(V+P/2+1)*Q),b?b(h,V):(h.fillStyle="black",h.fill());h.restore()}function l(h,x,u,P,b){b=b||1,u=[(u[0]||u)-b/2,(u[1]||u)-b/2],w(h,x,u,1,function(O,D){O.restore(),O.lineWidth=b,O.strokeStyle=P||"#000",O.stroke()})}F.exports=I.default},{"../../tools/common":121,"../../tools/interactiveDom":124,"./Picker":138,"./types/Color":141,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],137:[function(c,F,I){var f=c("babel-runtime/helpers/get").default,C=c("babel-runtime/helpers/inherits").default,k=c("babel-runtime/helpers/create-class").default,T=c("babel-runtime/helpers/class-call-check").default,y=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var o=c("./Picker"),d=y(o),M=c("./types/Float"),m=y(M),p=function(A){C(L,A);function L(S,R){T(this,L),f(Object.getPrototypeOf(L.prototype),"constructor",this).call(this,"ge_floatpicker_",R),this.width=this.width||250,this.height=this.height||40,this.prevOffset=0,this.scale=2,this.setValue(S||1),this.create()}return k(L,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,.5+this.height*.5),this.ctx.lineTo(0+this.width,.5+this.height*.5),this.ctx.closePath(),this.ctx.stroke(),this.ctx.strokeStyle=this.fnColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.width*.5,0),this.ctx.lineTo(this.width*.5,this.height),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.beginPath(),this.ctx.moveTo(this.width*.5,5),this.ctx.lineTo(this.width*.48,0),this.ctx.lineTo(this.width*.52,0),this.ctx.closePath(),this.ctx.fill();var R=3,v=40,w=this.width/v,l=v*R,h=this.offsetX;Math.abs(this.offsetX-this.width*.5)>this.width*.5&&(h=(this.offsetX-this.width*.5)%(this.width*.5)+this.width),this.ctx.strokeStyle=this.dimColor,this.ctx.beginPath();for(var x=0;x<l;x++){var u=x%(v/2)===0?this.height*.35:x%(v/4)===0?this.height*.2:this.height*.1;this.ctx.moveTo(x*w-h,this.height*.5-u),this.ctx.lineTo(x*w-h,this.height*.5+u)}this.ctx.stroke();var P=Math.round((this.value-this.min)/this.range*this.width);this.ctx.strokeStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.offsetX+P,this.height*.5),this.ctx.lineTo(this.offsetX+P,this.height),this.ctx.closePath(),this.ctx.stroke(),this.overPoint=!1}},{key:"onMouseDown",value:function(R){this.prevOffset=R.offsetX,f(Object.getPrototypeOf(L.prototype),"onMouseDown",this).call(this,R)}},{key:"onMouseMove",value:function(R){var v=R.offsetX,w=v-this.prevOffset,l=this.offsetX-w,h=this.width/this.scale;this.setValue(l/h),this.prevOffset=v;var x=new m.default(this.getValue());this.trigger("changed",x),this.overPoint=!0}},{key:"setValue",value:function(R){typeof R=="string"?this.value=parseFloat(R):typeof R=="number"&&(this.value=R);var v=this.width/this.scale;this.offsetX=this.value*v}}]),L}(d.default);I.default=p,F.exports=I.default},{"./Picker":138,"./types/Float":143,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],138:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0}),I.addEvent=o,I.removeEvent=d;var k=c("../../tools/common"),T=c("../../tools/mixin"),y=function(){function M(m,p){var A=this;C(this,M),(0,T.subscribeMixin)(this),this.CSS_PREFIX=m,this.bgColor="rgb(46, 48, 51)",this.dimColor="rgb(100, 100, 100)",this.fnColor="rgb(230, 230, 230)",this.selColor="rgb(133, 204, 196)",p=p||{};for(var L in p)this[L]=p[L];this.renderer={frame:null,drawFrame:function(){A.el&&A.draw()},start:function(){A.renderer.drawFrame(),A.renderer.frame=window.requestAnimationFrame(A.renderer.start)},stop:function(){window.cancelAnimationFrame(A.renderer.frame)}},this.isVisible=!1}return f(M,[{key:"create",value:function(){this.el=document.createElement("div"),this.el.className=this.CSS_PREFIX+"modal ge_picker_modal",this.el.style.backgroundColor=this.bgColor,this.canvas=document.createElement("canvas"),this.canvas.className=this.CSS_PREFIX+"canvas ge_picker_canvas",this.canvas.style.backgroundColor=this.bgColor,this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");var p=(0,k.getDevicePixelRatio)(this.ctx);this.canvas.width=this.width*p,this.canvas.height=this.height*p,this.ctx.scale(p,p)}},{key:"draw",value:function(){}},{key:"close",value:function(){this.destroyEvents(),d(this.el,"mousedown",this.onMouseDownHandler),this.onMouseDownHandler=null}},{key:"destroyEvents",value:function(){d(this.el,"mousemove",this.onMouseMoveHandler),this.onMouseMoveHandler=null,d(window,"mouseup",this.onMouseUpHandler),this.onMouseUpHandler=null}},{key:"setValue",value:function(p){this.value=p}},{key:"getValue",value:function(){return this.value}},{key:"showAt",value:function(p){var A=p.cursorCoords(!0,"page"),L=A.left,S=A.top;L-=this.width*.5,S+=30,this.presentModal(L,S)}},{key:"presentModal",value:function(p,A){var L=this;window.setTimeout(function(){L.onClickOutsideHandler=o(document.body,"click",L.onClickOutside,L),L.onKeyPressHandler=o(window,"keydown",L.onKeyPress,L)},0),this.isVisible=!0,this.el.style.left=p+"px",this.el.style.top=A+"px",this.el.style.width=this.width+"px",this.el.style.height=this.height+"px",document.body.appendChild(this.el),this.onMouseDownHandler=o(this.el,"mousedown",this.onMouseDown,this),this.renderer.drawFrame()}},{key:"removeModal",value:function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),d(document.body,"click",this.onClickOutsideHandler),this.onClickOutsideHandler=null,d(window,"keydown",this.onKeyPressHandler),this.onKeyPressHandler=null,this.close(),this.isVisible=!1}},{key:"onKeyPress",value:function(p){this.removeModal()}},{key:"onClickOutside",value:function(p){if(p.target!==document.body){for(var A=p.target;A!==document.documentElement&&!A.classList.contains(this.CSS_PREFIX+"modal");)A=A.parentNode;A.classList.contains(this.CSS_PREFIX+"modal")||this.removeModal()}}},{key:"onMouseDown",value:function(p){p.preventDefault(),this.onMouseMoveHandler=o(this.el,"mousemove",this.onMouseMove,this),this.onMouseUpHandler=o(window,"mouseup",this.onMouseUp,this),this.onMouseMove(p),this.renderer.start()}},{key:"onMouseMove",value:function(p){}},{key:"onMouseUp",value:function(p){this.renderer.stop(),this.destroyEvents()}}]),M}();I.default=y;function o(M,m,p,A){var L=void 0;return M.addEventListener(m,L=function(S){p.call(A,S)},!1),L}function d(M,m,p){M.removeEventListener(m,p,!1)}},{"../../tools/common":121,"../../tools/mixin":126,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],139:[function(c,F,I){var f=c("babel-runtime/helpers/get").default,C=c("babel-runtime/helpers/inherits").default,k=c("babel-runtime/helpers/create-class").default,T=c("babel-runtime/helpers/class-call-check").default,y=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var o=c("./Picker"),d=y(o),M=c("./types/Vector"),m=y(M),p=function(A){C(L,A);function L(S,R){T(this,L),f(Object.getPrototypeOf(L.prototype),"constructor",this).call(this,"ge_vec2picker_",R),this.width=this.width||200,this.height=this.height||200,this.min=this.min||-1,this.max=this.max||1,this.size=this.size||6,this.range=this.max-this.min,this.overPoint=!1;var v=(this.range/2-this.max)*-1;this.setValue(S||[v,v]),this.create()}return k(L,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=2,this.ctx.strokeRect(0,0,this.width,this.height),this.ctx.beginPath(),this.ctx.lineWidth=.25;for(var R=20,v=this.width/R,w=0;w<R;w++)this.ctx.moveTo(w*v,0),this.ctx.lineTo(w*v,this.height),this.ctx.moveTo(0,w*v),this.ctx.lineTo(this.width,w*v);this.ctx.stroke(),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,.5+this.height*.5),this.ctx.lineTo(this.width,.5+this.height*.5),this.ctx.closePath(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(.5+this.width*.5,0),this.ctx.lineTo(.5+this.width*.5,this.height),this.ctx.closePath(),this.ctx.stroke();var l=Math.round((this.value.x-this.min)/this.range*this.width),h=Math.round((1-(this.value.y-this.min)/this.range)*this.height),x=this.size/2;l<x&&(l=x),l>this.width-x&&(l=this.width-x),h<x&&(h=x),h>this.height-x&&(h=this.height-x),this.ctx.fillStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.beginPath();var u=this.overPoint?4:2;this.ctx.arc(l,h,u,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore(),this.overPoint=!1}},{key:"onMouseMove",value:function(R){var v=R.offsetX,w=R.offsetY;this.value.x=this.range/this.width*v-(this.range-this.max),this.value.y=(this.range/this.height*w-(this.range-this.max))*-1,this.trigger("changed",this.value),this.overPoint=!0}},{key:"setValue",value:function(R){this.value=new m.default(R)}}]),L}(d.default);I.default=p,F.exports=I.default},{"./Picker":138,"./types/Vector":145,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],140:[function(c,F,I){var f=c("babel-runtime/helpers/get").default,C=c("babel-runtime/helpers/inherits").default,k=c("babel-runtime/helpers/create-class").default,T=c("babel-runtime/helpers/class-call-check").default,y=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var o=c("./Picker"),d=y(o),M=c("./types/Vector"),m=y(M),p=c("./types/Matrix"),A=y(p),L=function(S){C(R,S);function R(v,w){T(this,R),f(Object.getPrototypeOf(R.prototype),"constructor",this).call(this,"ge_vec3picker_",w),this.width=this.width||200,this.height=this.width||200,this.scale=50,this.setValue(v||[0,0,1]),this.create(),this.camera=new A.default,this.shapes=[],this.center=[0,0,0],this.shapes.push({edgeColour:this.dimColor,nodes:[[this.width/2-50,this.height/2,100],[this.width/2+50,this.height/2,100],[this.width/2,this.height/2-50,100],[this.width/2,this.height/2+50,100],[this.width/2,this.height/2,50],[this.width/2,this.height/2,150]],edges:[[0,1],[2,3],[4,5]]}),this.shapes.push({textColour:this.fnColor,nodes:[[this.width/2+68,this.height/2,100],[this.width/2-68,this.height/2,100],[this.width/2,this.height/2+68,100],[this.width/2,this.height/2-68,100],[this.width/2,this.height/2,168],[this.width/2,this.height/2,32]],text:["x","-x","y","-y","z","-z"]}),this.setCenter(this.width/2,this.height/2,100),this.dragOffset=[0,0],this.overPoint=!1}return k(R,[{key:"setCenter",value:function(w,l,h){for(var x in this.shapes){var u=this.shapes[x];for(var P in u.nodes)u.nodes[P][0]-=w,u.nodes[P][1]-=l,u.nodes[P][2]-=h}this.center=[w,l,h]}},{key:"viewFromCamera",value:function(w){var l=this.camera.getMult(w);return l.add(this.center),[l.x,this.height-l.y]}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.height);for(var w in this.shapes){var l=this.shapes[w];l.edgeColour&&this.drawShapeEdges(l),l.nodeColour&&this.drawShapeNodes(l),l.text&&this.drawShapeText(l)}this.drawShapeEdges({edgeColour:this.fnColor,nodes:[[0,0,0],this.point],edges:[[0,1]]}),this.drawShapeNodes({nodeColour:this.overPoint?this.selColor:this.fnColor,nodeRadius:this.overPoint?4:2,nodes:[this.point]})}},{key:"drawShapeEdges",value:function(w){var l=w.nodes;this.ctx.strokeStyle=w.edgeColour;for(var h in w.edges){var x=this.viewFromCamera(l[w.edges[h][0]]);this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(x[0],x[1]),x=this.viewFromCamera(l[w.edges[h][1]]),this.ctx.lineTo(x[0],x[1]),this.ctx.stroke()}}},{key:"drawShapeNodes",value:function(w){var l=w.nodeRadius||4;this.ctx.fillStyle=w.nodeColour;for(var h in w.nodes){var x=this.viewFromCamera(w.nodes[h]);this.ctx.beginPath(),this.ctx.arc(x[0],x[1],l,0,2*Math.PI,!1),this.ctx.fill()}}},{key:"drawShapeText",value:function(w){this.ctx.fillStyle=w.textColour;for(var l in w.nodes){var h=this.viewFromCamera(w.nodes[l]);this.ctx.textBaseline="middle",this.ctx.fillText(w.text[l],h[0],h[1])}}},{key:"onMouseDown",value:function(w){var l=[w.offsetX,w.offsetY];this.dragOffset=l;var h=new m.default(this.viewFromCamera(this.point)),x=h.getSub(l);this.overPoint=x.getLength()<10,f(Object.getPrototypeOf(R.prototype),"onMouseDown",this).call(this,w),this.onMouseUpHandler=(0,o.addEvent)(this.el,"dblclick",this.onDbClick,this)}},{key:"onMouseMove",value:function(w){var l=w.offsetX,h=w.offsetY,x=.01*(l-this.dragOffset[0]),u=.01*(h-this.dragOffset[1]);if(this.overPoint){var P=this.camera.getInv(),b=P.getMult([x,-u,0]);b.mult(2),this.value.add(b),this.point=[this.value.x*this.scale,this.value.y*this.scale,this.value.z*this.scale],this.trigger("changed",this.value)}else this.camera.rotateX(u),this.camera.rotateY(x);this.dragOffset=[l,h]}},{key:"onDbClick",value:function(w){var l=new m.default([w.offsetX,w.offsetY]),h={x:[68,0,0],negX:[-68,0,0],y:[0,68,100],negY:[0,-68,0]},x="";for(var u in h){var P=new m.default(this.viewFromCamera(h[u])),b=P.getSub(l);if(b.getLength()<10){x=u;break}}this.camera=new A.default,x==="x"?this.camera.rotateY(-1.57079632679):x==="negX"?this.camera.rotateY(1.57079632679):x==="y"?this.camera.rotateX(-1.57079632679):x==="negY"&&this.camera.rotateX(1.57079632679),this.draw()}},{key:"destroyEvents",value:function(){f(Object.getPrototypeOf(R.prototype),"destroyEvents",this).call(this),(0,o.removeEvent)(this.el,"dblclick",this.onDbClick),this.onMouseMoveHandler=null}},{key:"setValue",value:function(w){this.value=new m.default(w),this.point=[this.value.x*this.scale,this.value.y*this.scale,this.value.z*this.scale]}}]),R}(d.default);I.default=L,F.exports=I.default},{"./Picker":138,"./types/Matrix":144,"./types/Vector":145,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],141:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var T=c("./ColorConverter"),y=k(T),o=function(){function d(M){C(this,d),this.colors={},this.set(M)}return f(d,[{key:"set",value:function(m,p){if(typeof m=="number"){p=p||"rgb",this.colors[p]={};for(var A=3;A--;){var L=p[A]||p.charAt(A);this.colors[p][L]=m}}else if(typeof m=="string"){var S=m.replace(/(?:#|\)|%)/g,"").split("(");if(S[1]){var R=(S[1]||"").split(/,\s*/);p=p||(S[1]?S[0].substr(0,3):"rgb"),this.set(R,p)}else this.set((0,T.getColorAsRGB)(m),"rgb")}else if(m){if(Array.isArray(m)){var L="";p=p||"rgb",this.colors[p]=this.colors[p]||{};for(var v=3;v--;){L=p[v]||p.charAt(v);var w=m.length>=3?v:0;this.colors[p][L]=parseFloat(m[w])}m.length===4&&(this.colors.alpha=parseFloat(m[3]))}else if(p)for(var l in m)this.colors[p][l]=(0,T.limitValue)(m[l]/(0,T.getValueRanges)(p)[l][1],0,1)*(0,T.getValueRanges)(p)[l][1]}if(p){if(p!=="rgb"){var h=y.default;this.colors.rgb=h[p+"2rgb"](this.colors[p])}this.convert(p),this.colors.hueRGB=y.default.hue2RGB(this.colors.hsv.h),this.colors.luminance=(0,T.getLuminance)(this.colors.rgb)}}},{key:"convert",value:function(m){var p=y.default,A=(0,T.getValueRanges)(),L={hsl:"hsv",cmyk:"cmy",rgb:m};if(m!=="alpha"){for(var S in A)if(!A[S][S]&&m!==S&&S!=="XYZ"){var R=L[S]||"rgb";this.colors[S]=p[R+"2"+S](this.colors[R])}}}},{key:"get",value:function(m){if(m!=="rgb"){var p=y.default;return this.colors[m]=p["rgb2"+m](this.colors.rgb),this.colors[m]}else return this.colors.rgb}},{key:"getString",value:function(m){if(m==="HEX"){var p=y.default;return p["rgb2"+m](this.colors.rgb)}else{var A=this.get(m),L=m,S="";m==="vec"&&(L+=this.colors.alpha?4:3),L+="(";for(var R=0;R<3;R++)S=m[R]||m.charAt(R),m==="vec"?L+=A[S].toFixed(3):L+=Math.floor(A[S]),R!==2&&(L+=",");return this.colors.alpha&&(L+=","+this.colors.alpha.toFixed(3)),L+=")"}}},{key:"uniformType",value:function(){return this.colors.alpha?"vec4":"vec3"}},{key:"uniformValue",value:function(){var m=this.get("vec"),p=[m.v,m.e,m.c];return this.colors.alpha&&p.push(this.colors.alpha),p}},{key:"uniformMethod",value:function(m){return this.colors.alpha?"4f":"3f"}}]),d}();I.default=o,F.exports=I.default},{"./ColorConverter":142,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14}],142:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0}),I.limitValue=m,I.getLuminance=p,I.getColorAsRGB=A,I.getValueRanges=L;var k={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,1],s:[0,1],v:[0,255]},hsl:{h:[0,360],s:[0,100],l:[0,100]},cmy:{c:[0,100],m:[0,100],y:[0,100]},cmyk:{c:[0,100],m:[0,100],y:[0,100],k:[0,100]},Lab:{L:[0,100],a:[-128,127],b:[-128,127]},XYZ:{X:[0,100],Y:[0,100],Z:[0,100]},vec:{v:[0,1],e:[0,1],c:[0,1]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},T={X:[.4124564,.3575761,.1804375],Y:[.2126729,.7151522,.072175],Z:[.0193339,.119192,.9503041],R:[3.2404542,-1.5371385,-.4985314],G:[-.969266,1.8760108,.041556],B:[.0556434,-.2040259,1.0572252]},y={X:T.X[0]+T.X[1]+T.X[2],Y:T.Y[0]+T.Y[1]+T.Y[2],Z:T.Z[0]+T.Z[1]+T.Z[2]},o={r:.2126,g:.7152,b:.0722},d,M=function(){function S(){C(this,S)}return f(S,null,[{key:"vec2rgb",value:function(v){return{r:v.v*k.rgb.r[1],g:v.e*k.rgb.g[1],b:v.c*k.rgb.b[1]}}},{key:"rgb2vec",value:function(v){return{v:v.r/k.rgb.r[1],e:v.g/k.rgb.g[1],c:v.b/k.rgb.b[1]}}},{key:"RGB2HEX",value:function(v){return((v.r<16?"0":"")+v.r.toString(16)+(v.g<16?"0":"")+v.g.toString(16)+(v.b<16?"0":"")+v.b.toString(16)).toUpperCase()}},{key:"HEX2rgb",value:function(v){return v=v.split(""),{r:parseInt(v[0]+v[v[3]?1:0],16)/255,g:parseInt(v[v[3]?2:1]+(v[3]||v[1]),16)/255,b:parseInt((v[4]||v[2])+(v[5]||v[2]),16)/255}}},{key:"hue2RGB",value:function(v){var w=v*6,l=Math.floor(w),h=w===6?0:w-l;return{r:Math.round([1,1-h,0,0,h,1][l]*255),g:Math.round([h,1,1,1-h,0,0][l]*255),b:Math.round([0,0,h,1,1,1-h][l]*255)}}},{key:"rgb2hsv",value:function(v){var w=v.r,l=v.g,h=v.b,x=0,u,P,b;return l<h&&(l=h+(h=l,0),x=-1),P=h,w<l&&(w=l+(l=w,0),x=-2/6-x,P=Math.min(l,h)),u=w-P,b=w?u/w:0,{h:b<1e-15?0:u?Math.abs(x+(l-h)/(6*u)):0,s:w?u/w:0,v:w}}},{key:"hsv2rgb",value:function(v){var w=v.h*6,l=v.s,h=v.v,x=Math.floor(w),u=w-x,P=h*(1-l),b=h*(1-u*l),O=h*(1-(1-u)*l),D=x%6;return{r:[h,b,P,P,O,h][D],g:[O,h,h,b,P,P][D],b:[P,P,O,h,h,b][D]}}},{key:"hsv2hsl",value:function(v){var w=(2-v.s)*v.v,l=v.s*v.v;return l=v.s?w<1?w?l/w:0:l/(2-w):0,{h:v.h,s:!v.v&&!l?0:l,l:w/2}}},{key:"rgb2hsl",value:function(v,w){var l=S.rgb2hsv(v);return S.hsv2hsl(w?l:d.hsv=l)}},{key:"hsl2rgb",value:function(v){var w=v.h*6,l=v.s,h=v.l,x=h<.5?h*(1+l):h+l-l*h,u=h+h-x,P=x?(x-u)/x:0,b=Math.floor(w),O=w-b,D=x*P*O,$=u+D,W=x-D,V=b%6;return{r:[x,W,u,u,$,x][V],g:[$,x,x,W,u,u][V],b:[u,u,$,x,x,W][V]}}},{key:"rgb2cmy",value:function(v){return{c:1-v.r,m:1-v.g,y:1-v.b}}},{key:"cmy2cmyk",value:function(v){var w=Math.min(Math.min(v.c,v.m),v.y),l=1-w||1e-20;return{c:(v.c-w)/l,m:(v.m-w)/l,y:(v.y-w)/l,k:w}}},{key:"cmyk2cmy",value:function(v){var w=v.k;return{c:v.c*(1-w)+w,m:v.m*(1-w)+w,y:v.y*(1-w)+w}}},{key:"cmy2rgb",value:function(v){return{r:1-v.c,g:1-v.m,b:1-v.y}}},{key:"rgb2cmyk",value:function(v){var w=S.rgb2cmy(v);return S.cmy2cmyk(w)}},{key:"cmyk2rgb",value:function(v){var w=S.cmyk2cmy(v);return S.cmy2rgb(w)}},{key:"XYZ2rgb",value:function(v){var w=T,l=v.X,h=v.Y,x=v.Z,u=l*w.R[0]+h*w.R[1]+x*w.R[2],P=l*w.G[0]+h*w.G[1]+x*w.G[2],b=l*w.B[0]+h*w.B[1]+x*w.B[2],O=1/2.4;return w=.0031308,u=u>w?1.055*Math.pow(u,O)-.055:12.92*u,P=P>w?1.055*Math.pow(P,O)-.055:12.92*P,b=b>w?1.055*Math.pow(b,O)-.055:12.92*b,{r:m(u,0,1),g:m(P,0,1),b:m(b,0,1)}}},{key:"rgb2XYZ",value:function(v){var w=T,l=v.r,h=v.g,x=v.b,u=.04045;return l=l>u?Math.pow((l+.055)/1.055,2.4):l/12.92,h=h>u?Math.pow((h+.055)/1.055,2.4):h/12.92,x=x>u?Math.pow((x+.055)/1.055,2.4):x/12.92,{X:l*w.X[0]+h*w.X[1]+x*w.X[2],Y:l*w.Y[0]+h*w.Y[1]+x*w.Y[2],Z:l*w.Z[0]+h*w.Z[1]+x*w.Z[2]}}},{key:"XYZ2Lab",value:function(v){var w=y,l=v.X/w.X,h=v.Y/w.Y,x=v.Z/w.Z,u=16/116,P=1/3,b=.008856,O=7.787037;return l=l>b?Math.pow(l,P):O*l+u,h=h>b?Math.pow(h,P):O*h+u,x=x>b?Math.pow(x,P):O*x+u,{L:116*h-16,a:500*(l-h),b:200*(h-x)}}},{key:"Lab2XYZ",value:function(v){var w=y,l=(v.L+16)/116,h=v.a/500+l,x=l-v.b/200,u=Math.pow(h,3),P=Math.pow(l,3),b=Math.pow(x,3),O=16/116,D=.008856,$=7.787037;return{X:(u>D?u:(h-O)/$)*w.X,Y:(P>D?P:(l-O)/$)*w.Y,Z:(b>D?b:(x-O)/$)*w.Z}}},{key:"rgb2Lab",value:function(v){var w=S.rgb2XYZ(v);return S.XYZ2Lab(w)}},{key:"Lab2rgb",value:function(v){var w=S.Lab2XYZ(v);return S.XYZ2rgb(w)}}]),S}();I.default=M;function m(S,R,v){return S>v?v:S<R?R:S}function p(S,R){for(var v=R?1:255,w=[S.r/v,S.g/v,S.b/v],l=w.length;l--;)w[l]=w[l]<=.03928?w[l]/12.92:Math.pow((w[l]+.055)/1.055,2.4);return o.r*w[0]+o.g*w[1]+o.b*w[2]}function A(S){var R=document.createElement("div");R.style.backgroundColor=S,document.body.appendChild(R);var v=window.getComputedStyle(R).backgroundColor;return v==="transparent"&&(v="rgb(0, 0, 0)"),R.parentNode.removeChild(R),v}function L(S){return S?k[S]:k}},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],143:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var k=function(){function T(y){C(this,T),this.value=y}return f(T,[{key:"getString",value:function(){return this.value.toFixed(3)}},{key:"uniformType",value:function(){return"float"}},{key:"uniformValue",value:function(){return[this.value]}},{key:"uniformMethod",value:function(){return"1f"}}]),T}();I.default=k,F.exports=I.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],144:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default,k=c("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(I,"__esModule",{value:!0});var T=c("./Vector"),y=k(T),o=function(){function d(M,m){C(this,d),this.dim=3,this.value=[[1,0,0],[0,1,0],[0,0,1]],M&&this.set(M,m)}return f(d,[{key:"set",value:function(m,p){m.value[0][0]?(this.value=m.value,this.dim=m.dim):m[0][0]&&(this.value=m)}},{key:"rotateX",value:function(m){var p=Math.cos(m),A=Math.sin(m),L=[[1,0,0],[0,p,-A],[0,A,p]];this.value=this.getTransform(L)}},{key:"rotateY",value:function(m){var p=Math.cos(m),A=Math.sin(m),L=[[p,0,A],[0,1,0],[-A,0,p]];this.value=this.getTransform(L)}},{key:"getMult",value:function(m){if(m[0][0]||m.value&&m.value[0][0])console.log("TODO: what If v is a matrix");else{for(var p=new y.default(m),A=[],L=0;L<p.dim;L++)A.push(p.value[0]*this.value[L][0]+p.value[1]*this.value[L][1]+p.value[2]*this.value[L][2]);return new y.default(A)}}},{key:"getTransform",value:function(m){var p=[];for(var A in m){var L=m[A],S=[];S.push(L[0]*this.value[0][0]+L[1]*this.value[1][0]+L[2]*this.value[2][0]),S.push(L[0]*this.value[0][1]+L[1]*this.value[1][1]+L[2]*this.value[2][1]),S.push(L[0]*this.value[0][2]+L[1]*this.value[1][2]+L[2]*this.value[2][2]),p.push(S)}return p}},{key:"getInv",value:function(){var m=new d,p=this.value[0][0]*(this.value[1][1]*this.value[2][2]-this.value[2][1]*this.value[1][2])-this.value[0][1]*(this.value[1][0]*this.value[2][2]-this.value[1][2]*this.value[2][0])+this.value[0][2]*(this.value[1][0]*this.value[2][1]-this.value[1][1]*this.value[2][0]),A=1/p;return m.value[0][0]=(this.value[1][1]*this.value[2][2]-this.value[2][1]*this.value[1][2])*A,m.value[0][1]=-(this.value[0][1]*this.value[2][2]-this.value[0][2]*this.value[2][1])*A,m.value[0][2]=(this.value[0][1]*this.value[1][2]-this.value[0][2]*this.value[1][1])*A,m.value[1][0]=-(this.value[1][0]*this.value[2][2]-this.value[1][2]*this.value[2][0])*A,m.value[1][1]=(this.value[0][0]*this.value[2][2]-this.value[0][2]*this.value[2][0])*A,m.value[1][2]=-(this.value[0][0]*this.value[1][2]-this.value[1][0]*this.value[0][2])*A,m.value[2][0]=(this.value[1][0]*this.value[2][1]-this.value[2][0]*this.value[1][1])*A,m.value[2][1]=-(this.value[0][0]*this.value[2][1]-this.value[2][0]*this.value[0][1])*A,m.value[2][2]=(this.value[0][0]*this.value[1][1]-this.value[1][0]*this.value[0][1])*A,m}}]),d}();I.default=o,F.exports=I.default},{"./Vector":145,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14}],145:[function(c,F,I){var f=c("babel-runtime/helpers/create-class").default,C=c("babel-runtime/helpers/class-call-check").default;Object.defineProperty(I,"__esModule",{value:!0});var k=function(){function T(y,o){C(this,T),this.value=[0,0],this.dim=2,this.set(y,o)}return f(T,[{key:"set",value:function(o,d){if(typeof o=="number")d=d||"vec2",this.set([o],d);else if(typeof o=="string"){var M=o.replace(/(?:#|\)|\]|%)/g,"").split("("),m=(M[1]||M[0].replace(/(\[)/g,"")).split(/,\s*/);d=d||(M[1]?M[0].substr(0,4):"vec"+m.length);var p=[];for(var A in m)p.push(parseFloat(m[A]));this.set(p,d)}else if(o)if(Array.isArray(o)){this.value=[],this.value.length=0,this.dim=d?Number(d.substr(3,4)):o.length;for(var L=o.length===1?o[0]:0,A=0;A<this.dim;A++)this.value.push(o[A]||L)}else o.dim&&(this.value=o.value,this.dim=o.dim)}},{key:"getString",value:function(o){o=o||"vec"+this.dim;var d=this.dim,M="",m=o+"(",p=")";o==="array"?(m="[",p="]",d=this.dim):d=Number(o.substr(3,4)),M=m;for(var A=0;A<d;A++)M+=this.value[A].toFixed(3),A!==d-1&&(M+=",");return M+=p}},{key:"uniformType",value:function(){return"vec"+this.dim}},{key:"uniformValue",value:function(){for(var o=[],d=0;d<this.dim;d++)o.push(this.value[d]);return o}},{key:"uniformMethod",value:function(){return this.dim+"f"}},{key:"add",value:function(o){if(typeof o=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]+o;else for(var M=new T(o),m=Math.min(this.dim,M.dim),d=0;d<m;d++)this.value[d]=this.value[d]+M.value[d]}},{key:"sub",value:function(o){if(typeof o=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]-o;else for(var M=new T(o),m=Math.min(this.dim,M.dim),d=0;d<m;d++)this.value[d]=this.value[d]-M.value[d]}},{key:"mult",value:function(o){if(typeof o=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]*o;else for(var M=new T(o),m=Math.min(this.dim,M.dim),d=0;d<m;d++)this.value[d]=this.value[d]*M.value[d]}},{key:"div",value:function(o){if(typeof o=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]/o;else for(var M=new T(o),m=Math.min(this.dim,M.dim),d=0;d<m;d++)this.value[d]=this.value[d]/M.value[d]}},{key:"normalize",value:function(){var o=this.getLength();this.div(o)}},{key:"getAdd",value:function(o){var d=new T(this);return d.add(o),d}},{key:"getSub",value:function(o){var d=new T(this);return d.sub(o),d}},{key:"getMult",value:function(o){var d=new T(this);return d.mult(o),d}},{key:"getDiv",value:function(o){var d=new T(this);return d.div(o),d}},{key:"getLengthSq",value:function(){return this.dim===2?this.value[0]*this.value[0]+this.value[1]*this.value[1]:this.value[0]*this.value[0]+this.value[1]*this.value[1]+this.value[2]*this.value[2]}},{key:"getLength",value:function(){return Math.sqrt(this.getLengthSq())}},{key:"x",set:function(o){this.value[0]=o},get:function(){return this.value[0]||0}},{key:"y",set:function(o){this.value[1]=o},get:function(){return this.value[1]||0}},{key:"z",set:function(o){if(this.dim<3){for(;this.dim<3;)this.value.push(0);this.dim=3}this.value[2]=o},get:function(){return this.value[2]||0}},{key:"w",set:function(o){if(this.dim<4){for(;this.dim<4;)this.value.push(0);this.dim=4}this.value[3]=o},get:function(){return this.value[3]||0}}]),T}();I.default=k,F.exports=I.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}]},{},[114])(114)})}(na)),na.exports}var el=qs();const tl=Js(el);console.log("main.ts loaded");let Lo=document.createElement("div");document.body.appendChild(Lo);new tl(Lo,{canvas_size:500,canvas_draggable:!1,theme:"monokai",multipleBuffers:!1,watchHash:!0,fileDrops:!0,menu:!0});
