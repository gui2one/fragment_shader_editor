(function(){const N=document.createElement("link").relList;if(N&&N.supports&&N.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))M(T);new MutationObserver(T=>{for(const l of T)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&M(h)}).observe(document,{childList:!0,subtree:!0});function o(T){const l={};return T.integrity&&(l.integrity=T.integrity),T.referrerPolicy&&(l.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?l.credentials="include":T.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function M(T){if(T.ep)return;T.ep=!0;const l=o(T);fetch(T.href,l)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gn=globalThis,$s=Gn.ShadowRoot&&(Gn.ShadyCSS===void 0||Gn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Hs=Symbol(),fa=new WeakMap;let Sa=class{constructor(N,o,M){if(this._$cssResult$=!0,M!==Hs)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=N,this.t=o}get styleSheet(){let N=this.o;const o=this.t;if($s&&N===void 0){const M=o!==void 0&&o.length===1;M&&(N=fa.get(o)),N===void 0&&((this.o=N=new CSSStyleSheet).replaceSync(this.cssText),M&&fa.set(o,N))}return N}toString(){return this.cssText}};const ru=ne=>new Sa(typeof ne=="string"?ne:ne+"",void 0,Hs),iu=(ne,...N)=>{const o=ne.length===1?ne[0]:N.reduce((M,T,l)=>M+(h=>{if(h._$cssResult$===!0)return h.cssText;if(typeof h=="number")return h;throw Error("Value passed to 'css' function must be a 'css' function result: "+h+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(T)+ne[l+1],ne[0]);return new Sa(o,ne,Hs)},nu=(ne,N)=>{if($s)ne.adoptedStyleSheets=N.map(o=>o instanceof CSSStyleSheet?o:o.styleSheet);else for(const o of N){const M=document.createElement("style"),T=Gn.litNonce;T!==void 0&&M.setAttribute("nonce",T),M.textContent=o.cssText,ne.appendChild(M)}},ca=$s?ne=>ne:ne=>ne instanceof CSSStyleSheet?(N=>{let o="";for(const M of N.cssRules)o+=M.cssText;return ru(o)})(ne):ne;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:su,defineProperty:ou,getOwnPropertyDescriptor:au,getOwnPropertyNames:lu,getOwnPropertySymbols:uu,getPrototypeOf:fu}=Object,dr=globalThis,ha=dr.trustedTypes,cu=ha?ha.emptyScript:"",Ps=dr.reactiveElementPolyfillSupport,qi=(ne,N)=>ne,Kn={toAttribute(ne,N){switch(N){case Boolean:ne=ne?cu:null;break;case Object:case Array:ne=ne==null?ne:JSON.stringify(ne)}return ne},fromAttribute(ne,N){let o=ne;switch(N){case Boolean:o=ne!==null;break;case Number:o=ne===null?null:Number(ne);break;case Object:case Array:try{o=JSON.parse(ne)}catch{o=null}}return o}},Ns=(ne,N)=>!su(ne,N),da={attribute:!0,type:String,converter:Kn,reflect:!1,hasChanged:Ns};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),dr.litPropertyMetadata??(dr.litPropertyMetadata=new WeakMap);class hi extends HTMLElement{static addInitializer(N){this._$Ei(),(this.l??(this.l=[])).push(N)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(N,o=da){if(o.state&&(o.attribute=!1),this._$Ei(),this.elementProperties.set(N,o),!o.noAccessor){const M=Symbol(),T=this.getPropertyDescriptor(N,M,o);T!==void 0&&ou(this.prototype,N,T)}}static getPropertyDescriptor(N,o,M){const{get:T,set:l}=au(this.prototype,N)??{get(){return this[o]},set(h){this[o]=h}};return{get(){return T==null?void 0:T.call(this)},set(h){const x=T==null?void 0:T.call(this);l.call(this,h),this.requestUpdate(N,x,M)},configurable:!0,enumerable:!0}}static getPropertyOptions(N){return this.elementProperties.get(N)??da}static _$Ei(){if(this.hasOwnProperty(qi("elementProperties")))return;const N=fu(this);N.finalize(),N.l!==void 0&&(this.l=[...N.l]),this.elementProperties=new Map(N.elementProperties)}static finalize(){if(this.hasOwnProperty(qi("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(qi("properties"))){const o=this.properties,M=[...lu(o),...uu(o)];for(const T of M)this.createProperty(T,o[T])}const N=this[Symbol.metadata];if(N!==null){const o=litPropertyMetadata.get(N);if(o!==void 0)for(const[M,T]of o)this.elementProperties.set(M,T)}this._$Eh=new Map;for(const[o,M]of this.elementProperties){const T=this._$Eu(o,M);T!==void 0&&this._$Eh.set(T,o)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(N){const o=[];if(Array.isArray(N)){const M=new Set(N.flat(1/0).reverse());for(const T of M)o.unshift(ca(T))}else N!==void 0&&o.push(ca(N));return o}static _$Eu(N,o){const M=o.attribute;return M===!1?void 0:typeof M=="string"?M:typeof N=="string"?N.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var N;this._$ES=new Promise(o=>this.enableUpdating=o),this._$AL=new Map,this._$E_(),this.requestUpdate(),(N=this.constructor.l)==null||N.forEach(o=>o(this))}addController(N){var o;(this._$EO??(this._$EO=new Set)).add(N),this.renderRoot!==void 0&&this.isConnected&&((o=N.hostConnected)==null||o.call(N))}removeController(N){var o;(o=this._$EO)==null||o.delete(N)}_$E_(){const N=new Map,o=this.constructor.elementProperties;for(const M of o.keys())this.hasOwnProperty(M)&&(N.set(M,this[M]),delete this[M]);N.size>0&&(this._$Ep=N)}createRenderRoot(){const N=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return nu(N,this.constructor.elementStyles),N}connectedCallback(){var N;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(N=this._$EO)==null||N.forEach(o=>{var M;return(M=o.hostConnected)==null?void 0:M.call(o)})}enableUpdating(N){}disconnectedCallback(){var N;(N=this._$EO)==null||N.forEach(o=>{var M;return(M=o.hostDisconnected)==null?void 0:M.call(o)})}attributeChangedCallback(N,o,M){this._$AK(N,M)}_$EC(N,o){var l;const M=this.constructor.elementProperties.get(N),T=this.constructor._$Eu(N,M);if(T!==void 0&&M.reflect===!0){const h=(((l=M.converter)==null?void 0:l.toAttribute)!==void 0?M.converter:Kn).toAttribute(o,M.type);this._$Em=N,h==null?this.removeAttribute(T):this.setAttribute(T,h),this._$Em=null}}_$AK(N,o){var l;const M=this.constructor,T=M._$Eh.get(N);if(T!==void 0&&this._$Em!==T){const h=M.getPropertyOptions(T),x=typeof h.converter=="function"?{fromAttribute:h.converter}:((l=h.converter)==null?void 0:l.fromAttribute)!==void 0?h.converter:Kn;this._$Em=T,this[T]=x.fromAttribute(o,h.type),this._$Em=null}}requestUpdate(N,o,M){if(N!==void 0){if(M??(M=this.constructor.getPropertyOptions(N)),!(M.hasChanged??Ns)(this[N],o))return;this.P(N,o,M)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(N,o,M){this._$AL.has(N)||this._$AL.set(N,o),M.reflect===!0&&this._$Em!==N&&(this._$Ej??(this._$Ej=new Set)).add(N)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(o){Promise.reject(o)}const N=this.scheduleUpdate();return N!=null&&await N,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var M;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[l,h]of this._$Ep)this[l]=h;this._$Ep=void 0}const T=this.constructor.elementProperties;if(T.size>0)for(const[l,h]of T)h.wrapped!==!0||this._$AL.has(l)||this[l]===void 0||this.P(l,this[l],h)}let N=!1;const o=this._$AL;try{N=this.shouldUpdate(o),N?(this.willUpdate(o),(M=this._$EO)==null||M.forEach(T=>{var l;return(l=T.hostUpdate)==null?void 0:l.call(T)}),this.update(o)):this._$EU()}catch(T){throw N=!1,this._$EU(),T}N&&this._$AE(o)}willUpdate(N){}_$AE(N){var o;(o=this._$EO)==null||o.forEach(M=>{var T;return(T=M.hostUpdated)==null?void 0:T.call(M)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(N)),this.updated(N)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(N){return!0}update(N){this._$Ej&&(this._$Ej=this._$Ej.forEach(o=>this._$EC(o,this[o]))),this._$EU()}updated(N){}firstUpdated(N){}}hi.elementStyles=[],hi.shadowRootOptions={mode:"open"},hi[qi("elementProperties")]=new Map,hi[qi("finalized")]=new Map,Ps==null||Ps({ReactiveElement:hi}),(dr.reactiveElementVersions??(dr.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const en=globalThis,Vn=en.trustedTypes,pa=Vn?Vn.createPolicy("lit-html",{createHTML:ne=>ne}):void 0,ka="$lit$",hr=`lit$${Math.random().toFixed(9).slice(2)}$`,Ta="?"+hr,hu=`<${Ta}>`,Ur=document,tn=()=>Ur.createComment(""),rn=ne=>ne===null||typeof ne!="object"&&typeof ne!="function",Is=Array.isArray,du=ne=>Is(ne)||typeof(ne==null?void 0:ne[Symbol.iterator])=="function",Rs=`[ 	
\f\r]`,Qi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,va=/-->/g,ga=/>/g,Wr=RegExp(`>|${Rs}(?:([^\\s"'>=/]+)(${Rs}*=${Rs}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ma=/'/g,ya=/"/g,La=/^(?:script|style|textarea|title)$/i,pu=ne=>(N,...o)=>({_$litType$:ne,strings:N,values:o}),Ea=pu(1),jr=Symbol.for("lit-noChange"),gt=Symbol.for("lit-nothing"),ba=new WeakMap,Br=Ur.createTreeWalker(Ur,129);function Ma(ne,N){if(!Is(ne)||!ne.hasOwnProperty("raw"))throw Error("invalid template strings array");return pa!==void 0?pa.createHTML(N):N}const vu=(ne,N)=>{const o=ne.length-1,M=[];let T,l=N===2?"<svg>":N===3?"<math>":"",h=Qi;for(let x=0;x<o;x++){const w=ne[x];let b,a,d=-1,E=0;for(;E<w.length&&(h.lastIndex=E,a=h.exec(w),a!==null);)E=h.lastIndex,h===Qi?a[1]==="!--"?h=va:a[1]!==void 0?h=ga:a[2]!==void 0?(La.test(a[2])&&(T=RegExp("</"+a[2],"g")),h=Wr):a[3]!==void 0&&(h=Wr):h===Wr?a[0]===">"?(h=T??Qi,d=-1):a[1]===void 0?d=-2:(d=h.lastIndex-a[2].length,b=a[1],h=a[3]===void 0?Wr:a[3]==='"'?ya:ma):h===ya||h===ma?h=Wr:h===va||h===ga?h=Qi:(h=Wr,T=void 0);const m=h===Wr&&ne[x+1].startsWith("/>")?" ":"";l+=h===Qi?w+hu:d>=0?(M.push(b),w.slice(0,d)+ka+w.slice(d)+hr+m):w+hr+(d===-2?x:m)}return[Ma(ne,l+(ne[o]||"<?>")+(N===2?"</svg>":N===3?"</math>":"")),M]};class nn{constructor({strings:N,_$litType$:o},M){let T;this.parts=[];let l=0,h=0;const x=N.length-1,w=this.parts,[b,a]=vu(N,o);if(this.el=nn.createElement(b,M),Br.currentNode=this.el.content,o===2||o===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(T=Br.nextNode())!==null&&w.length<x;){if(T.nodeType===1){if(T.hasAttributes())for(const d of T.getAttributeNames())if(d.endsWith(ka)){const E=a[h++],m=T.getAttribute(d).split(hr),v=/([.?@])?(.*)/.exec(E);w.push({type:1,index:l,name:v[2],strings:m,ctor:v[1]==="."?mu:v[1]==="?"?yu:v[1]==="@"?bu:Yn}),T.removeAttribute(d)}else d.startsWith(hr)&&(w.push({type:6,index:l}),T.removeAttribute(d));if(La.test(T.tagName)){const d=T.textContent.split(hr),E=d.length-1;if(E>0){T.textContent=Vn?Vn.emptyScript:"";for(let m=0;m<E;m++)T.append(d[m],tn()),Br.nextNode(),w.push({type:2,index:++l});T.append(d[E],tn())}}}else if(T.nodeType===8)if(T.data===Ta)w.push({type:2,index:l});else{let d=-1;for(;(d=T.data.indexOf(hr,d+1))!==-1;)w.push({type:7,index:l}),d+=hr.length-1}l++}}static createElement(N,o){const M=Ur.createElement("template");return M.innerHTML=N,M}}function pi(ne,N,o=ne,M){var h,x;if(N===jr)return N;let T=M!==void 0?(h=o._$Co)==null?void 0:h[M]:o._$Cl;const l=rn(N)?void 0:N._$litDirective$;return(T==null?void 0:T.constructor)!==l&&((x=T==null?void 0:T._$AO)==null||x.call(T,!1),l===void 0?T=void 0:(T=new l(ne),T._$AT(ne,o,M)),M!==void 0?(o._$Co??(o._$Co=[]))[M]=T:o._$Cl=T),T!==void 0&&(N=pi(ne,T._$AS(ne,N.values),T,M)),N}class gu{constructor(N,o){this._$AV=[],this._$AN=void 0,this._$AD=N,this._$AM=o}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(N){const{el:{content:o},parts:M}=this._$AD,T=((N==null?void 0:N.creationScope)??Ur).importNode(o,!0);Br.currentNode=T;let l=Br.nextNode(),h=0,x=0,w=M[0];for(;w!==void 0;){if(h===w.index){let b;w.type===2?b=new sn(l,l.nextSibling,this,N):w.type===1?b=new w.ctor(l,w.name,w.strings,this,N):w.type===6&&(b=new wu(l,this,N)),this._$AV.push(b),w=M[++x]}h!==(w==null?void 0:w.index)&&(l=Br.nextNode(),h++)}return Br.currentNode=Ur,T}p(N){let o=0;for(const M of this._$AV)M!==void 0&&(M.strings!==void 0?(M._$AI(N,M,o),o+=M.strings.length-2):M._$AI(N[o])),o++}}class sn{get _$AU(){var N;return((N=this._$AM)==null?void 0:N._$AU)??this._$Cv}constructor(N,o,M,T){this.type=2,this._$AH=gt,this._$AN=void 0,this._$AA=N,this._$AB=o,this._$AM=M,this.options=T,this._$Cv=(T==null?void 0:T.isConnected)??!0}get parentNode(){let N=this._$AA.parentNode;const o=this._$AM;return o!==void 0&&(N==null?void 0:N.nodeType)===11&&(N=o.parentNode),N}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(N,o=this){N=pi(this,N,o),rn(N)?N===gt||N==null||N===""?(this._$AH!==gt&&this._$AR(),this._$AH=gt):N!==this._$AH&&N!==jr&&this._(N):N._$litType$!==void 0?this.$(N):N.nodeType!==void 0?this.T(N):du(N)?this.k(N):this._(N)}O(N){return this._$AA.parentNode.insertBefore(N,this._$AB)}T(N){this._$AH!==N&&(this._$AR(),this._$AH=this.O(N))}_(N){this._$AH!==gt&&rn(this._$AH)?this._$AA.nextSibling.data=N:this.T(Ur.createTextNode(N)),this._$AH=N}$(N){var l;const{values:o,_$litType$:M}=N,T=typeof M=="number"?this._$AC(N):(M.el===void 0&&(M.el=nn.createElement(Ma(M.h,M.h[0]),this.options)),M);if(((l=this._$AH)==null?void 0:l._$AD)===T)this._$AH.p(o);else{const h=new gu(T,this),x=h.u(this.options);h.p(o),this.T(x),this._$AH=h}}_$AC(N){let o=ba.get(N.strings);return o===void 0&&ba.set(N.strings,o=new nn(N)),o}k(N){Is(this._$AH)||(this._$AH=[],this._$AR());const o=this._$AH;let M,T=0;for(const l of N)T===o.length?o.push(M=new sn(this.O(tn()),this.O(tn()),this,this.options)):M=o[T],M._$AI(l),T++;T<o.length&&(this._$AR(M&&M._$AB.nextSibling,T),o.length=T)}_$AR(N=this._$AA.nextSibling,o){var M;for((M=this._$AP)==null?void 0:M.call(this,!1,!0,o);N&&N!==this._$AB;){const T=N.nextSibling;N.remove(),N=T}}setConnected(N){var o;this._$AM===void 0&&(this._$Cv=N,(o=this._$AP)==null||o.call(this,N))}}class Yn{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(N,o,M,T,l){this.type=1,this._$AH=gt,this._$AN=void 0,this.element=N,this.name=o,this._$AM=T,this.options=l,M.length>2||M[0]!==""||M[1]!==""?(this._$AH=Array(M.length-1).fill(new String),this.strings=M):this._$AH=gt}_$AI(N,o=this,M,T){const l=this.strings;let h=!1;if(l===void 0)N=pi(this,N,o,0),h=!rn(N)||N!==this._$AH&&N!==jr,h&&(this._$AH=N);else{const x=N;let w,b;for(N=l[0],w=0;w<l.length-1;w++)b=pi(this,x[M+w],o,w),b===jr&&(b=this._$AH[w]),h||(h=!rn(b)||b!==this._$AH[w]),b===gt?N=gt:N!==gt&&(N+=(b??"")+l[w+1]),this._$AH[w]=b}h&&!T&&this.j(N)}j(N){N===gt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,N??"")}}class mu extends Yn{constructor(){super(...arguments),this.type=3}j(N){this.element[this.name]=N===gt?void 0:N}}class yu extends Yn{constructor(){super(...arguments),this.type=4}j(N){this.element.toggleAttribute(this.name,!!N&&N!==gt)}}class bu extends Yn{constructor(N,o,M,T,l){super(N,o,M,T,l),this.type=5}_$AI(N,o=this){if((N=pi(this,N,o,0)??gt)===jr)return;const M=this._$AH,T=N===gt&&M!==gt||N.capture!==M.capture||N.once!==M.once||N.passive!==M.passive,l=N!==gt&&(M===gt||T);T&&this.element.removeEventListener(this.name,this,M),l&&this.element.addEventListener(this.name,this,N),this._$AH=N}handleEvent(N){var o;typeof this._$AH=="function"?this._$AH.call(((o=this.options)==null?void 0:o.host)??this.element,N):this._$AH.handleEvent(N)}}class wu{constructor(N,o,M){this.element=N,this.type=6,this._$AN=void 0,this._$AM=o,this.options=M}get _$AU(){return this._$AM._$AU}_$AI(N){pi(this,N)}}const Os=en.litHtmlPolyfillSupport;Os==null||Os(nn,sn),(en.litHtmlVersions??(en.litHtmlVersions=[])).push("3.2.1");const xu=(ne,N,o)=>{const M=(o==null?void 0:o.renderBefore)??N;let T=M._$litPart$;if(T===void 0){const l=(o==null?void 0:o.renderBefore)??null;M._$litPart$=T=new sn(N.insertBefore(tn(),l),l,void 0,o??{})}return T._$AI(ne),T};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let di=class extends hi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var o;const N=super.createRenderRoot();return(o=this.renderOptions).renderBefore??(o.renderBefore=N.firstChild),N}update(N){const o=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(N),this._$Do=xu(o,this.renderRoot,this.renderOptions)}connectedCallback(){var N;super.connectedCallback(),(N=this._$Do)==null||N.setConnected(!0)}disconnectedCallback(){var N;super.disconnectedCallback(),(N=this._$Do)==null||N.setConnected(!1)}render(){return jr}};var Ca;di._$litElement$=!0,di.finalized=!0,(Ca=globalThis.litElementHydrateSupport)==null||Ca.call(globalThis,{LitElement:di});const _s=globalThis.litElementPolyfillSupport;_s==null||_s({LitElement:di});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Aa=ne=>(N,o)=>{o!==void 0?o.addInitializer(()=>{customElements.define(ne,N)}):customElements.define(ne,N)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Cu={attribute:!0,type:String,converter:Kn,reflect:!1,hasChanged:Ns},Su=(ne=Cu,N,o)=>{const{kind:M,metadata:T}=o;let l=globalThis.litPropertyMetadata.get(T);if(l===void 0&&globalThis.litPropertyMetadata.set(T,l=new Map),l.set(o.name,ne),M==="accessor"){const{name:h}=o;return{set(x){const w=N.get.call(this);N.set.call(this,x),this.requestUpdate(h,w,ne)},init(x){return x!==void 0&&this.P(h,void 0,ne),x}}}if(M==="setter"){const{name:h}=o;return function(x){const w=this[h];N.call(this,x),this.requestUpdate(h,w,ne)}}throw Error("Unsupported decorator location: "+M)};function Zn(ne){return(N,o)=>typeof o=="object"?Su(ne,N,o):((M,T,l)=>{const h=T.hasOwnProperty(l);return T.constructor.createProperty(l,h?{...M,wrapped:!0}:M),h?Object.getOwnPropertyDescriptor(T,l):void 0})(ne,N,o)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ku={ATTRIBUTE:1},Tu=ne=>(...N)=>({_$litDirective$:ne,values:N});class Lu{constructor(N){}get _$AU(){return this._$AM._$AU}_$AT(N,o,M){this._$Ct=N,this._$AM=o,this._$Ci=M}_$AS(N,o){return this.update(N,o)}update(N,o){return this.render(...o)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Eu=Tu(class extends Lu{constructor(ne){var N;if(super(ne),ne.type!==ku.ATTRIBUTE||ne.name!=="class"||((N=ne.strings)==null?void 0:N.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(ne){return" "+Object.keys(ne).filter(N=>ne[N]).join(" ")+" "}update(ne,[N]){var M,T;if(this.st===void 0){this.st=new Set,ne.strings!==void 0&&(this.nt=new Set(ne.strings.join(" ").split(/\s/).filter(l=>l!=="")));for(const l in N)N[l]&&!((M=this.nt)!=null&&M.has(l))&&this.st.add(l);return this.render(N)}const o=ne.element.classList;for(const l of this.st)l in N||(o.remove(l),this.st.delete(l));for(const l in N){const h=!!N[l];h===this.st.has(l)||(T=this.nt)!=null&&T.has(l)||(h?(o.add(l),this.st.add(l)):(o.remove(l),this.st.delete(l)))}return jr}});var Mu=Object.defineProperty,Au=Object.getOwnPropertyDescriptor,Fs=(ne,N,o,M)=>{for(var T=M>1?void 0:M?Au(N,o):N,l=ne.length-1,h;l>=0;l--)(h=ne[l])&&(T=(M?h(N,o,T):h(T))||T);return M&&T&&Mu(N,o,T),T};let vi=class extends di{constructor(){super(...arguments),this.title="My Super Title",this.opened=!1}render(){return Ea`
      <button @click=${()=>this.opened=!this.opened}>
        ${this.opened?"close":"open"}
      </button>
      <div class=${Eu({show:this.opened})}>
        <slot></slot>
      </div>
    `}};vi.styles=iu`
    :host {
      position: fixed;
      z-index: 10000;
    }
    button {
      position: fixed;
      display: block;
      cursor: pointer;
      background-color: black;
      color: white;
      top: 0;
      right: 0px;
      z-index: 100001;
    }
    div {
      position: fixed;
      z-index: 10000;
      right: 0px;
      top: 0;
      width: 200px;
      height: 100vh;
      background-color: black;
      transition: all 0.3s;
      transform: translateX(200px);
    }
    .show {
      /* display: block; */

      transform: translateX(0px);
    }
  `;Fs([Zn({type:String})],vi.prototype,"title",2);Fs([Zn({type:Boolean})],vi.prototype,"opened",2);vi=Fs([Aa("side-bar")],vi);var Pu=Object.defineProperty,Ru=Object.getOwnPropertyDescriptor,Ws=(ne,N,o,M)=>{for(var T=M>1?void 0:M?Ru(N,o):N,l=ne.length-1,h;l>=0;l--)(h=ne[l])&&(T=(M?h(N,o,T):h(T))||T);return M&&T&&Pu(N,o,T),T};let gi=class extends di{constructor(){super(...arguments),this.label="Menu Item",this.onClick=()=>{}}render(){return Ea` <div @click=${this.onClick}>${this.label}</div> `}};Ws([Zn({type:String})],gi.prototype,"label",2);Ws([Zn({type:Function})],gi.prototype,"onClick",2);gi=Ws([Aa("side-bar-item")],gi);var ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ou(ne){return ne&&ne.__esModule&&Object.prototype.hasOwnProperty.call(ne,"default")?ne.default:ne}function Xn(ne){throw new Error('Could not dynamically require "'+ne+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ds={exports:{}},wa;function _u(){return wa||(wa=1,function(ne,N){(function(o){ne.exports=o()})(function(){return function o(M,T,l){function h(b,a){if(!T[b]){if(!M[b]){var d=typeof Xn=="function"&&Xn;if(!a&&d)return d(b,!0);if(x)return x(b,!0);var E=new Error("Cannot find module '"+b+"'");throw E.code="MODULE_NOT_FOUND",E}var m=T[b]={exports:{}};M[b][0].call(m.exports,function(v){var R=M[b][1][v];return h(R||v)},m,m.exports,o,M,T,l)}return T[b].exports}for(var x=typeof Xn=="function"&&Xn,w=0;w<l.length;w++)h(l[w]);return h}({1:[function(o,M,T){M.exports={default:o("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":32}],2:[function(o,M,T){M.exports={default:o("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":33}],3:[function(o,M,T){M.exports={default:o("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":34}],4:[function(o,M,T){M.exports={default:o("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":35}],5:[function(o,M,T){M.exports={default:o("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":36}],6:[function(o,M,T){M.exports={default:o("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":37}],7:[function(o,M,T){M.exports={default:o("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":38}],8:[function(o,M,T){M.exports={default:o("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":39}],9:[function(o,M,T){M.exports={default:o("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":40}],10:[function(o,M,T){T.default=function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")},T.__esModule=!0},{}],11:[function(o,M,T){var l=o("babel-runtime/core-js/object/define-property").default;T.default=function(){function h(x,w){for(var b=0;b<w.length;b++){var a=w[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),l(x,a.key,a)}}return function(x,w,b){return w&&h(x.prototype,w),b&&h(x,b),x}}(),T.__esModule=!0},{"babel-runtime/core-js/object/define-property":4}],12:[function(o,M,T){var l=o("babel-runtime/core-js/object/get-own-property-descriptor").default;T.default=function(x,w,b){var a=!0;e:for(;a;){var d=x,E=w,m=b;a=!1,d===null&&(d=Function.prototype);var v=l(d,E);if(v===void 0){var R=Object.getPrototypeOf(d);if(R===null)return;x=R,w=E,b=m,a=!0,v=R=void 0;continue e}else{if("value"in v)return v.value;var A=v.get;return A===void 0?void 0:A.call(m)}}},T.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":5}],13:[function(o,M,T){var l=o("babel-runtime/core-js/object/create").default,h=o("babel-runtime/core-js/object/set-prototype-of").default;T.default=function(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=l(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(h?h(x,w):x.__proto__=w)},T.__esModule=!0},{"babel-runtime/core-js/object/create":3,"babel-runtime/core-js/object/set-prototype-of":7}],14:[function(o,M,T){T.default=function(l){return l&&l.__esModule?l:{default:l}},T.__esModule=!0},{}],15:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h={},x=/[^\s\u00a0]/,w=l.Pos;function b(a){var d=a.search(x);return d==-1?0:d}l.commands.toggleComment=function(a){a.toggleComment()},l.defineExtension("toggleComment",function(a){a||(a=h);for(var d=this,E=1/0,m=this.listSelections(),v=null,R=m.length-1;R>=0;R--){var A=m[R].from(),L=m[R].to();A.line>=E||(L.line>=E&&(L=w(E,0)),E=A.line,v==null?d.uncomment(A,L,a)?v="un":(d.lineComment(A,L,a),v="line"):v=="un"?d.uncomment(A,L,a):d.lineComment(A,L,a))}}),l.defineExtension("lineComment",function(a,d,E){E||(E=h);var m=this,v=m.getModeAt(a),R=E.lineComment||v.lineComment;if(!R){(E.blockCommentStart||v.blockCommentStart)&&(E.fullLines=!0,m.blockComment(a,d,E));return}var A=m.getLine(a.line);if(A!=null){var L=Math.min(d.ch!=0||d.line==a.line?d.line+1:d.line,m.lastLine()+1),_=E.padding==null?" ":E.padding,g=E.commentBlankLines||a.line==d.line;m.operation(function(){if(E.indent){for(var S=null,f=a.line;f<L;++f){var p=m.getLine(f),k=p.slice(0,b(p));(S==null||S.length>k.length)&&(S=k)}for(var f=a.line;f<L;++f){var p=m.getLine(f),c=S.length;!g&&!x.test(p)||(p.slice(0,c)!=S&&(c=b(p)),m.replaceRange(S+R+_,w(f,0),w(f,c)))}}else for(var f=a.line;f<L;++f)(g||x.test(m.getLine(f)))&&m.replaceRange(R+_,w(f,0))})}}),l.defineExtension("blockComment",function(a,d,E){E||(E=h);var m=this,v=m.getModeAt(a),R=E.blockCommentStart||v.blockCommentStart,A=E.blockCommentEnd||v.blockCommentEnd;if(!R||!A){(E.lineComment||v.lineComment)&&E.fullLines!=!1&&m.lineComment(a,d,E);return}var L=Math.min(d.line,m.lastLine());L!=a.line&&d.ch==0&&x.test(m.getLine(L))&&--L;var _=E.padding==null?" ":E.padding;a.line>L||m.operation(function(){if(E.fullLines!=!1){var g=x.test(m.getLine(L));m.replaceRange(_+A,w(L)),m.replaceRange(R+_,w(a.line,0));var S=E.blockCommentLead||v.blockCommentLead;if(S!=null)for(var f=a.line+1;f<=L;++f)(f!=L||g)&&m.replaceRange(S+_,w(f,0))}else m.replaceRange(A,d),m.replaceRange(R,a)})}),l.defineExtension("uncomment",function(a,d,E){E||(E=h);var m=this,v=m.getModeAt(a),R=Math.min(d.ch!=0||d.line==a.line?d.line:d.line-1,m.lastLine()),A=Math.min(a.line,R),L=E.lineComment||v.lineComment,_=[],g=E.padding==null?" ":E.padding,S;e:{if(!L)break e;for(var f=A;f<=R;++f){var p=m.getLine(f),k=p.indexOf(L);if(k>-1&&!/comment/.test(m.getTokenTypeAt(w(f,k+1)))&&(k=-1),k==-1&&(f!=R||f==A)&&x.test(p)||k>-1&&x.test(p.slice(0,k)))break e;_.push(p)}if(m.operation(function(){for(var te=A;te<=R;++te){var ae=_[te-A],pe=ae.indexOf(L),be=pe+L.length;pe<0||(ae.slice(be,be+g.length)==g&&(be+=g.length),S=!0,m.replaceRange("",w(te,pe),w(te,be)))}}),S)return!0}var c=E.blockCommentStart||v.blockCommentStart,O=E.blockCommentEnd||v.blockCommentEnd;if(!c||!O)return!1;var C=E.blockCommentLead||v.blockCommentLead,D=m.getLine(A),$=R==A?D:m.getLine(R),W=D.indexOf(c),B=$.lastIndexOf(O);if(B==-1&&A!=R&&($=m.getLine(--R),B=$.lastIndexOf(O)),W==-1||B==-1||!/comment/.test(m.getTokenTypeAt(w(A,W+1)))||!/comment/.test(m.getTokenTypeAt(w(R,B+1))))return!1;var Z=D.lastIndexOf(c,a.ch),Q=Z==-1?-1:D.slice(0,a.ch).indexOf(O,Z+c.length);if(Z!=-1&&Q!=-1&&Q+O.length!=a.ch)return!1;Q=$.indexOf(O,d.ch);var ce=$.slice(d.ch).lastIndexOf(c,Q-d.ch);return Z=Q==-1||ce==-1?-1:d.ch+ce,Q!=-1&&Z!=-1&&Z!=d.ch?!1:(m.operation(function(){m.replaceRange("",w(R,B-(g&&$.slice(B-g.length,B)==g?g.length:0)),w(R,B+O.length));var te=W+c.length;if(g&&D.slice(te,te+g.length)==g&&(te+=g.length),m.replaceRange("",w(A,W),w(A,te)),C)for(var ae=A+1;ae<=R;++ae){var pe=m.getLine(ae),be=pe.indexOf(C);if(!(be==-1||x.test(pe.slice(0,be)))){var se=be+C.length;g&&pe.slice(se,se+g.length)==g&&(se+=g.length),m.replaceRange("",w(ae,be),w(ae,se))}}}),!0)})})},{"../../lib/codemirror":30}],16:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){function h(w,b,a){var d=w.getWrapperElement(),E;return E=d.appendChild(document.createElement("div")),a?E.className="CodeMirror-dialog CodeMirror-dialog-bottom":E.className="CodeMirror-dialog CodeMirror-dialog-top",typeof b=="string"?E.innerHTML=b:E.appendChild(b),E}function x(w,b){w.state.currentNotificationClose&&w.state.currentNotificationClose(),w.state.currentNotificationClose=b}l.defineExtension("openDialog",function(w,b,a){a||(a={}),x(this,null);var d=h(this,w,a.bottom),E=!1,m=this;function v(L){if(typeof L=="string")R.value=L;else{if(E)return;E=!0,d.parentNode.removeChild(d),m.focus(),a.onClose&&a.onClose(d)}}var R=d.getElementsByTagName("input")[0],A;return R?(a.value&&(R.value=a.value,a.selectValueOnOpen!==!1&&R.select()),a.onInput&&l.on(R,"input",function(L){a.onInput(L,R.value,v)}),a.onKeyUp&&l.on(R,"keyup",function(L){a.onKeyUp(L,R.value,v)}),l.on(R,"keydown",function(L){a&&a.onKeyDown&&a.onKeyDown(L,R.value,v)||((L.keyCode==27||a.closeOnEnter!==!1&&L.keyCode==13)&&(R.blur(),l.e_stop(L),v()),L.keyCode==13&&b(R.value,L))}),a.closeOnBlur!==!1&&l.on(R,"blur",v),R.focus()):(A=d.getElementsByTagName("button")[0])&&(l.on(A,"click",function(){v(),m.focus()}),a.closeOnBlur!==!1&&l.on(A,"blur",v),A.focus()),v}),l.defineExtension("openConfirm",function(w,b,a){x(this,null);var d=h(this,w,a&&a.bottom),E=d.getElementsByTagName("button"),m=!1,v=this,R=1;function A(){m||(m=!0,d.parentNode.removeChild(d),v.focus())}E[0].focus();for(var L=0;L<E.length;++L){var _=E[L];(function(g){l.on(_,"click",function(S){l.e_preventDefault(S),A(),g&&g(v)})})(b[L]),l.on(_,"blur",function(){--R,setTimeout(function(){R<=0&&A()},200)}),l.on(_,"focus",function(){++R})}}),l.defineExtension("openNotification",function(w,b){x(this,v);var a=h(this,w,b&&b.bottom),d=!1,E,m=b&&typeof b.duration<"u"?b.duration:5e3;function v(){d||(d=!0,clearTimeout(E),a.parentNode.removeChild(a))}return l.on(a,"click",function(R){l.e_preventDefault(R),v()}),m&&(E=setTimeout(v,m)),v})})},{"../../lib/codemirror":30}],17:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){l.defineExtension("addPanel",function(b,a){a=a||{},this.state.panels||x(this);var d=this.state.panels,E=d.wrapper,m=this.getWrapperElement();a.after instanceof h&&!a.after.cleared?E.insertBefore(b,a.before.node.nextSibling):a.before instanceof h&&!a.before.cleared?E.insertBefore(b,a.before.node):a.replace instanceof h&&!a.replace.cleared?(E.insertBefore(b,a.replace.node),a.replace.clear()):a.position=="bottom"?E.appendChild(b):a.position=="before-bottom"?E.insertBefore(b,m.nextSibling):a.position=="after-top"?E.insertBefore(b,m):E.insertBefore(b,E.firstChild);var v=a&&a.height||b.offsetHeight;return this._setSize(null,d.heightLeft-=v),d.panels++,new h(this,b,a,v)});function h(b,a,d,E){this.cm=b,this.node=a,this.options=d,this.height=E,this.cleared=!1}h.prototype.clear=function(){if(!this.cleared){this.cleared=!0;var b=this.cm.state.panels;this.cm._setSize(null,b.heightLeft+=this.height),b.wrapper.removeChild(this.node),--b.panels==0&&w(this.cm)}},h.prototype.changed=function(b){var a=b??this.node.offsetHeight,d=this.cm.state.panels;this.cm._setSize(null,d.height+=a-this.height),this.height=a};function x(b){var a=b.getWrapperElement(),d=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle,E=parseInt(d.height),m=b.state.panels={setHeight:a.style.height,heightLeft:E,panels:0,wrapper:document.createElement("div")};a.parentNode.insertBefore(m.wrapper,a);var v=b.hasFocus();m.wrapper.appendChild(a),v&&b.focus(),b._setSize=b.setSize,E!=null&&(b.setSize=function(R,A){if(A==null)return this._setSize(R,A);if(m.setHeight=A,typeof A!="number"){var L=/^(\d+\.?\d*)px$/.exec(A);L?A=Number(L[1]):(m.wrapper.style.height=A,A=m.wrapper.offsetHeight,m.wrapper.style.height="")}b._setSize(R,m.heightLeft+=A-E),E=A})}function w(b){var a=b.state.panels;b.state.panels=null;var d=b.getWrapperElement();a.wrapper.parentNode.replaceChild(d,a.wrapper),d.style.height=a.setHeight,b.setSize=b._setSize,b.setSize()}})},{"../../lib/codemirror":30}],18:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){l.defineOption("rulers",!1,function(b,a,d){d&&d!=l.Init&&(h(b),b.off("refresh",w)),a&&a.length&&(x(b),b.on("refresh",w))});function h(b){for(var a=b.display.lineSpace.childNodes.length-1;a>=0;a--){var d=b.display.lineSpace.childNodes[a];/(^|\s)CodeMirror-ruler($|\s)/.test(d.className)&&d.parentNode.removeChild(d)}}function x(b){for(var a=b.getOption("rulers"),d=b.defaultCharWidth(),E=b.charCoords(l.Pos(b.firstLine(),0),"div").left,m=b.display.scroller.offsetHeight+30,v=0;v<a.length;v++){var R=document.createElement("div");R.className="CodeMirror-ruler";var A,L=a[v];typeof L=="number"?A=L:(A=L.column,L.className&&(R.className+=" "+L.className),L.color&&(R.style.borderColor=L.color),L.lineStyle&&(R.style.borderLeftStyle=L.lineStyle),L.width&&(R.style.borderLeftWidth=L.width)),R.style.left=E+A*d+"px",R.style.top="-50px",R.style.bottom="-20px",R.style.minHeight=m+"px",b.display.lineSpace.insertBefore(R,b.display.cursorDiv)}}function w(b){h(b),x(b)}})},{"../../lib/codemirror":30}],19:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h={pairs:`()[]{}''""`,triples:"",explode:"[]{}"},x=l.Pos;l.defineOption("autoCloseBrackets",!1,function(f,p,k){k&&k!=l.Init&&(f.removeKeyMap(a),f.state.closeBrackets=null),p&&(f.state.closeBrackets=p,f.addKeyMap(a))});function w(f,p){return p=="pairs"&&typeof f=="string"?f:typeof f=="object"&&f[p]!=null?f[p]:h[p]}for(var b=h.pairs+"`",a={Backspace:v,Enter:R},d=0;d<b.length;d++)a["'"+b.charAt(d)+"'"]=E(b.charAt(d));function E(f){return function(p){return L(p,f)}}function m(f){var p=f.state.closeBrackets;if(!p)return null;var k=f.getModeAt(f.getCursor());return k.closeBrackets||p}function v(f){var p=m(f);if(!p||f.getOption("disableInput"))return l.Pass;for(var k=w(p,"pairs"),c=f.listSelections(),O=0;O<c.length;O++){if(!c[O].empty())return l.Pass;var C=g(f,c[O].head);if(!C||k.indexOf(C)%2!=0)return l.Pass}for(var O=c.length-1;O>=0;O--){var D=c[O].head;f.replaceRange("",x(D.line,D.ch-1),x(D.line,D.ch+1))}}function R(f){var p=m(f),k=p&&w(p,"explode");if(!k||f.getOption("disableInput"))return l.Pass;for(var c=f.listSelections(),O=0;O<c.length;O++){if(!c[O].empty())return l.Pass;var C=g(f,c[O].head);if(!C||k.indexOf(C)%2!=0)return l.Pass}f.operation(function(){f.replaceSelection(`

`,null),f.execCommand("goCharLeft"),c=f.listSelections();for(var D=0;D<c.length;D++){var $=c[D].head.line;f.indentLine($,null,!0),f.indentLine($+1,null,!0)}})}function A(f){var p=l.cmpPos(f.anchor,f.head)>0;return{anchor:new x(f.anchor.line,f.anchor.ch+(p?-1:1)),head:new x(f.head.line,f.head.ch+(p?1:-1))}}function L(f,p){var k=m(f);if(!k||f.getOption("disableInput"))return l.Pass;var c=w(k,"pairs"),O=c.indexOf(p);if(O==-1)return l.Pass;for(var C=w(k,"triples"),D=c.charAt(O+1)==p,$=f.listSelections(),W=O%2==0,B,Z,Q=0;Q<$.length;Q++){var ce=$[Q],te=ce.head,ae,Z=f.getRange(te,x(te.line,te.ch+1));if(W&&!ce.empty())ae="surround";else if((D||!W)&&Z==p)C.indexOf(p)>=0&&f.getRange(te,x(te.line,te.ch+3))==p+p+p?ae="skipThree":ae="skip";else if(D&&te.ch>1&&C.indexOf(p)>=0&&f.getRange(x(te.line,te.ch-2),te)==p+p&&(te.ch<=2||f.getRange(x(te.line,te.ch-3),x(te.line,te.ch-2))!=p))ae="addFour";else if(D)if(!l.isWordChar(Z)&&S(f,te,p))ae="both";else return l.Pass;else if(W&&(f.getLine(te.line).length==te.ch||_(Z,c)||/\s/.test(Z)))ae="both";else return l.Pass;if(!B)B=ae;else if(B!=ae)return l.Pass}var pe=O%2?c.charAt(O-1):p,be=O%2?p:c.charAt(O+1);f.operation(function(){if(B=="skip")f.execCommand("goCharRight");else if(B=="skipThree")for(var se=0;se<3;se++)f.execCommand("goCharRight");else if(B=="surround"){for(var ie=f.getSelections(),se=0;se<ie.length;se++)ie[se]=pe+ie[se]+be;f.replaceSelections(ie,"around"),ie=f.listSelections().slice();for(var se=0;se<ie.length;se++)ie[se]=A(ie[se]);f.setSelections(ie)}else B=="both"?(f.replaceSelection(pe+be,null),f.triggerElectric(pe+be),f.execCommand("goCharLeft")):B=="addFour"&&(f.replaceSelection(pe+pe+pe+pe,"before"),f.execCommand("goCharRight"))})}function _(f,p){var k=p.lastIndexOf(f);return k>-1&&k%2==1}function g(f,p){var k=f.getRange(x(p.line,p.ch-1),x(p.line,p.ch+1));return k.length==2?k:null}function S(f,p,k){var c=f.getLine(p.line),O=f.getTokenAt(p);if(/\bstring2?\b/.test(O.type))return!1;var C=new l.StringStream(c.slice(0,p.ch)+k+c.slice(p.ch),4);for(C.pos=C.start=O.start;;){var D=f.getMode().token(C,O.state);if(C.pos>=p.ch+1)return/\bstring2?\b/.test(D);C.start=C.pos}}})},{"../../lib/codemirror":30}],20:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),x=l.Pos,w={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function b(v,R,A,L){var _=v.getLineHandle(R.line),g=R.ch-1,S=g>=0&&w[_.text.charAt(g)]||w[_.text.charAt(++g)];if(!S)return null;var f=S.charAt(1)==">"?1:-1;if(A&&f>0!=(g==R.ch))return null;var p=v.getTokenTypeAt(x(R.line,g+1)),k=a(v,x(R.line,g+(f>0?1:0)),f,p||null,L);return k==null?null:{from:x(R.line,g),to:k&&k.pos,match:k&&k.ch==S.charAt(0),forward:f>0}}function a(v,R,A,L,_){for(var g=_&&_.maxScanLineLength||1e4,S=_&&_.maxScanLines||1e3,f=[],p=_&&_.bracketRegex?_.bracketRegex:/[(){}[\]]/,k=A>0?Math.min(R.line+S,v.lastLine()+1):Math.max(v.firstLine()-1,R.line-S),c=R.line;c!=k;c+=A){var O=v.getLine(c);if(O){var C=A>0?0:O.length-1,D=A>0?O.length:-1;if(!(O.length>g))for(c==R.line&&(C=R.ch-(A<0?1:0));C!=D;C+=A){var $=O.charAt(C);if(p.test($)&&(L===void 0||v.getTokenTypeAt(x(c,C+1))==L)){var W=w[$];if(W.charAt(1)==">"==A>0)f.push($);else if(f.length)f.pop();else return{pos:x(c,C),ch:$}}}}}return c-A==(A>0?v.lastLine():v.firstLine())?!1:null}function d(v,R,A){for(var L=v.state.matchBrackets.maxHighlightLineLength||1e3,_=[],g=v.listSelections(),S=0;S<g.length;S++){var f=g[S].empty()&&b(v,g[S].head,!1,A);if(f&&v.getLine(f.from.line).length<=L){var p=f.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";_.push(v.markText(f.from,x(f.from.line,f.from.ch+1),{className:p})),f.to&&v.getLine(f.to.line).length<=L&&_.push(v.markText(f.to,x(f.to.line,f.to.ch+1),{className:p}))}}if(_.length){h&&v.state.focused&&v.focus();var k=function(){v.operation(function(){for(var c=0;c<_.length;c++)_[c].clear()})};if(R)setTimeout(k,800);else return k}}var E=null;function m(v){v.operation(function(){E&&(E(),E=null),E=d(v,!1,v.state.matchBrackets)})}l.defineOption("matchBrackets",!1,function(v,R,A){A&&A!=l.Init&&v.off("cursorActivity",m),R&&(v.state.matchBrackets=typeof R=="object"?R:{},v.on("cursorActivity",m))}),l.defineExtension("matchBrackets",function(){d(this,!0)}),l.defineExtension("findMatchingBracket",function(v,R,A){return b(this,v,R,A)}),l.defineExtension("scanForBracket",function(v,R,A,L){return a(this,v,R,A,L)})})},{"../../lib/codemirror":30}],21:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){function h(a,d,E,m){if(E&&E.call){var v=E;E=null}else var v=b(a,E,"rangeFinder");typeof d=="number"&&(d=l.Pos(d,0));var R=b(a,E,"minFoldSize");function A(S){var f=v(a,d);if(!f||f.to.line-f.from.line<R)return null;for(var p=a.findMarksAt(f.from),k=0;k<p.length;++k)if(p[k].__isFold&&m!=="fold"){if(!S)return null;f.cleared=!0,p[k].clear()}return f}var L=A(!0);if(b(a,E,"scanUp"))for(;!L&&d.line>a.firstLine();)d=l.Pos(d.line-1,0),L=A(!1);if(!(!L||L.cleared||m==="unfold")){var _=x(a,E);l.on(_,"mousedown",function(S){g.clear(),l.e_preventDefault(S)});var g=a.markText(L.from,L.to,{replacedWith:_,clearOnEnter:!0,__isFold:!0});g.on("clear",function(S,f){l.signal(a,"unfold",a,S,f)}),l.signal(a,"fold",a,L.from,L.to)}}function x(a,d){var E=b(a,d,"widget");if(typeof E=="string"){var m=document.createTextNode(E);E=document.createElement("span"),E.appendChild(m),E.className="CodeMirror-foldmarker"}return E}l.newFoldFunction=function(a,d){return function(E,m){h(E,m,{rangeFinder:a,widget:d})}},l.defineExtension("foldCode",function(a,d,E){h(this,a,d,E)}),l.defineExtension("isFolded",function(a){for(var d=this.findMarksAt(a),E=0;E<d.length;++E)if(d[E].__isFold)return!0}),l.commands.toggleFold=function(a){a.foldCode(a.getCursor())},l.commands.fold=function(a){a.foldCode(a.getCursor(),null,"fold")},l.commands.unfold=function(a){a.foldCode(a.getCursor(),null,"unfold")},l.commands.foldAll=function(a){a.operation(function(){for(var d=a.firstLine(),E=a.lastLine();d<=E;d++)a.foldCode(l.Pos(d,0),null,"fold")})},l.commands.unfoldAll=function(a){a.operation(function(){for(var d=a.firstLine(),E=a.lastLine();d<=E;d++)a.foldCode(l.Pos(d,0),null,"unfold")})},l.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(d,E){for(var m=0;m<a.length;++m){var v=a[m](d,E);if(v)return v}}}),l.registerHelper("fold","auto",function(a,d){for(var E=a.getHelpers(d,"fold"),m=0;m<E.length;m++){var v=E[m](a,d);if(v)return v}});var w={rangeFinder:l.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};l.defineOption("foldOptions",null);function b(a,d,E){if(d&&d[E]!==void 0)return d[E];var m=a.options.foldOptions;return m&&m[E]!==void 0?m[E]:w[E]}l.defineExtension("foldOption",function(a,d){return b(this,a,d)})})},{"../../lib/codemirror":30}],22:[function(o,M,T){(function(l){typeof T=="object"&&typeof M=="object"?l(o("../../lib/codemirror"),o("./foldcode")):l(CodeMirror)})(function(l){l.defineOption("foldGutter",!1,function(L,_,g){g&&g!=l.Init&&(L.clearGutter(L.state.foldGutter.options.gutter),L.state.foldGutter=null,L.off("gutterClick",m),L.off("change",v),L.off("viewportChange",R),L.off("fold",A),L.off("unfold",A),L.off("swapDoc",E)),_&&(L.state.foldGutter=new x(w(_)),E(L),L.on("gutterClick",m),L.on("change",v),L.on("viewportChange",R),L.on("fold",A),L.on("unfold",A),L.on("swapDoc",E))});var h=l.Pos;function x(L){this.options=L,this.from=this.to=0}function w(L){return L===!0&&(L={}),L.gutter==null&&(L.gutter="CodeMirror-foldgutter"),L.indicatorOpen==null&&(L.indicatorOpen="CodeMirror-foldgutter-open"),L.indicatorFolded==null&&(L.indicatorFolded="CodeMirror-foldgutter-folded"),L}function b(L,_){for(var g=L.findMarksAt(h(_)),S=0;S<g.length;++S)if(g[S].__isFold&&g[S].find().from.line==_)return g[S]}function a(L){if(typeof L=="string"){var _=document.createElement("div");return _.className=L+" CodeMirror-guttermarker-subtle",_}else return L.cloneNode(!0)}function d(L,_,g){var S=L.state.foldGutter.options,f=_,p=L.foldOption(S,"minFoldSize"),k=L.foldOption(S,"rangeFinder");L.eachLine(_,g,function(c){var O=null;if(b(L,f))O=a(S.indicatorFolded);else{var C=h(f,0),D=k&&k(L,C);D&&D.to.line-D.from.line>=p&&(O=a(S.indicatorOpen))}L.setGutterMarker(c,S.gutter,O),++f})}function E(L){var _=L.getViewport(),g=L.state.foldGutter;g&&(L.operation(function(){d(L,_.from,_.to)}),g.from=_.from,g.to=_.to)}function m(L,_,g){var S=L.state.foldGutter;if(S){var f=S.options;if(g==f.gutter){var p=b(L,_);p?p.clear():L.foldCode(h(_,0),f.rangeFinder)}}}function v(L){var _=L.state.foldGutter;if(_){var g=_.options;_.from=_.to=0,clearTimeout(_.changeUpdate),_.changeUpdate=setTimeout(function(){E(L)},g.foldOnChangeTimeSpan||600)}}function R(L){var _=L.state.foldGutter;if(_){var g=_.options;clearTimeout(_.changeUpdate),_.changeUpdate=setTimeout(function(){var S=L.getViewport();_.from==_.to||S.from-_.to>20||_.from-S.to>20?E(L):L.operation(function(){S.from<_.from&&(d(L,S.from,_.from),_.from=S.from),S.to>_.to&&(d(L,_.to,S.to),_.to=S.to)})},g.updateViewportTimeSpan||400)}}function A(L,_){var g=L.state.foldGutter;if(g){var S=_.line;S>=g.from&&S<g.to&&d(L,S,S+1)}}})},{"../../lib/codemirror":30,"./foldcode":21}],23:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){l.registerHelper("fold","indent",function(h,x){var w=h.getOption("tabSize"),b=h.getLine(x.line);if(/\S/.test(b)){for(var a=function(L){return l.countColumn(L,null,w)},d=a(b),E=null,m=x.line+1,v=h.lastLine();m<=v;++m){var R=h.getLine(m),A=a(R);if(A>d)E=m;else if(/\S/.test(R))break}if(E)return{from:l.Pos(x.line,b.length),to:l.Pos(E,h.getLine(E).length)}}})})},{"../../lib/codemirror":30}],24:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h=l.Pos;function x(g,S){for(var f=0,p=g.length;f<p;++f)S(g[f])}function w(g,S){if(!Array.prototype.indexOf){for(var f=g.length;f--;)if(g[f]===S)return!0;return!1}return g.indexOf(S)!=-1}function b(g,S,f,p){var k=g.getCursor(),c=f(g,k);if(!/\b(?:string|comment)\b/.test(c.type)){c.state=l.innerMode(g.getMode(),c.state).state,/^[\w$_]*$/.test(c.string)?c.end>k.ch&&(c.end=k.ch,c.string=c.string.slice(0,k.ch-c.start)):c={start:k.ch,end:k.ch,string:"",state:c.state,type:c.string=="."?"property":null};for(var O=c;O.type=="property";){if(O=f(g,h(k.line,O.start)),O.string!=".")return;if(O=f(g,h(k.line,O.start)),!C)var C=[];C.push(O)}return{list:_(c,C,S,p),from:h(k.line,c.start),to:h(k.line,c.end)}}}function a(g,S){return b(g,A,function(f,p){return f.getTokenAt(p)},S)}l.registerHelper("hint","javascript",a);function d(g,S){var f=g.getTokenAt(S);return S.ch==f.start+1&&f.string.charAt(0)=="."?(f.end=f.start,f.string=".",f.type="property"):/^\.[\w$_]*$/.test(f.string)&&(f.type="property",f.start++,f.string=f.string.replace(/\./,"")),f}function E(g,S){return b(g,L,d,S)}l.registerHelper("hint","coffeescript",E);var m="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),v="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),R="prototype apply call bind".split(" "),A="break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),L="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function _(g,S,f,p){var k=[],c=g.string,O=p&&p.globalScope||window;function C(Z){Z.lastIndexOf(c,0)==0&&!w(k,Z)&&k.push(Z)}function D(Z){typeof Z=="string"?x(m,C):Z instanceof Array?x(v,C):Z instanceof Function&&x(R,C);for(var Q in Z)C(Q)}if(S&&S.length){var $=S.pop(),W;for($.type&&$.type.indexOf("variable")===0?(p&&p.additionalContext&&(W=p.additionalContext[$.string]),(!p||p.useGlobalScope!==!1)&&(W=W||O[$.string])):$.type=="string"?W="":$.type=="atom"?W=1:$.type=="function"&&(O.jQuery!=null&&($.string=="$"||$.string=="jQuery")&&typeof O.jQuery=="function"?W=O.jQuery():O._!=null&&$.string=="_"&&typeof O._=="function"&&(W=O._()));W!=null&&S.length;)W=W[S.pop().string];W!=null&&D(W)}else{for(var B=g.state.localVars;B;B=B.next)C(B.name);for(var B=g.state.globalVars;B;B=B.next)C(B.name);(!p||p.useGlobalScope!==!1)&&D(O),x(f,C)}return k}})},{"../../lib/codemirror":30}],25:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h="CodeMirror-hint",x="CodeMirror-hint-active";l.showHint=function(g,S,f){if(!S)return g.showHint(f);f&&f.async&&(S.async=!0);var p={hint:S};if(f)for(var k in f)p[k]=f[k];return g.showHint(p)},l.defineExtension("showHint",function(g){g=d(this,this.getCursor("start"),g);var S=this.listSelections();if(!(S.length>1)){if(this.somethingSelected()){if(!g.hint.supportsSelection)return;for(var f=0;f<S.length;f++)if(S[f].head.line!=S[f].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var p=this.state.completionActive=new w(this,g);p.options.hint&&(l.signal(this,"startCompletion",this),p.update(!0))}});function w(g,S){this.cm=g,this.options=S,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var f=this;g.on("cursorActivity",this.activityFunc=function(){f.cursorActivity()})}var b=window.requestAnimationFrame||function(g){return setTimeout(g,1e3/60)},a=window.cancelAnimationFrame||clearTimeout;w.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&l.signal(this.data,"close"),this.widget&&this.widget.close(),l.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(g,S){var f=g.list[S];f.hint?f.hint(this.cm,g,f):this.cm.replaceRange(E(f),f.from||g.from,f.to||g.to,"complete"),l.signal(g,"pick",f),this.close()},cursorActivity:function(){this.debounce&&(a(this.debounce),this.debounce=0);var g=this.cm.getCursor(),S=this.cm.getLine(g.line);if(g.line!=this.startPos.line||S.length-g.ch!=this.startLen-this.startPos.ch||g.ch<this.startPos.ch||this.cm.somethingSelected()||g.ch&&this.options.closeCharacters.test(S.charAt(g.ch-1)))this.close();else{var f=this;this.debounce=b(function(){f.update()}),this.widget&&this.widget.disable()}},update:function(g){if(this.tick!=null)if(!this.options.hint.async)this.finishUpdate(this.options.hint(this.cm,this.options),g);else{var S=++this.tick,f=this;this.options.hint(this.cm,function(p){f.tick==S&&f.finishUpdate(p,g)},this.options)}},finishUpdate:function(g,S){this.data&&l.signal(this.data,"update"),g&&this.data&&l.cmpPos(g.from,this.data.from)&&(g=null),this.data=g;var f=this.widget&&this.widget.picked||S&&this.options.completeSingle;this.widget&&this.widget.close(),g&&g.list.length&&(f&&g.list.length==1?this.pick(g,0):(this.widget=new R(this,g),l.signal(g,"shown")))}};function d(g,S,f){var p=g.options.hintOptions,k={};for(var c in _)k[c]=_[c];if(p)for(var c in p)p[c]!==void 0&&(k[c]=p[c]);if(f)for(var c in f)f[c]!==void 0&&(k[c]=f[c]);return k.hint.resolve&&(k.hint=k.hint.resolve(g,S)),k}function E(g){return typeof g=="string"?g:g.text}function m(g,S){var f={Up:function(){S.moveFocus(-1)},Down:function(){S.moveFocus(1)},PageUp:function(){S.moveFocus(-S.menuSize()+1,!0)},PageDown:function(){S.moveFocus(S.menuSize()-1,!0)},Home:function(){S.setFocus(0)},End:function(){S.setFocus(S.length-1)},Enter:S.pick,Tab:S.pick,Esc:S.close},p=g.options.customKeys,k=p?{}:f;function c(D,$){var W;typeof $!="string"?W=function(B){return $(B,S)}:f.hasOwnProperty($)?W=f[$]:W=$,k[D]=W}if(p)for(var O in p)p.hasOwnProperty(O)&&c(O,p[O]);var C=g.options.extraKeys;if(C)for(var O in C)C.hasOwnProperty(O)&&c(O,C[O]);return k}function v(g,S){for(;S&&S!=g;){if(S.nodeName.toUpperCase()==="LI"&&S.parentNode==g)return S;S=S.parentNode}}function R(g,S){this.completion=g,this.data=S,this.picked=!1;var f=this,p=g.cm,k=this.hints=document.createElement("ul");k.className="CodeMirror-hints",this.selectedHint=S.selectedHint||0;for(var c=S.list,O=0;O<c.length;++O){var C=k.appendChild(document.createElement("li")),D=c[O],$=h+(O!=this.selectedHint?"":" "+x);D.className!=null&&($=D.className+" "+$),C.className=$,D.render?D.render(C,S,D):C.appendChild(document.createTextNode(D.displayText||E(D))),C.hintId=O}var W=p.cursorCoords(g.options.alignWithWord?S.from:null),B=W.left,Z=W.bottom,Q=!0;k.style.left=B+"px",k.style.top=Z+"px";var ce=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),te=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(g.options.container||document.body).appendChild(k);var ae=k.getBoundingClientRect(),pe=ae.bottom-te;if(pe>0){var be=ae.bottom-ae.top,se=W.top-(W.bottom-ae.top);if(se-be>0)k.style.top=(Z=W.top-be)+"px",Q=!1;else if(be>te){k.style.height=te-5+"px",k.style.top=(Z=W.bottom-ae.top)+"px";var ie=p.getCursor();S.from.ch!=ie.ch&&(W=p.cursorCoords(ie),k.style.left=(B=W.left)+"px",ae=k.getBoundingClientRect())}}var we=ae.right-ce;if(we>0&&(ae.right-ae.left>ce&&(k.style.width=ce-5+"px",we-=ae.right-ae.left-ce),k.style.left=(B=W.left-we)+"px"),p.addKeyMap(this.keyMap=m(g,{moveFocus:function(ge,ye){f.changeActive(f.selectedHint+ge,ye)},setFocus:function(ge){f.changeActive(ge)},menuSize:function(){return f.screenAmount()},length:c.length,close:function(){g.close()},pick:function(){f.pick()},data:S})),g.options.closeOnUnfocus){var re;p.on("blur",this.onBlur=function(){re=setTimeout(function(){g.close()},100)}),p.on("focus",this.onFocus=function(){clearTimeout(re)})}var Me=p.getScrollInfo();return p.on("scroll",this.onScroll=function(){var ge=p.getScrollInfo(),ye=p.getWrapperElement().getBoundingClientRect(),me=Z+Me.top-ge.top,De=me-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(Q||(De+=k.offsetHeight),De<=ye.top||De>=ye.bottom)return g.close();k.style.top=me+"px",k.style.left=B+Me.left-ge.left+"px"}),l.on(k,"dblclick",function(ge){var ye=v(k,ge.target||ge.srcElement);ye&&ye.hintId!=null&&(f.changeActive(ye.hintId),f.pick())}),l.on(k,"click",function(ge){var ye=v(k,ge.target||ge.srcElement);ye&&ye.hintId!=null&&(f.changeActive(ye.hintId),g.options.completeOnSingleClick&&f.pick())}),l.on(k,"mousedown",function(){setTimeout(function(){p.focus()},20)}),l.signal(S,"select",c[0],k.firstChild),!0}R.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var g=this.completion.cm;this.completion.options.closeOnUnfocus&&(g.off("blur",this.onBlur),g.off("focus",this.onFocus)),g.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var g=this;this.keyMap={Enter:function(){g.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(g,S){if(g>=this.data.list.length?g=S?this.data.list.length-1:0:g<0&&(g=S?0:this.data.list.length-1),this.selectedHint!=g){var f=this.hints.childNodes[this.selectedHint];f.className=f.className.replace(" "+x,""),f=this.hints.childNodes[this.selectedHint=g],f.className+=" "+x,f.offsetTop<this.hints.scrollTop?this.hints.scrollTop=f.offsetTop-3:f.offsetTop+f.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=f.offsetTop+f.offsetHeight-this.hints.clientHeight+3),l.signal(this.data,"select",this.data.list[this.selectedHint],f)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}};function A(g,S){if(!g.somethingSelected())return S;for(var f=[],p=0;p<S.length;p++)S[p].supportsSelection&&f.push(S[p]);return f}function L(g,S){var f=g.getHelpers(S,"hint"),p;if(f.length){for(var k=!1,c,O=0;O<f.length;O++)f[O].async&&(k=!0);return k?(c=function(C,D,$){var W=A(C,f);function B(Z,Q){if(Z==W.length)return D(null);var ce=W[Z];if(ce.async)ce(C,function(te){te?D(te):B(Z+1)},$);else{var Q=ce(C,$);Q?D(Q):B(Z+1)}}B(0)},c.async=!0):c=function(C,D){for(var $=A(C,f),W=0;W<$.length;W++){var B=$[W](C,D);if(B&&B.list.length)return B}},c.supportsSelection=!0,c}else return(p=g.getHelper(g.getCursor(),"hintWords"))?function(C){return l.hint.fromList(C,{words:p})}:l.hint.anyword?function(C,D){return l.hint.anyword(C,D)}:function(){}}l.registerHelper("hint","auto",{resolve:L}),l.registerHelper("hint","fromList",function(g,S){var f=g.getCursor(),p=g.getTokenAt(f),k=l.Pos(f.line,p.end);if(p.string&&/\w/.test(p.string[p.string.length-1]))var c=p.string,O=l.Pos(f.line,p.start);else var c="",O=k;for(var C=[],D=0;D<S.words.length;D++){var $=S.words[D];$.slice(0,c.length)==c&&C.push($)}if(C.length)return{list:C,from:O,to:k}}),l.commands.autocomplete=l.showHint;var _={hint:l.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};l.defineOption("hintOptions",null)})},{"../../lib/codemirror":30}],26:[function(o,M,T){(function(l){typeof T=="object"&&typeof M=="object"?l(o("../../lib/codemirror"),o("./searchcursor"),o("../dialog/dialog")):l(CodeMirror)})(function(l){function h(C,D){return typeof C=="string"?C=new RegExp(C.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),D?"gi":"g"):C.global||(C=new RegExp(C.source,C.ignoreCase?"gi":"g")),{token:function($){C.lastIndex=$.pos;var W=C.exec($.string);if(W&&W.index==$.pos)return $.pos+=W[0].length,"searching";W?$.pos=W.index:$.skipToEnd()}}}function x(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function w(C){return C.state.search||(C.state.search=new x)}function b(C){return typeof C=="string"&&C==C.toLowerCase()}function a(C,D,$){return C.getSearchCursor(D,$,b(D))}function d(C,D,$,W){C.openDialog(D,W,{value:$,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){S(C)}})}function E(C,D,$,W,B){C.openDialog?C.openDialog(D,B,{value:W,selectValueOnOpen:!0}):B(prompt($,W))}function m(C,D,$,W){C.openConfirm?C.openConfirm(D,W):confirm($)&&W[0]()}function v(C){return C.replace(/\\(.)/g,function(D,$){return $=="n"?`
`:$=="r"?"\r":$})}function R(C){var D=C.match(/^\/(.*)\/([a-z]*)$/);if(D)try{C=new RegExp(D[1],D[2].indexOf("i")==-1?"":"i")}catch{}else C=v(C);return(typeof C=="string"?C=="":C.test(""))&&(C=/x^/),C}var A='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function L(C,D,$){D.queryText=$,D.query=R($),C.removeOverlay(D.overlay,b(D.query)),D.overlay=h(D.query,b(D.query)),C.addOverlay(D.overlay),C.showMatchesOnScrollbar&&(D.annotate&&(D.annotate.clear(),D.annotate=null),D.annotate=C.showMatchesOnScrollbar(D.query,b(D.query)))}function _(C,D,$){var W=w(C);if(W.query)return g(C,D);var B=C.getSelection()||W.lastQuery;if($&&C.openDialog){var Z=null;d(C,A,B,function(Q,ce){l.e_stop(ce),Q&&(Q!=W.queryText&&L(C,W,Q),Z&&(Z.style.opacity=1),g(C,ce.shiftKey,function(te,ae){var pe;ae.line<3&&document.querySelector&&(pe=C.display.wrapper.querySelector(".CodeMirror-dialog"))&&pe.getBoundingClientRect().bottom-4>C.cursorCoords(ae,"window").top&&((Z=pe).style.opacity=.4)}))})}else E(C,A,"Search for:",B,function(Q){Q&&!W.query&&C.operation(function(){L(C,W,Q),W.posFrom=W.posTo=C.getCursor(),g(C,D)})})}function g(C,D,$){C.operation(function(){var W=w(C),B=a(C,W.query,D?W.posFrom:W.posTo);!B.find(D)&&(B=a(C,W.query,D?l.Pos(C.lastLine()):l.Pos(C.firstLine(),0)),!B.find(D))||(C.setSelection(B.from(),B.to()),C.scrollIntoView({from:B.from(),to:B.to()},20),W.posFrom=B.from(),W.posTo=B.to(),$&&$(B.from(),B.to()))})}function S(C){C.operation(function(){var D=w(C);D.lastQuery=D.query,D.query&&(D.query=D.queryText=null,C.removeOverlay(D.overlay),D.annotate&&(D.annotate.clear(),D.annotate=null))})}var f=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',p='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',k="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";function c(C,D,$){C.operation(function(){for(var W=a(C,D);W.findNext();)if(typeof D!="string"){var B=C.getRange(W.from(),W.to()).match(D);W.replace($.replace(/\$(\d)/g,function(Z,Q){return B[Q]}))}else W.replace($)})}function O(C,D){if(!C.getOption("readOnly")){var $=C.getSelection()||w(C).lastQuery,W=D?"Replace all:":"Replace:";E(C,W+f,W,$,function(B){B&&(B=R(B),E(C,p,"Replace with:","",function(Z){if(Z=v(Z),D)c(C,B,Z);else{S(C);var Q=a(C,B,C.getCursor()),ce=function(){var ae=Q.from(),pe;!(pe=Q.findNext())&&(Q=a(C,B),!(pe=Q.findNext())||ae&&Q.from().line==ae.line&&Q.from().ch==ae.ch)||(C.setSelection(Q.from(),Q.to()),C.scrollIntoView({from:Q.from(),to:Q.to()}),m(C,k,"Replace?",[function(){te(pe)},ce,function(){c(C,B,Z)}]))},te=function(ae){Q.replace(typeof B=="string"?Z:Z.replace(/\$(\d)/g,function(pe,be){return ae[be]})),ce()};ce()}}))})}}l.commands.find=function(C){S(C),_(C)},l.commands.findPersistent=function(C){S(C),_(C,!1,!0)},l.commands.findNext=_,l.commands.findPrev=function(C){_(C,!0)},l.commands.clearSearch=S,l.commands.replace=O,l.commands.replaceAll=function(C){O(C,!0)}})},{"../../lib/codemirror":30,"../dialog/dialog":16,"./searchcursor":27}],27:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h=l.Pos;function x(b,a,d,E){if(this.atOccurrence=!1,this.doc=b,E==null&&typeof a=="string"&&(E=!1),d=d?b.clipPos(d):h(0,0),this.pos={from:d,to:d},typeof a!="string")a.global||(a=new RegExp(a.source,a.ignoreCase?"ig":"g")),this.matches=function(L,_){if(L){a.lastIndex=0;for(var g=b.getLine(_.line).slice(0,_.ch),S=0,f,p;;){a.lastIndex=S;var k=a.exec(g);if(!k||(f=k,p=f.index,S=f.index+(f[0].length||1),S==g.length))break}var c=f&&f[0].length||0;c||(p==0&&g.length==0?f=void 0:p!=b.getLine(_.line).length&&c++)}else{a.lastIndex=_.ch;var g=b.getLine(_.line),f=a.exec(g),c=f&&f[0].length||0,p=f&&f.index;p+c!=g.length&&!c&&(c=1)}if(f&&c)return{from:h(_.line,p),to:h(_.line,p+c),match:f}};else{var m=a;E&&(a=a.toLowerCase());var v=E?function(L){return L.toLowerCase()}:function(L){return L},R=a.split(`
`);if(R.length==1)a.length?this.matches=function(L,_){if(L){var g=b.getLine(_.line).slice(0,_.ch),S=v(g),f=S.lastIndexOf(a);if(f>-1)return f=w(g,S,f),{from:h(_.line,f),to:h(_.line,f+m.length)}}else{var g=b.getLine(_.line).slice(_.ch),S=v(g),f=S.indexOf(a);if(f>-1)return f=w(g,S,f)+_.ch,{from:h(_.line,f),to:h(_.line,f+m.length)}}}:this.matches=function(){};else{var A=m.split(`
`);this.matches=function(L,_){var g=R.length-1;if(L){if(_.line-(R.length-1)<b.firstLine()||v(b.getLine(_.line).slice(0,A[g].length))!=R[R.length-1])return;for(var S=h(_.line,A[g].length),f=_.line-1,p=g-1;p>=1;--p,--f)if(R[p]!=v(b.getLine(f)))return;var k=b.getLine(f),c=k.length-A[0].length;return v(k.slice(c))!=R[0]?void 0:{from:h(f,c),to:S}}else{if(_.line+(R.length-1)>b.lastLine())return;var k=b.getLine(_.line),c=k.length-A[0].length;if(v(k.slice(c))!=R[0])return;for(var O=h(_.line,c),f=_.line+1,p=1;p<g;++p,++f)if(R[p]!=v(b.getLine(f)))return;return v(b.getLine(f).slice(0,A[g].length))!=R[g]?void 0:{from:O,to:h(f,A[g].length)}}}}}}x.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){var a=this,d=this.doc.clipPos(b?this.pos.from:this.pos.to);function E(v){var R=h(v,0);return a.pos={from:R,to:R},a.atOccurrence=!1,!1}for(;;){if(this.pos=this.matches(b,d))return this.atOccurrence=!0,this.pos.match||!0;if(b){if(!d.line)return E(0);d=h(d.line-1,this.doc.getLine(d.line-1).length)}else{var m=this.doc.lineCount();if(d.line==m-1)return E(m);d=h(d.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(b,a){if(this.atOccurrence){var d=l.splitLines(b);this.doc.replaceRange(d,this.pos.from,this.pos.to,a),this.pos.to=h(this.pos.from.line+d.length-1,d[d.length-1].length+(d.length==1?this.pos.from.ch:0))}}};function w(b,a,d){if(b.length==a.length)return d;for(var E=Math.min(d,b.length);;){var m=b.slice(0,E).toLowerCase().length;if(m<d)++E;else if(m>d)--E;else return E}}l.defineExtension("getSearchCursor",function(b,a,d){return new x(this.doc,b,a,d)}),l.defineDocExtension("getSearchCursor",function(b,a,d){return new x(this,b,a,d)}),l.defineExtension("selectMatches",function(b,a){for(var d=[],E=this.getSearchCursor(b,this.getCursor("from"),a);E.findNext()&&!(l.cmpPos(E.to(),this.getCursor("to"))>0);)d.push({anchor:E.from(),head:E.to()});d.length&&this.setSelections(d,0)})})},{"../../lib/codemirror":30}],28:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){var h=l.Pos;function x(a,d,E){for(var m=E.paragraphStart||a.getHelper(d,"paragraphStart"),v=d.line,R=a.firstLine();v>R;--v){var A=a.getLine(v);if(m&&m.test(A))break;if(!/\S/.test(A)){++v;break}}for(var L=E.paragraphEnd||a.getHelper(d,"paragraphEnd"),_=d.line+1,g=a.lastLine();_<=g;++_){var A=a.getLine(_);if(L&&L.test(A)){++_;break}if(!/\S/.test(A))break}return{from:v,to:_}}function w(a,d,E,m){for(var v=d;v>0&&!E.test(a.slice(v-1,v+1));--v);for(var R=!0;;R=!1){var A=v;if(m)for(;a.charAt(A-1)==" ";)--A;if(A==0&&R)v=d;else return{from:A,to:v}}}function b(a,d,E,m){d=a.clipPos(d),E=a.clipPos(E);var v=m.column||80,R=m.wrapOn||/\s\S|-[^\.\d]/,A=m.killTrailingSpace!==!1,L=[],_="",g=d.line,S=a.getRange(d,E,!1);if(!S.length)return null;for(var f=S[0].match(/^[ \t]*/)[0],p=0;p<S.length;++p){var k=S[p],c=_.length,O=0;_&&k&&!R.test(_.charAt(_.length-1)+k.charAt(0))&&(_+=" ",O=1);var C="";if(p&&(C=k.match(/^\s*/)[0],k=k.slice(C.length)),_+=k,p){var D=_.length>v&&f==C&&w(_,v,R,A);!D||D.from!=c||D.to!=c+O?L.push({text:[O?" ":""],from:h(g,c),to:h(g+1,C.length)}):(_=f+k,++g)}for(;_.length>v;){var $=w(_,v,R,A);L.push({text:["",f],from:h(g,$.from),to:h(g,$.to)}),_=f+_.slice($.to),++g}}return L.length&&a.operation(function(){for(var W=0;W<L.length;++W){var B=L[W];(B.text||l.cmpPos(B.from,B.to))&&a.replaceRange(B.text,B.from,B.to)}}),L.length?{from:L[0].from,to:l.changeEnd(L[L.length-1])}:null}l.defineExtension("wrapParagraph",function(a,d){d=d||{},a||(a=this.getCursor());var E=x(this,a,d);return b(this,h(E.from,0),h(E.to-1),d)}),l.commands.wrapLines=function(a){a.operation(function(){for(var d=a.listSelections(),E=a.lastLine()+1,m=d.length-1;m>=0;m--){var v=d[m],R;if(v.empty()){var A=x(a,v.head,{});R={from:h(A.from,0),to:h(A.to-1)}}else R={from:v.from(),to:v.to()};R.to.line>=E||(E=R.from.line,b(a,R.from,R.to,{}))}})},l.defineExtension("wrapRange",function(a,d,E){return b(this,a,d,E||{})}),l.defineExtension("wrapParagraphsInRange",function(a,d,E){E=E||{};for(var m=this,v=[],R=a.line;R<=d.line;){var A=x(m,h(R,0),E);v.push(A),R=A.to}var L=!1;return v.length&&m.operation(function(){for(var _=v.length-1;_>=0;--_)L=L||b(m,h(v[_].from,0),h(v[_].to-1),E)}),L})})},{"../../lib/codemirror":30}],29:[function(o,M,T){(function(l){typeof T=="object"&&typeof M=="object"?l(o("../lib/codemirror"),o("../addon/search/searchcursor"),o("../addon/edit/matchbrackets")):l(CodeMirror)})(function(l){var h=l.keyMap.sublime={fallthrough:"default"},x=l.commands,w=l.Pos,b=l.keyMap.default==l.keyMap.macDefault,a=b?"Cmd-":"Ctrl-";function d(c,O,C){if(C<0&&O.ch==0)return c.clipPos(w(O.line-1));var D=c.getLine(O.line);if(C>0&&O.ch>=D.length)return c.clipPos(w(O.line+1,0));for(var $="start",W,B=O.ch,Z=C<0?0:D.length,Q=0;B!=Z;B+=C,Q++){var ce=D.charAt(C<0?B-1:B),te=ce!="_"&&l.isWordChar(ce)?"w":"o";if(te=="w"&&ce.toUpperCase()==ce&&(te="W"),$=="start")te!="o"&&($="in",W=te);else if($=="in"&&W!=te){if(W=="w"&&te=="W"&&C<0&&B--,W=="W"&&te=="w"&&C>0){W="w";continue}break}}return w(O.line,B)}function E(c,O){c.extendSelectionsBy(function(C){return c.display.shift||c.doc.extend||C.empty()?d(c.doc,C.head,O):O<0?C.from():C.to()})}x[h["Alt-Left"]="goSubwordLeft"]=function(c){E(c,-1)},x[h["Alt-Right"]="goSubwordRight"]=function(c){E(c,1)};var m=b?"Ctrl-Alt-":"Ctrl-";x[h[m+"Up"]="scrollLineUp"]=function(c){var O=c.getScrollInfo();if(!c.somethingSelected()){var C=c.lineAtHeight(O.top+O.clientHeight,"local");c.getCursor().line>=C&&c.execCommand("goLineUp")}c.scrollTo(null,O.top-c.defaultTextHeight())},x[h[m+"Down"]="scrollLineDown"]=function(c){var O=c.getScrollInfo();if(!c.somethingSelected()){var C=c.lineAtHeight(O.top,"local")+1;c.getCursor().line<=C&&c.execCommand("goLineDown")}c.scrollTo(null,O.top+c.defaultTextHeight())},x[h["Shift-"+a+"L"]="splitSelectionByLine"]=function(c){for(var O=c.listSelections(),C=[],D=0;D<O.length;D++)for(var $=O[D].from(),W=O[D].to(),B=$.line;B<=W.line;++B)W.line>$.line&&B==W.line&&W.ch==0||C.push({anchor:B==$.line?$:w(B,0),head:B==W.line?W:w(B)});c.setSelections(C,0)},h["Shift-Tab"]="indentLess",x[h.Esc="singleSelectionTop"]=function(c){var O=c.listSelections()[0];c.setSelection(O.anchor,O.head,{scroll:!1})},x[h[a+"L"]="selectLine"]=function(c){for(var O=c.listSelections(),C=[],D=0;D<O.length;D++){var $=O[D];C.push({anchor:w($.from().line,0),head:w($.to().line+1,0)})}c.setSelections(C)},h["Shift-"+a+"K"]="deleteLine";function v(c,O){c.operation(function(){for(var C=c.listSelections().length,D=[],$=-1,W=0;W<C;W++){var B=c.listSelections()[W].head;if(!(B.line<=$)){var Z=w(B.line+(O?0:1),0);c.replaceRange(`
`,Z,null,"+insertLine"),c.indentLine(Z.line,null,!0),D.push({head:Z,anchor:Z}),$=B.line+1}}c.setSelections(D)})}x[h[a+"Enter"]="insertLineAfter"]=function(c){v(c,!1)},x[h["Shift-"+a+"Enter"]="insertLineBefore"]=function(c){v(c,!0)};function R(c,O){for(var C=O.ch,D=C,$=c.getLine(O.line);C&&l.isWordChar($.charAt(C-1));)--C;for(;D<$.length&&l.isWordChar($.charAt(D));)++D;return{from:w(O.line,C),to:w(O.line,D),word:$.slice(C,D)}}x[h[a+"D"]="selectNextOccurrence"]=function(c){var O=c.getCursor("from"),C=c.getCursor("to"),D=c.state.sublimeFindFullWord==c.doc.sel;if(l.cmpPos(O,C)==0){var $=R(c,O);if(!$.word)return;c.setSelection($.from,$.to),D=!0}else{var W=c.getRange(O,C),B=D?new RegExp("\\b"+W+"\\b"):W,Z=c.getSearchCursor(B,C);Z.findNext()?c.addSelection(Z.from(),Z.to()):(Z=c.getSearchCursor(B,w(c.firstLine(),0)),Z.findNext()&&c.addSelection(Z.from(),Z.to()))}D&&(c.state.sublimeFindFullWord=c.doc.sel)};var A="(){}[]";function L(c){var O=c.getCursor(),C=c.scanForBracket(O,-1);if(C)for(;;){var D=c.scanForBracket(O,1);if(!D)return;if(D.ch==A.charAt(A.indexOf(C.ch)+1))return c.setSelection(w(C.pos.line,C.pos.ch+1),D.pos,!1),!0;O=w(D.pos.line,D.pos.ch+1)}}x[h["Shift-"+a+"Space"]="selectScope"]=function(c){L(c)||c.execCommand("selectAll")},x[h["Shift-"+a+"M"]="selectBetweenBrackets"]=function(c){if(!L(c))return l.Pass},x[h[a+"M"]="goToBracket"]=function(c){c.extendSelectionsBy(function(O){var C=c.scanForBracket(O.head,1);if(C&&l.cmpPos(C.pos,O.head)!=0)return C.pos;var D=c.scanForBracket(O.head,-1);return D&&w(D.pos.line,D.pos.ch+1)||O.head})};var _=b?"Cmd-Ctrl-":"Shift-Ctrl-";x[h[_+"Up"]="swapLineUp"]=function(c){for(var O=c.listSelections(),C=[],D=c.firstLine()-1,$=[],W=0;W<O.length;W++){var B=O[W],Z=B.from().line-1,Q=B.to().line;$.push({anchor:w(B.anchor.line-1,B.anchor.ch),head:w(B.head.line-1,B.head.ch)}),B.to().ch==0&&!B.empty()&&--Q,Z>D?C.push(Z,Q):C.length&&(C[C.length-1]=Q),D=Q}c.operation(function(){for(var ce=0;ce<C.length;ce+=2){var te=C[ce],ae=C[ce+1],pe=c.getLine(te);c.replaceRange("",w(te,0),w(te+1,0),"+swapLine"),ae>c.lastLine()?c.replaceRange(`
`+pe,w(c.lastLine()),null,"+swapLine"):c.replaceRange(pe+`
`,w(ae,0),null,"+swapLine")}c.setSelections($),c.scrollIntoView()})},x[h[_+"Down"]="swapLineDown"]=function(c){for(var O=c.listSelections(),C=[],D=c.lastLine()+1,$=O.length-1;$>=0;$--){var W=O[$],B=W.to().line+1,Z=W.from().line;W.to().ch==0&&!W.empty()&&B--,B<D?C.push(B,Z):C.length&&(C[C.length-1]=Z),D=Z}c.operation(function(){for(var Q=C.length-2;Q>=0;Q-=2){var ce=C[Q],te=C[Q+1],ae=c.getLine(ce);ce==c.lastLine()?c.replaceRange("",w(ce-1),w(ce),"+swapLine"):c.replaceRange("",w(ce,0),w(ce+1,0),"+swapLine"),c.replaceRange(ae+`
`,w(te,0),null,"+swapLine")}c.scrollIntoView()})},h[a+"/"]=function(c){c.toggleComment({indent:!0})},x[h[a+"J"]="joinLines"]=function(c){for(var O=c.listSelections(),C=[],D=0;D<O.length;D++){for(var $=O[D],W=$.from(),B=W.line,Z=$.to().line;D<O.length-1&&O[D+1].from().line==Z;)Z=O[++D].to().line;C.push({start:B,end:Z,anchor:!$.empty()&&W})}c.operation(function(){for(var Q=0,ce=[],te=0;te<C.length;te++){for(var ae=C[te],pe=ae.anchor&&w(ae.anchor.line-Q,ae.anchor.ch),be,se=ae.start;se<=ae.end;se++){var ie=se-Q;se==ae.end&&(be=w(ie,c.getLine(ie).length+1)),ie<c.lastLine()&&(c.replaceRange(" ",w(ie),w(ie+1,/^\s*/.exec(c.getLine(ie+1))[0].length)),++Q)}ce.push({anchor:pe||be,head:be})}c.setSelections(ce,0)})},x[h["Shift-"+a+"D"]="duplicateLine"]=function(c){c.operation(function(){for(var O=c.listSelections().length,C=0;C<O;C++){var D=c.listSelections()[C];D.empty()?c.replaceRange(c.getLine(D.head.line)+`
`,w(D.head.line,0)):c.replaceRange(c.getRange(D.from(),D.to()),D.from())}c.scrollIntoView()})},h[a+"T"]="transposeChars";function g(c,O){for(var C=c.listSelections(),D=[],$,W=0;W<C.length;W++){var B=C[W];if(!B.empty()){for(var Z=B.from().line,Q=B.to().line;W<C.length-1&&C[W+1].from().line==Q;)Q=B[++W].to().line;D.push(Z,Q)}}D.length?$=!0:D.push(c.firstLine(),c.lastLine()),c.operation(function(){for(var ce=[],te=0;te<D.length;te+=2){var ae=D[te],pe=D[te+1],be=w(ae,0),se=w(pe),ie=c.getRange(be,se,!1);O?ie.sort():ie.sort(function(we,re){var Me=we.toUpperCase(),ge=re.toUpperCase();return Me!=ge&&(we=Me,re=ge),we<re?-1:we==re?0:1}),c.replaceRange(ie,be,se),$&&ce.push({anchor:be,head:se})}$&&c.setSelections(ce,0)})}x[h.F9="sortLines"]=function(c){g(c,!0)},x[h[a+"F9"]="sortLinesInsensitive"]=function(c){g(c,!1)},x[h.F2="nextBookmark"]=function(c){var O=c.state.sublimeBookmarks;if(O)for(;O.length;){var C=O.shift(),D=C.find();if(D)return O.push(C),c.setSelection(D.from,D.to)}},x[h["Shift-F2"]="prevBookmark"]=function(c){var O=c.state.sublimeBookmarks;if(O)for(;O.length;){O.unshift(O.pop());var C=O[O.length-1].find();if(!C)O.pop();else return c.setSelection(C.from,C.to)}},x[h[a+"F2"]="toggleBookmark"]=function(c){for(var O=c.listSelections(),C=c.state.sublimeBookmarks||(c.state.sublimeBookmarks=[]),D=0;D<O.length;D++){for(var $=O[D].from(),W=O[D].to(),B=c.findMarks($,W),Z=0;Z<B.length;Z++)if(B[Z].sublimeBookmark){B[Z].clear();for(var Q=0;Q<C.length;Q++)C[Q]==B[Z]&&C.splice(Q--,1);break}Z==B.length&&C.push(c.markText($,W,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},x[h["Shift-"+a+"F2"]="clearBookmarks"]=function(c){var O=c.state.sublimeBookmarks;if(O)for(var C=0;C<O.length;C++)O[C].clear();O.length=0},x[h["Alt-F2"]="selectBookmarks"]=function(c){var O=c.state.sublimeBookmarks,C=[];if(O)for(var D=0;D<O.length;D++){var $=O[D].find();$?C.push({anchor:$.from,head:$.to}):O.splice(D--,0)}C.length&&c.setSelections(C,0)},h["Alt-Q"]="wrapLines";var S=a+"K ";function f(c,O){c.operation(function(){for(var C=c.listSelections(),D=[],$=[],W=0;W<C.length;W++){var B=C[W];B.empty()?(D.push(W),$.push("")):$.push(O(c.getRange(B.from(),B.to())))}c.replaceSelections($,"around","case");for(var W=D.length-1,Z;W>=0;W--){var B=C[D[W]];if(!(Z&&l.cmpPos(B.head,Z)>0)){var Q=R(c,B.head);Z=Q.from,c.replaceRange(O(Q.word),Q.from,Q.to)}}})}h[S+a+"Backspace"]="delLineLeft",x[h.Backspace="smartBackspace"]=function(c){if(c.somethingSelected())return l.Pass;var O=c.getCursor(),C=c.getRange({line:O.line,ch:0},O),D=l.countColumn(C,null,c.getOption("tabSize")),$=c.getOption("indentUnit");if(C&&!/\S/.test(C)&&D%$==0){var W=new w(O.line,l.findColumn(C,D-$,$));return W.ch==O.ch?l.Pass:c.replaceRange("",W,O,"+delete")}else return l.Pass},x[h[S+a+"K"]="delLineRight"]=function(c){c.operation(function(){for(var O=c.listSelections(),C=O.length-1;C>=0;C--)c.replaceRange("",O[C].anchor,w(O[C].to().line),"+delete");c.scrollIntoView()})},x[h[S+a+"U"]="upcaseAtCursor"]=function(c){f(c,function(O){return O.toUpperCase()})},x[h[S+a+"L"]="downcaseAtCursor"]=function(c){f(c,function(O){return O.toLowerCase()})},x[h[S+a+"Space"]="setSublimeMark"]=function(c){c.state.sublimeMark&&c.state.sublimeMark.clear(),c.state.sublimeMark=c.setBookmark(c.getCursor())},x[h[S+a+"A"]="selectToSublimeMark"]=function(c){var O=c.state.sublimeMark&&c.state.sublimeMark.find();O&&c.setSelection(c.getCursor(),O)},x[h[S+a+"W"]="deleteToSublimeMark"]=function(c){var O=c.state.sublimeMark&&c.state.sublimeMark.find();if(O){var C=c.getCursor(),D=O;if(l.cmpPos(C,D)>0){var $=D;D=C,C=$}c.state.sublimeKilled=c.getRange(C,D),c.replaceRange("",C,D)}},x[h[S+a+"X"]="swapWithSublimeMark"]=function(c){var O=c.state.sublimeMark&&c.state.sublimeMark.find();O&&(c.state.sublimeMark.clear(),c.state.sublimeMark=c.setBookmark(c.getCursor()),c.setCursor(O))},x[h[S+a+"Y"]="sublimeYank"]=function(c){c.state.sublimeKilled!=null&&c.replaceSelection(c.state.sublimeKilled,null,"paste")},h[S+a+"G"]="clearBookmarks",x[h[S+a+"C"]="showInCenter"]=function(c){var O=c.cursorCoords(null,"local");c.scrollTo(null,(O.top+O.bottom)/2-c.getScrollInfo().clientHeight/2)},x[h["Shift-Alt-Up"]="selectLinesUpward"]=function(c){c.operation(function(){for(var O=c.listSelections(),C=0;C<O.length;C++){var D=O[C];D.head.line>c.firstLine()&&c.addSelection(w(D.head.line-1,D.head.ch))}})},x[h["Shift-Alt-Down"]="selectLinesDownward"]=function(c){c.operation(function(){for(var O=c.listSelections(),C=0;C<O.length;C++){var D=O[C];D.head.line<c.lastLine()&&c.addSelection(w(D.head.line+1,D.head.ch))}})};function p(c){var O=c.getCursor("from"),C=c.getCursor("to");if(l.cmpPos(O,C)==0){var D=R(c,O);if(!D.word)return;O=D.from,C=D.to}return{from:O,to:C,query:c.getRange(O,C),word:D}}function k(c,O){var C=p(c);if(C){var D=C.query,$=c.getSearchCursor(D,O?C.to:C.from);(O?$.findNext():$.findPrevious())?c.setSelection($.from(),$.to()):($=c.getSearchCursor(D,O?w(c.firstLine(),0):c.clipPos(w(c.lastLine()))),(O?$.findNext():$.findPrevious())?c.setSelection($.from(),$.to()):C.word&&c.setSelection(C.from,C.to))}}x[h[a+"F3"]="findUnder"]=function(c){k(c,!0)},x[h["Shift-"+a+"F3"]="findUnderPrevious"]=function(c){k(c,!1)},x[h["Alt-F3"]="findAllUnder"]=function(c){var O=p(c);if(O){for(var C=c.getSearchCursor(O.query),D=[],$=-1;C.findNext();)D.push({anchor:C.from(),head:C.to()}),C.from().line<=O.from.line&&C.from().ch<=O.from.ch&&$++;c.setSelections(D,$)}},h["Shift-"+a+"["]="fold",h["Shift-"+a+"]"]="unfold",h[S+a+"0"]=h[S+a+"j"]="unfoldAll",h[a+"I"]="findIncremental",h["Shift-"+a+"I"]="findIncrementalReverse",h[a+"H"]="replace",h.F3="findNext",h["Shift-F3"]="findPrev",l.normalizeKeyMap(h)})},{"../addon/edit/matchbrackets":20,"../addon/search/searchcursor":27,"../lib/codemirror":30}],30:[function(o,M,T){(function(l){typeof T=="object"&&typeof M=="object"?M.exports=l():this.CodeMirror=l()})(function(){var l=navigator.userAgent,h=navigator.platform,x=/gecko\/\d/i.test(l),w=/MSIE \d/.test(l),b=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(l),a=w||b,d=a&&(w?document.documentMode||6:b[1]),E=/WebKit\//.test(l),m=E&&/Qt\/\d+\.\d+/.test(l),v=/Chrome\//.test(l),R=/Opera\//.test(l),A=/Apple Computer/.test(navigator.vendor),L=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(l),_=/PhantomJS/.test(l),g=/AppleWebKit/.test(l)&&/Mobile\/\w+/.test(l),S=g||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(l),f=g||/Mac/.test(h),p=/win/i.test(h),k=R&&l.match(/Version\/(\d*\.\d*)/);k&&(k=Number(k[1])),k&&k>=15&&(R=!1,E=!0);var c=f&&(m||R&&(k==null||k<12.11)),O=x||a&&d>=9,C=!1,D=!1;function $(e,t){if(!(this instanceof $))return new $(e,t);this.options=t=t?Ut(t):{},Ut(ul,t,!1),re(t);var r=t.value;typeof r=="string"&&(r=new Rt(r,t.mode,null,t.lineSeparator)),this.doc=r;var i=new $.inputStyles[t.inputStyle](this),n=this.display=new W(e,r,i);n.wrapper.CodeMirror=this,be(this),ae(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!S&&n.input.focus(),me(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new zi,keySeq:null,specialChars:null};var s=this;a&&d<11&&setTimeout(function(){s.display.input.reset(!0)},20),ja(this),zl(),Zr(this),this.curOp.forceUpdate=!0,Bo(this,r),t.autofocus&&!S||s.hasFocus()?setTimeout(Gi(ns,this),20):Ai(this);for(var u in ii)ii.hasOwnProperty(u)&&ii[u](this,t[u],yo);ct(this),t.finishInit&&t.finishInit(this);for(var y=0;y<ls.length;++y)ls[y](this);Jr(this),E&&t.lineWrapping&&getComputedStyle(n.lineDiv).textRendering=="optimizelegibility"&&(n.lineDiv.style.textRendering="auto")}function W(e,t,r){var i=this;this.input=r,i.scrollbarFiller=Ae("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=Ae("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Ae("div",null,"CodeMirror-code"),i.selectionDiv=Ae("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Ae("div",null,"CodeMirror-cursors"),i.measure=Ae("div",null,"CodeMirror-measure"),i.lineMeasure=Ae("div",null,"CodeMirror-measure"),i.lineSpace=Ae("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Ae("div",[Ae("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Ae("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=Ae("div",null,null,"position: absolute; height: "+Jo+"px; width: 1px;"),i.gutters=Ae("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Ae("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Ae("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&d<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!E&&!(x&&S)&&(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}function B(e){e.doc.mode=$.getMode(e.options,e.doc.modeOption),Z(e)}function Z(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,q(e,100),e.state.modeGen++,e.curOp&&Lt(e)}function Q(e){e.options.lineWrapping?(Zi(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Yi(e.display.wrapper,"CodeMirror-wrap"),we(e)),te(e),Lt(e),Li(e),setTimeout(function(){De(e)},100)}function ce(e){var t=Ar(e.display),r=e.options.lineWrapping,i=r&&Math.max(5,e.display.scroller.clientWidth/Ei(e.display)-3);return function(n){if(Dr(e.doc,n))return 0;var s=0;if(n.widgets)for(var u=0;u<n.widgets.length;u++)n.widgets[u].height&&(s+=n.widgets[u].height);return r?s+(Math.ceil(n.text.length/i)||1)*t:s+t}}function te(e){var t=e.doc,r=ce(e);t.iter(function(i){var n=r(i);n!=i.height&&Xt(i,n)})}function ae(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Li(e)}function pe(e){be(e),Lt(e),setTimeout(function(){et(e)},20)}function be(e){var t=e.display.gutters,r=e.options.gutters;Ir(t);for(var i=0;i<r.length;++i){var n=r[i],s=t.appendChild(Ae("div",null,"CodeMirror-gutter "+n));n=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",se(e)}function se(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function ie(e){if(e.height==0)return 0;for(var t=e.text.length,r,i=e;r=Eo(i);){var n=r.find(0,!0);i=n.from.line,t+=n.from.ch-n.to.ch}for(i=e;r=Hi(i);){var n=r.find(0,!0);t-=i.text.length-n.from.ch,i=n.to.line,t+=i.text.length-n.to.ch}return t}function we(e){var t=e.display,r=e.doc;t.maxLine=Oe(r,r.first),t.maxLineLength=ie(t.maxLine),t.maxLineChanged=!0,r.iter(function(i){var n=ie(i);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=i)})}function re(e){var t=wt(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function Me(e){var t=e.display,r=t.gutters.offsetWidth,i=Math.round(e.doc.height+Pe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:i,scrollHeight:i+Je(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function ge(e,t,r){this.cm=r;var i=this.vert=Ae("div",[Ae("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=Ae("div",[Ae("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(n),$e(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),$e(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedOverlay=!1,a&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}ge.prototype=Ut({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var n=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(r?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+s+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(i==0&&this.overlayHack(),this.checkedOverlay=!0),{right:r?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=f&&!L?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,r=function(i){Bi(i)!=t.vert&&Bi(i)!=t.horiz&&at(t.cm,qs)(i)};$e(this.vert,"mousedown",r),$e(this.horiz,"mousedown",r)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},ge.prototype);function ye(){}ye.prototype=Ut({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},ye.prototype),$.scrollbarModel={native:ge,null:ye};function me(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Yi(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new $.scrollbarModel[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),$e(t,"mousedown",function(){e.state.focused&&setTimeout(function(){e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){r=="horizontal"?Qr(e,t):Mi(e,t)},e),e.display.scrollbars.addClass&&Zi(e.display.wrapper,e.display.scrollbars.addClass)}function De(e,t){t||(t=Me(e));var r=e.display.barWidth,i=e.display.barHeight;Ge(e,t);for(var n=0;n<4&&r!=e.display.barWidth||i!=e.display.barHeight;n++)r!=e.display.barWidth&&e.options.lineWrapping&&ke(e),Ge(e,Me(e)),r=e.display.barWidth,i=e.display.barHeight}function Ge(e,t){var r=e.display,i=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=i.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=i.bottom)+"px",i.right&&i.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=i.bottom+"px",r.scrollbarFiller.style.width=i.right+"px"):r.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=i.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function Xe(e,t,r){var i=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;i=Math.floor(i-Le(e));var n=r&&r.bottom!=null?r.bottom:i+e.wrapper.clientHeight,s=Nr(t,i),u=Nr(t,n);if(r&&r.ensure){var y=r.ensure.from.line,P=r.ensure.to.line;y<s?(s=y,u=Nr(t,rr(Oe(t,y))+e.wrapper.clientHeight)):Math.min(P,t.lastLine())>=u&&(s=Nr(t,rr(Oe(t,P))-e.wrapper.clientHeight),u=P)}return{from:s,to:Math.max(u,s+1)}}function et(e){var t=e.display,r=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var i=z(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,s=i+"px",u=0;u<r.length;u++)if(!r[u].hidden){e.options.fixedGutter&&r[u].gutter&&(r[u].gutter.style.left=s);var y=r[u].alignable;if(y)for(var P=0;P<y.length;P++)y[P].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=i+n+"px")}}function ct(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=J(e.options,t.first+t.size-1),i=e.display;if(r.length!=i.lineNumChars){var n=i.measure.appendChild(Ae("div",[Ae("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=n.firstChild.offsetWidth,u=n.offsetWidth-s;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(s,i.lineGutter.offsetWidth-u)+1,i.lineNumWidth=i.lineNumInnerWidth+u,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",se(e),!0}return!1}function J(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function z(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function F(e,t,r){var i=e.display;this.viewport=t,this.visible=Xe(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Be(e),this.force=r,this.dims=Re(e),this.events=[]}F.prototype.signal=function(e,t){It(e,t)&&this.events.push(arguments)},F.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ft.apply(null,this.events[e])};function I(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Je(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Je(e)+"px",t.scrollbarsClipped=!0)}function G(e,t){var r=e.display,i=e.doc;if(t.editorIsHidden)return ar(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&Qs(e)==0)return!1;ct(e)&&(ar(e),t.dims=Re(e));var n=i.first+i.size,s=Math.max(t.visible.from-e.options.viewportMargin,i.first),u=Math.min(n,t.visible.to+e.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>u&&r.viewTo-u<20&&(u=Math.min(n,r.viewTo)),D&&(s=cs(e.doc,s),u=Ao(e.doc,u));var y=s!=r.viewFrom||u!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;Ua(e,s,u),r.viewOffset=rr(Oe(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var P=Qs(e);if(!y&&P==0&&!t.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var H=Kt();return P>4&&(r.lineDiv.style.display="none"),Ue(e,r.updateLineNumbers,t.dims),P>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,H&&Kt()!=H&&H.offsetHeight&&H.focus(),Ir(r.cursorDiv),Ir(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,y&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,q(e,400)),r.updateLineNumbers=null,!0}function X(e,t){for(var r=t.viewport,i=!0;!((!i||!e.options.lineWrapping||t.oldDisplayWidth==Be(e))&&(r&&r.top!=null&&(r={top:Math.min(e.doc.height+Pe(e.display)-yt(e),r.top)}),t.visible=Xe(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)||!G(e,t));i=!1){ke(e);var n=Me(e);or(e),oe(e,n),De(e,n)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function le(e,t){var r=new F(e,t);if(G(e,r)){ke(e),X(e,r);var i=Me(e);or(e),oe(e,i),De(e,i),r.finish()}}function oe(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var r=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=r+"px",e.display.gutters.style.height=Math.max(r+Je(e),t.clientHeight)+"px"}function ke(e){for(var t=e.display,r=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var n=t.view[i],s;if(!n.hidden){if(a&&d<8){var u=n.node.offsetTop+n.node.offsetHeight;s=u-r,r=u}else{var y=n.node.getBoundingClientRect();s=y.bottom-y.top}var P=n.line.height-s;if(s<2&&(s=Ar(t)),(P>.001||P<-.001)&&(Xt(n.line,s),Te(n.line),n.rest))for(var H=0;H<n.rest.length;H++)Te(n.rest[H])}}}function Te(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Re(e){for(var t=e.display,r={},i={},n=t.gutters.clientLeft,s=t.gutters.firstChild,u=0;s;s=s.nextSibling,++u)r[e.options.gutters[u]]=s.offsetLeft+s.clientLeft+n,i[e.options.gutters[u]]=s.clientWidth;return{fixedPos:z(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Ue(e,t,r){var i=e.display,n=e.options.lineNumbers,s=i.lineDiv,u=s.firstChild;function y(ee){var ve=ee.nextSibling;return E&&f&&e.display.currentWheelTarget==ee?ee.style.display="none":ee.parentNode.removeChild(ee),ve}for(var P=i.view,H=i.viewFrom,j=0;j<P.length;j++){var U=P[j];if(!U.hidden)if(!U.node||U.node.parentNode!=s){var K=Ft(e,U,H,r);s.insertBefore(K,u)}else{for(;u!=U.node;)u=y(u);var V=n&&t!=null&&t<=H&&U.lineNumber;U.changes&&(wt(U.changes,"gutter")>-1&&(V=!1),Ye(e,U,H,r)),V&&(Ir(U.lineNumber),U.lineNumber.appendChild(document.createTextNode(J(e.options,H)))),u=U.node.nextSibling}H+=U.size}for(;u;)u=y(u)}function Ye(e,t,r,i){for(var n=0;n<t.changes.length;n++){var s=t.changes[n];s=="text"?rt(e,t):s=="gutter"?Qe(e,t,r,i):s=="class"?st(t):s=="widget"&&ot(e,t,i)}t.changes=null}function Fe(e){return e.node==e.text&&(e.node=Ae("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&d<8&&(e.node.style.zIndex=2)),e.node}function nt(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=Fe(e);e.background=r.insertBefore(Ae("div",null,t),r.firstChild)}}function ze(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Io(e,t)}function rt(e,t){var r=t.text.className,i=ze(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,st(t)):r&&(t.text.className=r)}function st(e){nt(e),e.line.wrapClass?Fe(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function Qe(e,t,r,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=Fe(t);t.gutterBackground=Ae("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),n.insertBefore(t.gutterBackground,t.text)}var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var n=Fe(t),u=t.gutter=Ae("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(u),n.insertBefore(u,t.text),t.line.gutterClass&&(u.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!s||!s["CodeMirror-linenumbers"])&&(t.lineNumber=u.appendChild(Ae("div",J(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var y=0;y<e.options.gutters.length;++y){var P=e.options.gutters[y],H=s.hasOwnProperty(P)&&s[P];H&&u.appendChild(Ae("div",[H],"CodeMirror-gutter-elt","left: "+i.gutterLeft[P]+"px; width: "+i.gutterWidth[P]+"px"))}}}function ot(e,t,r){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,n;i;i=n){var n=i.nextSibling;i.className=="CodeMirror-linewidget"&&t.node.removeChild(i)}pr(e,t,r)}function Ft(e,t,r,i){var n=ze(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),st(t),Qe(e,t,r,i),pr(e,t,i),t.node}function pr(e,t,r){if(an(e,t.line,t,r,!0),t.rest)for(var i=0;i<t.rest.length;i++)an(e,t.rest[i],t,r,!1)}function an(e,t,r,i,n){if(t.widgets)for(var s=Fe(r),u=0,y=t.widgets;u<y.length;++u){var P=y[u],H=Ae("div",[P.node],"CodeMirror-linewidget");P.handleMouseEvents||H.setAttribute("cm-ignore-events","true"),mi(P,H,r,i),e.display.input.setUneditable(H),n&&P.above?s.insertBefore(H,r.gutter||r.text):s.appendChild(H),Et(P,"redraw")}}function mi(e,t,r,i){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var n=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(n-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}var fe=$.Pos=function(e,t){if(!(this instanceof fe))return new fe(e,t);this.line=e,this.ch=t},We=$.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function yi(e){return fe(e.line,e.ch)}function vr(e,t){return We(e,t)<0?t:e}function Yt(e,t){return We(e,t)<0?e:t}function ln(e){e.state.focused||(e.display.input.focus(),ns(e))}function Ht(e){return e.options.readOnly||e.doc.cantEdit}var At=null;function gr(e,t,r,i,n){var s=e.doc;e.display.shift=!1,i||(i=s.sel);var u=e.state.pasteIncoming||n=="paste",y=s.splitLines(t),P=null;if(u&&i.ranges.length>1)if(At&&At.join(`
`)==t){if(i.ranges.length%At.length==0){P=[];for(var H=0;H<At.length;H++)P.push(s.splitLines(At[H]))}}else y.length==i.ranges.length&&(P=Wn(y,function(ve){return[ve]}));for(var H=i.ranges.length-1;H>=0;H--){var j=i.ranges[H],U=j.from(),K=j.to();j.empty()&&(r&&r>0?U=fe(U.line,U.ch-r):e.state.overwrite&&!u&&(K=fe(K.line,Math.min(Oe(s,K.line).text.length,K.ch+qe(y).length))));var V=e.curOp.updateInput,ee={from:U,to:K,text:P?P[H%P.length]:y,origin:n||(u?"paste":e.state.cutIncoming?"cut":"+input")};qr(e.doc,ee),Et(e,"inputRead",e,ee)}t&&!u&&yr(e,t),ti(e),e.curOp.updateInput=V,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function mr(e,t){var r=e.clipboardData&&e.clipboardData.getData("text/plain");if(r)return e.preventDefault(),!Ht(t)&&!t.options.disableInput&&_t(t,function(){gr(t,r,0,null,"paste")}),!0}function yr(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var r=e.doc.sel,i=r.ranges.length-1;i>=0;i--){var n=r.ranges[i];if(!(n.head.ch>100||i&&r.ranges[i-1].head.line==n.head.line)){var s=e.getModeAt(n.head),u=!1;if(s.electricChars){for(var y=0;y<s.electricChars.length;y++)if(t.indexOf(s.electricChars.charAt(y))>-1){u=Ri(e,n.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(Oe(e.doc,n.head.line).text.slice(0,n.head.ch))&&(u=Ri(e,n.head.line,"smart"));u&&Et(e,"electricInput",e,n.head.line)}}}function bi(e){for(var t=[],r=[],i=0;i<e.doc.sel.ranges.length;i++){var n=e.doc.sel.ranges[i].head.line,s={anchor:fe(n,0),head:fe(n+1,0)};r.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:r}}function wi(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function br(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new zi,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function wr(){var e=Ae("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Ae("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return E?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),wi(e),t}br.prototype=Ut({init:function(e){var t=this,r=this.cm,i=this.wrapper=wr(),n=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild),g&&(n.style.width="0px"),$e(n,"input",function(){a&&d>=9&&t.hasSelection&&(t.hasSelection=null),t.poll()}),$e(n,"paste",function(u){if(mr(u,r))return!0;r.state.pasteIncoming=!0,t.fastPoll()});function s(u){if(r.somethingSelected())At=r.getSelections(),t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,n.value=At.join(`
`),li(n));else if(r.options.lineWiseCopyCut){var y=bi(r);At=y.text,u.type=="cut"?r.setSelections(y.ranges,null,ir):(t.prevInput="",n.value=y.text.join(`
`),li(n))}else return;u.type=="cut"&&(r.state.cutIncoming=!0)}$e(n,"cut",s),$e(n,"copy",s),$e(e.scroller,"paste",function(u){tr(e,u)||(r.state.pasteIncoming=!0,t.focus())}),$e(e.lineSpace,"selectstart",function(u){tr(e,u)||kt(u)}),$e(n,"compositionstart",function(){var u=r.getCursor("from");t.composing&&t.composing.range.clear(),t.composing={start:u,range:r.markText(u,r.getCursor("to"),{className:"CodeMirror-composing"})}}),$e(n,"compositionend",function(){t.composing&&(t.poll(),t.composing.range.clear(),t.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,r=e.doc,i=Ti(e);if(e.options.moveInputWithCursor){var n=qt(e,r.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),u=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+u.top-s.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+u.left-s.left))}return i},showSelection:function(e){var t=this.cm,r=t.display;$t(r.cursorDiv,e.cursors),$t(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,r,i=this.cm,n=i.doc;if(i.somethingSelected()){this.prevInput="";var s=n.sel.primary();t=oa&&(s.to().line-s.from().line>100||(r=i.getSelection()).length>1e3);var u=t?"-":r||i.getSelection();this.textarea.value=u,i.state.focused&&li(this.textarea),a&&d>=9&&(this.hasSelection=u)}else e||(this.prevInput=this.textarea.value="",a&&d>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!S||Kt()!=this.textarea))try{this.textarea.focus()}catch{}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){var e=!1,t=this;t.pollingFast=!0;function r(){var i=t.poll();!i&&!e?(e=!0,t.polling.set(60,r)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,r)},poll:function(){var e=this.cm,t=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Zl(t)&&!r&&!this.composing||Ht(e)||e.options.disableInput||e.state.keySeq)return!1;var i=t.value;if(i==r&&!e.somethingSelected())return!1;if(a&&d>=9&&this.hasSelection===i||f&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var n=i.charCodeAt(0);if(n==8203&&!r&&(r="​"),n==8666)return this.reset(),this.cm.execCommand("undo")}for(var s=0,u=Math.min(r.length,i.length);s<u&&r.charCodeAt(s)==i.charCodeAt(s);)++s;var y=this;return _t(e,function(){gr(e,i.slice(s),r.length-s,null,y.composing?"*compose":null),i.length>1e3||i.indexOf(`
`)>-1?t.value=y.prevInput="":y.prevInput=i,y.composing&&(y.composing.range.clear(),y.composing.range=e.markText(y.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){a&&d>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var t=this,r=t.cm,i=r.display,n=t.textarea,s=Rr(r,e),u=i.scroller.scrollTop;if(!s||R)return;var y=r.options.resetSelectionOnContextMenu;y&&r.doc.sel.contains(s)==-1&&at(r,ut)(r.doc,ht(s),ir);var P=n.style.cssText;if(t.wrapper.style.position="absolute",n.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",E)var H=window.scrollY;i.input.focus(),E&&window.scrollTo(null,H),i.input.reset(),r.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=!0,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll);function j(){if(n.selectionStart!=null){var V=r.somethingSelected(),ee="​"+(V?n.value:"");n.value="⇚",n.value=ee,t.prevInput=V?"":"​",n.selectionStart=1,n.selectionEnd=ee.length,i.selForContextMenu=r.doc.sel}}function U(){if(t.contextMenuPending=!1,t.wrapper.style.position="relative",n.style.cssText=P,a&&d<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),n.selectionStart!=null){(!a||a&&d<9)&&j();var V=0,ee=function(){i.selForContextMenu==r.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&t.prevInput=="​"?at(r,Ln.selectAll)(r):V++<10?i.detectingSelectAll=setTimeout(ee,500):i.input.reset()};i.detectingSelectAll=setTimeout(ee,200)}}if(a&&d>=9&&j(),O){Nn(e);var K=function(){Gt(window,"mouseup",K),setTimeout(U,20)};$e(window,"mouseup",K)}else setTimeout(U,50)},readOnlyChanged:function(e){e||this.reset()},setUneditable:Xi,needsContentAttribute:!1},br.prototype);function zr(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new zi,this.gracePeriod=!1}zr.prototype=Ut({init:function(e){var t=this,r=t.cm,i=t.div=e.lineDiv;wi(i),$e(i,"paste",function(s){mr(s,r)}),$e(i,"compositionstart",function(s){var u=s.data;if(t.composing={sel:r.doc.sel,data:u,startData:u},!!u){var y=r.doc.sel.primary(),P=r.getLine(y.head.line),H=P.indexOf(u,Math.max(0,y.head.ch-u.length));H>-1&&H<=y.head.ch&&(t.composing.sel=ht(fe(y.head.line,H),fe(y.head.line,H+u.length)))}}),$e(i,"compositionupdate",function(s){t.composing.data=s.data}),$e(i,"compositionend",function(s){var u=t.composing;u&&(s.data!=u.startData&&!/\u200b/.test(s.data)&&(u.data=s.data),setTimeout(function(){u.handled||t.applyComposition(u),t.composing==u&&(t.composing=null)},50))}),$e(i,"touchstart",function(){t.forceCompositionEnd()}),$e(i,"input",function(){t.composing||(Ht(r)||!t.pollContent())&&_t(t.cm,function(){Lt(r)})});function n(s){if(r.somethingSelected())At=r.getSelections(),s.type=="cut"&&r.replaceSelection("",null,"cut");else if(r.options.lineWiseCopyCut){var u=bi(r);At=u.text,s.type=="cut"&&r.operation(function(){r.setSelections(u.ranges,0,ir),r.replaceSelection("",null,"cut")})}else return;if(s.clipboardData&&!g)s.preventDefault(),s.clipboardData.clearData(),s.clipboardData.setData("text/plain",At.join(`
`));else{var y=wr(),P=y.firstChild;r.display.lineSpace.insertBefore(y,r.display.lineSpace.firstChild),P.value=At.join(`
`);var H=document.activeElement;li(P),setTimeout(function(){r.display.lineSpace.removeChild(y),H.focus()},50)}}$e(i,"copy",n),$e(i,"cut",n)},prepareSelection:function(){var e=Ti(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){!e||!this.cm.display.view.length||(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),r=Zt(this.cm,e.anchorNode,e.anchorOffset),i=Zt(this.cm,e.focusNode,e.focusOffset);if(!(r&&!r.bad&&i&&!i.bad&&We(Yt(r,i),t.from())==0&&We(vr(r,i),t.to())==0)){var n=xr(this.cm,t.from()),s=xr(this.cm,t.to());if(!(!n&&!s)){var u=this.cm.display.view,y=e.rangeCount&&e.getRangeAt(0);if(!n)n={node:u[0].measure.map[2],offset:0};else if(!s){var P=u[u.length-1].measure,H=P.maps?P.maps[P.maps.length-1]:P.map;s={node:H[H.length-1],offset:H[H.length-2]-H[H.length-3]}}try{var j=fr(n.node,n.offset,s.offset,s.node)}catch{}j&&(e.removeAllRanges(),e.addRange(j),y&&e.anchorNode==null?e.addRange(y):x&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){$t(this.cm.display.cursorDiv,e.cursors),$t(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return ws(this.div,t)},focus:function(){this.cm.options.readOnly!="nocursor"&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var e=this;this.selectionInEditor()?this.pollSelection():_t(this.cm,function(){e.cm.curOp.selectionChanged=!0});function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}this.polling.set(this.cm.options.pollInterval,t)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var r=Zt(t,e.anchorNode,e.anchorOffset),i=Zt(t,e.focusNode,e.focusOffset);r&&i&&_t(t,function(){ut(t.doc,ht(r,i),ir),(r.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,r=e.doc.sel.primary(),i=r.from(),n=r.to();if(i.line<t.viewFrom||n.line>t.viewTo-1)return!1;var s;if(i.line==t.viewFrom||(s=Pr(e,i.line))==0)var u=tt(t.view[0].line),y=t.view[0].node;else var u=tt(t.view[s].line),y=t.view[s-1].node.nextSibling;var P=Pr(e,n.line);if(P==t.view.length-1)var H=t.viewTo-1,j=t.lineDiv.lastChild;else var H=tt(t.view[P+1].line)-1,j=t.view[P+1].node.previousSibling;for(var U=e.doc.splitLines(Xr(e,y,j,u,H)),K=Hr(e.doc,fe(u,0),fe(H,Oe(e.doc,H).text.length));U.length>1&&K.length>1;)if(qe(U)==qe(K))U.pop(),K.pop(),H--;else if(U[0]==K[0])U.shift(),K.shift(),u++;else break;for(var V=0,ee=0,ve=U[0],xe=K[0],Ce=Math.min(ve.length,xe.length);V<Ce&&ve.charCodeAt(V)==xe.charCodeAt(V);)++V;for(var He=qe(U),Se=qe(K),je=Math.min(He.length-(U.length==1?V:0),Se.length-(K.length==1?V:0));ee<je&&He.charCodeAt(He.length-ee-1)==Se.charCodeAt(Se.length-ee-1);)++ee;U[U.length-1]=He.slice(0,He.length-ee),U[0]=U[0].slice(V);var Ee=fe(u,V),_e=fe(H,K.length?qe(K).length-ee:0);if(U.length>1||U[0]||We(Ee,_e))return ei(e.doc,U,Ee,_e,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){!this.composing||this.composing.handled||(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){Ht(this.cm)?at(this.cm,Lt)(this.cm):e.data&&e.data!=e.startData&&at(this.cm,gr)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),Ht(this.cm)||at(this.cm,gr)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String(e!="nocursor")},onContextMenu:Xi,resetPosition:Xi,needsContentAttribute:!0},zr.prototype);function xr(e,t){var r=Qt(e,t.line);if(!r||r.hidden)return null;var i=Oe(e.doc,t.line),n=dt(r,i,t.line),s=Wt(i),u="left";if(s){var y=zn(s,t.ch);u=y%2?"right":"left"}var P=zs(n.map,t.ch,u);return P.offset=P.collapse=="right"?P.end:P.start,P}function jt(e,t){return t&&(e.bad=!0),e}function Zt(e,t,r){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[r],!i)return jt(e.clipPos(fe(e.display.viewTo-1)),!0);t=null,r=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var s=e.display.view[n];if(s.node==i)return xi(s,t,r)}}function xi(e,t,r){var i=e.text.firstChild,n=!1;if(!t||!ws(i,t))return jt(fe(tt(e.line),0),!0);if(t==i&&(n=!0,t=i.childNodes[r],r=0,!t)){var s=e.rest?qe(e.rest):e.line;return jt(fe(tt(s),s.text.length),n)}var u=t.nodeType==3?t:null,y=t;for(!u&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(u=t.firstChild,r&&(r=u.nodeValue.length));y.parentNode!=i;)y=y.parentNode;var P=e.measure,H=P.maps;function j(ve,xe,Ce){for(var He=-1;He<(H?H.length:0);He++)for(var Se=He<0?P.map:H[He],je=0;je<Se.length;je+=3){var Ee=Se[je+2];if(Ee==ve||Ee==xe){var _e=tt(He<0?e.line:e.rest[He]),Ve=Se[je]+Ce;return(Ce<0||Ee!=ve)&&(Ve=Se[je+(Ce?1:0)]),fe(_e,Ve)}}}var U=j(u,y,r);if(U)return jt(U,n);for(var K=y.nextSibling,V=u?u.nodeValue.length-r:0;K;K=K.nextSibling){if(U=j(K,K.firstChild,0),U)return jt(fe(U.line,U.ch-V),n);V+=K.textContent.length}for(var ee=y.previousSibling,V=r;ee;ee=ee.previousSibling){if(U=j(ee,ee.firstChild,-1),U)return jt(fe(U.line,U.ch+V),n);V+=K.textContent.length}}function Xr(e,t,r,i,n){var s="",u=!1,y=e.doc.lineSeparator();function P(j){return function(U){return U.id==j}}function H(j){if(j.nodeType==1){var U=j.getAttribute("cm-text");if(U!=null){U==""&&(U=j.textContent.replace(/\u200b/g,"")),s+=U;return}var K=j.getAttribute("cm-marker"),V;if(K){var ee=e.findMarks(fe(i,0),fe(n+1,0),P(+K));ee.length&&(V=ee[0].find())&&(s+=Hr(e.doc,V.from,V.to).join(y));return}if(j.getAttribute("contenteditable")=="false")return;for(var ve=0;ve<j.childNodes.length;ve++)H(j.childNodes[ve]);/^(pre|div|p)$/i.test(j.nodeName)&&(u=!0)}else if(j.nodeType==3){var xe=j.nodeValue;if(!xe)return;u&&(s+=y,u=!1),s+=xe}}for(;H(t),t!=r;)t=t.nextSibling;return s}$.inputStyles={textarea:br,contenteditable:zr};function Ot(e,t){this.ranges=e,this.primIndex=t}Ot.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],i=e.ranges[t];if(We(r.anchor,i.anchor)!=0||We(r.head,i.head)!=0)return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ze(yi(this.ranges[t].anchor),yi(this.ranges[t].head));return new Ot(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var i=this.ranges[r];if(We(t,i.from())>=0&&We(e,i.to())<=0)return r}return-1}};function Ze(e,t){this.anchor=e,this.head=t}Ze.prototype={from:function(){return Yt(this.anchor,this.head)},to:function(){return vr(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function mt(e,t){var r=e[t];e.sort(function(H,j){return We(H.from(),j.from())}),t=wt(e,r);for(var i=1;i<e.length;i++){var n=e[i],s=e[i-1];if(We(s.to(),n.from())>=0){var u=Yt(s.from(),n.from()),y=vr(s.to(),n.to()),P=s.empty()?n.from()==n.head:s.from()==s.head;i<=t&&--t,e.splice(--i,2,new Ze(P?y:u,P?u:y))}}return new Ot(e,t)}function ht(e,t){return new Ot([new Ze(e,t||e)],0)}function un(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ne(e,t){if(t.line<e.first)return fe(e.first,0);var r=e.first+e.size-1;return t.line>r?fe(r,Oe(e,r).text.length):Qn(t,Oe(e,t.line).text.length)}function Qn(e,t){var r=e.ch;return r==null||r>t?fe(e.line,t):r<0?fe(e.line,0):e}function Jt(e,t){return t>=e.first&&t<e.first+e.size}function Ci(e,t){for(var r=[],i=0;i<t.length;i++)r[i]=Ne(e,t[i]);return r}function sr(e,t,r,i){if(e.cm&&e.cm.display.shift||e.extend){var n=t.anchor;if(i){var s=We(r,n)<0;s!=We(i,n)<0?(n=r,r=i):s!=We(r,i)<0&&(r=i)}return new Ze(n,r)}else return new Ze(i||r,r)}function Cr(e,t,r,i){ut(e,new Ot([sr(e,e.sel.primary(),t,r)],0),i)}function Si(e,t,r){for(var i=[],n=0;n<e.sel.ranges.length;n++)i[n]=sr(e,e.sel.ranges[n],t[n],null);var s=mt(i,e.sel.primIndex);ut(e,s,r)}function Sr(e,t,r,i){var n=e.sel.ranges.slice(0);n[t]=r,ut(e,mt(n,e.sel.primIndex),i)}function fn(e,t,r,i){ut(e,ht(t,r),i)}function cn(e,t){var r={ranges:t.ranges,update:function(i){this.ranges=[];for(var n=0;n<i.length;n++)this.ranges[n]=new Ze(Ne(e,i[n].anchor),Ne(e,i[n].head))}};return ft(e,"beforeSelectionChange",e,r),e.cm&&ft(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?mt(r.ranges,r.ranges.length-1):t}function Gr(e,t,r){var i=e.history.done,n=qe(i);n&&n.ranges?(i[i.length-1]=t,kr(e,t,r)):ut(e,t,r)}function ut(e,t,r){kr(e,t,r),Nl(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function kr(e,t,r){(It(e,"beforeSelectionChange")||e.cm&&It(e.cm,"beforeSelectionChange"))&&(t=cn(e,t));var i=r&&r.bias||(We(t.primary().head,e.sel.primary().head)<0?-1:1);Kr(e,ki(e,t,i,!0)),!(r&&r.scroll===!1)&&e.cm&&ti(e.cm)}function Kr(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Zo(e.cm)),Et(e,"cursorActivity",e))}function Tr(e){Kr(e,ki(e,e.sel,null,!1))}function ki(e,t,r,i){for(var n,s=0;s<t.ranges.length;s++){var u=t.ranges[s],y=Lr(e,u.anchor,r,i),P=Lr(e,u.head,r,i);(n||y!=u.anchor||P!=u.head)&&(n||(n=t.ranges.slice(0,s)),n[s]=new Ze(y,P))}return n?mt(n,t.primIndex):t}function Lr(e,t,r,i){var n=!1,s=t,u=r||1;e.cantEdit=!1;e:for(;;){var y=Oe(e,s.line);if(y.markedSpans)for(var P=0;P<y.markedSpans.length;++P){var H=y.markedSpans[P],j=H.marker;if((H.from==null||(j.inclusiveLeft?H.from<=s.ch:H.from<s.ch))&&(H.to==null||(j.inclusiveRight?H.to>=s.ch:H.to>s.ch))){if(i&&(ft(j,"beforeCursorEnter"),j.explicitlyCleared))if(y.markedSpans){--P;continue}else break;if(!j.atomic)continue;var U=j.find(u<0?-1:1);if(We(U,s)==0&&(U.ch+=u,U.ch<0?U.line>e.first?U=Ne(e,fe(U.line-1)):U=null:U.ch>y.text.length&&(U.line<e.first+e.size-1?U=fe(U.line+1,0):U=null),!U)){if(n)return i?(e.cantEdit=!0,fe(e.first,0)):Lr(e,t,r,!0);n=!0,U=t,u=-u}s=U;continue e}}return s}}function or(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ti(e,t){for(var r=e.doc,i={},n=i.cursors=document.createDocumentFragment(),s=i.selection=document.createDocumentFragment(),u=0;u<r.sel.ranges.length;u++)if(!(t===!1&&u==r.sel.primIndex)){var y=r.sel.ranges[u],P=y.empty();(P||e.options.showCursorWhenSelecting)&&Vr(e,y.head,n),P||hn(e,y,s)}return i}function Vr(e,t,r){var i=qt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=r.appendChild(Ae("div"," ","CodeMirror-cursor"));if(n.style.left=i.left+"px",n.style.top=i.top+"px",n.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var s=r.appendChild(Ae("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=i.other.left+"px",s.style.top=i.other.top+"px",s.style.height=(i.other.bottom-i.other.top)*.85+"px"}}function hn(e,t,r){var i=e.display,n=e.doc,s=document.createDocumentFragment(),u=Ke(e.display),y=u.left,P=Math.max(i.sizerWidth,Be(e)-i.sizer.offsetLeft)-u.right;function H(He,Se,je,Ee){Se<0&&(Se=0),Se=Math.round(Se),Ee=Math.round(Ee),s.appendChild(Ae("div",null,"CodeMirror-selected","position: absolute; left: "+He+"px; top: "+Se+"px; width: "+(je??P-He)+"px; height: "+(Ee-Se)+"px"))}function j(He,Se,je){var Ee=Oe(n,He),_e=Ee.text.length,Ve,lt;function xt(pt,Vt){return ts(e,fe(He,pt),"div",Ee,Vt)}return Ql(Wt(Ee),Se||0,je??_e,function(pt,Vt,nr){var Tt=xt(pt,"left"),vt,Mt,cr;if(pt==Vt)vt=Tt,Mt=cr=Tt.left;else{if(vt=xt(Vt-1,"right"),nr=="rtl"){var ui=Tt;Tt=vt,vt=ui}Mt=Tt.left,cr=vt.right}Se==null&&pt==0&&(Mt=y),vt.top-Tt.top>3&&(H(Mt,Tt.top,null,Tt.bottom),Mt=y,Tt.bottom<vt.top&&H(Mt,Tt.bottom,null,vt.top)),je==null&&Vt==_e&&(cr=P),(!Ve||Tt.top<Ve.top||Tt.top==Ve.top&&Tt.left<Ve.left)&&(Ve=Tt),(!lt||vt.bottom>lt.bottom||vt.bottom==lt.bottom&&vt.right>lt.right)&&(lt=vt),Mt<y+1&&(Mt=y),H(Mt,vt.top,cr-Mt,vt.bottom)}),{start:Ve,end:lt}}var U=t.from(),K=t.to();if(U.line==K.line)j(U.line,U.ch,K.ch);else{var V=Oe(n,U.line),ee=Oe(n,K.line),ve=zt(V)==zt(ee),xe=j(U.line,U.ch,ve?V.text.length+1:null).end,Ce=j(K.line,ve?0:null,K.ch).start;ve&&(xe.top<Ce.top-2?(H(xe.right,xe.top,null,xe.bottom),H(y,Ce.top,Ce.left,Ce.bottom)):H(xe.right,xe.top,Ce.left-xe.right,xe.bottom)),xe.bottom<Ce.top&&H(y,xe.bottom,null,Ce.top)}r.appendChild(s)}function Y(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function q(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Gi(ue,e))}function ue(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,i=lr(t.mode,he(e,t.frontier)),n=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(t.frontier>=e.display.viewFrom){var u=s.styles,y=s.text.length>e.options.maxHighlightLength,P=$o(e,s,y?lr(t.mode,i):i,!0);s.styles=P.styles;var H=s.styleClasses,j=P.classes;j?s.styleClasses=j:H&&(s.styleClasses=null);for(var U=!u||u.length!=s.styles.length||H!=j&&(!H||!j||H.bgClass!=j.bgClass||H.textClass!=j.textClass),K=0;!U&&K<u.length;++K)U=u[K]!=s.styles[K];U&&n.push(t.frontier),s.stateAfter=y?i:lr(t.mode,i)}else s.text.length<=e.options.maxHighlightLength&&ps(e,s.text,i),s.stateAfter=t.frontier%5==0?lr(t.mode,i):null;if(++t.frontier,+new Date>r)return q(e,e.options.workDelay),!0}),n.length&&_t(e,function(){for(var s=0;s<n.length;s++)er(e,n[s],"text")})}}function de(e,t,r){for(var i,n,s=e.doc,u=r?-1:t-(e.doc.mode.innerMode?1e3:100),y=t;y>u;--y){if(y<=s.first)return s.first;var P=Oe(s,y-1);if(P.stateAfter&&(!r||y<=s.frontier))return y;var H=Bt(P.text,null,e.options.tabSize);(n==null||i>H)&&(n=y-1,i=H)}return n}function he(e,t,r){var i=e.doc,n=e.display;if(!i.mode.startState)return!0;var s=de(e,t,r),u=s>i.first&&Oe(i,s-1).stateAfter;return u?u=lr(i.mode,u):u=fl(i.mode),i.iter(s,t,function(y){ps(e,y.text,u);var P=s==t-1||s%5==0||s>=n.viewFrom&&s<n.viewTo;y.stateAfter=P?lr(i.mode,u):null,++s}),r&&(i.frontier=s),u}function Le(e){return e.lineSpace.offsetTop}function Pe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ke(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=$t(e.measure,Ae("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function Je(e){return Jo-e.display.nativeBarWidth}function Be(e){return e.display.scroller.clientWidth-Je(e)-e.display.barWidth}function yt(e){return e.display.scroller.clientHeight-Je(e)-e.display.barHeight}function it(e,t,r){var i=e.options.lineWrapping,n=i&&Be(e);if(!t.measure.heights||i&&t.measure.width!=n){var s=t.measure.heights=[];if(i){t.measure.width=n;for(var u=t.text.firstChild.getClientRects(),y=0;y<u.length-1;y++){var P=u[y],H=u[y+1];Math.abs(P.bottom-H.bottom)>2&&s.push((P.bottom+H.top)/2-r.top)}}s.push(r.bottom-r.top)}}function dt(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var i=0;i<e.rest.length;i++)if(tt(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Ct(e,t){t=zt(t);var r=tt(t),i=e.display.externalMeasured=new Js(e.doc,t,r);i.lineN=r;var n=i.built=Io(e,i);return i.text=n.pre,$t(e.display.lineMeasure,n.pre),i}function Pt(e,t,r,i){return dn(e,Er(e,t),r,i)}function Qt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Pr(e,t)];var r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size)return r}function Er(e,t){var r=tt(t),i=Qt(e,r);i&&!i.text?i=null:i&&i.changes&&(Ye(e,i,r,Re(e)),e.curOp.forceUpdate=!0),i||(i=Ct(e,t));var n=dt(i,t,r);return{line:t,view:i,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function dn(e,t,r,i,n){t.before&&(r=-1);var s=r+(i||""),u;return t.cache.hasOwnProperty(s)?u=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(it(e,t.view,t.rect),t.hasHeights=!0),u=Ra(e,t,r,i),u.bogus||(t.cache[s]=u)),{left:u.left,right:u.right,top:n?u.rtop:u.top,bottom:n?u.rbottom:u.bottom}}var qn={left:0,right:0,top:0,bottom:0};function zs(e,t,r){for(var i,n,s,u,y=0;y<e.length;y+=3){var P=e[y],H=e[y+1];if(t<P?(n=0,s=1,u="left"):t<H?(n=t-P,s=n+1):(y==e.length-3||t==H&&e[y+3]>t)&&(s=H-P,n=s-1,t>=H&&(u="right")),n!=null){if(i=e[y+2],P==H&&r==(i.insertLeft?"left":"right")&&(u=r),r=="left"&&n==0)for(;y&&e[y-2]==e[y-3]&&e[y-1].insertLeft;)i=e[(y-=3)+2],u="left";if(r=="right"&&n==H-P)for(;y<e.length-3&&e[y+3]==e[y+4]&&!e[y+5].insertLeft;)i=e[(y+=3)+2],u="right";break}}return{node:i,start:n,end:s,collapse:u,coverStart:P,coverEnd:H}}function Ra(e,t,r,i){var n=zs(t.map,r,i),s=n.node,u=n.start,y=n.end,P=n.collapse,H;if(s.nodeType==3){for(var j=0;j<4;j++){for(;u&&Ki(t.line.text.charAt(n.coverStart+u));)--u;for(;n.coverStart+y<n.coverEnd&&Ki(t.line.text.charAt(n.coverStart+y));)++y;if(a&&d<9&&u==0&&y==n.coverEnd-n.coverStart)H=s.parentNode.getBoundingClientRect();else if(a&&e.options.lineWrapping){var U=fr(s,u,y).getClientRects();U.length?H=U[i=="right"?U.length-1:0]:H=qn}else H=fr(s,u,y).getBoundingClientRect()||qn;if(H.left||H.right||u==0)break;y=u,u=u-1,P="right"}a&&d<11&&(H=Oa(e.display.measure,H))}else{u>0&&(P=i="right");var U;e.options.lineWrapping&&(U=s.getClientRects()).length>1?H=U[i=="right"?U.length-1:0]:H=s.getBoundingClientRect()}if(a&&d<9&&!u&&(!H||!H.left&&!H.right)){var K=s.parentNode.getClientRects()[0];K?H={left:K.left,right:K.left+Ei(e.display),top:K.top,bottom:K.bottom}:H=qn}for(var V=H.top-t.rect.top,ee=H.bottom-t.rect.top,ve=(V+ee)/2,xe=t.view.measure.heights,j=0;j<xe.length-1&&!(ve<xe[j]);j++);var Ce=j?xe[j-1]:0,He=xe[j],Se={left:(P=="right"?H.right:H.left)-t.rect.left,right:(P=="left"?H.left:H.right)-t.rect.left,top:Ce,bottom:He};return!H.left&&!H.right&&(Se.bogus=!0),e.options.singleCursorHeightPerLine||(Se.rtop=V,Se.rbottom=ee),Se}function Oa(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Jl(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*i,bottom:t.bottom*i}}function Xs(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Gs(e){e.display.externalMeasure=null,Ir(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Xs(e.display.view[t])}function Li(e){Gs(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ks(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vs(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function es(e,t,r,i){if(t.widgets){for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].above){var s=Ni(t.widgets[n]);r.top+=s,r.bottom+=s}}if(i=="line")return r;i||(i="local");var u=rr(t);if(i=="local"?u+=Le(e.display):u-=e.display.viewOffset,i=="page"||i=="window"){var y=e.display.lineSpace.getBoundingClientRect();u+=y.top+(i=="window"?0:Vs());var P=y.left+(i=="window"?0:Ks());r.left+=P,r.right+=P}return r.top+=u,r.bottom+=u,r}function Ys(e,t,r){if(r=="div")return t;var i=t.left,n=t.top;if(r=="page")i-=Ks(),n-=Vs();else if(r=="local"||!r){var s=e.display.sizer.getBoundingClientRect();i+=s.left,n+=s.top}var u=e.display.lineSpace.getBoundingClientRect();return{left:i-u.left,top:n-u.top}}function ts(e,t,r,i,n){return i||(i=Oe(e.doc,t.line)),es(e,i,Pt(e,i,t.ch,n),r)}function qt(e,t,r,i,n,s){i=i||Oe(e.doc,t.line),n||(n=Er(e,i));function u(K,V){var ee=dn(e,n,K,V?"right":"left",s);return V?ee.left=ee.right:ee.right=ee.left,es(e,i,ee,r)}function y(K,V){var ee=P[V],ve=ee.level%2;return K==Ts(ee)&&V&&ee.level<P[V-1].level?(ee=P[--V],K=Ls(ee)-(ee.level%2?0:1),ve=!0):K==Ls(ee)&&V<P.length-1&&ee.level<P[V+1].level&&(ee=P[++V],K=Ts(ee)-ee.level%2,ve=!1),ve&&K==ee.to&&K>ee.from?u(K-1):u(K,ve)}var P=Wt(i),H=t.ch;if(!P)return u(H);var j=zn(P,H),U=y(H,j);return Ji!=null&&(U.other=y(H,Ji)),U}function Zs(e,i){var r=0,i=Ne(e.doc,i);e.options.lineWrapping||(r=Ei(e.display)*i.ch);var n=Oe(e.doc,i.line),s=rr(n)+Le(e.display);return{left:r,right:r,top:s,bottom:s+n.height}}function pn(e,t,r,i){var n=fe(e,t);return n.xRel=i,r&&(n.outside=!0),n}function rs(e,t,r){var i=e.doc;if(r+=e.display.viewOffset,r<0)return pn(i.first,0,!0,-1);var n=Nr(i,r),s=i.first+i.size-1;if(n>s)return pn(i.first+i.size-1,Oe(i,s).text.length,!0,1);t<0&&(t=0);for(var u=Oe(i,n);;){var y=_a(e,u,n,t,r),P=Hi(u),H=P&&P.find(0,!0);if(P&&(y.ch>H.from.ch||y.ch==H.from.ch&&y.xRel>0))n=tt(u=H.to.line);else return y}}function _a(e,t,r,i,n){var s=n-rr(t),u=!1,y=2*e.display.wrapper.clientWidth,P=Er(e,t);function H(xt){var pt=qt(e,fe(r,xt),"line",t,P);return u=!0,s>pt.bottom?pt.left-y:s<pt.top?pt.left+y:(u=!1,pt.left)}var j=Wt(t),U=t.text.length,K=Un(t),V=jn(t),ee=H(K),ve=u,xe=H(V),Ce=u;if(i>xe)return pn(r,V,Ce,1);for(;;){if(j?V==K||V==Ms(t,K,1):V-K<=1){for(var He=i<ee||i-ee<=xe-i?K:V,Se=i-(He==K?ee:xe);Ki(t.text.charAt(He));)++He;var je=pn(r,He,He==K?ve:Ce,Se<-1?-1:Se>1?1:0);return je}var Ee=Math.ceil(U/2),_e=K+Ee;if(j){_e=K;for(var Ve=0;Ve<Ee;++Ve)_e=Ms(t,_e,1)}var lt=H(_e);lt>i?(V=_e,xe=lt,(Ce=u)&&(xe+=1e3),U=Ee):(K=_e,ee=lt,ve=u,U-=Ee)}}var Mr;function Ar(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Mr==null){Mr=Ae("pre");for(var t=0;t<49;++t)Mr.appendChild(document.createTextNode("x")),Mr.appendChild(Ae("br"));Mr.appendChild(document.createTextNode("x"))}$t(e.measure,Mr);var r=Mr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Ir(e.measure),r||1}function Ei(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Ae("span","xxxxxxxxxx"),r=Ae("pre",[t]);$t(e.measure,r);var i=t.getBoundingClientRect(),n=(i.right-i.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}var Yr=null,Da=0;function Zr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Da},Yr?Yr.ops.push(e.curOp):e.curOp.ownsGroup=Yr={ops:[e.curOp],delayedCallbacks:[]}}function $a(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var i=0;i<e.ops.length;i++){var n=e.ops[i];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(r<t.length)}function Jr(e){var t=e.curOp,r=t.ownsGroup;if(r)try{$a(r)}finally{Yr=null;for(var i=0;i<r.ops.length;i++)r.ops[i].cm.curOp=null;Ha(r)}}function Ha(e){for(var t=e.ops,r=0;r<t.length;r++)Na(t[r]);for(var r=0;r<t.length;r++)Ia(t[r]);for(var r=0;r<t.length;r++)Fa(t[r]);for(var r=0;r<t.length;r++)Wa(t[r]);for(var r=0;r<t.length;r++)Ba(t[r])}function Na(e){var t=e.cm,r=t.display;I(t),e.updateMaxLine&&we(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new F(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ia(e){e.updatedDisplay=e.mustUpdate&&G(e.cm,e.update)}function Fa(e){var t=e.cm,r=t.display;e.updatedDisplay&&ke(t),e.barMeasure=Me(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pt(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Je(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Be(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Wa(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Qr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&oe(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&De(t,e.barMeasure),e.selectionChanged&&Y(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&e.focus==Kt()&&ln(e.cm)}function Ba(e){var t=e.cm,r=t.display,i=t.doc;if(e.updatedDisplay&&X(t,e.update),r.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),e.scrollTop!=null&&(r.scroller.scrollTop!=e.scrollTop||e.forceScroll)&&(i.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(i.scrollTop),r.scroller.scrollTop=i.scrollTop),e.scrollLeft!=null&&(r.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)&&(i.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-Be(t),e.scrollLeft)),r.scrollbars.setScrollLeft(i.scrollLeft),r.scroller.scrollLeft=i.scrollLeft,et(t)),e.scrollToPos){var n=al(t,Ne(i,e.scrollToPos.from),Ne(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&ol(t,n)}var s=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(s)for(var y=0;y<s.length;++y)s[y].lines.length||ft(s[y],"hide");if(u)for(var y=0;y<u.length;++y)u[y].lines.length&&ft(u[y],"unhide");r.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ft(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function _t(e,t){if(e.curOp)return t();Zr(e);try{return t()}finally{Jr(e)}}function at(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Zr(e);try{return t.apply(e,arguments)}finally{Jr(e)}}}function bt(e){return function(){if(this.curOp)return e.apply(this,arguments);Zr(this);try{return e.apply(this,arguments)}finally{Jr(this)}}}function St(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Zr(t);try{return e.apply(this,arguments)}finally{Jr(t)}}}function Js(e,t,r){this.line=t,this.rest=Cl(t),this.size=this.rest?tt(qe(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Dr(e,t)}function vn(e,t,r){for(var i=[],n,s=t;s<r;s=n){var u=new Js(e.doc,Oe(e.doc,s),s);n=s+u.size,i.push(u)}return i}function Lt(e,t,r,i){t==null&&(t=e.doc.first),r==null&&(r=e.doc.first+e.doc.size),i||(i=0);var n=e.display;if(i&&r<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)D&&cs(e.doc,t)<n.viewTo&&ar(e);else if(r<=n.viewFrom)D&&Ao(e.doc,r+i)>n.viewFrom?ar(e):(n.viewFrom+=i,n.viewTo+=i);else if(t<=n.viewFrom&&r>=n.viewTo)ar(e);else if(t<=n.viewFrom){var s=gn(e,r,r+i,1);s?(n.view=n.view.slice(s.index),n.viewFrom=s.lineN,n.viewTo+=i):ar(e)}else if(r>=n.viewTo){var s=gn(e,t,t,-1);s?(n.view=n.view.slice(0,s.index),n.viewTo=s.lineN):ar(e)}else{var u=gn(e,t,t,-1),y=gn(e,r,r+i,1);u&&y?(n.view=n.view.slice(0,u.index).concat(vn(e,u.lineN,y.lineN)).concat(n.view.slice(y.index)),n.viewTo+=i):ar(e)}var P=n.externalMeasured;P&&(r<P.lineN?P.lineN+=i:t<P.lineN+P.size&&(n.externalMeasured=null))}function er(e,t,r){e.curOp.viewChanged=!0;var i=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var s=i.view[Pr(e,t)];if(s.node!=null){var u=s.changes||(s.changes=[]);wt(u,r)==-1&&u.push(r)}}}function ar(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Pr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var r=e.display.view,i=0;i<r.length;i++)if(t-=r[i].size,t<0)return i}function gn(e,t,r,i){var n=Pr(e,t),s,u=e.display.view;if(!D||r==e.doc.first+e.doc.size)return{index:n,lineN:r};for(var y=0,P=e.display.viewFrom;y<n;y++)P+=u[y].size;if(P!=t){if(i>0){if(n==u.length-1)return null;s=P+u[n].size-t,n++}else s=P-t;t+=s,r+=s}for(;cs(e.doc,r)!=r;){if(n==(i<0?0:u.length-1))return null;r+=i*u[n-(i<0?1:0)].size,n+=i}return{index:n,lineN:r}}function Ua(e,t,r){var i=e.display,n=i.view;n.length==0||t>=i.viewTo||r<=i.viewFrom?(i.view=vn(e,t,r),i.viewFrom=t):(i.viewFrom>t?i.view=vn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Pr(e,t))),i.viewFrom=t,i.viewTo<r?i.view=i.view.concat(vn(e,i.viewTo,r)):i.viewTo>r&&(i.view=i.view.slice(0,Pr(e,r)))),i.viewTo=r}function Qs(e){for(var t=e.display.view,r=0,i=0;i<t.length;i++){var n=t[i];!n.hidden&&(!n.node||n.changes)&&++r}return r}function ja(e){var t=e.display;$e(t.scroller,"mousedown",at(e,qs)),a&&d<11?$e(t.scroller,"dblclick",at(e,function(P){if(!Nt(e,P)){var H=Rr(e,P);if(!(!H||to(e,P)||tr(e.display,P))){kt(P);var j=e.findWordAt(H);Cr(e.doc,j.anchor,j.head)}}})):$e(t.scroller,"dblclick",function(P){Nt(e,P)||kt(P)}),O||$e(t.scroller,"contextmenu",function(P){fo(e,P)});var r,i={end:0};function n(){t.activeTouch&&(r=setTimeout(function(){t.activeTouch=null},1e3),i=t.activeTouch,i.end=+new Date)}function s(P){if(P.touches.length!=1)return!1;var H=P.touches[0];return H.radiusX<=1&&H.radiusY<=1}function u(P,H){if(H.left==null)return!0;var j=H.left-P.left,U=H.top-P.top;return j*j+U*U>20*20}$e(t.scroller,"touchstart",function(P){if(!s(P)){clearTimeout(r);var H=+new Date;t.activeTouch={start:H,moved:!1,prev:H-i.end<=300?i:null},P.touches.length==1&&(t.activeTouch.left=P.touches[0].pageX,t.activeTouch.top=P.touches[0].pageY)}}),$e(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),$e(t.scroller,"touchend",function(P){var H=t.activeTouch;if(H&&!tr(t,P)&&H.left!=null&&!H.moved&&new Date-H.start<300){var j=e.coordsChar(t.activeTouch,"page"),U;!H.prev||u(H,H.prev)?U=new Ze(j,j):!H.prev.prev||u(H,H.prev.prev)?U=e.findWordAt(j):U=new Ze(fe(j.line,0),Ne(e.doc,fe(j.line+1,0))),e.setSelection(U.anchor,U.head),e.focus(),kt(P)}n()}),$e(t.scroller,"touchcancel",n),$e(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Mi(e,t.scroller.scrollTop),Qr(e,t.scroller.scrollLeft,!0),ft(e,"scroll",e))}),$e(t.scroller,"mousewheel",function(P){so(e,P)}),$e(t.scroller,"DOMMouseScroll",function(P){so(e,P)}),$e(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(P){Nt(e,P)||Nn(P)},over:function(P){Nt(e,P)||(Ja(e,P),Nn(P))},start:function(P){Za(e,P)},drop:at(e,Ya),leave:function(){io(e)}};var y=t.input.getField();$e(y,"keyup",function(P){lo.call(e,P)}),$e(y,"keydown",at(e,ao)),$e(y,"keypress",at(e,uo)),$e(y,"focus",Gi(ns,e)),$e(y,"blur",Gi(Ai,e))}function za(e,t,r){var i=r&&r!=$.Init;if(!t!=!i){var n=e.display.dragFunctions,s=t?$e:Gt;s(e.display.scroller,"dragstart",n.start),s(e.display.scroller,"dragenter",n.enter),s(e.display.scroller,"dragover",n.over),s(e.display.scroller,"dragleave",n.leave),s(e.display.scroller,"drop",n.drop)}}function Xa(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function tr(e,t){for(var r=Bi(t);r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function Rr(e,t,r,i){var n=e.display;if(!r&&Bi(t).getAttribute("cm-not-content")=="true")return null;var s,u,y=n.lineSpace.getBoundingClientRect();try{s=t.clientX-y.left,u=t.clientY-y.top}catch{return null}var P=rs(e,s,u),H;if(i&&P.xRel==1&&(H=Oe(e.doc,P.line).text).length==P.ch){var j=Bt(H,H.length,e.options.tabSize)-H.length;P=fe(P.line,Math.max(0,Math.round((s-Ke(e.display).left)/Ei(e.display))-j))}return P}function qs(e){var t=this,r=t.display;if(!(r.activeTouch&&r.input.supportsTouch()||Nt(t,e))){if(r.shift=e.shiftKey,tr(r,e)){E||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));return}if(!to(t,e)){var i=Rr(t,e);switch(window.focus(),Vo(e)){case 1:t.state.selectingText?t.state.selectingText(e):i?Ga(t,e,i):Bi(e)==r.scroller&&kt(e);break;case 2:E&&(t.state.lastMiddleDown=+new Date),i&&Cr(t.doc,i),setTimeout(function(){r.input.focus()},20),kt(e);break;case 3:O?fo(t,e):rl(t);break}}}}var mn,yn;function Ga(e,t,r){a?setTimeout(Gi(ln,e),0):e.curOp.focus=Kt();var i=+new Date,n;yn&&yn.time>i-400&&We(yn.pos,r)==0?n="triple":mn&&mn.time>i-400&&We(mn.pos,r)==0?(n="double",yn={time:i,pos:r}):(n="single",mn={time:i,pos:r});var s=e.doc.sel,u=f?t.metaKey:t.ctrlKey,y;e.options.dragDrop&&Gl&&!Ht(e)&&n=="single"&&(y=s.contains(r))>-1&&(We((y=s.ranges[y]).from(),r)<0||r.xRel>0)&&(We(y.to(),r)>0||r.xRel<0)?Ka(e,t,r,u):Va(e,t,r,n,u)}function Ka(e,t,r,i){var n=e.display,s=+new Date,u=at(e,function(y){E&&(n.scroller.draggable=!1),e.state.draggingText=!1,Gt(document,"mouseup",u),Gt(n.scroller,"drop",u),Math.abs(t.clientX-y.clientX)+Math.abs(t.clientY-y.clientY)<10&&(kt(y),!i&&+new Date-200<s&&Cr(e.doc,r),E||a&&d==9?setTimeout(function(){document.body.focus(),n.input.focus()},20):n.input.focus())});E&&(n.scroller.draggable=!0),e.state.draggingText=u,n.scroller.dragDrop&&n.scroller.dragDrop(),$e(document,"mouseup",u),$e(n.scroller,"drop",u)}function Va(e,t,r,i,n){var s=e.display,u=e.doc;kt(t);var y,P,H=u.sel,j=H.ranges;if(n&&!t.shiftKey?(P=u.sel.contains(r),P>-1?y=j[P]:y=new Ze(r,r)):(y=u.sel.primary(),P=u.sel.primIndex),t.altKey)i="rect",n||(y=new Ze(r,r)),r=Rr(e,t,!0,!0),P=-1;else if(i=="double"){var U=e.findWordAt(r);e.display.shift||u.extend?y=sr(u,y,U.anchor,U.head):y=U}else if(i=="triple"){var K=new Ze(fe(r.line,0),Ne(u,fe(r.line+1,0)));e.display.shift||u.extend?y=sr(u,y,K.anchor,K.head):y=K}else y=sr(u,y,r);n?P==-1?(P=j.length,ut(u,mt(j.concat([y]),P),{scroll:!1,origin:"*mouse"})):j.length>1&&j[P].empty()&&i=="single"&&!t.shiftKey?(ut(u,mt(j.slice(0,P).concat(j.slice(P+1)),0),{scroll:!1,origin:"*mouse"}),H=u.sel):Sr(u,P,y,bs):(P=0,ut(u,new Ot([y],0),bs),H=u.sel);var V=r;function ee(Ee){if(We(V,Ee)!=0)if(V=Ee,i=="rect"){for(var _e=[],Ve=e.options.tabSize,lt=Bt(Oe(u,r.line).text,r.ch,Ve),xt=Bt(Oe(u,Ee.line).text,Ee.ch,Ve),pt=Math.min(lt,xt),Vt=Math.max(lt,xt),nr=Math.min(r.line,Ee.line),Tt=Math.min(e.lastLine(),Math.max(r.line,Ee.line));nr<=Tt;nr++){var vt=Oe(u,nr).text,Mt=qo(vt,pt,Ve);pt==Vt?_e.push(new Ze(fe(nr,Mt),fe(nr,Mt))):vt.length>Mt&&_e.push(new Ze(fe(nr,Mt),fe(nr,qo(vt,Vt,Ve))))}_e.length||_e.push(new Ze(r,r)),ut(u,mt(H.ranges.slice(0,P).concat(_e),P),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Ee)}else{var cr=y,ui=cr.anchor,As=Ee;if(i!="single"){if(i=="double")var fi=e.findWordAt(Ee);else var fi=new Ze(fe(Ee.line,0),Ne(u,fe(Ee.line+1,0)));We(fi.anchor,ui)>0?(As=fi.head,ui=Yt(cr.from(),fi.anchor)):(As=fi.anchor,ui=vr(cr.to(),fi.head))}var _e=H.ranges.slice(0);_e[P]=new Ze(Ne(u,ui),As),ut(u,mt(_e,P),bs)}}var ve=s.wrapper.getBoundingClientRect(),xe=0;function Ce(Ee){var _e=++xe,Ve=Rr(e,Ee,!0,i=="rect");if(Ve)if(We(Ve,V)!=0){e.curOp.focus=Kt(),ee(Ve);var lt=Xe(s,u);(Ve.line>=lt.to||Ve.line<lt.from)&&setTimeout(at(e,function(){xe==_e&&Ce(Ee)}),150)}else{var xt=Ee.clientY<ve.top?-20:Ee.clientY>ve.bottom?20:0;xt&&setTimeout(at(e,function(){xe==_e&&(s.scroller.scrollTop+=xt,Ce(Ee))}),50)}}function He(Ee){e.state.selectingText=!1,xe=1/0,kt(Ee),s.input.focus(),Gt(document,"mousemove",Se),Gt(document,"mouseup",je),u.history.lastSelOrigin=null}var Se=at(e,function(Ee){Vo(Ee)?Ce(Ee):He(Ee)}),je=at(e,He);e.state.selectingText=je,$e(document,"mousemove",Se),$e(document,"mouseup",je)}function eo(e,t,r,i,n){try{var s=t.clientX,u=t.clientY}catch{return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&kt(t);var y=e.display,P=y.lineDiv.getBoundingClientRect();if(u>P.bottom||!It(e,r))return ys(t);u-=P.top-y.viewOffset;for(var H=0;H<e.options.gutters.length;++H){var j=y.gutters.childNodes[H];if(j&&j.getBoundingClientRect().right>=s){var U=Nr(e.doc,u),K=e.options.gutters[H];return n(e,r,e,U,K,t),ys(t)}}}function to(e,t){return eo(e,t,"gutterClick",!0,Et)}var ro=0;function Ya(e){var t=this;if(io(t),!(Nt(t,e)||tr(t.display,e))){kt(e),a&&(ro=+new Date);var r=Rr(t,e,!0),i=e.dataTransfer.files;if(!(!r||Ht(t)))if(i&&i.length&&window.FileReader&&window.File)for(var n=i.length,s=Array(n),u=0,y=function(j,U){if(!(t.options.allowDropFileTypes&&wt(t.options.allowDropFileTypes,j.type)==-1)){var K=new FileReader;K.onload=at(t,function(){var V=K.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(V)&&(V=""),s[U]=V,++u==n){r=Ne(t.doc,r);var ee={from:r,to:r,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};qr(t.doc,ee),Gr(t.doc,ht(r,Or(ee)))}}),K.readAsText(j)}},P=0;P<n;++P)y(i[P],P);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e),setTimeout(function(){t.display.input.focus()},20);return}try{var s=e.dataTransfer.getData("Text");if(s){if(t.state.draggingText&&!(f?e.altKey:e.ctrlKey))var H=t.listSelections();if(kr(t.doc,ht(r,r)),H)for(var P=0;P<H.length;++P)ei(t.doc,"",H[P].anchor,H[P].head,"drag");t.replaceSelection(s,"around","paste"),t.display.input.focus()}}catch{}}}}function Za(e,t){if(a&&(!e.state.draggingText||+new Date-ro<100)){Nn(t);return}if(!(Nt(e,t)||tr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!A)){var r=Ae("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",R&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),R&&r.parentNode.removeChild(r)}}function Ja(e,t){var r=Rr(e,t);if(r){var i=document.createDocumentFragment();Vr(e,r,i),e.display.dragCursor||(e.display.dragCursor=Ae("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),$t(e.display.dragCursor,i)}}function io(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Mi(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,x||le(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),x&&le(e),q(e,100))}function Qr(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,et(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var bn=0,Dt=null;a?Dt=-.53:x?Dt=15:v?Dt=-.7:A&&(Dt=-1/3);var no=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),r==null&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:r==null&&(r=e.wheelDelta),{x:t,y:r}};$.wheelEventPixels=function(e){var t=no(e);return t.x*=Dt,t.y*=Dt,t};function so(e,t){var r=no(t),i=r.x,n=r.y,s=e.display,u=s.scroller,y=u.scrollWidth>u.clientWidth,P=u.scrollHeight>u.clientHeight;if(i&&y||n&&P){if(n&&f&&E){e:for(var H=t.target,j=s.view;H!=u;H=H.parentNode)for(var U=0;U<j.length;U++)if(j[U].node==H){e.display.currentWheelTarget=H;break e}}if(i&&!x&&!R&&Dt!=null){n&&P&&Mi(e,Math.max(0,Math.min(u.scrollTop+n*Dt,u.scrollHeight-u.clientHeight))),Qr(e,Math.max(0,Math.min(u.scrollLeft+i*Dt,u.scrollWidth-u.clientWidth))),(!n||n&&P)&&kt(t),s.wheelStartX=null;return}if(n&&Dt!=null){var K=n*Dt,V=e.doc.scrollTop,ee=V+s.wrapper.clientHeight;K<0?V=Math.max(0,V+K-50):ee=Math.min(e.doc.height,ee+K+50),le(e,{top:V,bottom:ee})}bn<20&&(s.wheelStartX==null?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=n,setTimeout(function(){if(s.wheelStartX!=null){var ve=u.scrollLeft-s.wheelStartX,xe=u.scrollTop-s.wheelStartY,Ce=xe&&s.wheelDY&&xe/s.wheelDY||ve&&s.wheelDX&&ve/s.wheelDX;s.wheelStartX=s.wheelStartY=null,Ce&&(Dt=(Dt*bn+Ce)/(bn+1),++bn)}},200)):(s.wheelDX+=i,s.wheelDY+=n))}}function wn(e,t,r){if(typeof t=="string"&&(t=Ln[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,n=!1;try{Ht(e)&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),n=t(e)!=Qo}finally{e.display.shift=i,e.state.suppressEdits=!1}return n}function Qa(e,t,r){for(var i=0;i<e.state.keyMaps.length;i++){var n=Di(t,e.state.keyMaps[i],r,e);if(n)return n}return e.options.extraKeys&&Di(t,e.options.extraKeys,r,e)||Di(t,e.options.keyMap,r,e)}var qa=new zi;function xn(e,t,r,i){var n=e.state.keySeq;if(n){if(hl(t))return"handled";qa.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),t=n+" "+t}var s=Qa(e,t,i);return s=="multi"&&(e.state.keySeq=t),s=="handled"&&Et(e,"keyHandled",e,t,r),(s=="handled"||s=="multi")&&(kt(r),Y(e)),n&&!s&&/\'$/.test(t)?(kt(r),!0):!!s}function oo(e,t){var r=dl(t,!0);return r?t.shiftKey&&!e.state.keySeq?xn(e,"Shift-"+r,t,function(i){return wn(e,i,!0)})||xn(e,r,t,function(i){if(typeof i=="string"?/^go[A-Z]/.test(i):i.motion)return wn(e,i)}):xn(e,r,t,function(i){return wn(e,i)}):!1}function el(e,t,r){return xn(e,"'"+r+"'",t,function(i){return wn(e,i,!0)})}var is=null;function ao(e){var t=this;if(t.curOp.focus=Kt(),!Nt(t,e)){a&&d<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=r==16||e.shiftKey;var i=oo(t,e);R&&(is=i?r:null,!i&&r==88&&!oa&&(f?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),r==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&tl(t)}}function tl(e){var t=e.display.lineDiv;Zi(t,"CodeMirror-crosshair");function r(i){(i.keyCode==18||!i.altKey)&&(Yi(t,"CodeMirror-crosshair"),Gt(document,"keyup",r),Gt(document,"mouseover",r))}$e(document,"keyup",r),$e(document,"mouseover",r)}function lo(e){e.keyCode==16&&(this.doc.sel.shift=!1),Nt(this,e)}function uo(e){var t=this;if(!(tr(t.display,e)||Nt(t,e)||e.ctrlKey&&!e.altKey||f&&e.metaKey)){var r=e.keyCode,i=e.charCode;if(R&&r==is){is=null,kt(e);return}if(!(R&&(!e.which||e.which<10)&&oo(t,e))){var n=String.fromCharCode(i??r);el(t,e,n)||t.display.input.onKeyPress(e)}}}function rl(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Ai(e))},100)}function ns(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(ft(e,"focus",e),e.state.focused=!0,Zi(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),E&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Y(e))}function Ai(e){e.state.delayingBlurEvent||(e.state.focused&&(ft(e,"blur",e),e.state.focused=!1,Yi(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function fo(e,t){tr(e.display,t)||il(e,t)||Nt(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function il(e,t){return It(e,"gutterContextMenu")?eo(e,t,"gutterContextMenu",!1,ft):!1}var Or=$.changeEnd=function(e){return e.text?fe(e.from.line+e.text.length-1,qe(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};function co(e,t){if(We(e,t.from)<0)return e;if(We(e,t.to)<=0)return Or(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Or(t).ch-t.to.ch),fe(r,i)}function ss(e,t){for(var r=[],i=0;i<e.sel.ranges.length;i++){var n=e.sel.ranges[i];r.push(new Ze(co(n.anchor,t),co(n.head,t)))}return mt(r,e.sel.primIndex)}function ho(e,t,r){return e.line==t.line?fe(r.line,e.ch-t.ch+r.ch):fe(r.line+(e.line-t.line),e.ch)}function nl(e,t,r){for(var i=[],n=fe(e.first,0),s=n,u=0;u<t.length;u++){var y=t[u],P=ho(y.from,n,s),H=ho(Or(y),n,s);if(n=y.to,s=H,r=="around"){var j=e.sel.ranges[u],U=We(j.head,j.anchor)<0;i[u]=new Ze(U?H:P,U?P:H)}else i[u]=new Ze(P,P)}return new Ot(i,e.sel.primIndex)}function po(e,t,r){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(i.update=function(n,s,u,y){n&&(this.from=Ne(e,n)),s&&(this.to=Ne(e,s)),u&&(this.text=u),y!==void 0&&(this.origin=y)}),ft(e,"beforeChange",e,i),e.cm&&ft(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function qr(e,t,r){if(e.cm){if(!e.cm.curOp)return at(e.cm,qr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!((It(e,"beforeChange")||e.cm&&It(e.cm,"beforeChange"))&&(t=po(e,t,!0),!t))){var i=C&&!r&&xl(e,t.from,t.to);if(i)for(var n=i.length-1;n>=0;--n)vo(e,{from:i[n].from,to:i[n].to,text:n?[""]:t.text});else vo(e,t)}}function vo(e,t){if(!(t.text.length==1&&t.text[0]==""&&We(t.from,t.to)==0)){var r=ss(e,t);jo(e,t,r,e.cm?e.cm.curOp.id:NaN),Pi(e,t,r,fs(e,t));var i=[];$r(e,function(n,s){!s&&wt(i,n.history)==-1&&(Ko(n.history,t),i.push(n.history)),Pi(n,t,null,fs(n,t))})}}function Cn(e,t,r){if(!(e.cm&&e.cm.state.suppressEdits)){for(var i=e.history,n,s=e.sel,u=t=="undo"?i.done:i.undone,y=t=="undo"?i.undone:i.done,P=0;P<u.length&&(n=u[P],!(r?n.ranges&&!n.equals(e.sel):!n.ranges));P++);if(P!=u.length){for(i.lastOrigin=i.lastSelOrigin=null;n=u.pop(),n.ranges;){if(Hn(n,y),r&&!n.equals(e.sel)){ut(e,n,{clearRedo:!1});return}s=n}var H=[];Hn(s,y),y.push({changes:H,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var j=It(e,"beforeChange")||e.cm&&It(e.cm,"beforeChange"),P=n.changes.length-1;P>=0;--P){var U=n.changes[P];if(U.origin=t,j&&!po(e,U,!1)){u.length=0;return}H.push(ms(e,U));var K=P?ss(e,U):qe(u);Pi(e,U,K,Co(e,U)),!P&&e.cm&&e.cm.scrollIntoView({from:U.from,to:Or(U)});var V=[];$r(e,function(ve,xe){!xe&&wt(V,ve.history)==-1&&(Ko(ve.history,U),V.push(ve.history)),Pi(ve,U,null,Co(ve,U))})}}}}function go(e,t){if(t!=0&&(e.first+=t,e.sel=new Ot(Wn(e.sel.ranges,function(n){return new Ze(fe(n.anchor.line+t,n.anchor.ch),fe(n.head.line+t,n.head.ch))}),e.sel.primIndex),e.cm)){Lt(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,i=r.viewFrom;i<r.viewTo;i++)er(e.cm,i,"gutter")}}function Pi(e,t,r,i){if(e.cm&&!e.cm.curOp)return at(e.cm,Pi)(e,t,r,i);if(t.to.line<e.first){go(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);go(e,n),t={from:fe(e.first,0),to:fe(t.to.line+n,t.to.ch),text:[qe(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:fe(s,Oe(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Hr(e,t.from,t.to),r||(r=ss(e,t)),e.cm?sl(e.cm,t,i):vs(e,t,i),kr(e,r,ir)}}function sl(e,t,r){var i=e.doc,n=e.display,s=t.from,u=t.to,y=!1,P=s.line;e.options.lineWrapping||(P=tt(zt(Oe(i,s.line))),i.iter(P,u.line+1,function(V){if(V==n.maxLine)return y=!0,!0})),i.sel.contains(t.from,t.to)>-1&&Zo(e),vs(i,t,r,ce(e)),e.options.lineWrapping||(i.iter(P,s.line+t.text.length,function(V){var ee=ie(V);ee>n.maxLineLength&&(n.maxLine=V,n.maxLineLength=ee,n.maxLineChanged=!0,y=!1)}),y&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,s.line),q(e,400);var H=t.text.length-(u.line-s.line)-1;t.full?Lt(e):s.line==u.line&&t.text.length==1&&!Wo(e.doc,t)?er(e,s.line,"text"):Lt(e,s.line,u.line+1,H);var j=It(e,"changes"),U=It(e,"change");if(U||j){var K={from:s,to:u,text:t.text,removed:t.removed,origin:t.origin};U&&Et(e,"change",e,K),j&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(K)}e.display.selForContextMenu=null}function ei(e,t,r,i,n){if(i||(i=r),We(i,r)<0){var s=i;i=r,r=s}typeof t=="string"&&(t=e.splitLines(t)),qr(e,{from:r,to:i,text:t,origin:n})}function ol(e,t){if(!Nt(e,"scrollCursorIntoView")){var r=e.display,i=r.sizer.getBoundingClientRect(),n=null;if(t.top+i.top<0?n=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!_){var s=Ae("div","​",null,"position: absolute; top: "+(t.top-r.viewOffset-Le(e.display))+"px; height: "+(t.bottom-t.top+Je(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(n),e.display.lineSpace.removeChild(s)}}}function al(e,t,r,i){i==null&&(i=0);for(var n=0;n<5;n++){var s=!1,u=qt(e,t),y=!r||r==t?u:qt(e,r),P=Sn(e,Math.min(u.left,y.left),Math.min(u.top,y.top)-i,Math.max(u.left,y.left),Math.max(u.bottom,y.bottom)+i),H=e.doc.scrollTop,j=e.doc.scrollLeft;if(P.scrollTop!=null&&(Mi(e,P.scrollTop),Math.abs(e.doc.scrollTop-H)>1&&(s=!0)),P.scrollLeft!=null&&(Qr(e,P.scrollLeft),Math.abs(e.doc.scrollLeft-j)>1&&(s=!0)),!s)break}return u}function ll(e,t,r,i,n){var s=Sn(e,t,r,i,n);s.scrollTop!=null&&Mi(e,s.scrollTop),s.scrollLeft!=null&&Qr(e,s.scrollLeft)}function Sn(e,t,r,i,n){var s=e.display,u=Ar(e.display);r<0&&(r=0);var y=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:s.scroller.scrollTop,P=yt(e),H={};n-r>P&&(n=r+P);var j=e.doc.height+Pe(s),U=r<u,K=n>j-u;if(r<y)H.scrollTop=U?0:r;else if(n>y+P){var V=Math.min(r,(K?j:n)-P);V!=y&&(H.scrollTop=V)}var ee=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:s.scroller.scrollLeft,ve=Be(e)-(e.options.fixedGutter?s.gutters.offsetWidth:0),xe=i-t>ve;return xe&&(i=t+ve),t<10?H.scrollLeft=0:t<ee?H.scrollLeft=Math.max(0,t-(xe?0:10)):i>ve+ee-3&&(H.scrollLeft=i+(xe?0:10)-ve),H}function os(e,t,r){r!=null&&kn(e),r!=null&&(e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+r)}function ti(e){kn(e);var t=e.getCursor(),r=t,i=t;e.options.lineWrapping||(r=t.ch?fe(t.line,t.ch-1):t,i=fe(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function kn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=Zs(e,t.from),i=Zs(e,t.to),n=Sn(e,Math.min(r.left,i.left),Math.min(r.top,i.top)-t.margin,Math.max(r.right,i.right),Math.max(r.bottom,i.bottom)+t.margin);e.scrollTo(n.scrollLeft,n.scrollTop)}}function Ri(e,t,r,i){var n=e.doc,s;r==null&&(r="add"),r=="smart"&&(n.mode.indent?s=he(e,t):r="prev");var u=e.options.tabSize,y=Oe(n,t),P=Bt(y.text,null,u);y.stateAfter&&(y.stateAfter=null);var H=y.text.match(/^\s*/)[0],j;if(!i&&!/\S/.test(y.text))j=0,r="not";else if(r=="smart"&&(j=n.mode.indent(s,y.text.slice(H.length),y.text),j==Qo||j>150)){if(!i)return;r="prev"}r=="prev"?t>n.first?j=Bt(Oe(n,t-1).text,null,u):j=0:r=="add"?j=P+e.options.indentUnit:r=="subtract"?j=P-e.options.indentUnit:typeof r=="number"&&(j=P+r),j=Math.max(0,j);var U="",K=0;if(e.options.indentWithTabs)for(var V=Math.floor(j/u);V;--V)K+=u,U+="	";if(K<j&&(U+=ea(j-K)),U!=H)return ei(n,U,fe(t,0),fe(t,H.length),"+input"),y.stateAfter=null,!0;for(var V=0;V<n.sel.ranges.length;V++){var ee=n.sel.ranges[V];if(ee.head.line==t&&ee.head.ch<H.length){var K=fe(t,H.length);Sr(n,V,new Ze(K,K));break}}}function Tn(e,t,r,i){var n=t,s=t;return typeof t=="number"?s=Oe(e,un(e,t)):n=tt(t),n==null?null:(i(s,n)&&e.cm&&er(e.cm,n,r),s)}function ri(e,t){for(var r=e.doc.sel.ranges,i=[],n=0;n<r.length;n++){for(var s=t(r[n]);i.length&&We(s.from,qe(i).to)<=0;){var u=i.pop();if(We(u.from,s.from)<0){s.from=u.from;break}}i.push(s)}_t(e,function(){for(var y=i.length-1;y>=0;y--)ei(e.doc,"",i[y].from,i[y].to,"+delete");ti(e)})}function as(e,t,r,i,n){var s=t.line,u=t.ch,y=r,P=Oe(e,s),H=!0;function j(){var Se=s+r;return Se<e.first||Se>=e.first+e.size?H=!1:(s=Se,P=Oe(e,Se))}function U(Se){var je=(n?Ms:ua)(P,u,r,!0);if(je==null)if(!Se&&j())n?u=(r<0?jn:Un)(P):u=r<0?P.text.length:0;else return H=!1;else u=je;return!0}if(i=="char")U();else if(i=="column")U(!0);else if(i=="word"||i=="group")for(var K=null,V=i=="group",ee=e.cm&&e.cm.getHelper(t,"wordChars"),ve=!0;!(r<0&&!U(!ve));ve=!1){var xe=P.text.charAt(u)||`
`,Ce=Bn(xe,ee)?"w":V&&xe==`
`?"n":!V||/\s/.test(xe)?null:"p";if(V&&!ve&&!Ce&&(Ce="s"),K&&K!=Ce){r<0&&(r=1,U());break}if(Ce&&(K=Ce),r>0&&!U(!ve))break}var He=Lr(e,fe(s,u),y,!0);return H||(He.hitSide=!0),He}function mo(e,t,r,i){var n=e.doc,s=t.left,u;if(i=="page"){var y=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);u=t.top+r*(y-(r<0?1.5:.5)*Ar(e.display))}else i=="line"&&(u=r>0?t.bottom+3:t.top-3);for(;;){var P=rs(e,s,u);if(!P.outside)break;if(r<0?u<=0:u>=n.height){P.hitSide=!0;break}u+=r*5}return P}$.prototype={constructor:$,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,i=r[e];r[e]==t&&e!="mode"||(r[e]=t,ii.hasOwnProperty(e)&&at(this,ii[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](En(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:bt(function(e,t){var r=e.token?e:$.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Lt(this)}),removeOverlay:bt(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var i=t[r].modeSpec;if(i==e||typeof e=="string"&&i.name==e){t.splice(r,1),this.state.modeGen++,Lt(this);return}}}),indentLine:bt(function(e,t,r){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Jt(this.doc,e)&&Ri(this,e,t,r)}),indentSelection:bt(function(e){for(var t=this.doc.sel.ranges,r=-1,i=0;i<t.length;i++){var n=t[i];if(n.empty())n.head.line>r&&(Ri(this,n.head.line,e,!0),r=n.head.line,i==this.doc.sel.primIndex&&ti(this));else{var s=n.from(),u=n.to(),y=Math.max(r,s.line);r=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var P=y;P<r;++P)Ri(this,P,e);var H=this.doc.sel.ranges;s.ch==0&&t.length==H.length&&H[i].from().ch>0&&Sr(this.doc,i,new Ze(s,H[i].to()),ir)}}}),getTokenAt:function(e,t){return _o(this,e,t)},getLineTokens:function(e,t){return _o(this,fe(e),t,!0)},getTokenTypeAt:function(e){e=Ne(this.doc,e);var t=Ho(this,Oe(this.doc,e.line)),r=0,i=(t.length-1)/2,n=e.ch,s;if(n==0)s=t[2];else for(;;){var u=r+i>>1;if((u?t[u*2-1]:0)>=n)i=u;else if(t[u*2+1]<n)r=u+1;else{s=t[u*2+2];break}}var y=s?s.indexOf("cm-overlay "):-1;return y<0?s:y==0?null:s.slice(0,y-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?$.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!ni.hasOwnProperty(t))return r;var i=ni[t],n=this.getModeAt(e);if(typeof n[t]=="string")i[n[t]]&&r.push(i[n[t]]);else if(n[t])for(var s=0;s<n[t].length;s++){var u=i[n[t][s]];u&&r.push(u)}else n.helperType&&i[n.helperType]?r.push(i[n.helperType]):i[n.name]&&r.push(i[n.name]);for(var s=0;s<i._global.length;s++){var y=i._global[s];y.pred(n,this)&&wt(r,y.val)==-1&&r.push(y.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=un(r,e??r.first+r.size-1),he(this,e+1,t)},cursorCoords:function(e,t){var r,i=this.doc.sel.primary();return e==null?r=i.head:typeof e=="object"?r=Ne(this.doc,e):r=e?i.from():i.to(),qt(this,r,t||"page")},charCoords:function(e,t){return ts(this,Ne(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Ys(this,e,t||"page"),rs(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Ys(this,{top:e,left:0},t||"page").top,Nr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r=!1,i;if(typeof e=="number"){var n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,r=!0),i=Oe(this.doc,e)}else i=e;return es(this,i,{top:0,left:0},t||"page").top+(r?this.doc.height-rr(i):0)},defaultTextHeight:function(){return Ar(this.display)},defaultCharWidth:function(){return Ei(this.display)},setGutterMarker:bt(function(e,t,r){return Tn(this.doc,e,"gutter",function(i){var n=i.gutterMarkers||(i.gutterMarkers={});return n[t]=r,!r&&ia(n)&&(i.gutterMarkers=null),!0})}),clearGutter:bt(function(e){var t=this,r=t.doc,i=r.first;r.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,er(t,i,"gutter"),ia(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),lineInfo:function(e){if(typeof e=="number"){if(!Jt(this.doc,e))return null;var t=e;if(e=Oe(this.doc,e),!e)return null}else{var t=tt(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,i,n){var s=this.display;e=qt(this,Ne(this.doc,e));var u=e.bottom,y=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),i=="over")u=e.top;else if(i=="above"||i=="near"){var P=Math.max(s.wrapper.clientHeight,this.doc.height),H=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(i=="above"||e.bottom+t.offsetHeight>P)&&e.top>t.offsetHeight?u=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=P&&(u=e.bottom),y+t.offsetWidth>H&&(y=H-t.offsetWidth)}t.style.top=u+"px",t.style.left=t.style.right="",n=="right"?(y=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(n=="left"?y=0:n=="middle"&&(y=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=y+"px"),r&&ll(this,y,u,y+t.offsetWidth,u+t.offsetHeight)},triggerOnKeyDown:bt(ao),triggerOnKeyPress:bt(uo),triggerOnKeyUp:lo,execCommand:function(e){if(Ln.hasOwnProperty(e))return Ln[e].call(null,this)},triggerElectric:bt(function(e){yr(this,e)}),findPosH:function(e,t,r,i){var n=1;t<0&&(n=-1,t=-t);for(var s=0,u=Ne(this.doc,e);s<t&&(u=as(this.doc,u,n,r,i),!u.hitSide);++s);return u},moveH:bt(function(e,t){var r=this;r.extendSelectionsBy(function(i){return r.display.shift||r.doc.extend||i.empty()?as(r.doc,i.head,e,t,r.options.rtlMoveVisually):e<0?i.from():i.to()},ji)}),deleteH:bt(function(e,t){var r=this.doc.sel,i=this.doc;r.somethingSelected()?i.replaceSelection("",null,"+delete"):ri(this,function(n){var s=as(i,n.head,e,t,!1);return e<0?{from:s,to:n.head}:{from:n.head,to:s}})}),findPosV:function(e,t,r,i){var n=1,s=i;t<0&&(n=-1,t=-t);for(var u=0,y=Ne(this.doc,e);u<t;++u){var P=qt(this,y,"div");if(s==null?s=P.left:P.left=s,y=mo(this,P,n,r),y.hitSide)break}return y},moveV:bt(function(e,t){var r=this,i=this.doc,n=[],s=!r.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(y){if(s)return e<0?y.from():y.to();var P=qt(r,y.head,"div");y.goalColumn!=null&&(P.left=y.goalColumn),n.push(P.left);var H=mo(r,P,e,t);return t=="page"&&y==i.sel.primary()&&os(r,null,ts(r,H,"div").top-P.top),H},ji),n.length)for(var u=0;u<i.sel.ranges.length;u++)i.sel.ranges[u].goalColumn=n[u]}),findWordAt:function(e){var t=this.doc,r=Oe(t,e.line).text,i=e.ch,n=e.ch;if(r){var s=this.getHelper(e,"wordChars");(e.xRel<0||n==r.length)&&i?--i:++n;for(var u=r.charAt(i),y=Bn(u,s)?function(P){return Bn(P,s)}:/\s/.test(u)?function(P){return/\s/.test(P)}:function(P){return!/\s/.test(P)&&!Bn(P)};i>0&&y(r.charAt(i-1));)--i;for(;n<r.length&&y(r.charAt(n));)++n}return new Ze(fe(e.line,i),fe(e.line,n))},toggleOverwrite:function(e){e!=null&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Zi(this.display.cursorDiv,"CodeMirror-overwrite"):Yi(this.display.cursorDiv,"CodeMirror-overwrite"),ft(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Kt()},scrollTo:bt(function(e,t){(e!=null||t!=null)&&kn(this),e!=null&&(this.curOp.scrollLeft=e),t!=null&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Je(this)-this.display.barHeight,width:e.scrollWidth-Je(this)-this.display.barWidth,clientHeight:yt(this),clientWidth:Be(this)}},scrollIntoView:bt(function(e,t){if(e==null?(e={from:this.doc.sel.primary().head,to:null},t==null&&(t=this.options.cursorScrollMargin)):typeof e=="number"?e={from:fe(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,e.from.line!=null)kn(this),this.curOp.scrollToPos=e;else{var r=Sn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:bt(function(e,t){var r=this;function i(s){return typeof s=="number"||/^\d+$/.test(String(s))?s+"px":s}e!=null&&(r.display.wrapper.style.width=i(e)),t!=null&&(r.display.wrapper.style.height=i(t)),r.options.lineWrapping&&Gs(this);var n=r.display.viewFrom;r.doc.iter(n,r.display.viewTo,function(s){if(s.widgets){for(var u=0;u<s.widgets.length;u++)if(s.widgets[u].noHScroll){er(r,n,"widget");break}}++n}),r.curOp.forceUpdate=!0,ft(r,"refresh",this)}),operation:function(e){return _t(this,e)},refresh:bt(function(){var e=this.display.cachedTextHeight;Lt(this),this.curOp.forceUpdate=!0,Li(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),se(this),(e==null||Math.abs(e-Ar(this.display))>.5)&&te(this),ft(this,"refresh",this)}),swapDoc:bt(function(e){var t=this.doc;return t.cm=null,Bo(this,e),Li(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Et(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ai($);var ul=$.defaults={},ii=$.optionHandlers={};function Ie(e,t,r,i){$.defaults[e]=t,r&&(ii[e]=i?function(n,s,u){u!=yo&&r(n,s,u)}:r)}var yo=$.Init={toString:function(){return"CodeMirror.Init"}};Ie("value","",function(e,t){e.setValue(t)},!0),Ie("mode",null,function(e,t){e.doc.modeOption=t,B(e)},!0),Ie("indentUnit",2,B,!0),Ie("indentWithTabs",!1),Ie("smartIndent",!0),Ie("tabSize",4,function(e){Z(e),Li(e),Lt(e)},!0),Ie("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,!!t){var r=[],i=e.doc.first;e.doc.iter(function(s){for(var u=0;;){var y=s.text.indexOf(t,u);if(y==-1)break;u=y+t.length,r.push(fe(i,y))}i++});for(var n=r.length-1;n>=0;n--)ei(e.doc,t,r[n],fe(r[n].line,r[n].ch+t.length))}}),Ie("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),r!=$.Init&&e.refresh()}),Ie("specialCharPlaceholder",Ml,function(e){e.refresh()},!0),Ie("electricChars",!0),Ie("inputStyle",S?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Ie("rtlMoveVisually",!p),Ie("wholeLineUpdateBefore",!0),Ie("theme","default",function(e){ae(e),pe(e)},!0),Ie("keyMap","default",function(e,t,r){var i=En(t),n=r!=$.Init&&En(r);n&&n.detach&&n.detach(e,i),i.attach&&i.attach(e,n||null)}),Ie("extraKeys",null),Ie("lineWrapping",!1,Q,!0),Ie("gutters",[],function(e){re(e.options),pe(e)},!0),Ie("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?z(e.display)+"px":"0",e.refresh()},!0),Ie("coverGutterNextToScrollbar",!1,function(e){De(e)},!0),Ie("scrollbarStyle","native",function(e){me(e),De(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Ie("lineNumbers",!1,function(e){re(e.options),pe(e)},!0),Ie("firstLineNumber",1,pe,!0),Ie("lineNumberFormatter",function(e){return e},pe,!0),Ie("showCursorWhenSelecting",!1,or,!0),Ie("resetSelectionOnContextMenu",!0),Ie("lineWiseCopyCut",!0),Ie("readOnly",!1,function(e,t){t=="nocursor"?(Ai(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Ie("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Ie("dragDrop",!0,za),Ie("allowDropFileTypes",null),Ie("cursorBlinkRate",530),Ie("cursorScrollMargin",0),Ie("cursorHeight",1,or,!0),Ie("singleCursorHeightPerLine",!0,or,!0),Ie("workTime",100),Ie("workDelay",100),Ie("flattenSpans",!0,Z,!0),Ie("addModeClass",!1,Z,!0),Ie("pollInterval",100),Ie("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Ie("historyEventDelay",1250),Ie("viewportMargin",10,function(e){e.refresh()},!0),Ie("maxHighlightLength",1e4,Z,!0),Ie("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Ie("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Ie("autofocus",null);var bo=$.modes={},Oi=$.mimeModes={};$.defineMode=function(e,t){!$.defaults.mode&&e!="null"&&($.defaults.mode=e),arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),bo[e]=t},$.defineMIME=function(e,t){Oi[e]=t},$.resolveMode=function(e){if(typeof e=="string"&&Oi.hasOwnProperty(e))e=Oi[e];else if(e&&typeof e.name=="string"&&Oi.hasOwnProperty(e.name)){var t=Oi[e.name];typeof t=="string"&&(t={name:t}),e=ta(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return $.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},$.getMode=function(e,r){var r=$.resolveMode(r),i=bo[r.name];if(!i)return $.getMode(e,"text/plain");var n=i(e,r);if(_i.hasOwnProperty(r.name)){var s=_i[r.name];for(var u in s)s.hasOwnProperty(u)&&(n.hasOwnProperty(u)&&(n["_"+u]=n[u]),n[u]=s[u])}if(n.name=r.name,r.helperType&&(n.helperType=r.helperType),r.modeProps)for(var u in r.modeProps)n[u]=r.modeProps[u];return n},$.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),$.defineMIME("text/plain","null");var _i=$.modeExtensions={};$.extendMode=function(e,t){var r=_i.hasOwnProperty(e)?_i[e]:_i[e]={};Ut(t,r)},$.defineExtension=function(e,t){$.prototype[e]=t},$.defineDocExtension=function(e,t){Rt.prototype[e]=t},$.defineOption=Ie;var ls=[];$.defineInitHook=function(e){ls.push(e)};var ni=$.helpers={};$.registerHelper=function(e,t,r){ni.hasOwnProperty(e)||(ni[e]=$[e]={_global:[]}),ni[e][t]=r},$.registerGlobalHelper=function(e,t,r,i){$.registerHelper(e,t,i),ni[e]._global.push({pred:r,val:i})};var lr=$.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var i in t){var n=t[i];n instanceof Array&&(n=n.concat([])),r[i]=n}return r},fl=$.startState=function(e,t,r){return e.startState?e.startState(t,r):!0};$.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var Ln=$.commands={selectAll:function(e){e.setSelection(fe(e.firstLine(),0),fe(e.lastLine()),ir)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ir)},killLine:function(e){ri(e,function(t){if(t.empty()){var r=Oe(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:fe(t.head.line+1,0)}:{from:t.head,to:fe(t.head.line,r)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){ri(e,function(t){return{from:fe(t.from().line,0),to:Ne(e.doc,fe(t.to().line+1,0))}})},delLineLeft:function(e){ri(e,function(t){return{from:fe(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){ri(e,function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){ri(e,function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:i}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(fe(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(fe(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return aa(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return la(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return ql(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},ji)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},ji)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return i.ch<e.getLine(i.line).search(/\S/)?la(e,t.head):i},ji)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),i=e.options.tabSize,n=0;n<r.length;n++){var s=r[n].from(),u=Bt(e.getLine(s.line),s.ch,i);t.push(new Array(i-u%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){_t(e,function(){for(var t=e.listSelections(),r=[],i=0;i<t.length;i++){var n=t[i].head,s=Oe(e.doc,n.line).text;if(s){if(n.ch==s.length&&(n=new fe(n.line,n.ch-1)),n.ch>0)n=new fe(n.line,n.ch+1),e.replaceRange(s.charAt(n.ch-1)+s.charAt(n.ch-2),fe(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var u=Oe(e.doc,n.line-1).text;u&&e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+u.charAt(u.length-1),fe(n.line-1,u.length-1),fe(n.line,1),"+transpose")}}r.push(new Ze(n,n))}e.setSelections(r)})},newlineAndIndent:function(e){_t(e,function(){for(var t=e.listSelections().length,r=0;r<t;r++){var i=e.listSelections()[r];e.replaceRange(e.doc.lineSeparator(),i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0)}ti(e)})},toggleOverwrite:function(e){e.toggleOverwrite()}},ur=$.keyMap={};ur.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ur.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ur.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},ur.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ur.default=f?ur.macDefault:ur.pcDefault;function cl(r){for(var t=r.split(/-(?!$)/),r=t[t.length-1],i,n,s,u,y=0;y<t.length-1;y++){var P=t[y];if(/^(cmd|meta|m)$/i.test(P))u=!0;else if(/^a(lt)?$/i.test(P))i=!0;else if(/^(c|ctrl|control)$/i.test(P))n=!0;else if(/^s(hift)$/i.test(P))s=!0;else throw new Error("Unrecognized modifier name: "+P)}return i&&(r="Alt-"+r),n&&(r="Ctrl-"+r),u&&(r="Cmd-"+r),s&&(r="Shift-"+r),r}$.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(i=="..."){delete e[r];continue}for(var n=Wn(r.split(" "),cl),s=0;s<n.length;s++){var u,y;s==n.length-1?(y=n.join(" "),u=i):(y=n.slice(0,s+1).join(" "),u="...");var P=t[y];if(!P)t[y]=u;else if(P!=u)throw new Error("Inconsistent bindings for "+y)}delete e[r]}for(var H in t)e[H]=t[H];return e};var Di=$.lookupKey=function(e,t,r,i){t=En(t);var n=t.call?t.call(e,i):t[e];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&r(n))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return Di(e,t.fallthrough,r,i);for(var s=0;s<t.fallthrough.length;s++){var u=Di(e,t.fallthrough[s],r,i);if(u)return u}}},hl=$.isModifierKey=function(e){var t=typeof e=="string"?e:Fr[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"},dl=$.keyName=function(e,t){if(R&&e.keyCode==34&&e.char)return!1;var r=Fr[e.keyCode],i=r;return i==null||e.altGraphKey?!1:(e.altKey&&r!="Alt"&&(i="Alt-"+i),(c?e.metaKey:e.ctrlKey)&&r!="Ctrl"&&(i="Ctrl-"+i),(c?e.ctrlKey:e.metaKey)&&r!="Cmd"&&(i="Cmd-"+i),!t&&e.shiftKey&&r!="Shift"&&(i="Shift-"+i),i)};function En(e){return typeof e=="string"?ur[e]:e}$.fromTextArea=function(e,t){if(t=t?Ut(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var r=Kt();t.autofocus=r==e||e.getAttribute("autofocus")!=null&&r==document.body}function i(){e.value=y.getValue()}if(e.form&&($e(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var n=e.form,s=n.submit;try{var u=n.submit=function(){i(),n.submit=s,n.submit(),n.submit=u}}catch{}}t.finishInit=function(P){P.save=i,P.getTextArea=function(){return e},P.toTextArea=function(){P.toTextArea=isNaN,i(),e.parentNode.removeChild(P.getWrapperElement()),e.style.display="",e.form&&(Gt(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=s))}},e.style.display="none";var y=$(function(P){e.parentNode.insertBefore(P,e.nextSibling)},t);return y};var Mn=$.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Mn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var r=t==e;else var r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Bt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Bt(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Bt(this.string,null,this.tabSize)-(this.lineStart?Bt(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if(typeof e=="string"){var i=function(u){return r?u.toLowerCase():u},n=this.string.substr(this.pos,e.length);if(i(n)==i(e))return t!==!1&&(this.pos+=e.length),!0}else{var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var us=0,_r=$.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++us};ai(_r),_r.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Zr(e),It(this,"clear")){var r=this.find();r&&Et(this,"clear",r.from,r.to)}for(var i=null,n=null,s=0;s<this.lines.length;++s){var u=this.lines[s],y=$i(u.markedSpans,this);e&&!this.collapsed?er(e,tt(u),"text"):e&&(y.to!=null&&(n=tt(u)),y.from!=null&&(i=tt(u))),u.markedSpans=ml(u.markedSpans,y),y.from==null&&this.collapsed&&!Dr(this.doc,u)&&e&&Xt(u,Ar(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var P=zt(this.lines[s]),H=ie(P);H>e.display.maxLineLength&&(e.display.maxLine=P,e.display.maxLineLength=H,e.display.maxLineChanged=!0)}i!=null&&e&&this.collapsed&&Lt(e,i,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Tr(e.doc)),e&&Et(e,"markerCleared",e,this),t&&Jr(e),this.parent&&this.parent.clear()}},_r.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var r,i,n=0;n<this.lines.length;++n){var s=this.lines[n],u=$i(s.markedSpans,this);if(u.from!=null&&(r=fe(t?s:tt(s),u.from),e==-1))return r;if(u.to!=null&&(i=fe(t?s:tt(s),u.to),e==1))return i}return r&&{from:r,to:i}},_r.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;!e||!r||_t(r,function(){var i=e.line,n=tt(e.line),s=Qt(r,n);if(s&&(Xs(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Dr(t.doc,i)&&t.height!=null){var u=t.height;t.height=null;var y=Ni(t)-u;y&&Xt(i,i.height+y)}})},_r.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||wt(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},_r.prototype.detachLine=function(e){if(this.lines.splice(wt(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var us=0;function si(e,t,r,i,n){if(i&&i.shared)return pl(e,t,r,i,n);if(e.cm&&!e.cm.curOp)return at(e.cm,si)(e,t,r,i,n);var s=new _r(e,n),u=We(t,r);if(i&&Ut(i,s,!1),u>0||u==0&&s.clearWhenEmpty!==!1)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=Ae("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(Mo(e,t.line,t,r,s)||t.line!=r.line&&Mo(e,r.line,t,r,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");D=!0}s.addToHistory&&jo(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var y=t.line,P=e.cm,H;if(e.iter(y,r.line+1,function(U){P&&s.collapsed&&!P.options.lineWrapping&&zt(U)==P.display.maxLine&&(H=!0),s.collapsed&&y!=t.line&&Xt(U,0),yl(U,new Pn(s,y==t.line?t.ch:null,y==r.line?r.ch:null)),++y}),s.collapsed&&e.iter(t.line,r.line+1,function(U){Dr(e,U)&&Xt(U,0)}),s.clearOnEnter&&$e(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(C=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++us,s.atomic=!0),P){if(H&&(P.curOp.updateMaxLine=!0),s.collapsed)Lt(P,t.line,r.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var j=t.line;j<=r.line;j++)er(P,j,"text");s.atomic&&Tr(P.doc),Et(P,"markerAdded",P,s)}return s}var An=$.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};ai(An),An.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Et(this,"clear")}},An.prototype.find=function(e,t){return this.primary.find(e,t)};function pl(e,t,r,i,n){i=Ut(i),i.shared=!1;var s=[si(e,t,r,i,n)],u=s[0],y=i.widgetNode;return $r(e,function(P){y&&(i.widgetNode=y.cloneNode(!0)),s.push(si(P,Ne(P,t),Ne(P,r),i,n));for(var H=0;H<P.linked.length;++H)if(P.linked[H].isParent)return;u=qe(s)}),new An(s,u)}function wo(e){return e.findMarks(fe(e.first,0),e.clipPos(fe(e.lastLine())),function(t){return t.parent})}function vl(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=i.find(),s=e.clipPos(n.from),u=e.clipPos(n.to);if(We(s,u)){var y=si(e,s,u,i.primary,i.primary.type);i.markers.push(y),y.parent=i}}}function gl(e){for(var t=0;t<e.length;t++){var r=e[t],i=[r.primary.doc];$r(r.primary.doc,function(u){i.push(u)});for(var n=0;n<r.markers.length;n++){var s=r.markers[n];wt(i,s.doc)==-1&&(s.parent=null,r.markers.splice(n--,1))}}}function Pn(e,t,r){this.marker=e,this.from=t,this.to=r}function $i(e,t){if(e)for(var r=0;r<e.length;++r){var i=e[r];if(i.marker==t)return i}}function ml(e,t){for(var r,i=0;i<e.length;++i)e[i]!=t&&(r||(r=[])).push(e[i]);return r}function yl(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function bl(e,t,r){if(e)for(var i=0,n;i<e.length;++i){var s=e[i],u=s.marker,y=s.from==null||(u.inclusiveLeft?s.from<=t:s.from<t);if(y||s.from==t&&u.type=="bookmark"&&(!r||!s.marker.insertLeft)){var P=s.to==null||(u.inclusiveRight?s.to>=t:s.to>t);(n||(n=[])).push(new Pn(u,s.from,P?null:s.to))}}return n}function wl(e,t,r){if(e)for(var i=0,n;i<e.length;++i){var s=e[i],u=s.marker,y=s.to==null||(u.inclusiveRight?s.to>=t:s.to>t);if(y||s.from==t&&u.type=="bookmark"&&(!r||s.marker.insertLeft)){var P=s.from==null||(u.inclusiveLeft?s.from<=t:s.from<t);(n||(n=[])).push(new Pn(u,P?null:s.from-t,s.to==null?null:s.to-t))}}return n}function fs(e,t){if(t.full)return null;var r=Jt(e,t.from.line)&&Oe(e,t.from.line).markedSpans,i=Jt(e,t.to.line)&&Oe(e,t.to.line).markedSpans;if(!r&&!i)return null;var n=t.from.ch,s=t.to.ch,u=We(t.from,t.to)==0,y=bl(r,n,u),P=wl(i,s,u),H=t.text.length==1,j=qe(t.text).length+(H?n:0);if(y)for(var U=0;U<y.length;++U){var K=y[U];if(K.to==null){var V=$i(P,K.marker);V?H&&(K.to=V.to==null?null:V.to+j):K.to=n}}if(P)for(var U=0;U<P.length;++U){var K=P[U];if(K.to!=null&&(K.to+=j),K.from==null){var V=$i(y,K.marker);V||(K.from=j,H&&(y||(y=[])).push(K))}else K.from+=j,H&&(y||(y=[])).push(K)}y&&(y=xo(y)),P&&P!=y&&(P=xo(P));var ee=[y];if(!H){var ve=t.text.length-2,xe;if(ve>0&&y)for(var U=0;U<y.length;++U)y[U].to==null&&(xe||(xe=[])).push(new Pn(y[U].marker,null,null));for(var U=0;U<ve;++U)ee.push(xe);ee.push(P)}return ee}function xo(e){for(var t=0;t<e.length;++t){var r=e[t];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Co(e,t){var r=Fl(e,t),i=fs(e,t);if(!r)return i;if(!i)return r;for(var n=0;n<r.length;++n){var s=r[n],u=i[n];if(s&&u)e:for(var y=0;y<u.length;++y){for(var P=u[y],H=0;H<s.length;++H)if(s[H].marker==P.marker)continue e;s.push(P)}else u&&(r[n]=u)}return r}function xl(e,t,r){var i=null;if(e.iter(t.line,r.line+1,function(V){if(V.markedSpans)for(var ee=0;ee<V.markedSpans.length;++ee){var ve=V.markedSpans[ee].marker;ve.readOnly&&(!i||wt(i,ve)==-1)&&(i||(i=[])).push(ve)}}),!i)return null;for(var n=[{from:t,to:r}],s=0;s<i.length;++s)for(var u=i[s],y=u.find(0),P=0;P<n.length;++P){var H=n[P];if(!(We(H.to,y.from)<0||We(H.from,y.to)>0)){var j=[P,1],U=We(H.from,y.from),K=We(H.to,y.to);(U<0||!u.inclusiveLeft&&!U)&&j.push({from:H.from,to:y.from}),(K>0||!u.inclusiveRight&&!K)&&j.push({from:y.to,to:H.to}),n.splice.apply(n,j),P+=j.length-1}}return n}function So(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function ko(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Rn(e){return e.inclusiveLeft?-1:0}function On(e){return e.inclusiveRight?1:0}function To(e,t){var r=e.lines.length-t.lines.length;if(r!=0)return r;var i=e.find(),n=t.find(),s=We(i.from,n.from)||Rn(e)-Rn(t);if(s)return-s;var u=We(i.to,n.to)||On(e)-On(t);return u||t.id-e.id}function Lo(e,t){var r=D&&e.markedSpans,i;if(r)for(var n,s=0;s<r.length;++s)n=r[s],n.marker.collapsed&&(t?n.from:n.to)==null&&(!i||To(i,n.marker)<0)&&(i=n.marker);return i}function Eo(e){return Lo(e,!0)}function Hi(e){return Lo(e,!1)}function Mo(e,t,r,i,n){var s=Oe(e,t),u=D&&s.markedSpans;if(u)for(var y=0;y<u.length;++y){var P=u[y];if(P.marker.collapsed){var H=P.marker.find(0),j=We(H.from,r)||Rn(P.marker)-Rn(n),U=We(H.to,i)||On(P.marker)-On(n);if(!(j>=0&&U<=0||j<=0&&U>=0)&&(j<=0&&(We(H.to,r)>0||P.marker.inclusiveRight&&n.inclusiveLeft)||j>=0&&(We(H.from,i)<0||P.marker.inclusiveLeft&&n.inclusiveRight)))return!0}}}function zt(e){for(var t;t=Eo(e);)e=t.find(-1,!0).line;return e}function Cl(e){for(var t,r;t=Hi(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function cs(e,t){var r=Oe(e,t),i=zt(r);return r==i?t:tt(i)}function Ao(e,t){if(t>e.lastLine())return t;var r=Oe(e,t),i;if(!Dr(e,r))return t;for(;i=Hi(r);)r=i.find(1,!0).line;return tt(r)+1}function Dr(e,t){var r=D&&t.markedSpans;if(r){for(var i,n=0;n<r.length;++n)if(i=r[n],!!i.marker.collapsed){if(i.from==null)return!0;if(!i.marker.widgetNode&&i.from==0&&i.marker.inclusiveLeft&&hs(e,t,i))return!0}}}function hs(e,t,r){if(r.to==null){var i=r.marker.find(1,!0);return hs(e,i.line,$i(i.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var n,s=0;s<t.markedSpans.length;++s)if(n=t.markedSpans[s],n.marker.collapsed&&!n.marker.widgetNode&&n.from==r.to&&(n.to==null||n.to!=r.from)&&(n.marker.inclusiveLeft||r.marker.inclusiveRight)&&hs(e,t,n))return!0}var _n=$.LineWidget=function(e,t,r){if(r)for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i]);this.doc=e,this.node=t};ai(_n);function Po(e,t,r){rr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&os(e,null,r)}_n.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,i=tt(r);if(!(i==null||!t)){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(r.widgets=null);var s=Ni(this);Xt(r,Math.max(0,r.height-s)),e&&_t(e,function(){Po(e,r,-s),er(e,i,"widget")})}},_n.prototype.changed=function(){var e=this.height,t=this.doc.cm,r=this.line;this.height=null;var i=Ni(this)-e;i&&(Xt(r,r.height+i),t&&_t(t,function(){t.curOp.forceUpdate=!0,Po(t,r,i)}))};function Ni(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!ws(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),$t(t.display.measure,Ae("div",[e.node],null,r))}return e.height=e.node.offsetHeight}function Sl(e,t,r,i){var n=new _n(e,r,i),s=e.cm;return s&&n.noHScroll&&(s.display.alignWidgets=!0),Tn(e,t,"widget",function(u){var y=u.widgets||(u.widgets=[]);if(n.insertAt==null?y.push(n):y.splice(Math.min(y.length-1,Math.max(0,n.insertAt)),0,n),n.line=u,s&&!Dr(e,u)){var P=rr(u)<e.scrollTop;Xt(u,u.height+Ni(n)),P&&os(s,null,n.height),s.curOp.forceUpdate=!0}return!0}),n}var Ii=$.Line=function(e,t,r){this.text=e,ko(this,t),this.height=r?r(this):1};ai(Ii),Ii.prototype.lineNo=function(){return tt(this)};function kl(e,t,r,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),So(e),ko(e,r);var n=i?i(e):1;n!=e.height&&Xt(e,n)}function Tl(e){e.parent=null,So(e)}function Ro(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var i=r[1]?"bgClass":"textClass";t[i]==null?t[i]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+r[2])}return e}function Oo(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=$.innerMode(e,t);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function ds(e,t,r,i){for(var n=0;n<10;n++){i&&(i[0]=$.innerMode(e,r).mode);var s=e.token(t,r);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}function _o(e,t,r,i){function n(K){return{start:j.start,end:j.pos,string:j.current(),type:y||null,state:K?lr(s.mode,H):H}}var s=e.doc,u=s.mode,y;t=Ne(s,t);var P=Oe(s,t.line),H=he(e,t.line,r),j=new Mn(P.text,e.options.tabSize),U;for(i&&(U=[]);(i||j.pos<t.ch)&&!j.eol();)j.start=j.pos,y=ds(u,j,H),i&&U.push(n(!0));return i?U:n()}function Do(e,t,r,i,n,s,u){var y=r.flattenSpans;y==null&&(y=e.options.flattenSpans);var P=0,H=null,j=new Mn(t,e.options.tabSize),U,K=e.options.addModeClass&&[null];for(t==""&&Ro(Oo(r,i),s);!j.eol();){if(j.pos>e.options.maxHighlightLength?(y=!1,u&&ps(e,t,i,j.pos),j.pos=t.length,U=null):U=Ro(ds(r,j,i,K),s),K){var V=K[0].name;V&&(U="m-"+(U?V+" "+U:V))}if(!y||H!=U){for(;P<j.start;)P=Math.min(j.start,P+5e4),n(P,H);H=U}j.start=j.pos}for(;P<j.pos;){var ee=Math.min(j.pos,P+5e4);n(ee,H),P=ee}}function $o(e,t,r,i){var n=[e.state.modeGen],s={};Do(e,t.text,e.doc.mode,r,function(j,U){n.push(j,U)},s,i);for(var u=0;u<e.state.overlays.length;++u){var y=e.state.overlays[u],P=1,H=0;Do(e,t.text,y.mode,!0,function(j,U){for(var K=P;H<j;){var V=n[P];V>j&&n.splice(P,1,j,n[P+1],V),P+=2,H=Math.min(j,V)}if(U)if(y.opaque)n.splice(K,P-K,j,"cm-overlay "+U),P=K+2;else for(;K<P;K+=2){var ee=n[K+1];n[K+1]=(ee?ee+" ":"")+"cm-overlay "+U}},s)}return{styles:n,classes:s.bgClass||s.textClass?s:null}}function Ho(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=he(e,tt(t)),n=$o(e,t,t.text.length>e.options.maxHighlightLength?lr(e.doc.mode,i):i);t.stateAfter=i,t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function ps(e,t,r,i){var n=e.doc.mode,s=new Mn(t,e.options.tabSize);for(s.start=s.pos=i||0,t==""&&Oo(n,r);!s.eol();)ds(n,s,r),s.start=s.pos}var Ll={},El={};function No(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?El:Ll;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function Io(e,t){var r=Ae("span",null,null,E?"padding-right: .1px":null),i={pre:Ae("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,splitSpaces:(a||E)&&e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var s=n?t.rest[n-1]:t.line,u;i.pos=0,i.addToken=Al,Vl(e.display.measure)&&(u=Wt(s))&&(i.addToken=Rl(i.addToken,u)),i.map=[];var y=t!=e.display.externalMeasured&&tt(s);Ol(s,i,Ho(e,s,y)),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=xs(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=xs(s.styleClasses.textClass,i.textClass||""))),i.map.length==0&&i.map.push(0,0,i.content.appendChild(Kl(e.display.measure))),n==0?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return E&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),ft(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=xs(i.pre.className,i.textClass||"")),i}function Ml(e){var t=Ae("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Al(e,t,r,i,n,s,u){if(t){var y=e.splitSpaces?t.replace(/ {3,}/g,Pl):t,P=e.cm.state.specialChars,H=!1;if(P.test(t))for(var j=document.createDocumentFragment(),U=0;;){P.lastIndex=U;var K=P.exec(t),V=K?K.index-U:t.length-U;if(V){var ee=document.createTextNode(y.slice(U,U+V));a&&d<9?j.appendChild(Ae("span",[ee])):j.appendChild(ee),e.map.push(e.pos,e.pos+V,ee),e.col+=V,e.pos+=V}if(!K)break;if(U+=V+1,K[0]=="	"){var ve=e.cm.options.tabSize,xe=ve-e.col%ve,ee=j.appendChild(Ae("span",ea(xe),"cm-tab"));ee.setAttribute("role","presentation"),ee.setAttribute("cm-text","	"),e.col+=xe}else if(K[0]=="\r"||K[0]==`
`){var ee=j.appendChild(Ae("span",K[0]=="\r"?"␍":"␤","cm-invalidchar"));ee.setAttribute("cm-text",K[0]),e.col+=1}else{var ee=e.cm.options.specialCharPlaceholder(K[0]);ee.setAttribute("cm-text",K[0]),a&&d<9?j.appendChild(Ae("span",[ee])):j.appendChild(ee),e.col+=1}e.map.push(e.pos,e.pos+1,ee),e.pos++}else{e.col+=t.length;var j=document.createTextNode(y);e.map.push(e.pos,e.pos+t.length,j),a&&d<9&&(H=!0),e.pos+=t.length}if(r||i||n||H||u){var Ce=r||"";i&&(Ce+=i),n&&(Ce+=n);var He=Ae("span",[j],Ce,u);return s&&(He.title=s),e.content.appendChild(He)}e.content.appendChild(j)}}function Pl(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":" ";return t+=" ",t}function Rl(e,t){return function(r,i,n,s,u,y,P){n=n?n+" cm-force-border":"cm-force-border";for(var H=r.pos,j=H+i.length;;){for(var U=0;U<t.length;U++){var K=t[U];if(K.to>H&&K.from<=H)break}if(K.to>=j)return e(r,i,n,s,u,y,P);e(r,i.slice(0,K.to-H),n,s,null,y,P),s=null,i=i.slice(K.to-H),H=K.to}}}function Fo(e,t,r,i){var n=!i&&r.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!i&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",r.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t}function Ol(e,t,r){var i=e.markedSpans,n=e.text,s=0;if(!i){for(var P=1;P<r.length;P+=2)t.addToken(t,n.slice(s,s=r[P]),No(r[P+1],t.cm.options));return}for(var u=n.length,y=0,P=1,H="",j,U,K=0,V,ee,ve,xe,Ce;;){if(K==y){V=ee=ve=xe=U="",Ce=null,K=1/0;for(var He=[],Se=0;Se<i.length;++Se){var je=i[Se],Ee=je.marker;Ee.type=="bookmark"&&je.from==y&&Ee.widgetNode?He.push(Ee):je.from<=y&&(je.to==null||je.to>y||Ee.collapsed&&je.to==y&&je.from==y)?(je.to!=null&&je.to!=y&&K>je.to&&(K=je.to,ee=""),Ee.className&&(V+=" "+Ee.className),Ee.css&&(U=Ee.css),Ee.startStyle&&je.from==y&&(ve+=" "+Ee.startStyle),Ee.endStyle&&je.to==K&&(ee+=" "+Ee.endStyle),Ee.title&&!xe&&(xe=Ee.title),Ee.collapsed&&(!Ce||To(Ce.marker,Ee)<0)&&(Ce=je)):je.from>y&&K>je.from&&(K=je.from)}if(Ce&&(Ce.from||0)==y){if(Fo(t,(Ce.to==null?u+1:Ce.to)-y,Ce.marker,Ce.from==null),Ce.to==null)return;Ce.to==y&&(Ce=!1)}if(!Ce&&He.length)for(var Se=0;Se<He.length;++Se)Fo(t,0,He[Se])}if(y>=u)break;for(var _e=Math.min(u,K);;){if(H){var Ve=y+H.length;if(!Ce){var lt=Ve>_e?H.slice(0,_e-y):H;t.addToken(t,lt,j?j+V:V,ve,y+lt.length==K?ee:"",xe,U)}if(Ve>=_e){H=H.slice(_e-y),y=_e;break}y=Ve,ve=""}H=n.slice(s,s=r[P++]),j=No(r[P++],t.cm.options)}}}function Wo(e,t){return t.from.ch==0&&t.to.ch==0&&qe(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function vs(e,t,r,i){function n(xe){return r?r[xe]:null}function s(xe,Ce,He){kl(xe,Ce,He,i),Et(xe,"change",xe,t)}function u(xe,Ce){for(var He=xe,Se=[];He<Ce;++He)Se.push(new Ii(H[He],n(He),i));return Se}var y=t.from,P=t.to,H=t.text,j=Oe(e,y.line),U=Oe(e,P.line),K=qe(H),V=n(H.length-1),ee=P.line-y.line;if(t.full)e.insert(0,u(0,H.length)),e.remove(H.length,e.size-H.length);else if(Wo(e,t)){var ve=u(0,H.length-1);s(U,U.text,V),ee&&e.remove(y.line,ee),ve.length&&e.insert(y.line,ve)}else if(j==U)if(H.length==1)s(j,j.text.slice(0,y.ch)+K+j.text.slice(P.ch),V);else{var ve=u(1,H.length-1);ve.push(new Ii(K+j.text.slice(P.ch),V,i)),s(j,j.text.slice(0,y.ch)+H[0],n(0)),e.insert(y.line+1,ve)}else if(H.length==1)s(j,j.text.slice(0,y.ch)+H[0]+U.text.slice(P.ch),n(0)),e.remove(y.line+1,ee);else{s(j,j.text.slice(0,y.ch)+H[0],n(0)),s(U,K+U.text.slice(P.ch),V);var ve=u(1,H.length-1);ee>1&&e.remove(y.line+1,ee-1),e.insert(y.line+1,ve)}Et(e,"change",e,t)}function Fi(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}Fi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,i=e+t;r<i;++r){var n=this.lines[r];this.height-=n.height,Tl(n),Et(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,r){for(var i=e+t;e<i;++e)if(r(this.lines[e]))return!0}};function Wi(e){this.children=e;for(var t=0,r=0,i=0;i<e.length;++i){var n=e[i];t+=n.chunkSize(),r+=n.height,n.parent=this}this.size=t,this.height=r,this.parent=null}Wi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],n=i.chunkSize();if(e<n){var s=Math.min(t,n-e),u=i.height;if(i.removeInner(e,s),this.height-=u-i.height,n==s&&(this.children.splice(r--,1),i.parent=null),(t-=s)==0)break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Fi))){var y=[];this.collapse(y),this.children=[new Fi(y)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(e<=s){if(n.insertInner(e,t,r),n.lines&&n.lines.length>50){for(;n.lines.length>50;){var u=n.lines.splice(n.lines.length-25,25),y=new Fi(u);n.height-=y.height,this.children.splice(i+1,0,y),y.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Wi(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=wt(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Wi(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var i=0;i<this.children.length;++i){var n=this.children[i],s=n.chunkSize();if(e<s){var u=Math.min(t,s-e);if(n.iterN(e,u,r))return!0;if((t-=u)==0)break;e=0}else e-=s}}};var _l=0,Rt=$.Doc=function(e,t,r,i){if(!(this instanceof Rt))return new Rt(e,t,r,i);r==null&&(r=0),Wi.call(this,[new Fi([new Ii("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=fe(r,0);this.sel=ht(n),this.history=new $n(null),this.id=++_l,this.modeOption=t,this.lineSep=i,typeof e=="string"&&(e=this.splitLines(e)),vs(this,{from:n,to:n,text:e}),ut(this,ht(n),ir)};Rt.prototype=ta(Wi.prototype,{constructor:Rt,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,i=0;i<t.length;++i)r+=t[i].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=gs(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:St(function(e){var t=fe(this.first,0),r=this.first+this.size-1;qr(this,{from:t,to:fe(r,Oe(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),ut(this,ht(t))}),replaceRange:function(e,t,r,i){t=Ne(this,t),r=r?Ne(this,r):t,ei(this,e,t,r,i)},getRange:function(e,t,r){var i=Hr(this,Ne(this,e),Ne(this,t));return r===!1?i:i.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Jt(this,e))return Oe(this,e)},getLineNumber:function(e){return tt(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Oe(this,e)),zt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ne(this,e)},getCursor:function(e){var t=this.sel.primary(),r;return e==null||e=="head"?r=t.head:e=="anchor"?r=t.anchor:e=="end"||e=="to"||e===!1?r=t.to():r=t.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:St(function(e,t,r){fn(this,Ne(this,typeof e=="number"?fe(e,t||0):e),null,r)}),setSelection:St(function(e,t,r){fn(this,Ne(this,e),Ne(this,t||e),r)}),extendSelection:St(function(e,t,r){Cr(this,Ne(this,e),t&&Ne(this,t),r)}),extendSelections:St(function(e,t){Si(this,Ci(this,e))}),extendSelectionsBy:St(function(e,t){Si(this,Wn(this.sel.ranges,e),t)}),setSelections:St(function(e,t,r){if(e.length){for(var i=0,n=[];i<e.length;i++)n[i]=new Ze(Ne(this,e[i].anchor),Ne(this,e[i].head));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),ut(this,mt(n,t),r)}}),addSelection:St(function(e,t,r){var i=this.sel.ranges.slice(0);i.push(new Ze(Ne(this,e),Ne(this,t||e))),ut(this,mt(i,i.length-1),r)}),getSelection:function(e){for(var t=this.sel.ranges,r,i=0;i<t.length;i++){var n=Hr(this,t[i].from(),t[i].to());r=r?r.concat(n):n}return e===!1?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,i=0;i<r.length;i++){var n=Hr(this,r[i].from(),r[i].to());e!==!1&&(n=n.join(e||this.lineSeparator())),t[i]=n}return t},replaceSelection:function(e,t,r){for(var i=[],n=0;n<this.sel.ranges.length;n++)i[n]=e;this.replaceSelections(i,t,r||"+input")},replaceSelections:St(function(e,t,r){for(var i=[],n=this.sel,s=0;s<n.ranges.length;s++){var u=n.ranges[s];i[s]={from:u.from(),to:u.to(),text:this.splitLines(e[s]),origin:r}}for(var y=t&&t!="end"&&nl(this,i,t),s=i.length-1;s>=0;s--)qr(this,i[s]);y?Gr(this,y):this.cm&&ti(this.cm)}),undo:St(function(){Cn(this,"undo")}),redo:St(function(){Cn(this,"redo")}),undoSelection:St(function(){Cn(this,"undo",!0)}),redoSelection:St(function(){Cn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new $n(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:oi(this.history.done),undone:oi(this.history.undone)}},setHistory:function(e){var t=this.history=new $n(this.history.maxGeneration);t.done=oi(e.done.slice(0),null,!0),t.undone=oi(e.undone.slice(0),null,!0)},addLineClass:St(function(e,t,r){return Tn(this,e,t=="gutter"?"gutter":"class",function(i){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!i[n])i[n]=r;else{if(Vi(r).test(i[n]))return!1;i[n]+=" "+r}return!0})}),removeLineClass:St(function(e,t,r){return Tn(this,e,t=="gutter"?"gutter":"class",function(i){var n=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",s=i[n];if(s)if(r==null)i[n]=null;else{var u=s.match(Vi(r));if(!u)return!1;var y=u.index+u[0].length;i[n]=s.slice(0,u.index)+(!u.index||y==s.length?"":" ")+s.slice(y)||null}else return!1;return!0})}),addLineWidget:St(function(e,t,r){return Sl(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return si(this,Ne(this,e),Ne(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=Ne(this,e),si(this,e,e,r,"bookmark")},findMarksAt:function(e){e=Ne(this,e);var t=[],r=Oe(this,e.line).markedSpans;if(r)for(var i=0;i<r.length;++i){var n=r[i];(n.from==null||n.from<=e.ch)&&(n.to==null||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,r){e=Ne(this,e),t=Ne(this,t);var i=[],n=e.line;return this.iter(e.line,t.line+1,function(s){var u=s.markedSpans;if(u)for(var y=0;y<u.length;y++){var P=u[y];!(n==e.line&&e.ch>P.to||P.from==null&&n!=e.line||n==t.line&&P.from>t.ch)&&(!r||r(P.marker))&&i.push(P.marker.parent||P.marker)}++n}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var i=0;i<r.length;++i)r[i].from!=null&&e.push(r[i].marker)}),e},posFromIndex:function(e){var t,r=this.first;return this.iter(function(i){var n=i.text.length+1;if(n>e)return t=e,!0;e-=n,++r}),Ne(this,fe(r,t))},indexFromPos:function(e){e=Ne(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(r){t+=r.text.length+1}),t)},copy:function(e){var t=new Rt(gs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<r&&(r=e.to);var i=new Rt(gs(this,t,r),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],vl(i,wo(this)),i},unlinkDoc:function(e){if(e instanceof $&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),gl(wo(this));break}}if(e.history==this.history){var i=[e.id];$r(e,function(n){i.push(n.id)},!0),e.history=new $n(null),e.history.done=oi(this.history.done,i),e.history.undone=oi(this.history.undone,i)}},iterLinkedDocs:function(e){$r(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Yl(e)},lineSeparator:function(){return this.lineSep||`
`}}),Rt.prototype.eachLine=Rt.prototype.iter;var Dl="iter insert remove copy getEditor constructor".split(" ");for(var Dn in Rt.prototype)Rt.prototype.hasOwnProperty(Dn)&&wt(Dl,Dn)<0&&($.prototype[Dn]=function(e){return function(){return e.apply(this.doc,arguments)}}(Rt.prototype[Dn]));ai(Rt);function $r(e,t,r){function i(n,s,u){if(n.linked)for(var y=0;y<n.linked.length;++y){var P=n.linked[y];if(P.doc!=s){var H=u&&P.sharedHist;r&&!H||(t(P.doc,H),i(P.doc,n,H))}}}i(e,null,!0)}function Bo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,te(e),B(e),e.options.lineWrapping||we(e),e.options.mode=t.modeOption,Lt(e)}function Oe(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var i=0;;++i){var n=r.children[i],s=n.chunkSize();if(t<s){r=n;break}t-=s}return r.lines[t]}function Hr(e,t,r){var i=[],n=t.line;return e.iter(t.line,r.line+1,function(s){var u=s.text;n==r.line&&(u=u.slice(0,r.ch)),n==t.line&&(u=u.slice(t.ch)),i.push(u),++n}),i}function gs(e,t,r){var i=[];return e.iter(t,r,function(n){i.push(n.text)}),i}function Xt(e,t){var r=t-e.height;if(r)for(var i=e;i;i=i.parent)i.height+=r}function tt(e){if(e.parent==null)return null;for(var t=e.parent,r=wt(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var n=0;i.children[n]!=t;++n)r+=i.children[n].chunkSize();return r+t.first}function Nr(e,t){var r=e.first;e:do{for(var i=0;i<e.children.length;++i){var n=e.children[i],s=n.height;if(t<s){e=n;continue e}t-=s,r+=n.chunkSize()}return r}while(!e.lines);for(var i=0;i<e.lines.length;++i){var u=e.lines[i],y=u.height;if(t<y)break;t-=y}return r+i}function rr(e){e=zt(e);for(var t=0,r=e.parent,i=0;i<r.lines.length;++i){var n=r.lines[i];if(n==e)break;t+=n.height}for(var s=r.parent;s;r=s,s=r.parent)for(var i=0;i<s.children.length;++i){var u=s.children[i];if(u==r)break;t+=u.height}return t}function Wt(e){var t=e.order;return t==null&&(t=e.order=tu(e.text)),t}function $n(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ms(e,t){var r={from:yi(t.from),to:Or(t),text:Hr(e,t.from,t.to)};return zo(e,r,t.from.line,t.to.line+1),$r(e,function(i){zo(i,r,t.from.line,t.to.line+1)},!0),r}function Uo(e){for(;e.length;){var t=qe(e);if(t.ranges)e.pop();else break}}function $l(e,t){if(t)return Uo(e.done),qe(e.done);if(e.done.length&&!qe(e.done).ranges)return qe(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),qe(e.done)}function jo(e,t,r,i){var n=e.history;n.undone.length=0;var s=+new Date,u;if((n.lastOp==i||n.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&n.lastModTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))&&(u=$l(n,n.lastOp==i))){var y=qe(u.changes);We(t.from,t.to)==0&&We(t.from,y.to)==0?y.to=Or(t):u.changes.push(ms(e,t))}else{var P=qe(n.done);for((!P||!P.ranges)&&Hn(e.sel,n.done),u={changes:[ms(e,t)],generation:n.generation},n.done.push(u);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(r),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=s,n.lastOp=n.lastSelOp=i,n.lastOrigin=n.lastSelOrigin=t.origin,y||ft(e,"historyAdded")}function Hl(e,t,r,i){var n=t.charAt(0);return n=="*"||n=="+"&&r.ranges.length==i.ranges.length&&r.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Nl(e,t,r,i){var n=e.history,s=i&&i.origin;r==n.lastSelOp||s&&n.lastSelOrigin==s&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==s||Hl(e,s,qe(n.done),t))?n.done[n.done.length-1]=t:Hn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=s,n.lastSelOp=r,i&&i.clearRedo!==!1&&Uo(n.undone)}function Hn(e,t){var r=qe(t);r&&r.ranges&&r.equals(e)||t.push(e)}function zo(e,t,r,i){var n=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,i),function(u){u.markedSpans&&((n||(n=t["spans_"+e.id]={}))[s]=u.markedSpans),++s})}function Il(e){if(!e)return null;for(var t=0,r;t<e.length;++t)e[t].marker.explicitlyCleared?r||(r=e.slice(0,t)):r&&r.push(e[t]);return r?r.length?r:null:e}function Fl(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var i=0,n=[];i<t.text.length;++i)n.push(Il(r[i]));return n}function oi(e,t,r){for(var i=0,n=[];i<e.length;++i){var s=e[i];if(s.ranges){n.push(r?Ot.prototype.deepCopy.call(s):s);continue}var u=s.changes,y=[];n.push({changes:y});for(var P=0;P<u.length;++P){var H=u[P],j;if(y.push({from:H.from,to:H.to,text:H.text}),t)for(var U in H)(j=U.match(/^spans_(\d+)$/))&&wt(t,Number(j[1]))>-1&&(qe(y)[U]=H[U],delete H[U])}}return n}function Xo(e,t,r,i){r<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Go(e,t,r,i){for(var n=0;n<e.length;++n){var s=e[n],u=!0;if(s.ranges){s.copied||(s=e[n]=s.deepCopy(),s.copied=!0);for(var y=0;y<s.ranges.length;y++)Xo(s.ranges[y].anchor,t,r,i),Xo(s.ranges[y].head,t,r,i);continue}for(var y=0;y<s.changes.length;++y){var P=s.changes[y];if(r<P.from.line)P.from=fe(P.from.line+i,P.from.ch),P.to=fe(P.to.line+i,P.to.ch);else if(t<=P.to.line){u=!1;break}}u||(e.splice(0,n+1),n=0)}}function Ko(e,t){var r=t.from.line,i=t.to.line,n=t.text.length-(i-r)-1;Go(e.done,r,i,n),Go(e.undone,r,i,n)}var kt=$.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Wl=$.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function ys(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}var Nn=$.e_stop=function(e){kt(e),Wl(e)};function Bi(e){return e.target||e.srcElement}function Vo(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),f&&e.ctrlKey&&t==1&&(t=3),t}var $e=$.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var i=e._handlers||(e._handlers={}),n=i[t]||(i[t]=[]);n.push(r)}},Yo=[];function In(e,t,r){var i=e._handlers&&e._handlers[t];return r?i&&i.length>0?i.slice():Yo:i||Yo}var Gt=$.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else for(var i=In(e,t,!1),n=0;n<i.length;++n)if(i[n]==r){i.splice(n,1);break}},ft=$.signal=function(e,t){var r=In(e,t,!0);if(r.length)for(var i=Array.prototype.slice.call(arguments,2),n=0;n<r.length;++n)r[n].apply(null,i)},Ui=null;function Et(e,t){var r=In(e,t,!1);if(!r.length)return;var i=Array.prototype.slice.call(arguments,2),n;Yr?n=Yr.delayedCallbacks:Ui?n=Ui:(n=Ui=[],setTimeout(Bl,0));function s(y){return function(){y.apply(null,i)}}for(var u=0;u<r.length;++u)n.push(s(r[u]))}function Bl(){var e=Ui;Ui=null;for(var t=0;t<e.length;++t)e[t]()}function Nt(e,t,r){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ft(e,r||t.type,e,t),ys(t)||t.codemirrorIgnore}function Zo(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)wt(r,t[i])==-1&&r.push(t[i])}function It(e,t){return In(e,t).length>0}function ai(e){e.prototype.on=function(t,r){$e(this,t,r)},e.prototype.off=function(t,r){Gt(this,t,r)}}var Jo=30,Qo=$.Pass={toString:function(){return"CodeMirror.Pass"}},ir={scroll:!1},bs={origin:"*mouse"},ji={origin:"+move"};function zi(){this.id=null}zi.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Bt=$.countColumn=function(e,t,r,i,n){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=i||0,u=n||0;;){var y=e.indexOf("	",s);if(y<0||y>=t)return u+(t-s);u+=y-s,u+=r-u%r,s=y+1}},qo=$.findColumn=function(e,t,r){for(var i=0,n=0;;){var s=e.indexOf("	",i);s==-1&&(s=e.length);var u=s-i;if(s==e.length||n+u>=t)return i+Math.min(u,t-n);if(n+=s-i,n+=r-n%r,i=s+1,n>=t)return i}},Fn=[""];function ea(e){for(;Fn.length<=e;)Fn.push(qe(Fn)+" ");return Fn[e]}function qe(e){return e[e.length-1]}var li=function(e){e.select()};g?li=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(li=function(e){try{e.select()}catch{}});function wt(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function Wn(e,t){for(var r=[],i=0;i<e.length;i++)r[i]=t(e[i],i);return r}function Xi(){}function ta(e,t){var r;return Object.create?r=Object.create(e):(Xi.prototype=e,r=new Xi),t&&Ut(t,r),r}function Ut(e,t,r){t||(t={});for(var i in e)e.hasOwnProperty(i)&&(r!==!1||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function Gi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}var Ul=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ra=$.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ul.test(e))};function Bn(e,t){return t?t.source.indexOf("\\w")>-1&&ra(e)?!0:t.test(e):ra(e)}function ia(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var jl=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ki(e){return e.charCodeAt(0)>=768&&jl.test(e)}function Ae(e,t,r,i){var n=document.createElement(e);if(r&&(n.className=r),i&&(n.style.cssText=i),typeof t=="string")n.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)n.appendChild(t[s]);return n}var fr;document.createRange?fr=function(e,t,r,i){var n=document.createRange();return n.setEnd(i||e,r),n.setStart(e,t),n}:fr=function(e,t,r){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",t),i};function Ir(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function $t(e,t){return Ir(e).appendChild(t)}var ws=$.contains=function(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)};function Kt(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}a&&d<11&&(Kt=function(){try{return document.activeElement}catch{return document.body}});function Vi(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Yi=$.rmClass=function(e,t){var r=e.className,i=Vi(t).exec(r);if(i){var n=r.slice(i.index+i[0].length);e.className=r.slice(0,i.index)+(n?i[1]+n:"")}},Zi=$.addClass=function(e,t){var r=e.className;Vi(t).test(r)||(e.className+=(r?" ":"")+t)};function xs(e,t){for(var r=e.split(" "),i=0;i<r.length;i++)r[i]&&!Vi(r[i]).test(t)&&(t+=" "+r[i]);return t}function na(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&e(i)}}var sa=!1;function zl(){sa||(Xl(),sa=!0)}function Xl(){var e;$e(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,na(Xa)},100))}),$e(window,"blur",function(){na(Ai)})}var Gl=function(){if(a&&d<9)return!1;var e=Ae("div");return"draggable"in e||"dragDrop"in e}(),Cs;function Kl(e){if(Cs==null){var t=Ae("span","​");$t(e,Ae("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(Cs=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&d<8))}var r=Cs?Ae("span","​"):Ae("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var Ss;function Vl(e){if(Ss!=null)return Ss;var t=$t(e,document.createTextNode("AخA")),r=fr(t,0,1).getBoundingClientRect();if(!r||r.left==r.right)return!1;var i=fr(t,1,2).getBoundingClientRect();return Ss=i.right-r.right<3}var Yl=$.splitLines=`

b`.split(/\n/).length!=3?function(e){for(var t=0,r=[],i=e.length;t<=i;){var n=e.indexOf(`
`,t);n==-1&&(n=e.length);var s=e.slice(t,e.charAt(n-1)=="\r"?n-1:n),u=s.indexOf("\r");u!=-1?(r.push(s.slice(0,u)),t+=u+1):(r.push(s),t=n+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Zl=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},oa=function(){var e=Ae("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),ks=null;function Jl(e){if(ks!=null)return ks;var t=$t(e,Ae("span","x")),r=t.getBoundingClientRect(),i=fr(t,0,1).getBoundingClientRect();return ks=Math.abs(r.left-i.left)>1}var Fr=$.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var e=0;e<10;e++)Fr[e+48]=Fr[e+96]=String(e);for(var e=65;e<=90;e++)Fr[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Fr[e+111]=Fr[e+63235]="F"+e})();function Ql(e,t,r,i){if(!e)return i(t,r,"ltr");for(var n=!1,s=0;s<e.length;++s){var u=e[s];(u.from<r&&u.to>t||t==r&&u.to==t)&&(i(Math.max(u.from,t),Math.min(u.to,r),u.level==1?"rtl":"ltr"),n=!0)}n||i(t,r,"ltr")}function Ts(e){return e.level%2?e.to:e.from}function Ls(e){return e.level%2?e.from:e.to}function Un(e){var t=Wt(e);return t?Ts(t[0]):0}function jn(e){var t=Wt(e);return t?Ls(qe(t)):e.text.length}function aa(e,t){var r=Oe(e.doc,t),i=zt(r);i!=r&&(t=tt(i));var n=Wt(i),s=n?n[0].level%2?jn(i):Un(i):0;return fe(t,s)}function ql(e,t){for(var r,i=Oe(e.doc,t);r=Hi(i);)i=r.find(1,!0).line,t=null;var n=Wt(i),s=n?n[0].level%2?Un(i):jn(i):i.text.length;return fe(t??tt(i),s)}function la(e,t){var r=aa(e,t.line),i=Oe(e.doc,r.line),n=Wt(i);if(!n||n[0].level==0){var s=Math.max(0,i.text.search(/\S/)),u=t.line==r.line&&t.ch<=s&&t.ch;return fe(r.line,u?0:s)}return r}function eu(e,t,r){var i=e[0].level;return t==i?!0:r==i?!1:t<r}var Ji;function zn(e,t){Ji=null;for(var r=0,i;r<e.length;++r){var n=e[r];if(n.from<t&&n.to>t)return r;if(n.from==t||n.to==t)if(i==null)i=r;else return eu(e,n.level,e[i].level)?(n.from!=n.to&&(Ji=i),r):(n.from!=n.to&&(Ji=r),i)}return i}function Es(e,t,r,i){if(!i)return t+r;do t+=r;while(t>0&&Ki(e.text.charAt(t)));return t}function Ms(e,t,r,i){var n=Wt(e);if(!n)return ua(e,t,r,i);for(var s=zn(n,t),u=n[s],y=Es(e,t,u.level%2?-r:r,i);;){if(y>u.from&&y<u.to)return y;if(y==u.from||y==u.to)return zn(n,y)==s?y:(u=n[s+=r],r>0==u.level%2?u.to:u.from);if(u=n[s+=r],!u)return null;r>0==u.level%2?y=Es(e,u.to,-1,i):y=Es(e,u.from,1,i)}}function ua(e,t,r,i){var n=t+r;if(i)for(;n>0&&Ki(e.text.charAt(n));)n+=r;return n<0||n>e.text.length?null:n}var tu=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function r(j){return j<=247?e.charAt(j):1424<=j&&j<=1524?"R":1536<=j&&j<=1773?t.charAt(j-1536):1774<=j&&j<=2220?"r":8192<=j&&j<=8203?"w":j==8204?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,s=/[LRr]/,u=/[Lb1n]/,y=/[1n]/,P="L";function H(j,U,K){this.level=j,this.from=U,this.to=K}return function(j){if(!i.test(j))return!1;for(var U=j.length,K=[],V=0,ee;V<U;++V)K.push(ee=r(j.charCodeAt(V)));for(var V=0,ve=P;V<U;++V){var ee=K[V];ee=="m"?K[V]=ve:ve=ee}for(var V=0,xe=P;V<U;++V){var ee=K[V];ee=="1"&&xe=="r"?K[V]="n":s.test(ee)&&(xe=ee,ee=="r"&&(K[V]="R"))}for(var V=1,ve=K[0];V<U-1;++V){var ee=K[V];ee=="+"&&ve=="1"&&K[V+1]=="1"?K[V]="1":ee==","&&ve==K[V+1]&&(ve=="1"||ve=="n")&&(K[V]=ve),ve=ee}for(var V=0;V<U;++V){var ee=K[V];if(ee==",")K[V]="N";else if(ee=="%"){for(var Ce=V+1;Ce<U&&K[Ce]=="%";++Ce);for(var He=V&&K[V-1]=="!"||Ce<U&&K[Ce]=="1"?"1":"N",Se=V;Se<Ce;++Se)K[Se]=He;V=Ce-1}}for(var V=0,xe=P;V<U;++V){var ee=K[V];xe=="L"&&ee=="1"?K[V]="L":s.test(ee)&&(xe=ee)}for(var V=0;V<U;++V)if(n.test(K[V])){for(var Ce=V+1;Ce<U&&n.test(K[Ce]);++Ce);for(var je=(V?K[V-1]:P)=="L",Ee=(Ce<U?K[Ce]:P)=="L",He=je||Ee?"L":"R",Se=V;Se<Ce;++Se)K[Se]=He;V=Ce-1}for(var _e=[],Ve,V=0;V<U;)if(u.test(K[V])){var lt=V;for(++V;V<U&&u.test(K[V]);++V);_e.push(new H(0,lt,V))}else{var xt=V,pt=_e.length;for(++V;V<U&&K[V]!="L";++V);for(var Se=xt;Se<V;)if(y.test(K[Se])){xt<Se&&_e.splice(pt,0,new H(1,xt,Se));var Vt=Se;for(++Se;Se<V&&y.test(K[Se]);++Se);_e.splice(pt,0,new H(2,Vt,Se)),xt=Se}else++Se;xt<V&&_e.splice(pt,0,new H(1,xt,V))}return _e[0].level==1&&(Ve=j.match(/^\s+/))&&(_e[0].from=Ve[0].length,_e.unshift(new H(0,0,Ve[0].length))),qe(_e).level==1&&(Ve=j.match(/\s+$/))&&(qe(_e).to-=Ve[0].length,_e.push(new H(0,U-Ve[0].length,U))),_e[0].level==2&&_e.unshift(new H(1,_e[0].to,_e[0].to)),_e[0].level!=qe(_e).level&&_e.push(new H(_e[0].level,U,U)),_e}}();return $.version="5.8.0",$})},{}],31:[function(o,M,T){(function(l){l(typeof T=="object"&&typeof M=="object"?o("../../lib/codemirror"):CodeMirror)})(function(l){l.defineMode("clike",function(f,p){var k=f.indentUnit,c=p.statementIndentUnit||k,O=p.dontAlignCalls,C=p.keywords||{},D=p.types||{},$=p.builtin||{},W=p.blockKeywords||{},B=p.defKeywords||{},Z=p.atoms||{},Q=p.hooks||{},ce=p.multiLineStrings,te=p.indentStatements!==!1,ae=p.indentSwitch!==!1,pe=p.namespaceSeparator,be=p.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,se=p.isNumberChar||/\d/,ie=p.isOperatorChar||/[+\-*&%=<>!?|\/]/,we=p.endStatement||/^[;:,]$/,re,Me;function ge(z,F){var I=z.next();if(Q[I]){var G=Q[I](z,F);if(G!==!1)return G}if(I=='"'||I=="'")return F.tokenize=ye(I),F.tokenize(z,F);if(be.test(I))return re=I,null;if(se.test(I))return z.eatWhile(/[\w\.]/),"number";if(I=="/"){if(z.eat("*"))return F.tokenize=me,me(z,F);if(z.eat("/"))return z.skipToEnd(),"comment"}if(ie.test(I))return z.eatWhile(ie),"operator";if(z.eatWhile(/[\w\$_\xa1-\uffff]/),pe)for(;z.match(pe);)z.eatWhile(/[\w\$_\xa1-\uffff]/);var X=z.current();return x(C,X)?(x(W,X)&&(re="newstatement"),x(B,X)&&(Me=!0),"keyword"):x(D,X)?"variable-3":x($,X)?(x(W,X)&&(re="newstatement"),"builtin"):x(Z,X)?"atom":"variable"}function ye(z){return function(F,I){for(var G=!1,X,le=!1;(X=F.next())!=null;){if(X==z&&!G){le=!0;break}G=!G&&X=="\\"}return(le||!(G||ce))&&(I.tokenize=null),"string"}}function me(z,F){for(var I=!1,G;G=z.next();){if(G=="/"&&I){F.tokenize=null;break}I=G=="*"}return"comment"}function De(z,F,I,G,X){this.indented=z,this.column=F,this.type=I,this.align=G,this.prev=X}function Ge(z){return z=="statement"||z=="switchstatement"||z=="namespace"}function Xe(z,F,I){var G=z.indented;return z.context&&Ge(z.context.type)&&!Ge(I)&&(G=z.context.indented),z.context=new De(G,F,I,null,z.context)}function et(z){var F=z.context.type;return(F==")"||F=="]"||F=="}")&&(z.indented=z.context.indented),z.context=z.context.prev}function ct(z,F){if(F.prevToken=="variable"||F.prevToken=="variable-3"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(z.string.slice(0,z.start)))return!0}function J(z){for(;;){if(!z||z.type=="top")return!0;if(z.type=="}"&&z.prev.type!="namespace")return!1;z=z.prev}}return{startState:function(z){return{tokenize:null,context:new De((z||0)-k,0,"top",!1),indented:0,startOfLine:!0,prevToken:null}},token:function(z,F){var I=F.context;if(z.sol()&&(I.align==null&&(I.align=!1),F.indented=z.indentation(),F.startOfLine=!0),z.eatSpace())return null;re=Me=null;var G=(F.tokenize||ge)(z,F);if(G=="comment"||G=="meta")return G;if(I.align==null&&(I.align=!0),we.test(re))for(;Ge(F.context.type);)et(F);else if(re=="{")Xe(F,z.column(),"}");else if(re=="[")Xe(F,z.column(),"]");else if(re=="(")Xe(F,z.column(),")");else if(re=="}"){for(;Ge(I.type);)I=et(F);for(I.type=="}"&&(I=et(F));Ge(I.type);)I=et(F)}else if(re==I.type)et(F);else if(te&&((I.type=="}"||I.type=="top")&&re!=";"||Ge(I.type)&&re=="newstatement")){var X="statement";re=="newstatement"&&ae&&z.current()=="switch"?X="switchstatement":G=="keyword"&&z.current()=="namespace"&&(X="namespace"),Xe(F,z.column(),X)}if(G=="variable"&&(F.prevToken=="def"||p.typeFirstDefinitions&&ct(z,F)&&J(F.context)&&z.match(/^\s*\(/,!1))&&(G="def"),Q.token){var le=Q.token(z,F,G);le!==void 0&&(G=le)}return G=="def"&&p.styleDefs===!1&&(G="variable"),F.startOfLine=!1,F.prevToken=Me?"def":G||re,G},indent:function(z,F){if(z.tokenize!=ge&&z.tokenize!=null)return l.Pass;var I=z.context,G=F&&F.charAt(0);if(Ge(I.type)&&G=="}"&&(I=I.prev),Q.indent){var X=Q.indent(z,I,F);if(typeof X=="number")return X}var le=G==I.type,oe=I.prev&&I.prev.type=="switchstatement";return Ge(I.type)?I.indented+(G=="{"?0:c):I.align&&(!O||I.type!=")")?I.column+(le?0:1):I.type==")"&&!le?I.indented+c:I.indented+(le?0:k)+(!le&&oe&&!/^(?:case|default)\b/.test(F)?k:0)},electricInput:ae?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});function h(f){for(var p={},k=f.split(" "),c=0;c<k.length;++c)p[k[c]]=!0;return p}function x(f,p){return typeof f=="function"?f(p):f.propertyIsEnumerable(p)}var w="auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile",b="int long char short double float unsigned signed void size_t ptrdiff_t";function a(f,p){if(!p.startOfLine)return!1;for(;;)if(f.skipTo("\\")){if(f.next(),f.eol()){p.tokenize=a;break}}else{f.skipToEnd(),p.tokenize=null;break}return"meta"}function d(f,p){return p.prevToken=="variable-3"?"variable-3":!1}function E(f){return f.eatWhile(/[\w\.']/),"number"}function m(f,p){if(f.backUp(1),f.match(/(R|u8R|uR|UR|LR)/)){var k=f.match(/"([^\s\\()]{0,16})\(/);return k?(p.cpp11RawStringDelim=k[1],p.tokenize=A,A(f,p)):!1}return f.match(/(u8|u|U|L)/)?f.match(/["']/,!1)?"string":!1:(f.next(),!1)}function v(f){var p=/(\w+)::(\w+)$/.exec(f);return p&&p[1]==p[2]}function R(f,p){for(var k;(k=f.next())!=null;)if(k=='"'&&!f.eat('"')){p.tokenize=null;break}return"string"}function A(f,p){var k=p.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),c=f.match(new RegExp(".*?\\)"+k+'"'));return c?p.tokenize=null:f.skipToEnd(),"string"}function L(f,p){typeof f=="string"&&(f=[f]);var k=[];function c(C){if(C)for(var D in C)C.hasOwnProperty(D)&&k.push(D)}c(p.keywords),c(p.types),c(p.builtin),c(p.atoms),k.length&&(p.helperType=f[0],l.registerHelper("hintWords",f[0],k));for(var O=0;O<f.length;++O)l.defineMIME(f[O],p)}L(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:h(w),types:h(b+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:h("case do else for if switch while struct"),defKeywords:h("struct"),typeFirstDefinitions:!0,atoms:h("null true false"),hooks:{"#":a,"*":d},modeProps:{fold:["brace","include"]}}),L(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:h(w+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:h(b+" bool wchar_t"),blockKeywords:h("catch class do else finally for if struct switch try while"),defKeywords:h("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"#":a,"*":d,u:m,U:m,L:m,R:m,0:E,1:E,2:E,3:E,4:E,5:E,6:E,7:E,8:E,9:E,token:function(f,p,k){if(k=="variable"&&f.peek()=="("&&(p.prevToken==";"||p.prevToken==null||p.prevToken=="}")&&v(f.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),L("text/x-java",{name:"clike",keywords:h("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:h("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:h("catch class do else finally for if switch try while"),defKeywords:h("class interface package enum"),typeFirstDefinitions:!0,atoms:h("true false null"),endStatement:/^[;:]$/,hooks:{"@":function(f){return f.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),L("text/x-csharp",{name:"clike",keywords:h("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:h("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:h("catch class do else finally for foreach if struct switch try while"),defKeywords:h("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"@":function(f,p){return f.eat('"')?(p.tokenize=R,R(f,p)):(f.eatWhile(/[\w\$_]/),"meta")}}});function _(f,p){for(var k=!1;!f.eol();){if(!k&&f.match('"""')){p.tokenize=null;break}k=f.next()=="\\"&&!k}return"string"}L("text/x-scala",{name:"clike",keywords:h("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:h("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:h("catch class do else finally for forSome if match switch try while"),defKeywords:h("class def object package trait type val var"),atoms:h("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(f){return f.eatWhile(/[\w\$_]/),"meta"},'"':function(f,p){return f.match('""')?(p.tokenize=_,p.tokenize(f,p)):!1},"'":function(f){return f.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"}},modeProps:{closeBrackets:{triples:'"'}}}),L("text/x-kotlin",{name:"clike",keywords:h("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as?file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline"),types:h("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:h("catch class do else finally for if where try while enum"),defKeywords:h("class val var object package interface fun"),atoms:h("true false null this"),modeProps:{closeBrackets:{triples:'"'}}}),L(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:h("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:h("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:h("for while do if else struct"),builtin:h("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:h("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":a},modeProps:{fold:["brace","include"]}}),L("text/x-nesc",{name:"clike",keywords:h(w+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:h(b),blockKeywords:h("case do else for if switch while struct"),atoms:h("null true false"),hooks:{"#":a},modeProps:{fold:["brace","include"]}}),L("text/x-objectivec",{name:"clike",keywords:h(w+"inline restrict _Bool _Complex _Imaginery BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:h(b),atoms:h("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(f){return f.eatWhile(/[\w\$]/),"keyword"},"#":a,indent:function(f,p,k){if(p.type=="statement"&&/^@\w/.test(k))return p.indented}},modeProps:{fold:"brace"}}),L("text/x-squirrel",{name:"clike",keywords:h("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:h(b),blockKeywords:h("case catch class else for foreach if switch try while"),defKeywords:h("function local class"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"#":a},modeProps:{fold:["brace","include"]}});var g=null;function S(f){return function(p,k){for(var c=!1,O,C=!1;!p.eol();){if(!c&&p.match('"')&&(f=="single"||p.match('""'))){C=!0;break}if(!c&&p.match("``")){g=S(f),C=!0;break}O=p.next(),c=f=="single"&&!c&&O=="\\"}return C&&(k.tokenize=null),"string"}}L("text/x-ceylon",{name:"clike",keywords:h("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(f){var p=f.charAt(0);return p===p.toUpperCase()&&p!==p.toLowerCase()},blockKeywords:h("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:h("class dynamic function interface module object package value"),builtin:h("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,isNumberChar:/[\d#$]/,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:h("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(f){return f.eatWhile(/[\w\$_]/),"meta"},'"':function(f,p){return p.tokenize=S(f.match('""')?"triple":"single"),p.tokenize(f,p)},"`":function(f,p){return!g||!f.match("`")?!1:(p.tokenize=g,g=null,p.tokenize(f,p))},"'":function(f){return f.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(f,p,k){if((k=="variable"||k=="variable-3")&&p.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})},{"../../lib/codemirror":30}],32:[function(o,M,T){o("../modules/web.dom.iterable"),o("../modules/es6.string.iterator"),M.exports=o("../modules/core.get-iterator")},{"../modules/core.get-iterator":95,"../modules/es6.string.iterator":104,"../modules/web.dom.iterable":106}],33:[function(o,M,T){o("../../modules/es6.object.assign"),M.exports=o("../../modules/$.core").Object.assign},{"../../modules/$.core":49,"../../modules/es6.object.assign":97}],34:[function(o,M,T){var l=o("../../modules/$");M.exports=function(x,w){return l.create(x,w)}},{"../../modules/$":71}],35:[function(o,M,T){var l=o("../../modules/$");M.exports=function(x,w,b){return l.setDesc(x,w,b)}},{"../../modules/$":71}],36:[function(o,M,T){var l=o("../../modules/$");o("../../modules/es6.object.get-own-property-descriptor"),M.exports=function(x,w){return l.getDesc(x,w)}},{"../../modules/$":71,"../../modules/es6.object.get-own-property-descriptor":98}],37:[function(o,M,T){o("../../modules/es6.object.keys"),M.exports=o("../../modules/$.core").Object.keys},{"../../modules/$.core":49,"../../modules/es6.object.keys":99}],38:[function(o,M,T){o("../../modules/es6.object.set-prototype-of"),M.exports=o("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":49,"../../modules/es6.object.set-prototype-of":100}],39:[function(o,M,T){o("../modules/es6.object.to-string"),o("../modules/es6.string.iterator"),o("../modules/web.dom.iterable"),o("../modules/es6.promise"),M.exports=o("../modules/$.core").Promise},{"../modules/$.core":49,"../modules/es6.object.to-string":101,"../modules/es6.promise":102,"../modules/es6.string.iterator":104,"../modules/web.dom.iterable":106}],40:[function(o,M,T){o("../modules/es6.object.to-string"),o("../modules/es6.string.iterator"),o("../modules/web.dom.iterable"),o("../modules/es6.set"),o("../modules/es7.set.to-json"),M.exports=o("../modules/$.core").Set},{"../modules/$.core":49,"../modules/es6.object.to-string":101,"../modules/es6.set":103,"../modules/es6.string.iterator":104,"../modules/es7.set.to-json":105,"../modules/web.dom.iterable":106}],41:[function(o,M,T){M.exports=function(l){if(typeof l!="function")throw TypeError(l+" is not a function!");return l}},{}],42:[function(o,M,T){M.exports=function(){}},{}],43:[function(o,M,T){var l=o("./$.is-object");M.exports=function(h){if(!l(h))throw TypeError(h+" is not an object!");return h}},{"./$.is-object":64}],44:[function(o,M,T){var l=o("./$.cof"),h=o("./$.wks")("toStringTag"),x=l(function(){return arguments}())=="Arguments";M.exports=function(w){var b,a,d;return w===void 0?"Undefined":w===null?"Null":typeof(a=(b=Object(w))[h])=="string"?a:x?l(b):(d=l(b))=="Object"&&typeof b.callee=="function"?"Arguments":d}},{"./$.cof":45,"./$.wks":93}],45:[function(o,M,T){var l={}.toString;M.exports=function(h){return l.call(h).slice(8,-1)}},{}],46:[function(o,M,T){var l=o("./$"),h=o("./$.hide"),x=o("./$.redefine-all"),w=o("./$.ctx"),b=o("./$.strict-new"),a=o("./$.defined"),d=o("./$.for-of"),E=o("./$.iter-define"),m=o("./$.iter-step"),v=o("./$.uid")("id"),R=o("./$.has"),A=o("./$.is-object"),L=o("./$.set-species"),_=o("./$.descriptors"),g=Object.isExtensible||A,S=_?"_s":"size",f=0,p=function(c,O){if(!A(c))return typeof c=="symbol"?c:(typeof c=="string"?"S":"P")+c;if(!R(c,v)){if(!g(c))return"F";if(!O)return"E";h(c,v,++f)}return"O"+c[v]},k=function(c,O){var C=p(O),D;if(C!=="F")return c._i[C];for(D=c._f;D;D=D.n)if(D.k==O)return D};M.exports={getConstructor:function(c,O,C,D){var $=c(function(W,B){b(W,$,O),W._i=l.create(null),W._f=void 0,W._l=void 0,W[S]=0,B!=null&&d(B,C,W[D],W)});return x($.prototype,{clear:function(){for(var B=this,Z=B._i,Q=B._f;Q;Q=Q.n)Q.r=!0,Q.p&&(Q.p=Q.p.n=void 0),delete Z[Q.i];B._f=B._l=void 0,B[S]=0},delete:function(W){var B=this,Z=k(B,W);if(Z){var Q=Z.n,ce=Z.p;delete B._i[Z.i],Z.r=!0,ce&&(ce.n=Q),Q&&(Q.p=ce),B._f==Z&&(B._f=Q),B._l==Z&&(B._l=ce),B[S]--}return!!Z},forEach:function(B){for(var Z=w(B,arguments.length>1?arguments[1]:void 0,3),Q;Q=Q?Q.n:this._f;)for(Z(Q.v,Q.k,this);Q&&Q.r;)Q=Q.p},has:function(B){return!!k(this,B)}}),_&&l.setDesc($.prototype,"size",{get:function(){return a(this[S])}}),$},def:function(c,O,C){var D=k(c,O),$,W;return D?D.v=C:(c._l=D={i:W=p(O,!0),k:O,v:C,p:$=c._l,n:void 0,r:!1},c._f||(c._f=D),$&&($.n=D),c[S]++,W!=="F"&&(c._i[W]=D)),c},getEntry:k,setStrong:function(c,O,C){E(c,O,function(D,$){this._t=D,this._k=$,this._l=void 0},function(){for(var D=this,$=D._k,W=D._l;W&&W.r;)W=W.p;return!D._t||!(D._l=W=W?W.n:D._t._f)?(D._t=void 0,m(1)):$=="keys"?m(0,W.k):$=="values"?m(0,W.v):m(0,[W.k,W.v])},C?"entries":"values",!C,!0),L(O)}}},{"./$":71,"./$.ctx":50,"./$.defined":51,"./$.descriptors":52,"./$.for-of":56,"./$.has":58,"./$.hide":59,"./$.is-object":64,"./$.iter-define":67,"./$.iter-step":69,"./$.redefine-all":77,"./$.set-species":81,"./$.strict-new":85,"./$.uid":92}],47:[function(o,M,T){var l=o("./$.for-of"),h=o("./$.classof");M.exports=function(x){return function(){if(h(this)!=x)throw TypeError(x+"#toJSON isn't generic");var b=[];return l(this,!1,b.push,b),b}}},{"./$.classof":44,"./$.for-of":56}],48:[function(o,M,T){var l=o("./$"),h=o("./$.global"),x=o("./$.export"),w=o("./$.fails"),b=o("./$.hide"),a=o("./$.redefine-all"),d=o("./$.for-of"),E=o("./$.strict-new"),m=o("./$.is-object"),v=o("./$.set-to-string-tag"),R=o("./$.descriptors");M.exports=function(A,L,_,g,S,f){var p=h[A],k=p,c=S?"set":"add",O=k&&k.prototype,C={};return!R||typeof k!="function"||!(f||O.forEach&&!w(function(){new k().entries().next()}))?(k=g.getConstructor(L,A,S,c),a(k.prototype,_)):(k=L(function(D,$){E(D,k,A),D._c=new p,$!=null&&d($,S,D[c],D)}),l.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(D){var $=D=="add"||D=="set";D in O&&!(f&&D=="clear")&&b(k.prototype,D,function(W,B){if(!$&&f&&!m(W))return D=="get"?void 0:!1;var Z=this._c[D](W===0?0:W,B);return $?this:Z})}),"size"in O&&l.setDesc(k.prototype,"size",{get:function(){return this._c.size}})),v(k,A),C[A]=k,x(x.G+x.W+x.F,C),f||g.setStrong(k,A,S),k}},{"./$":71,"./$.descriptors":52,"./$.export":54,"./$.fails":55,"./$.for-of":56,"./$.global":57,"./$.hide":59,"./$.is-object":64,"./$.redefine-all":77,"./$.set-to-string-tag":82,"./$.strict-new":85}],49:[function(o,M,T){var l=M.exports={version:"1.2.6"};typeof __e=="number"&&(__e=l)},{}],50:[function(o,M,T){var l=o("./$.a-function");M.exports=function(h,x,w){if(l(h),x===void 0)return h;switch(w){case 1:return function(b){return h.call(x,b)};case 2:return function(b,a){return h.call(x,b,a)};case 3:return function(b,a,d){return h.call(x,b,a,d)}}return function(){return h.apply(x,arguments)}}},{"./$.a-function":41}],51:[function(o,M,T){M.exports=function(l){if(l==null)throw TypeError("Can't call method on  "+l);return l}},{}],52:[function(o,M,T){M.exports=!o("./$.fails")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},{"./$.fails":55}],53:[function(o,M,T){var l=o("./$.is-object"),h=o("./$.global").document,x=l(h)&&l(h.createElement);M.exports=function(w){return x?h.createElement(w):{}}},{"./$.global":57,"./$.is-object":64}],54:[function(o,M,T){var l=o("./$.global"),h=o("./$.core"),x=o("./$.ctx"),w="prototype",b=function(a,d,E){var m=a&b.F,v=a&b.G,R=a&b.S,A=a&b.P,L=a&b.B,_=a&b.W,g=v?h:h[d]||(h[d]={}),S=v?l:R?l[d]:(l[d]||{})[w],f,p,k;v&&(E=d);for(f in E)p=!m&&S&&f in S,!(p&&f in g)&&(k=p?S[f]:E[f],g[f]=v&&typeof S[f]!="function"?E[f]:L&&p?x(k,l):_&&S[f]==k?function(c){var O=function(C){return this instanceof c?new c(C):c(C)};return O[w]=c[w],O}(k):A&&typeof k=="function"?x(Function.call,k):k,A&&((g[w]||(g[w]={}))[f]=k))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,M.exports=b},{"./$.core":49,"./$.ctx":50,"./$.global":57}],55:[function(o,M,T){M.exports=function(l){try{return!!l()}catch{return!0}}},{}],56:[function(o,M,T){var l=o("./$.ctx"),h=o("./$.iter-call"),x=o("./$.is-array-iter"),w=o("./$.an-object"),b=o("./$.to-length"),a=o("./core.get-iterator-method");M.exports=function(d,E,m,v){var R=a(d),A=l(m,v,E?2:1),L=0,_,g,S;if(typeof R!="function")throw TypeError(d+" is not iterable!");if(x(R))for(_=b(d.length);_>L;L++)E?A(w(g=d[L])[0],g[1]):A(d[L]);else for(S=R.call(d);!(g=S.next()).done;)h(S,A,g.value,E)}},{"./$.an-object":43,"./$.ctx":50,"./$.is-array-iter":63,"./$.iter-call":65,"./$.to-length":90,"./core.get-iterator-method":94}],57:[function(o,M,T){var l=M.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=l)},{}],58:[function(o,M,T){var l={}.hasOwnProperty;M.exports=function(h,x){return l.call(h,x)}},{}],59:[function(o,M,T){var l=o("./$"),h=o("./$.property-desc");M.exports=o("./$.descriptors")?function(x,w,b){return l.setDesc(x,w,h(1,b))}:function(x,w,b){return x[w]=b,x}},{"./$":71,"./$.descriptors":52,"./$.property-desc":76}],60:[function(o,M,T){M.exports=o("./$.global").document&&document.documentElement},{"./$.global":57}],61:[function(o,M,T){M.exports=function(l,h,x){var w=x===void 0;switch(h.length){case 0:return w?l():l.call(x);case 1:return w?l(h[0]):l.call(x,h[0]);case 2:return w?l(h[0],h[1]):l.call(x,h[0],h[1]);case 3:return w?l(h[0],h[1],h[2]):l.call(x,h[0],h[1],h[2]);case 4:return w?l(h[0],h[1],h[2],h[3]):l.call(x,h[0],h[1],h[2],h[3])}return l.apply(x,h)}},{}],62:[function(o,M,T){var l=o("./$.cof");M.exports=Object("z").propertyIsEnumerable(0)?Object:function(h){return l(h)=="String"?h.split(""):Object(h)}},{"./$.cof":45}],63:[function(o,M,T){var l=o("./$.iterators"),h=o("./$.wks")("iterator"),x=Array.prototype;M.exports=function(w){return w!==void 0&&(l.Array===w||x[h]===w)}},{"./$.iterators":70,"./$.wks":93}],64:[function(o,M,T){M.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},{}],65:[function(o,M,T){var l=o("./$.an-object");M.exports=function(h,x,w,b){try{return b?x(l(w)[0],w[1]):x(w)}catch(d){var a=h.return;throw a!==void 0&&l(a.call(h)),d}}},{"./$.an-object":43}],66:[function(o,M,T){var l=o("./$"),h=o("./$.property-desc"),x=o("./$.set-to-string-tag"),w={};o("./$.hide")(w,o("./$.wks")("iterator"),function(){return this}),M.exports=function(b,a,d){b.prototype=l.create(w,{next:h(1,d)}),x(b,a+" Iterator")}},{"./$":71,"./$.hide":59,"./$.property-desc":76,"./$.set-to-string-tag":82,"./$.wks":93}],67:[function(o,M,T){var l=o("./$.library"),h=o("./$.export"),x=o("./$.redefine"),w=o("./$.hide"),b=o("./$.has"),a=o("./$.iterators"),d=o("./$.iter-create"),E=o("./$.set-to-string-tag"),m=o("./$").getProto,v=o("./$.wks")("iterator"),R=!([].keys&&"next"in[].keys()),A="@@iterator",L="keys",_="values",g=function(){return this};M.exports=function(S,f,p,k,c,O,C){d(p,f,k);var D=function(be){if(!R&&be in Z)return Z[be];switch(be){case L:return function(){return new p(this,be)};case _:return function(){return new p(this,be)}}return function(){return new p(this,be)}},$=f+" Iterator",W=c==_,B=!1,Z=S.prototype,Q=Z[v]||Z[A]||c&&Z[c],ce=Q||D(c),te,ae;if(Q){var pe=m(ce.call(new S));E(pe,$,!0),!l&&b(Z,A)&&w(pe,v,g),W&&Q.name!==_&&(B=!0,ce=function(){return Q.call(this)})}if((!l||C)&&(R||B||!Z[v])&&w(Z,v,ce),a[f]=ce,a[$]=g,c)if(te={values:W?ce:D(_),keys:O?ce:D(L),entries:W?D("entries"):ce},C)for(ae in te)ae in Z||x(Z,ae,te[ae]);else h(h.P+h.F*(R||B),f,te);return te}},{"./$":71,"./$.export":54,"./$.has":58,"./$.hide":59,"./$.iter-create":66,"./$.iterators":70,"./$.library":72,"./$.redefine":78,"./$.set-to-string-tag":82,"./$.wks":93}],68:[function(o,M,T){var l=o("./$.wks")("iterator"),h=!1;try{var x=[7][l]();x.return=function(){h=!0},Array.from(x,function(){throw 2})}catch{}M.exports=function(w,b){if(!b&&!h)return!1;var a=!1;try{var d=[7],E=d[l]();E.next=function(){return{done:a=!0}},d[l]=function(){return E},w(d)}catch{}return a}},{"./$.wks":93}],69:[function(o,M,T){M.exports=function(l,h){return{value:h,done:!!l}}},{}],70:[function(o,M,T){M.exports={}},{}],71:[function(o,M,T){var l=Object;M.exports={create:l.create,getProto:l.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:l.getOwnPropertyDescriptor,setDesc:l.defineProperty,setDescs:l.defineProperties,getKeys:l.keys,getNames:l.getOwnPropertyNames,getSymbols:l.getOwnPropertySymbols,each:[].forEach}},{}],72:[function(o,M,T){M.exports=!0},{}],73:[function(o,M,T){var l=o("./$.global"),h=o("./$.task").set,x=l.MutationObserver||l.WebKitMutationObserver,w=l.process,b=l.Promise,a=o("./$.cof")(w)=="process",d,E,m,v=function(){var L,_,g;for(a&&(L=w.domain)&&(w.domain=null,L.exit());d;)_=d.domain,g=d.fn,_&&_.enter(),g(),_&&_.exit(),d=d.next;E=void 0,L&&L.enter()};if(a)m=function(){w.nextTick(v)};else if(x){var R=1,A=document.createTextNode("");new x(v).observe(A,{characterData:!0}),m=function(){A.data=R=-R}}else b&&b.resolve?m=function(){b.resolve().then(v)}:m=function(){h.call(l,v)};M.exports=function(_){var g={fn:_,next:void 0,domain:a&&w.domain};E&&(E.next=g),d||(d=g,m()),E=g}},{"./$.cof":45,"./$.global":57,"./$.task":87}],74:[function(o,M,T){var l=o("./$"),h=o("./$.to-object"),x=o("./$.iobject");M.exports=o("./$.fails")(function(){var w=Object.assign,b={},a={},d=Symbol(),E="abcdefghijklmnopqrst";return b[d]=7,E.split("").forEach(function(m){a[m]=m}),w({},b)[d]!=7||Object.keys(w({},a)).join("")!=E})?function(b,a){for(var d=h(b),E=arguments,m=E.length,v=1,R=l.getKeys,A=l.getSymbols,L=l.isEnum;m>v;)for(var _=x(E[v++]),g=A?R(_).concat(A(_)):R(_),S=g.length,f=0,p;S>f;)L.call(_,p=g[f++])&&(d[p]=_[p]);return d}:Object.assign},{"./$":71,"./$.fails":55,"./$.iobject":62,"./$.to-object":91}],75:[function(o,M,T){var l=o("./$.export"),h=o("./$.core"),x=o("./$.fails");M.exports=function(w,b){var a=(h.Object||{})[w]||Object[w],d={};d[w]=b(a),l(l.S+l.F*x(function(){a(1)}),"Object",d)}},{"./$.core":49,"./$.export":54,"./$.fails":55}],76:[function(o,M,T){M.exports=function(l,h){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:h}}},{}],77:[function(o,M,T){var l=o("./$.redefine");M.exports=function(h,x){for(var w in x)l(h,w,x[w]);return h}},{"./$.redefine":78}],78:[function(o,M,T){M.exports=o("./$.hide")},{"./$.hide":59}],79:[function(o,M,T){M.exports=Object.is||function(h,x){return h===x?h!==0||1/h===1/x:h!=h&&x!=x}},{}],80:[function(o,M,T){var l=o("./$").getDesc,h=o("./$.is-object"),x=o("./$.an-object"),w=function(b,a){if(x(b),!h(a)&&a!==null)throw TypeError(a+": can't set as prototype!")};M.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,a,d){try{d=o("./$.ctx")(Function.call,l(Object.prototype,"__proto__").set,2),d(b,[]),a=!(b instanceof Array)}catch{a=!0}return function(m,v){return w(m,v),a?m.__proto__=v:d(m,v),m}}({},!1):void 0),check:w}},{"./$":71,"./$.an-object":43,"./$.ctx":50,"./$.is-object":64}],81:[function(o,M,T){var l=o("./$.core"),h=o("./$"),x=o("./$.descriptors"),w=o("./$.wks")("species");M.exports=function(b){var a=l[b];x&&a&&!a[w]&&h.setDesc(a,w,{configurable:!0,get:function(){return this}})}},{"./$":71,"./$.core":49,"./$.descriptors":52,"./$.wks":93}],82:[function(o,M,T){var l=o("./$").setDesc,h=o("./$.has"),x=o("./$.wks")("toStringTag");M.exports=function(w,b,a){w&&!h(w=a?w:w.prototype,x)&&l(w,x,{configurable:!0,value:b})}},{"./$":71,"./$.has":58,"./$.wks":93}],83:[function(o,M,T){var l=o("./$.global"),h="__core-js_shared__",x=l[h]||(l[h]={});M.exports=function(w){return x[w]||(x[w]={})}},{"./$.global":57}],84:[function(o,M,T){var l=o("./$.an-object"),h=o("./$.a-function"),x=o("./$.wks")("species");M.exports=function(w,b){var a=l(w).constructor,d;return a===void 0||(d=l(a)[x])==null?b:h(d)}},{"./$.a-function":41,"./$.an-object":43,"./$.wks":93}],85:[function(o,M,T){M.exports=function(l,h,x){if(!(l instanceof h))throw TypeError(x+": use the 'new' operator!");return l}},{}],86:[function(o,M,T){var l=o("./$.to-integer"),h=o("./$.defined");M.exports=function(x){return function(w,b){var a=String(h(w)),d=l(b),E=a.length,m,v;return d<0||d>=E?x?"":void 0:(m=a.charCodeAt(d),m<55296||m>56319||d+1===E||(v=a.charCodeAt(d+1))<56320||v>57343?x?a.charAt(d):m:x?a.slice(d,d+2):(m-55296<<10)+(v-56320)+65536)}}},{"./$.defined":51,"./$.to-integer":88}],87:[function(o,M,T){var l=o("./$.ctx"),h=o("./$.invoke"),x=o("./$.html"),w=o("./$.dom-create"),b=o("./$.global"),a=b.process,d=b.setImmediate,E=b.clearImmediate,m=b.MessageChannel,v=0,R={},A="onreadystatechange",L,_,g,S=function(){var p=+this;if(R.hasOwnProperty(p)){var k=R[p];delete R[p],k()}},f=function(p){S.call(p.data)};(!d||!E)&&(d=function(k){for(var c=[],O=1;arguments.length>O;)c.push(arguments[O++]);return R[++v]=function(){h(typeof k=="function"?k:Function(k),c)},L(v),v},E=function(k){delete R[k]},o("./$.cof")(a)=="process"?L=function(p){a.nextTick(l(S,p,1))}:m?(_=new m,g=_.port2,_.port1.onmessage=f,L=l(g.postMessage,g,1)):b.addEventListener&&typeof postMessage=="function"&&!b.importScripts?(L=function(p){b.postMessage(p+"","*")},b.addEventListener("message",f,!1)):A in w("script")?L=function(p){x.appendChild(w("script"))[A]=function(){x.removeChild(this),S.call(p)}}:L=function(p){setTimeout(l(S,p,1),0)}),M.exports={set:d,clear:E}},{"./$.cof":45,"./$.ctx":50,"./$.dom-create":53,"./$.global":57,"./$.html":60,"./$.invoke":61}],88:[function(o,M,T){var l=Math.ceil,h=Math.floor;M.exports=function(x){return isNaN(x=+x)?0:(x>0?h:l)(x)}},{}],89:[function(o,M,T){var l=o("./$.iobject"),h=o("./$.defined");M.exports=function(x){return l(h(x))}},{"./$.defined":51,"./$.iobject":62}],90:[function(o,M,T){var l=o("./$.to-integer"),h=Math.min;M.exports=function(x){return x>0?h(l(x),9007199254740991):0}},{"./$.to-integer":88}],91:[function(o,M,T){var l=o("./$.defined");M.exports=function(h){return Object(l(h))}},{"./$.defined":51}],92:[function(o,M,T){var l=0,h=Math.random();M.exports=function(x){return"Symbol(".concat(x===void 0?"":x,")_",(++l+h).toString(36))}},{}],93:[function(o,M,T){var l=o("./$.shared")("wks"),h=o("./$.uid"),x=o("./$.global").Symbol;M.exports=function(w){return l[w]||(l[w]=x&&x[w]||(x||h)("Symbol."+w))}},{"./$.global":57,"./$.shared":83,"./$.uid":92}],94:[function(o,M,T){var l=o("./$.classof"),h=o("./$.wks")("iterator"),x=o("./$.iterators");M.exports=o("./$.core").getIteratorMethod=function(w){if(w!=null)return w[h]||w["@@iterator"]||x[l(w)]}},{"./$.classof":44,"./$.core":49,"./$.iterators":70,"./$.wks":93}],95:[function(o,M,T){var l=o("./$.an-object"),h=o("./core.get-iterator-method");M.exports=o("./$.core").getIterator=function(x){var w=h(x);if(typeof w!="function")throw TypeError(x+" is not iterable!");return l(w.call(x))}},{"./$.an-object":43,"./$.core":49,"./core.get-iterator-method":94}],96:[function(o,M,T){var l=o("./$.add-to-unscopables"),h=o("./$.iter-step"),x=o("./$.iterators"),w=o("./$.to-iobject");M.exports=o("./$.iter-define")(Array,"Array",function(b,a){this._t=w(b),this._i=0,this._k=a},function(){var b=this._t,a=this._k,d=this._i++;return!b||d>=b.length?(this._t=void 0,h(1)):a=="keys"?h(0,d):a=="values"?h(0,b[d]):h(0,[d,b[d]])},"values"),x.Arguments=x.Array,l("keys"),l("values"),l("entries")},{"./$.add-to-unscopables":42,"./$.iter-define":67,"./$.iter-step":69,"./$.iterators":70,"./$.to-iobject":89}],97:[function(o,M,T){var l=o("./$.export");l(l.S+l.F,"Object",{assign:o("./$.object-assign")})},{"./$.export":54,"./$.object-assign":74}],98:[function(o,M,T){var l=o("./$.to-iobject");o("./$.object-sap")("getOwnPropertyDescriptor",function(h){return function(w,b){return h(l(w),b)}})},{"./$.object-sap":75,"./$.to-iobject":89}],99:[function(o,M,T){var l=o("./$.to-object");o("./$.object-sap")("keys",function(h){return function(w){return h(l(w))}})},{"./$.object-sap":75,"./$.to-object":91}],100:[function(o,M,T){var l=o("./$.export");l(l.S,"Object",{setPrototypeOf:o("./$.set-proto").set})},{"./$.export":54,"./$.set-proto":80}],101:[function(o,M,T){},{}],102:[function(o,M,T){var l=o("./$"),h=o("./$.library"),x=o("./$.global"),w=o("./$.ctx"),b=o("./$.classof"),a=o("./$.export"),d=o("./$.is-object"),E=o("./$.an-object"),m=o("./$.a-function"),v=o("./$.strict-new"),R=o("./$.for-of"),A=o("./$.set-proto").set,L=o("./$.same-value"),_=o("./$.wks")("species"),g=o("./$.species-constructor"),S=o("./$.microtask"),f="Promise",p=x.process,k=b(p)=="process",c=x[f],O=function(){},C,D=function(se){var ie=new c(O),we;return se&&(ie.constructor=function(re){re(O,O)}),(we=c.resolve(ie)).catch(O),we===ie},$=function(){var se=!1;function ie(re){var Me=new c(re);return A(Me,ie.prototype),Me}try{if(se=c&&c.resolve&&D(),A(ie,c),ie.prototype=l.create(c.prototype,{constructor:{value:ie}}),ie.resolve(5).then(function(){})instanceof ie||(se=!1),se&&o("./$.descriptors")){var we=!1;c.resolve(l.setDesc({},"then",{get:function(){we=!0}})),se=we}}catch{se=!1}return se}(),W=function(se,ie){return h&&se===c&&ie===C?!0:L(se,ie)},B=function(se){var ie=E(se)[_];return ie??se},Z=function(se){var ie;return d(se)&&typeof(ie=se.then)=="function"?ie:!1},Q=function(se){var ie,we;this.promise=new se(function(re,Me){if(ie!==void 0||we!==void 0)throw TypeError("Bad Promise constructor");ie=re,we=Me}),this.resolve=m(ie),this.reject=m(we)},ce=function(se){try{se()}catch(ie){return{error:ie}}},te=function(se,ie){if(!se.n){se.n=!0;var we=se.c;S(function(){for(var re=se.v,Me=se.s==1,ge=0,ye=function(me){var De=Me?me.ok:me.fail,Ge=me.resolve,Xe=me.reject,et,ct;try{De?(Me||(se.h=!0),et=De===!0?re:De(re),et===me.promise?Xe(TypeError("Promise-chain cycle")):(ct=Z(et))?ct.call(et,Ge,Xe):Ge(et)):Xe(re)}catch(J){Xe(J)}};we.length>ge;)ye(we[ge++]);we.length=0,se.n=!1,ie&&setTimeout(function(){var me=se.p,De,Ge;ae(me)&&(k?p.emit("unhandledRejection",re,me):(De=x.onunhandledrejection)?De({promise:me,reason:re}):(Ge=x.console)&&Ge.error&&Ge.error("Unhandled promise rejection",re)),se.a=void 0},1)})}},ae=function(se){var ie=se._d,we=ie.a||ie.c,re=0,Me;if(ie.h)return!1;for(;we.length>re;)if(Me=we[re++],Me.fail||!ae(Me.promise))return!1;return!0},pe=function(se){var ie=this;ie.d||(ie.d=!0,ie=ie.r||ie,ie.v=se,ie.s=2,ie.a=ie.c.slice(),te(ie,!0))},be=function(se){var ie=this,we;if(!ie.d){ie.d=!0,ie=ie.r||ie;try{if(ie.p===se)throw TypeError("Promise can't be resolved itself");(we=Z(se))?S(function(){var re={r:ie,d:!1};try{we.call(se,w(be,re,1),w(pe,re,1))}catch(Me){pe.call(re,Me)}}):(ie.v=se,ie.s=1,te(ie,!1))}catch(re){pe.call({r:ie,d:!1},re)}}};$||(c=function(ie){m(ie);var we=this._d={p:v(this,c,f),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{ie(w(be,we,1),w(pe,we,1))}catch(re){pe.call(we,re)}},o("./$.redefine-all")(c.prototype,{then:function(ie,we){var re=new Q(g(this,c)),Me=re.promise,ge=this._d;return re.ok=typeof ie=="function"?ie:!0,re.fail=typeof we=="function"&&we,ge.c.push(re),ge.a&&ge.a.push(re),ge.s&&te(ge,!1),Me},catch:function(se){return this.then(void 0,se)}})),a(a.G+a.W+a.F*!$,{Promise:c}),o("./$.set-to-string-tag")(c,f),o("./$.set-species")(f),C=o("./$.core")[f],a(a.S+a.F*!$,f,{reject:function(ie){var we=new Q(this),re=we.reject;return re(ie),we.promise}}),a(a.S+a.F*(!$||D(!0)),f,{resolve:function(ie){if(ie instanceof c&&W(ie.constructor,this))return ie;var we=new Q(this),re=we.resolve;return re(ie),we.promise}}),a(a.S+a.F*!($&&o("./$.iter-detect")(function(se){c.all(se).catch(function(){})})),f,{all:function(ie){var we=B(this),re=new Q(we),Me=re.resolve,ge=re.reject,ye=[],me=ce(function(){R(ie,!1,ye.push,ye);var De=ye.length,Ge=Array(De);De?l.each.call(ye,function(Xe,et){var ct=!1;we.resolve(Xe).then(function(J){ct||(ct=!0,Ge[et]=J,--De||Me(Ge))},ge)}):Me(Ge)});return me&&ge(me.error),re.promise},race:function(ie){var we=B(this),re=new Q(we),Me=re.reject,ge=ce(function(){R(ie,!1,function(ye){we.resolve(ye).then(re.resolve,Me)})});return ge&&Me(ge.error),re.promise}})},{"./$":71,"./$.a-function":41,"./$.an-object":43,"./$.classof":44,"./$.core":49,"./$.ctx":50,"./$.descriptors":52,"./$.export":54,"./$.for-of":56,"./$.global":57,"./$.is-object":64,"./$.iter-detect":68,"./$.library":72,"./$.microtask":73,"./$.redefine-all":77,"./$.same-value":79,"./$.set-proto":80,"./$.set-species":81,"./$.set-to-string-tag":82,"./$.species-constructor":84,"./$.strict-new":85,"./$.wks":93}],103:[function(o,M,T){var l=o("./$.collection-strong");o("./$.collection")("Set",function(h){return function(){return h(this,arguments.length>0?arguments[0]:void 0)}},{add:function(x){return l.def(this,x=x===0?0:x,x)}},l)},{"./$.collection":48,"./$.collection-strong":46}],104:[function(o,M,T){var l=o("./$.string-at")(!0);o("./$.iter-define")(String,"String",function(h){this._t=String(h),this._i=0},function(){var h=this._t,x=this._i,w;return x>=h.length?{value:void 0,done:!0}:(w=l(h,x),this._i+=w.length,{value:w,done:!1})})},{"./$.iter-define":67,"./$.string-at":86}],105:[function(o,M,T){var l=o("./$.export");l(l.P,"Set",{toJSON:o("./$.collection-to-json")("Set")})},{"./$.collection-to-json":47,"./$.export":54}],106:[function(o,M,T){o("./es6.array.iterator");var l=o("./$.iterators");l.NodeList=l.HTMLCollection=l.Array},{"./$.iterators":70,"./es6.array.iterator":96}],107:[function(o,M,T){(function(l){/*!
		ISC License

		Copyright (c) 2014-2018, Andrea Giammarchi, @WebReflection

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted, provided that the above
		copyright notice and this permission notice appear in all copies.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
		OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.

		*/function h(x,w){var b=x.document,a=x.Object,d=function(Y){var q=/^[A-Z]+[a-z]/,ue=function(yt){var it=[],dt;for(dt in he)yt.test(dt)&&it.push(dt);return it},de=function(yt,it){it=it.toLowerCase(),it in he||(he[yt]=(he[yt]||[]).concat(it),he[it]=he[it.toUpperCase()]=yt)},he=(a.create||a)(null),Le={},Pe,Ke,Je,Be;for(Ke in Y)for(Be in Y[Ke])for(Je=Y[Ke][Be],he[Be]=Je,Pe=0;Pe<Je.length;Pe++)he[Je[Pe].toLowerCase()]=he[Je[Pe].toUpperCase()]=Be;return Le.get=function(it){return typeof it=="string"?he[it]||(q.test(it)?[]:""):ue(it)},Le.set=function(it,dt){return q.test(it)?de(it,dt):de(dt,it),Le},Le}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});typeof w!="object"&&(w={type:w||"auto"});var E="registerElement",m=x.Math.random()*1e5>>0,v="__"+E+m,R="addEventListener",A="attached",L="Callback",_="detached",g="extends",S="attributeChanged"+L,f=A+L,p="connected"+L,k="disconnected"+L,c="created"+L,O=_+L,C="ADDITION",D="MODIFICATION",$="REMOVAL",W="DOMAttrModified",B="DOMContentLoaded",Z="DOMSubtreeModified",Q="<",ce="=",te=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,ae=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],pe=[],be=[],se="",ie=b.documentElement,we=pe.indexOf||function(Y){for(var q=this.length;q--&&this[q]!==Y;);return q},re=a.prototype,Me=re.hasOwnProperty,ge=re.isPrototypeOf,ye=a.defineProperty,me=[],De=a.getOwnPropertyDescriptor,Ge=a.getOwnPropertyNames,Xe=a.getPrototypeOf,et=a.setPrototypeOf,ct=!!a.__proto__,J="__dreCEv1",z=x.customElements,F=!/^force/.test(w.type)&&!!(z&&z.define&&z.get&&z.whenDefined),I=a.create||a,G=x.Map||function(){var q=[],ue=[],de;return{get:function(he){return ue[we.call(q,he)]},set:function(he,Le){de=we.call(q,he),de<0?ue[q.push(he)-1]=Le:ue[de]=Le}}},X=x.Promise||function(Y){var q=[],ue=!1,de={catch:function(){return de},then:function(Le){return q.push(Le),ue&&setTimeout(he,1),de}};function he(Le){for(ue=!0;q.length;)q.shift()(Le)}return Y(he),de},le=!1,oe=I(null),ke=I(null),Te=new G,Re=function(Y){return Y.toLowerCase()},Ue=a.create||function Y(q){return q?(Y.prototype=q,new Y):this},Ye=et||(ct?function(Y,q){return Y.__proto__=q,Y}:Ge&&De?function(){function Y(q,ue){for(var de,he=Ge(ue),Le=0,Pe=he.length;Le<Pe;Le++)de=he[Le],Me.call(q,de)||ye(q,de,De(ue,de))}return function(q,ue){do Y(q,ue);while((ue=Xe(ue))&&!ge.call(ue,q));return q}}():function(Y,q){for(var ue in q)Y[ue]=q[ue];return Y}),Fe=x.MutationObserver||x.WebKitMutationObserver,nt=x.HTMLAnchorElement,ze=(x.HTMLElement||x.Element||x.Node).prototype,rt=!ge.call(ze,ie),st=rt?function(Y,q,ue){return Y[q]=ue.value,Y}:ye,Qe=rt?function(Y){return Y.nodeType===1}:function(Y){return ge.call(ze,Y)},ot=rt&&[],Ft=ze.attachShadow,pr=ze.cloneNode,an=ze.closest||function(Y){for(var q=this;q&&q.nodeName!==Y;)q=q.parentNode;return q},mi=ze.dispatchEvent,fe=ze.getAttribute,We=ze.hasAttribute,yi=ze.removeAttribute,vr=ze.setAttribute,Yt=b.createElement,ln=b.importNode,Ht=Yt,At=Fe&&{attributes:!0,characterData:!0,attributeOldValue:!0},gr=Fe||function(Y){wr=!1,ie.removeEventListener(W,gr)},mr,yr=0,bi=E in b&&!/^force-all/.test(w.type),wi=!0,br=!1,wr=!0,zr=!0,xr=!0,jt,Zt,xi,Xr,Ot,Ze,mt,ht;Fe&&(ht=b.createElement("div"),ht.innerHTML="<div><div></div></div>",new Fe(function(Y,q){if(Y[0]&&Y[0].type=="childList"&&!Y[0].removedNodes[0].childNodes.length){ht=De(ze,"innerHTML");var ue=ht&&ht.set;ue&&ye(ze,"innerHTML",{set:function(de){for(;this.lastChild;)this.removeChild(this.lastChild);ue.call(this,de)}})}q.disconnect(),ht=null}).observe(ht,{childList:!0,subtree:!0}),ht.innerHTML=""),bi||(et||ct?(Ze=function(Y,q){ge.call(q,Y)||Gr(Y,q)},mt=Gr):(Ze=function(Y,q){Y[v]||(Y[v]=a(!0),Gr(Y,q))},mt=Ze),rt?(wr=!1,function(){var Y=De(ze,R),q=Y.value,ue=function(Le){var Pe=new CustomEvent(W,{bubbles:!0});Pe.attrName=Le,Pe.prevValue=fe.call(this,Le),Pe.newValue=null,Pe[$]=Pe.attrChange=2,yi.call(this,Le),mi.call(this,Pe)},de=function(Le,Pe){var Ke=We.call(this,Le),Je=Ke&&fe.call(this,Le),Be=new CustomEvent(W,{bubbles:!0});vr.call(this,Le,Pe),Be.attrName=Le,Be.prevValue=Ke?Je:null,Be.newValue=Pe,Ke?Be[D]=Be.attrChange=1:Be[C]=Be.attrChange=0,mi.call(this,Be)},he=function(Le){var Pe=Le.currentTarget,Ke=Pe[v],Je=Le.propertyName,Be;Ke.hasOwnProperty(Je)&&(Ke=Ke[Je],Be=new CustomEvent(W,{bubbles:!0}),Be.attrName=Ke.name,Be.prevValue=Ke.value||null,Be.newValue=Ke.value=Pe[Je]||null,Be.prevValue==null?Be[C]=Be.attrChange=0:Be[D]=Be.attrChange=1,mi.call(Pe,Be))};Y.value=function(Le,Pe,Ke){Le===W&&this[S]&&this.setAttribute!==de&&(this[v]={className:{name:"class",value:this.className}},this.setAttribute=de,this.removeAttribute=ue,q.call(this,"propertychange",he)),q.call(this,Le,Pe,Ke)},ye(ze,R,Y)}()):Fe||(ie[R](W,gr),ie.setAttribute(v,1),ie.removeAttribute(v),wr&&(jt=function(Y){var q=this,ue,de,he;if(q===Y.target){ue=q[v],q[v]=de=xi(q);for(he in de)if(he in ue){if(de[he]!==ue[he])return Zt(1,q,he,ue[he],de[he],D)}else return Zt(0,q,he,ue[he],de[he],C);for(he in ue)if(!(he in de))return Zt(2,q,he,ue[he],de[he],$)}},Zt=function(Y,q,ue,de,he,Le){var Pe={attrChange:Y,currentTarget:q,attrName:ue,prevValue:de,newValue:he};Pe[Le]=Y,Cr(Pe)},xi=function(Y){for(var q,ue,de={},he=Y.attributes,Le=0,Pe=he.length;Le<Pe;Le++)q=he[Le],ue=q.name,ue!=="setAttribute"&&(de[ue]=q.value);return de})),b[E]=function(q,ue){if(Ke=q.toUpperCase(),wi&&(wi=!1,Fe?(Xr=function(Be,yt){function it(dt,Ct){for(var Pt=0,Qt=dt.length;Pt<Qt;Ct(dt[Pt++]));}return new Fe(function(dt){for(var Ct,Pt,Qt,Er=0,dn=dt.length;Er<dn;Er++)Ct=dt[Er],Ct.type==="childList"?(it(Ct.addedNodes,Be),it(Ct.removedNodes,yt)):(Pt=Ct.target,xr&&Pt[S]&&Ct.attributeName!=="style"&&(Qt=fe.call(Pt,Ct.attributeName),Qt!==Ct.oldValue&&Pt[S](Ct.attributeName,Ct.oldValue,Qt)))})}(Jt(A),Jt(_)),Ot=function(Be){return Xr.observe(Be,{childList:!0,subtree:!0}),Be},Ot(b),Ft&&(ze.attachShadow=function(){return Ot(Ft.apply(this,arguments))})):(mr=[],b[R]("DOMNodeInserted",Si(A)),b[R]("DOMNodeRemoved",Si(_))),b[R](B,Sr),b[R]("readystatechange",Sr),b.importNode=function(Be,yt){switch(Be.nodeType){case 1:return cn(b,ln,[Be,!!yt]);case 11:for(var it=b.createDocumentFragment(),dt=Be.childNodes,Ct=dt.length,Pt=0;Pt<Ct;Pt++)it.appendChild(b.importNode(dt[Pt],!!yt));return it;default:return pr.call(Be,!!yt)}},ze.cloneNode=function(Be){return cn(this,pr,[!!Be])}),br)return br=!1;if(-2<we.call(pe,ce+Ke)+we.call(pe,Q+Ke)&&kr(q),!te.test(Ke)||-1<we.call(ae,Ke))throw new Error("The type "+q+" is invalid");var de=function(){return Le?b.createElement(Pe,Ke):b.createElement(Pe)},he=ue||re,Le=Me.call(he,g),Pe=Le?ue[g].toUpperCase():Ke,Ke,Je;return Le&&-1<we.call(pe,Q+Pe)&&kr(Pe),Je=pe.push((Le?ce:Q)+Ke)-1,se=se.concat(se.length?",":"",Le?Pe+'[is="'+q.toLowerCase()+'"]':Pe),de.prototype=be[Je]=Me.call(he,"prototype")?he.prototype:Ue(ze),se.length&&Ne(b.querySelectorAll(se),A),de},b.createElement=Ht=function(Y,q){var ue=or(q),de=ue?Yt.call(b,Y,Re(ue)):Yt.call(b,Y),he=""+Y,Le=we.call(pe,(ue?ce:Q)+(ue||he).toUpperCase()),Pe=-1<Le;return ue&&(de.setAttribute("is",ue=ue.toLowerCase()),Pe&&(Pe=sr(he.toUpperCase(),ue))),xr=!b.createElement.innerHTMLHelper,Pe&&mt(de,be[Le]),de}),addEventListener("beforeunload",function(){delete b.createElement,delete b.importNode,delete b[E]},!1);function un(){var Y=mr.splice(0,mr.length);for(yr=0;Y.length;)Y.shift().call(null,Y.shift())}function Ne(Y,q){for(var ue=0,de=Y.length;ue<de;ue++)Kr(Y[ue],q)}function Qn(Y){for(var q=0,ue=Y.length,de;q<ue;q++)de=Y[q],mt(de,be[Ci(de)])}function Jt(Y){return function(q){Qe(q)&&(Kr(q,Y),se.length&&Ne(q.querySelectorAll(se),Y))}}function Ci(Y){var q=fe.call(Y,"is"),ue=Y.nodeName.toUpperCase(),de=we.call(pe,q?ce+q.toUpperCase():Q+ue);return q&&-1<de&&!sr(ue,q)?-1:de}function sr(Y,q){return-1<se.indexOf(Y+'[is="'+q+'"]')}function Cr(Y){var q=Y.currentTarget,ue=Y.attrChange,de=Y.attrName,he=Y.target,Le=Y[C]||2,Pe=Y[$]||3;xr&&(!he||he===q)&&q[S]&&de!=="style"&&(Y.prevValue!==Y.newValue||Y.newValue===""&&(ue===Le||ue===Pe))&&q[S](de,ue===Le?null:Y.prevValue,ue===Pe?null:Y.newValue)}function Si(Y){var q=Jt(Y);return function(ue){mr.push(q,ue.target),yr&&clearTimeout(yr),yr=setTimeout(un,1)}}function Sr(Y){zr&&(zr=!1,Y.currentTarget.removeEventListener(B,Sr)),se.length&&Ne((Y.target||b).querySelectorAll(se),Y.detail===_?_:A),rt&&ut()}function fn(Y,q){var ue=this;vr.call(ue,Y,q),jt.call(ue,{target:ue})}function cn(Y,q,ue){var de=q.apply(Y,ue),he=Ci(de);return-1<he&&mt(de,be[he]),ue.pop()&&se.length&&Qn(de.querySelectorAll(se)),de}function Gr(Y,q){Ye(Y,q),Xr?Xr.observe(Y,At):(wr&&(Y.setAttribute=fn,Y[v]=xi(Y),Y[R](Z,jt)),Y[R](W,Cr)),Y[c]&&xr&&(Y.created=!0,Y[c](),Y.created=!1)}function ut(){for(var Y,q=0,ue=ot.length;q<ue;q++)Y=ot[q],ie.contains(Y)||(ue--,ot.splice(q--,1),Kr(Y,_))}function kr(Y){throw new Error("A "+Y+" type is already registered")}function Kr(Y,q){var ue,de=Ci(Y),he;-1<de&&!an.call(Y,"TEMPLATE")&&(Ze(Y,be[de]),de=0,q===A&&!Y[A]?(Y[_]=!1,Y[A]=!0,he="connected",de=1,rt&&we.call(ot,Y)<0&&ot.push(Y)):q===_&&!Y[_]&&(Y[A]=!1,Y[_]=!0,he="disconnected",de=1),de&&(ue=Y[q+L]||Y[he+L])&&ue.call(Y))}function Tr(){}Tr.prototype={constructor:Tr,define:F?function(Y,q,ue){if(ue)ki(Y,q,ue);else{var de=Y.toUpperCase();oe[de]={constructor:q,create:[de]},Te.set(q,de),z.define(Y,q)}}:ki,get:F?function(Y){return z.get(Y)||Lr(Y)}:Lr,whenDefined:F?function(Y){return X.race([z.whenDefined(Y),Vr(Y)])}:Vr};function ki(Y,q,ue){var de=ue&&ue[g]||"",he=q.prototype,Le=Ue(he),Pe=q.observedAttributes||me,Ke={prototype:Le};st(Le,c,{value:function(){if(le)le=!1;else if(!this[J]){this[J]=!0,new q(this),he[c]&&he[c].call(this);var Je=oe[Te.get(q)];(!F||Je.create.length>1)&&Ti(this)}}}),st(Le,S,{value:function(Je){-1<we.call(Pe,Je)&&he[S]&&he[S].apply(this,arguments)}}),he[p]&&st(Le,f,{value:he[p]}),he[k]&&st(Le,O,{value:he[k]}),de&&(Ke[g]=de),Y=Y.toUpperCase(),oe[Y]={constructor:q,create:de?[de,Re(Y)]:[Y]},Te.set(q,Y),b[E](Y.toLowerCase(),Ke),Vr(Y),ke[Y].r()}function Lr(Y){var q=oe[Y.toUpperCase()];return q&&q.constructor}function or(Y){return typeof Y=="string"?Y:Y&&Y.is||""}function Ti(Y){for(var q=Y[S],ue=q?Y.attributes:me,de=ue.length,he;de--;)he=ue[de],q.call(Y,he.name||he.nodeName,null,he.value||he.nodeValue)}function Vr(Y){return Y=Y.toUpperCase(),Y in ke||(ke[Y]={},ke[Y].p=new X(function(q){ke[Y].r=q})),ke[Y].p}function hn(){z&&delete x.customElements,ye(x,"customElements",{configurable:!0,value:new Tr}),ye(x,"CustomElementRegistry",{configurable:!0,value:Tr});for(var Y=function(de){var he=x[de];if(he){x[de]=function(Pe){var Ke,Je;return Pe||(Pe=this),Pe[J]||(le=!0,Ke=oe[Te.get(Pe.constructor)],Je=F&&Ke.create.length===1,Pe=Je?Reflect.construct(he,me,Ke.constructor):b.createElement.apply(b,Ke.create),Pe[J]=!0,le=!1,Je||Ti(Pe)),Pe},x[de].prototype=he.prototype;try{he.prototype.constructor=x[de]}catch{ye(he,J,{value:x[de]})}}},q=d.get(/^HTML[A-Z]*[a-z]/),ue=q.length;ue--;Y(q[ue]));b.createElement=function(de,he){var Le=or(he);return Le?Ht.call(this,de,Re(Le)):Ht.call(this,de)},bi||(br=!0,b[E](""))}if(!z||/^force/.test(w.type))hn();else if(!w.noBuiltIn)try{(function(Y,q,ue){var de=new RegExp(`^<a\\s+is=('|")`+ue+"\\1></a>$");if(q[g]="a",Y.prototype=Ue(nt.prototype),Y.prototype.constructor=Y,x.customElements.define(ue,Y,q),!de.test(b.createElement("a",{is:ue}).outerHTML)||!de.test(new Y().outerHTML))throw q})(function Y(){return Reflect.construct(nt,[],Y)},{},"document-register-element-a"+m)}catch{hn()}if(!w.noBuiltIn)try{if(Yt.call(b,"a","a").outerHTML.indexOf("is")<0)throw{}}catch{Re=function(q){return{is:q.toLowerCase()}}}}M.exports=h,h(l)}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],108:[function(o,M,T){(function(l){var h;typeof window<"u"?h=window:typeof l<"u"?h=l:typeof self<"u"?h=self:h={},M.exports=h}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],109:[function(o,M,T){(function(l){(function(h,x){typeof T=="object"&&typeof M<"u"?M.exports=x():h.GlslCanvas=x()})(this,function(){var h=typeof window<"u"?window:typeof l<"u"?l:typeof self<"u"?self:{},x;typeof window<"u"?x=window:typeof h<"u"?x=h:typeof self<"u"?x=self:x={};var w=x,b=d,a=Object.prototype.toString;function d(J){if(!J)return!1;var z=a.call(J);return z==="[object Function]"||typeof J=="function"&&z!=="[object RegExp]"||typeof window<"u"&&(J===window.setTimeout||J===window.alert||J===window.confirm||J===window.prompt)}var E=function(J){return J.replace(/^\s+|\s+$/g,"")},m=function(J){return Object.prototype.toString.call(J)==="[object Array]"},v=function(J){if(!J)return{};for(var z={},F=E(J).split(`
`),I=0;I<F.length;I++){var G=F[I],X=G.indexOf(":"),le=E(G.slice(0,X)).toLowerCase(),oe=E(G.slice(X+1));typeof z[le]>"u"?z[le]=oe:m(z[le])?z[le].push(oe):z[le]=[z[le],oe]}return z},R=L,A=Object.prototype.hasOwnProperty;function L(){for(var J={},z=0;z<arguments.length;z++){var F=arguments[z];for(var I in F)A.call(F,I)&&(J[I]=F[I])}return J}var _=k,g=k;k.XMLHttpRequest=w.XMLHttpRequest||C,k.XDomainRequest="withCredentials"in new k.XMLHttpRequest?k.XMLHttpRequest:w.XDomainRequest,S(["get","put","post","patch","head","delete"],function(J){k[J==="delete"?"del":J]=function(z,F,I){return F=p(z,F,I),F.method=J.toUpperCase(),c(F)}});function S(J,z){for(var F=0;F<J.length;F++)z(J[F])}function f(J){for(var z in J)if(J.hasOwnProperty(z))return!1;return!0}function p(J,z,F){var I=J;return b(z)?(F=z,typeof J=="string"&&(I={uri:J})):I=R(z,{uri:J}),I.callback=F,I}function k(J,z,F){return z=p(J,z,F),c(z)}function c(J){if(typeof J.callback>"u")throw new Error("callback argument missing");var z=!1,F=function(ot,Ft,pr){z||(z=!0,J.callback(ot,Ft,pr))};function I(){oe.readyState===4&&setTimeout(le,0)}function G(){var Qe=void 0;if(oe.response?Qe=oe.response:Qe=oe.responseText||O(oe),ze)try{Qe=JSON.parse(Qe)}catch{}return Qe}function X(Qe){return clearTimeout(rt),Qe instanceof Error||(Qe=new Error(""+(Qe||"Unknown XMLHttpRequest Error"))),Qe.statusCode=0,F(Qe,st)}function le(){if(!Te){var Qe;clearTimeout(rt),J.useXDR&&oe.status===void 0?Qe=200:Qe=oe.status===1223?204:oe.status;var ot=st,Ft=null;return Qe!==0?(ot={body:G(),statusCode:Qe,method:Ue,headers:{},url:Re,rawRequest:oe},oe.getAllResponseHeaders&&(ot.headers=v(oe.getAllResponseHeaders()))):Ft=new Error("Internal XMLHttpRequest Error"),F(Ft,ot,ot.body)}}var oe=J.xhr||null;oe||(J.cors||J.useXDR?oe=new k.XDomainRequest:oe=new k.XMLHttpRequest);var ke,Te,Re=oe.url=J.uri||J.url,Ue=oe.method=J.method||"GET",Ye=J.body||J.data,Fe=oe.headers=J.headers||{},nt=!!J.sync,ze=!1,rt,st={body:void 0,headers:{},statusCode:0,method:Ue,url:Re,rawRequest:oe};if("json"in J&&J.json!==!1&&(ze=!0,Fe.accept||Fe.Accept||(Fe.Accept="application/json"),Ue!=="GET"&&Ue!=="HEAD"&&(Fe["content-type"]||Fe["Content-Type"]||(Fe["Content-Type"]="application/json"),Ye=JSON.stringify(J.json===!0?Ye:J.json))),oe.onreadystatechange=I,oe.onload=le,oe.onerror=X,oe.onprogress=function(){},oe.onabort=function(){Te=!0},oe.ontimeout=X,oe.open(Ue,Re,!nt,J.username,J.password),nt||(oe.withCredentials=!!J.withCredentials),!nt&&J.timeout>0&&(rt=setTimeout(function(){if(!Te){Te=!0,oe.abort("timeout");var Qe=new Error("XMLHttpRequest timeout");Qe.code="ETIMEDOUT",X(Qe)}},J.timeout)),oe.setRequestHeader)for(ke in Fe)Fe.hasOwnProperty(ke)&&oe.setRequestHeader(ke,Fe[ke]);else if(J.headers&&!f(J.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in J&&(oe.responseType=J.responseType),"beforeSend"in J&&typeof J.beforeSend=="function"&&J.beforeSend(oe),oe.send(Ye||null),oe}function O(J){try{if(J.responseType==="document")return J.responseXML;var z=J.responseXML&&J.responseXML.documentElement.nodeName==="parsererror";if(J.responseType===""&&!z)return J.responseXML}catch{}return null}function C(){}_.default=g;var D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},$=function(J,z){if(!(J instanceof z))throw new TypeError("Cannot call a class as a function")},W=function(){function J(z,F){for(var I=0;I<F.length;I++){var G=F[I];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(z,G.key,G)}}return function(z,F,I){return F&&J(z.prototype,F),I&&J(z,I),z}}(),B=function(J){if(Array.isArray(J)){for(var z=0,F=Array(J.length);z<J.length;z++)F[z]=J[z];return F}else return Array.from(J)},Z="";function Q(J){return`
<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>
<td align="center">
<div style="display: table-cell; vertical-align: middle;">
<div style="">`+J+`</div>
</div>
</td></tr></table>
`}var ce=`
	This page requires a browser that supports WebGL.<br/>
	<a href="http://get.webgl.org">Click here to upgrade your browser.</a>
`,te=`
	It does not appear your computer can support WebGL.<br/>
	<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>
`,ae=1,pe=2;function be(J,z,F){function I(le){var oe=J.parentNode;oe&&(oe.innerHTML=Q(le))}function G(le,oe){typeof F=="function"?F(le):I(oe)}if(!window.WebGLRenderingContext)return G(ae,ce),null;var X=se(J,z);return X?X.getExtension("OES_standard_derivatives"):G(pe,te),X}function se(J,z){for(var F=["webgl","experimental-webgl"],I=null,G=0;G<F.length;++G)try{I=J.getContext(F[G],z)}catch{if(I)break}return I}function ie(J,z,F,I){var G=J.gl,X=G.createShader(F);G.shaderSource(X,z),G.compileShader(X);var le=G.getShaderParameter(X,G.COMPILE_STATUS);return le?X:(Z=G.getShaderInfoLog(X),console.error("*** Error compiling shader "+X+":"+Z),J.trigger("error",{shader:X,source:z,type:F,error:Z,offset:I||0}),G.deleteShader(X),null)}function we(J,z,F,I){for(var G=J.gl,X=G.createProgram(),le=0;le<z.length;++le)G.attachShader(X,z[le]);G.linkProgram(X);var oe=G.getProgramParameter(X,G.LINK_STATUS);return oe?X:(Z=G.getProgramInfoLog(X),console.log("Error in program linking:"+Z),G.deleteProgram(X),null)}function re(J){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,F=[];for(var I in J){var G=J[I],X=void 0;if(z&&(I=z+"."+I),typeof G=="number")F.push({type:"float",method:"1f",name:I,value:G});else if(Array.isArray(G)){if(typeof G[0]=="number")G.length===1?F.push({type:"float",method:"1f",name:I,value:G}):G.length>=2&&G.length<=4?F.push({type:"vec"+G.length,method:G.length+"fv",name:I,value:G}):G.length>4&&F.push({type:"float[]",method:"1fv",name:I+"[0]",value:G});else if(typeof G[0]=="string")F.push({type:"sampler2D",method:"1i",name:I,value:G});else if(Array.isArray(G[0])&&typeof G[0][0]=="number"){if(G[0].length>=2&&G[0].length<=4)for(X=0;X<G.length;X++)F.push({type:"vec"+G[0].length,method:G[X].length+"fv",name:I+"["+X+"]",value:G[X]})}else if(D(G[0])==="object")for(X=0;X<G.length;X++)F.push.apply(F,B(re(G[X],I+"["+X+"]")))}else typeof G=="boolean"?F.push({type:"bool",method:"1i",name:I,value:G}):typeof G=="string"?F.push({type:"sampler2D",method:"1i",name:I,value:G}):(typeof G>"u"?"undefined":D(G))==="object"&&F.push.apply(F,B(re(G,I)))}return F}function Me(J){var z=J.getBoundingClientRect();return z.top+z.height>0&&z.top<(window.innerHeight||document.documentElement.clientHeight)}function ge(J){return(J&J-1)===0}function ye(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function me(J,z){return J&&z?J.toString()!==z.toString():!1}function De(J){var z=new XMLHttpRequest;return z.open("GET",J,!1),z.send(),z.status==200?z.responseText:""}function Ge(J){var z=new Set;return Object.assign(J,{on:function(I,G){var X={};X[I]=G,z.add(X)},off:function(I,G){if(G){var X={};X[I]=G,z.delete(X)}else{var le=!0,oe=!1,ke=void 0;try{for(var Te=z[Symbol.iterator](),Re;!(le=(Re=Te.next()).done);le=!0){var Ue=Re.value,Ye=!0,Fe=!1,nt=void 0;try{for(var ze=Object.keys(Ue)[Symbol.iterator](),rt;!(Ye=(rt=ze.next()).done);Ye=!0){var st=rt.value;if(st===I){z.delete(Ue);return}}}catch(Qe){Fe=!0,nt=Qe}finally{try{!Ye&&ze.return&&ze.return()}finally{if(Fe)throw nt}}}}catch(Qe){oe=!0,ke=Qe}finally{try{!le&&Te.return&&Te.return()}finally{if(oe)throw ke}}}},listSubscriptions:function(){var I=!0,G=!1,X=void 0;try{for(var le=z[Symbol.iterator](),oe;!(I=(oe=le.next()).done);I=!0){var ke=oe.value;console.log(ke)}}catch(Te){G=!0,X=Te}finally{try{!I&&le.return&&le.return()}finally{if(G)throw X}}},subscribe:function(I){z.add(I)},unsubscribe:function(I){z.delete(I)},unsubscribeAll:function(){z.clear()},trigger:function(I){for(var G=arguments.length,X=Array(G>1?G-1:0),le=1;le<G;le++)X[le-1]=arguments[le];var oe=!0,ke=!1,Te=void 0;try{for(var Re=z[Symbol.iterator](),Ue;!(oe=(Ue=Re.next()).done);oe=!0){var Ye=Ue.value;typeof Ye[I]=="function"&&Ye[I].apply(Ye,B(X))}}catch(Fe){ke=!0,Te=Fe}finally{try{!oe&&Re.return&&Re.return()}finally{if(ke)throw Te}}}})}var Xe=function(){function J(z,F){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$(this,J),Ge(this),this.gl=z,this.texture=z.createTexture(),this.texture&&(this.valid=!0),this.bind(),this.name=F,this.source=null,this.sourceType=null,this.loading=null,this.setData(1,1,new Uint8Array([0,0,0,255]),{filtering:"linear"}),this.setFiltering(I.filtering),this.load(I)}return W(J,[{key:"destroy",value:function(){this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,this.valid=!1)}},{key:"bind",value:function(F){this.valid&&(typeof F=="number"&&J.activeUnit!==F&&(this.gl.activeTexture(this.gl.TEXTURE0+F),J.activeUnit=F),J.activeTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),J.activeTexture=this.texture))}},{key:"load",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.loading=null,typeof F.url=="string"?(this.url===void 0||F.url!==this.url)&&this.setUrl(F.url,F):F.element?this.setElement(F.element,F):F.data&&F.width&&F.height&&this.setData(F.width,F.height,F.data,F)}},{key:"setUrl",value:function(F){var I=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.valid)return this.url=F,this.source=this.url,this.sourceType="url",this.loading=new Promise(function(X,le){var oe=F.split(".").pop().toLowerCase(),ke=oe==="ogv"||oe==="webm"||oe==="mp4",Te=void 0;ke?(Te=document.createElement("video"),Te.autoplay=!0,Te.muted=!0,setTimeout(function(){Te.play()},1),G.filtering="nearest"):Te=new Image,Te.onload=function(){try{I.setElement(Te,G)}catch(Re){console.log("Texture '"+I.name+"': failed to load url: '"+I.source+"'",Re,G)}X(I)},Te.onerror=function(Re){console.log("Texture '"+I.name+"': failed to load url: '"+I.source+"'",Re,G),X(I)},ye()&&I.source.slice(0,5)==="data:"||(Te.crossOrigin="anonymous"),Te.src=I.source,ke&&I.setElement(Te,G)}),this.loading}},{key:"setData",value:function(F,I,G){var X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.width=F,this.height=I,this.source=G,this.sourceType="data",this.update(X),this.setFiltering(X),this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(F,I){var G=this,X=F;if(typeof F=="string"&&(F=document.querySelector(F)),F instanceof HTMLCanvasElement||F instanceof HTMLImageElement||F instanceof HTMLVideoElement)this.source=F,this.sourceType="element",F instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight,F.addEventListener("canplaythrough",function(){G.intervalID=setInterval(function(){G.update(I)},15)},!0),F.addEventListener("ended",function(){F.currentTime=0,F.play()},!0)):this.update(I),this.setFiltering(I);else{var le="the 'element' parameter (`element: "+JSON.stringify(X)+"`) must be a CSS ";le+="selector string, or a <canvas>, <image> or <video> object",console.log("Texture '"+this.name+"': "+le,I)}return this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.valid&&(this.bind(),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,F.UNPACK_FLIP_Y_WEBGL!==!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.sourceType==="element"&&(this.source instanceof HTMLCanvasElement||this.source instanceof HTMLVideoElement||this.source instanceof HTMLImageElement&&this.source.complete)?(this.source instanceof HTMLVideoElement?(this.width=this.source.videoWidth,this.height=this.source.videoHeight):(this.width=this.source.width,this.height=this.source.height),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source)):this.sourceType==="data"&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.source),this.trigger("loaded",this))}},{key:"setFiltering",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.valid){this.powerOf2=ge(this.width)&&ge(this.height),this.filtering=F.filtering||"linear";var I=this.gl;this.bind(),this.powerOf2?(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,F.TEXTURE_WRAP_S||I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,F.TEXTURE_WRAP_T||I.REPEAT),this.filtering==="mipmap"?(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR_MIPMAP_LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.generateMipmap(I.TEXTURE_2D)):this.filtering==="linear"?(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR)):this.filtering==="nearest"&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.NEAREST),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.NEAREST))):(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),this.filtering==="mipmap"&&(this.filtering="linear"),this.filtering==="nearest"?(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.NEAREST),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.NEAREST)):(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR)))}}}]),J}();Xe.getMaxTextureSize=function(J){return J.getParameter(J.MAX_TEXTURE_SIZE)},Xe.activeUnit=-1;var et=function(){function J(z,F,I){var G=this;$(this,J),Ge(this),F=F||{},I=I||{},z.hasAttribute("data-fullscreen")&&(z.getAttribute("data-fullscreen")=="1"||z.getAttribute("data-fullscreen")=="true")?(this.width=window.innerWidth,this.height=window.innerHeight,z.width=window.innerWidth,z.height=window.innerHeight):(this.width=z.clientWidth,this.height=z.clientHeight),this.canvas=z,this.gl=void 0,this.deps={},this.program=void 0,this.textures={},this.buffers={},this.uniforms={},this.vbo={},this.isValid=!1,this.animationFrameRequest=void 0,this.BUFFER_COUNT=0,this.vertexString=F.vertexString||`
#ifdef GL_ES
precision mediump float;
#endif

attribute vec2 a_position;
attribute vec2 a_texcoord;

varying vec2 v_texcoord;

void main() {
    gl_Position = vec4(a_position, 0.0, 1.0);
    v_texcoord = a_texcoord;
}
`,this.fragmentString=F.fragmentString||`
#ifdef GL_ES
precision mediump float;
#endif

varying vec2 v_texcoord;

void main(){
    gl_FragColor = vec4(0.0);
}
`;var X=be(z,F,I.onError);if(!X)return;if(this.gl=X,this.timeLoad=this.timePrev=performance.now(),this.timeDelta=0,this.forceRender=!0,this.paused=!1,this.realToCSSPixels=window.devicePixelRatio||1,z.style.backgroundColor=F.backgroundColor||"rgba(1,1,1,0)",z.hasAttribute("data-fragment"))this.fragmentString=z.getAttribute("data-fragment");else if(z.hasAttribute("data-fragment-url")){var le=z.getAttribute("data-fragment-url");_.get(le,function(ze,rt,st){G.load(st,G.vertexString)})}if(z.hasAttribute("data-vertex"))this.vertexString=z.getAttribute("data-vertex");else if(z.hasAttribute("data-vertex-url")){var oe=z.getAttribute("data-vertex-url");_.get(oe,function(ze,rt,st){G.load(G.fragmentString,st)})}if(this.load(),!this.program)return;var ke=X.getAttribLocation(this.program,"a_texcoord");this.vbo.texCoords=X.createBuffer(),this.gl.bindBuffer(X.ARRAY_BUFFER,this.vbo.texCoords),this.gl.bufferData(X.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),X.STATIC_DRAW),this.gl.enableVertexAttribArray(ke),this.gl.vertexAttribPointer(ke,2,X.FLOAT,!1,0,0);var Te=X.getAttribLocation(this.program,"a_position");if(this.vbo.vertices=X.createBuffer(),this.gl.bindBuffer(X.ARRAY_BUFFER,this.vbo.vertices),this.gl.bufferData(X.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),X.STATIC_DRAW),this.gl.enableVertexAttribArray(Te),this.gl.vertexAttribPointer(Te,2,X.FLOAT,!1,0,0),z.hasAttribute("data-textures")){var Re=z.getAttribute("data-textures").split(",");for(var Ue in Re)this.setUniform("u_tex"+Ue,Re[Ue])}var Ye={x:0,y:0};document.addEventListener("mousemove",function(ze){Ye.x=ze.clientX||ze.pageX,Ye.y=ze.clientY||ze.pageY},!1);var Fe=this;function nt(){Fe.nMouse>1&&Fe.setMouse(Ye),Fe.resize()&&(Fe.forceRender=!0),Fe.render(),Fe.animationFrameRequest=window.requestAnimationFrame(nt)}return this.setMouse({x:0,y:0}),nt(),this}return W(J,[{key:"destroy",value:function(){cancelAnimationFrame(this.animationFrameRequest),this.animated=!1,this.isValid=!1;for(var F in this.textures)F.destroy&&F.destroy();this.textures={};for(var I in this.attribs)this.gl.deleteBuffer(this.attribs[I]);this.gl.useProgram(null),this.gl.deleteProgram(this.program);for(var G in this.buffers){var X=this.buffers[G];this.gl.deleteProgram(X.program)}this.program=null,this.gl=null}},{key:"load",value:function(F,I){var G=this;I&&(this.vertexString=I),F&&(this.fragmentString=F);var X=this.fragmentString.split(/\r?\n/);this.fragmentString=`#define PLATFORM_WEBGL
#line 0
`,X.forEach(function(rt,st){var Qe=rt.trim();if(Qe.startsWith('#include "lygia')){var ot=Qe.substring(15).replace(/\'|\"|\;|\s/g,"");if(ot.endsWith("glsl")){if(G.deps[ot]===void 0){var Ft="https://lygia.xyz"+ot;G.deps[ot]=De(Ft)}G.fragmentString+=G.deps[ot]+`
#line `+(st+1)+`
`}}else G.fragmentString+=rt+`
`}),this.animated=!1,this.nDelta=(this.fragmentString.match(/u_delta/g)||[]).length,this.nTime=(this.fragmentString.match(/u_time/g)||[]).length,this.nDate=(this.fragmentString.match(/u_date/g)||[]).length,this.nMouse=(this.fragmentString.match(/u_mouse/g)||[]).length,this.animated=this.nDate>1||this.nTime>1||this.nMouse>1;var le=this.fragmentString.search(/sampler2D/g);if(le)for(var oe=this.fragmentString.split(`
`),ke=0;ke<oe.length;ke++){var Te=oe[ke].match(/uniform\s*sampler2D\s*([\w]*);\s*\/\/\s*([\w|\:\/\/|\.|\-|\_]*)/i);if(Te){var Re=Te[2].split(".").pop().toLowerCase();Te[1]&&Te[2]&&(Re==="jpg"||Re==="jpeg"||Re==="png"||Re==="ogv"||Re==="webm"||Re==="mp4")&&this.setUniform(Te[1],Te[2])}var Ue=oe[ke].match(/\s*void\s*main\s*/g);if(Ue)break}var Ye=ie(this,this.vertexString,this.gl.VERTEX_SHADER),Fe=ie(this,this.fragmentString,this.gl.FRAGMENT_SHADER);Fe?this.isValid=!0:(Fe=ie(this,`void main(){
	gl_FragColor = vec4(1.0);
}`,this.gl.FRAGMENT_SHADER),this.isValid=!1);var nt=we(this,[Ye,Fe]);this.gl.useProgram(nt),this.gl.deleteShader(Ye),this.gl.deleteShader(Fe),this.program=nt,this.change=!0,this.BUFFER_COUNT=0;var ze=this.getBuffers(this.fragmentString);Object.keys(ze).length&&this.loadPrograms(ze),this.buffers=ze,this.texureIndex=this.BUFFER_COUNT,this.trigger("load",{}),this.forceRender=!0,this.render()}},{key:"test",value:function(F,I,G){var X=this.vertexString,le=this.fragmentString,oe=this.paused,ke=this.gl.getExtension("EXT_disjoint_timer_query"),Te=ke.createQueryEXT(),Re=this.isValid;(I||G)&&(this.load(I,G),Re=this.isValid,this.forceRender=!0,this.render()),this.paused=!0,ke.beginQueryEXT(ke.TIME_ELAPSED_EXT,Te),this.forceRender=!0,this.render(),ke.endQueryEXT(ke.TIME_ELAPSED_EXT);var Ue=this;function Ye(){Ue.paused=oe,(I||G)&&Ue.load(le,X)}function Fe(){Ue.forceRender=!0,Ue.render();var nt=ke.getQueryObjectEXT(Te,ke.QUERY_RESULT_AVAILABLE_EXT),ze=Ue.gl.getParameter(ke.GPU_DISJOINT_EXT);if(nt&&!ze){var rt={wasValid:Re,frag:I||Ue.fragmentString,vert:G||Ue.vertexString,timeElapsedMs:ke.getQueryObjectEXT(Te,ke.QUERY_RESULT_EXT)/1e6};Ye(),F(rt)}else window.requestAnimationFrame(Fe)}Fe()}},{key:"loadTexture",value:function(F,I,G){var X=this;G||(G={}),typeof I=="string"?G.url=I:(typeof I>"u"?"undefined":D(I))==="object"&&I.data&&I.width&&I.height?(G.data=I.data,G.width=I.width,G.height=I.height):(typeof I>"u"?"undefined":D(I))==="object"&&(G.element=I),this.textures[F]?this.textures[F]&&(this.textures[F].load(G),this.textures[F].on("loaded",function(le){X.forceRender=!0})):(this.textures[F]=new Xe(this.gl,F,G),this.textures[F].on("loaded",function(le){X.forceRender=!0}))}},{key:"refreshUniforms",value:function(){this.uniforms={}}},{key:"setUniform",value:function(F){for(var I={},G=arguments.length,X=Array(G>1?G-1:0),le=1;le<G;le++)X[le-1]=arguments[le];I[F]=X,this.setUniforms(I)}},{key:"setUniforms",value:function(F){var I=re(F);for(var G in I)I[G].type==="sampler2D"?this.loadTexture(I[G].name,I[G].value[0]):this.uniform(I[G].method,I[G].type,I[G].name,I[G].value);this.forceRender=!0}},{key:"setMouse",value:function(F){var I=this.canvas.getBoundingClientRect();if(F&&F.x&&F.x>=I.left&&F.x<=I.right&&F.y&&F.y>=I.top&&F.y<=I.bottom){var G=(F.x-I.left)*this.realToCSSPixels,X=this.canvas.height-(F.y-I.top)*this.realToCSSPixels;this.uniform("2f","vec2","u_mouse",G,X)}}},{key:"uniform",value:function(F,I,G){this.uniforms[G]=this.uniforms[G]||{};for(var X=this.uniforms[G],le=arguments.length,oe=Array(le>3?le-3:0),ke=3;ke<le;ke++)oe[ke-3]=arguments[ke];var Te=me(X.value,oe);if(Te||this.change||!X.location||!X.value){X.name=G,X.type=I,X.value=oe,X.method="uniform"+F,this.gl.useProgram(this.program),X.location=this.gl.getUniformLocation(this.program,G),this.gl[X.method].apply(this.gl,[X.location].concat(X.value));for(var Re in this.buffers){var Ue=this.buffers[Re];this.gl.useProgram(Ue.program);var Ye=this.gl.getUniformLocation(Ue.program,G);this.gl[X.method].apply(this.gl,[Ye].concat(X.value))}}}},{key:"uniformTexture",value:function(F,I,G){if(this.textures[F]===void 0)this.loadTexture(F,I,G);else{this.uniform("1i","sampler2D",F,this.texureIndex);for(var X in this.buffers){var le=this.buffers[X];this.gl.useProgram(le.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[F].texture)}this.gl.useProgram(this.program),this.gl.activeTexture(this.gl.TEXTURE0+this.texureIndex),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[F].texture),this.uniform("2f","vec2",F+"Resolution",this.textures[F].width,this.textures[F].height)}}},{key:"resize",value:function(){if(this.width!==this.canvas.clientWidth||this.height!==this.canvas.clientHeight){this.realToCSSPixels=window.devicePixelRatio||1;var F=Math.floor(this.gl.canvas.clientWidth*this.realToCSSPixels),I=Math.floor(this.gl.canvas.clientHeight*this.realToCSSPixels);return(this.gl.canvas.width!==F||this.gl.canvas.height!==I)&&(this.gl.canvas.width=F,this.gl.canvas.height=I,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height)),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.resizeSwappableBuffers(),!0}else return!1}},{key:"render",value:function(){if(this.visible=Me(this.canvas),this.forceRender||this.change||this.animated&&this.visible&&!this.paused){var F=new Date,I=performance.now();this.timeDelta=(I-this.timePrev)/1e3,this.timePrev=I,this.nDelta>1&&this.uniform("1f","float","u_delta",this.timeDelta),this.nTime>1&&this.uniform("1f","float","u_time",(I-this.timeLoad)/1e3),this.nDate&&this.uniform("4f","float","u_date",F.getFullYear(),F.getMonth(),F.getDate(),F.getHours()*3600+F.getMinutes()*60+F.getSeconds()+F.getMilliseconds()*.001),this.uniform("2f","vec2","u_resolution",this.canvas.width,this.canvas.height);for(var G in this.buffers){var X=this.buffers[G];this.uniform("1i","sampler2D",X.name,X.bundle.input.index)}this.texureIndex=this.BUFFER_COUNT;for(var le in this.textures)this.uniformTexture(le),this.texureIndex++;this.renderPrograms(),this.trigger("render",{}),this.change=!1,this.forceRender=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1}},{key:"renderPrograms",value:function(){var F=this.gl,I=F.canvas.width,G=F.canvas.height;F.viewport(0,0,I,G);for(var X in this.buffers){var le=this.buffers[X];le.bundle.render(I,G,le.program,le.name),F.bindFramebuffer(F.FRAMEBUFFER,null)}F.useProgram(this.program),F.drawArrays(F.TRIANGLES,0,6)}},{key:"getBuffers",value:function(F){var I={};return F&&F.replace(/(?:^\s*)((?:#if|#elif)(?:\s*)(defined\s*\(\s*BUFFER_)(\d+)(?:\s*\))|(?:#ifdef)(?:\s*BUFFER_)(\d+)(?:\s*))/gm,function(){var G=arguments[3]||arguments[4];I["u_buffer"+G]={fragment:"#define BUFFER_"+G+`
`+F}}),I}},{key:"loadPrograms",value:function(F){var I=this,G=this.gl,X=ie(I,I.vertexString,G.VERTEX_SHADER);for(var le in F){var oe=F[le],ke=ie(I,oe.fragment,G.FRAGMENT_SHADER,1);ke?I.isValid=!0:(ke=ie(I,`void main(){
	gl_FragColor = vec4(1.0);
}`,G.FRAGMENT_SHADER),I.isValid=!1);var Te=we(I,[X,ke]);oe.name=le,oe.program=Te,oe.bundle=I.createSwappableBuffer(I.canvas.width,I.canvas.height,Te),G.deleteShader(ke)}G.deleteShader(X)}},{key:"createSwappableBuffer",value:function(F,I,G){var X=this.createBuffer(F,I,G),le=this.createBuffer(F,I,G),oe=this.gl;return{input:X,output:le,swap:function(){var Te=X;X=le,le=Te,this.input=X,this.output=le},render:function(Te,Re,Ue,Ye){oe.useProgram(Ue),oe.viewport(0,0,Te,Re),oe.bindFramebuffer(oe.FRAMEBUFFER,this.input.buffer),oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,this.output.texture,0),oe.drawArrays(oe.TRIANGLES,0,6),this.swap()},resize:function(Te,Re,Ue,Ye){oe.useProgram(Ue),oe.viewport(0,0,Te,Re),this.input.resize(Te,Re),this.output.resize(Te,Re)}}}},{key:"createBuffer",value:function(F,I,G){var X=this.gl,le=this.BUFFER_COUNT;this.BUFFER_COUNT+=2,X.getExtension("OES_texture_float");var oe=X.createTexture();X.activeTexture(X.TEXTURE0+le),X.bindTexture(X.TEXTURE_2D,oe),X.texImage2D(X.TEXTURE_2D,0,X.RGBA,F,I,0,X.RGBA,X.FLOAT,null),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE);var ke=X.createFramebuffer();return{index:le,texture:oe,buffer:ke,W:F,H:I,resize:function(Re,Ue){X.bindFramebuffer(X.FRAMEBUFFER,ke);var Ye=Math.min(Re,this.W),Fe=Math.min(Ue,this.H),nt=new Float32Array(Ye*Fe*4);X.readPixels(0,0,Ye,Fe,X.RGBA,X.FLOAT,nt),X.bindFramebuffer(X.FRAMEBUFFER,null);var ze=le+1,rt=X.createTexture();X.activeTexture(X.TEXTURE0+ze),X.bindTexture(X.TEXTURE_2D,rt),X.texImage2D(X.TEXTURE_2D,0,X.RGBA,Re,Ue,0,X.RGBA,X.FLOAT,null),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texSubImage2D(X.TEXTURE_2D,0,0,0,Ye,Fe,X.RGBA,X.FLOAT,nt);var st=X.createFramebuffer();X.bindFramebuffer(X.FRAMEBUFFER,null),X.deleteTexture(oe),X.activeTexture(X.TEXTURE0+le),X.bindTexture(X.TEXTURE_2D,rt),le=this.index=le,oe=this.texture=rt,ke=this.buffer=st,this.W=Re,this.H=Ue}}}},{key:"resizeSwappableBuffers",value:function(){var F=this.gl,I=F.canvas.width,G=F.canvas.height;F.viewport(0,0,I,G);for(var X in this.buffers){var le=this.buffers[X];le.bundle.resize(I,G,le.program,le.name)}F.useProgram(this.program)}},{key:"version",value:function(){return"0.1.7"}}]),J}();function ct(){var J=document.getElementsByClassName("glslCanvas");if(J.length>0){window.glslCanvases=[];for(var z=0;z<J.length;z++){var F=new et(J[z]);F.isValid&&window.glslCanvases.push(F)}}}return window.addEventListener("load",function(){ct()}),et})}).call(this,typeof ci<"u"?ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],110:[function(o,M,T){M.exports=h;var l=Object.prototype.toString;function h(x){if(!x)return!1;var w=l.call(x);return w==="[object Function]"||typeof x=="function"&&w!=="[object RegExp]"||typeof window<"u"&&(x===window.setTimeout||x===window.alert||x===window.confirm||x===window.prompt)}},{}],111:[function(o,M,T){var l=function(x){return x.replace(/^\s+|\s+$/g,"")},h=function(x){return Object.prototype.toString.call(x)==="[object Array]"};M.exports=function(x){if(!x)return{};for(var w={},b=l(x).split(`
`),a=0;a<b.length;a++){var d=b[a],E=d.indexOf(":"),m=l(d.slice(0,E)).toLowerCase(),v=l(d.slice(E+1));typeof w[m]>"u"?w[m]=v:h(w[m])?w[m].push(v):w[m]=[w[m],v]}return w}},{}],112:[function(o,M,T){var l=o("global/window"),h=o("is-function"),x=o("parse-headers"),w=o("xtend");M.exports=E,M.exports.default=E,E.XMLHttpRequest=l.XMLHttpRequest||R,E.XDomainRequest="withCredentials"in new E.XMLHttpRequest?E.XMLHttpRequest:l.XDomainRequest,b(["get","put","post","patch","head","delete"],function(A){E[A==="delete"?"del":A]=function(L,_,g){return _=d(L,_,g),_.method=A.toUpperCase(),m(_)}});function b(A,L){for(var _=0;_<A.length;_++)L(A[_])}function a(A){for(var L in A)if(A.hasOwnProperty(L))return!1;return!0}function d(A,L,_){var g=A;return h(L)?(_=L,typeof A=="string"&&(g={uri:A})):g=w(L,{uri:A}),g.callback=_,g}function E(A,L,_){return L=d(A,L,_),m(L)}function m(A){if(typeof A.callback>"u")throw new Error("callback argument missing");var L=!1,_=function(ae,pe,be){L||(L=!0,A.callback(ae,pe,be))};function g(){k.readyState===4&&setTimeout(p,0)}function S(){var te=void 0;if(k.response?te=k.response:te=k.responseText||v(k),Z)try{te=JSON.parse(te)}catch{}return te}function f(te){return clearTimeout(Q),te instanceof Error||(te=new Error(""+(te||"Unknown XMLHttpRequest Error"))),te.statusCode=0,_(te,ce)}function p(){if(!O){var te;clearTimeout(Q),A.useXDR&&k.status===void 0?te=200:te=k.status===1223?204:k.status;var ae=ce,pe=null;return te!==0?(ae={body:S(),statusCode:te,method:D,headers:{},url:C,rawRequest:k},k.getAllResponseHeaders&&(ae.headers=x(k.getAllResponseHeaders()))):pe=new Error("Internal XMLHttpRequest Error"),_(pe,ae,ae.body)}}var k=A.xhr||null;k||(A.cors||A.useXDR?k=new E.XDomainRequest:k=new E.XMLHttpRequest);var c,O,C=k.url=A.uri||A.url,D=k.method=A.method||"GET",$=A.body||A.data,W=k.headers=A.headers||{},B=!!A.sync,Z=!1,Q,ce={body:void 0,headers:{},statusCode:0,method:D,url:C,rawRequest:k};if("json"in A&&A.json!==!1&&(Z=!0,W.accept||W.Accept||(W.Accept="application/json"),D!=="GET"&&D!=="HEAD"&&(W["content-type"]||W["Content-Type"]||(W["Content-Type"]="application/json"),$=JSON.stringify(A.json===!0?$:A.json))),k.onreadystatechange=g,k.onload=p,k.onerror=f,k.onprogress=function(){},k.onabort=function(){O=!0},k.ontimeout=f,k.open(D,C,!B,A.username,A.password),B||(k.withCredentials=!!A.withCredentials),!B&&A.timeout>0&&(Q=setTimeout(function(){if(!O){O=!0,k.abort("timeout");var te=new Error("XMLHttpRequest timeout");te.code="ETIMEDOUT",f(te)}},A.timeout)),k.setRequestHeader)for(c in W)W.hasOwnProperty(c)&&k.setRequestHeader(c,W[c]);else if(A.headers&&!a(A.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in A&&(k.responseType=A.responseType),"beforeSend"in A&&typeof A.beforeSend=="function"&&A.beforeSend(k),k.send($||null),k}function v(A){try{if(A.responseType==="document")return A.responseXML;var L=A.responseXML&&A.responseXML.documentElement.nodeName==="parsererror";if(A.responseType===""&&!L)return A.responseXML}catch{}return null}function R(){}},{"global/window":108,"is-function":110,"parse-headers":111,xtend:113}],113:[function(o,M,T){M.exports=h;var l=Object.prototype.hasOwnProperty;function h(){for(var x={},w=0;w<arguments.length;w++){var b=arguments[w];for(var a in b)l.call(b,a)&&(x[a]=b[a])}return x}},{}],114:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/core-js/object/keys").default,w=o("babel-runtime/core-js/object/create").default,b=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0}),o("document-register-element");var a=o("./core/Shader"),d=b(a),E=o("./core/Editor"),m=o("./ui/Menu"),v=b(m),R=o("./ui/Helpers"),A=b(R),L=o("./ui/ErrorsDisplay"),_=b(L),g=o("./ui/VisualDebugger"),S=b(g),f=o("./ui/ExportIcon"),p=b(f),k=o("./io/FileDrop"),c=b(k),O=o("./io/HashWatch"),C=b(O),D=o("./io/BufferManager"),$=b(D),W=o("./io/LocalStorage"),B=b(W),Z=o("xhr"),Q=b(Z),ce=o("./tools/mixin"),te=o("./tools/download"),ae=o("./tools/common"),pe=o("codemirror"),be=b(pe),se="last-content",ie=`// Author:
// Title:

#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;

void main() {
    vec2 st = gl_FragCoord.xy/u_resolution.xy;
    st.x *= u_resolution.x/u_resolution.y;

    vec3 color = vec3(0.);
    color = vec3(st.x,st.y,abs(sin(u_time)));

    gl_FragColor = vec4(color,1.0);
}`,we=function(){function Me(ge,ye){var me=this;if(h(this,Me),this.createFontLink(),(0,ce.subscribeMixin)(this),typeof ge=="object"&&ge.nodeType&&ge.nodeType===1)this.container=ge;else if(typeof ge=="string"){if(this.container=document.querySelector(ge),!this.container)throw new Error("element "+ge+" not present")}else{console.log("Error, type "+typeof ge+" of "+ge+" is unknown");return}if(this.options={},this.change=!1,this.autoupdate=!0,this.lygia_glob=null,ye&&(this.options=ye),this.options.imgs===void 0&&(this.options.imgs=[]),this.options.display_menu===void 0&&(this.options.display_menu=!0),this.container.hasAttribute("data-textures")){var De=this.container.getAttribute("data-textures").split(",");for(var Ge in De)this.options.imgs.push(De[Ge])}if(this.options.theme||(this.options.theme="default"),!this.options.frag){var Xe=this.container.innerHTML.replace(/&lt;br&gt;/g,"");Xe=Xe.replace(/<br>/g,""),Xe=Xe.replace(/&nbsp;/g,""),Xe=Xe.replace(/&lt;/g,"<"),Xe=Xe.replace(/&gt;/g,">"),Xe=Xe.replace(/&amp;/g,"&"),this.options.frag=Xe||ie,Xe&&(this.container.innerHTML="")}if(this.options.frag_header||(this.options.frag_header=""),this.options.frag_footer||(this.options.frag_footer=""),this.options.watchHash&&new C.default(this),this.options.menu&&(this.menu=new v.default(this)),this.options.multipleBuffers&&(this.bufferManager=new $.default(this)),this.options.fileDrops&&new c.default(this),this.options.indentUnit===void 0&&(this.options.indentUnit=4),this.options.tabSize===void 0&&(this.options.tabSize=4),this.options.indentWithTabs===void 0&&(this.options.indentWithTabs=!1),this.options.lineWrapping===void 0&&(this.options.lineWrapping=!0),this.options.autofocus===void 0&&(this.options.autofocus=!0),this.shader=new d.default(this),this.editor=(0,E.initEditor)(this),this.helpers=new A.default(this),this.errorsDisplay=new _.default(this),this.visualDebugger=new S.default(this),this.options.exportIcon&&(this.export=new p.default(this)),this.editor.on("change",function(){me.autoupdate&&me.update()}),this.options.canvas_follow&&(this.shader.el.style.position="relative",this.options.canvas_float&&(this.shader.el.style.float=this.options.canvas_float),this.editor.on("cursorActivity",function(J){var z=J.heightAtLine(J.getCursor().line+1,"local")-me.shader.el.clientHeight;z<0&&(z=0),me.shader.el.style.top=z.toString()+"px"})),this.editor.on("inputRead",function(J,z){var F=J.getCursor(),I=J.getTokenAt(F),G=I.string.trim();G.startsWith("#include")&&function(){var X=G.substring(10);me.lygia_glob===null&&(0,ae.getJSON)("https://lygia.xyz/glsl.json",function(Re,Ue){Re===null&&(me.lygia_glob=Ue)}),console.log("autocomplete for",X);var le=I.start,oe=F.ch,ke=F.line,Te=[];me.lygia_glob!==null&&(me.lygia_glob.forEach(function(Re){Re.startsWith(X)&&Te.push('#include "'+Re+'"')}),Te.sort()),Te.length>0&&be.default.showHint(J,function(){var Re={list:Te,from:be.default.Pos(ke,le),to:be.default.Pos(ke,oe)};return console.log(Re),Re},{completeSingle:!0,alignWithWord:!0})}()}),window.addEventListener("beforeunload",function(J){var z={};if(me.bufferManager&&x(me.bufferManager.buffers).length!==0)for(var F in me.bufferManager.buffers)z[F]=me.bufferManager.buffers[F].getValue();else z[new Date().getTime().toString()]=me.editor.getValue();me.options.menu&&B.default.setItem(se,JSON.stringify(z))}),this.options.menu){var et=JSON.parse(B.default.getItem(se));if(et)for(var ct in et)this.open(et[ct],ct);else this.new()}else this.new();return this}return l(Me,[{key:"new",value:function(){this.setContent(this.options.frag||ie,new Date().getTime().toString()),this.trigger("new_content",{}),this.options.frag=null}},{key:"setContent",value:function(ye,me){this.shader&&this.shader.canvas&&(this.debugging&&(this.debugging=!1,(0,E.focusAll)(this.editor)),this.shader.canvas.load(this.options.frag_header+ye+this.options.frag_footer)),this.editor&&(me!==void 0&&this.bufferManager!==void 0?(this.bufferManager.open(me,ye),this.bufferManager.select(me)):(this.editor.setValue(ye),this.editor.setSize(null,this.editor.getDoc().height+"px"),this.editor.setSize(null,"auto"),this.filename=me)),this.change=!0}},{key:"open",value:function(ye,me){var De=this;typeof ye=="object"?function(){var Ge=new FileReader,Xe=De;Ge.onload=function(et){Xe.setContent(et.target.result,ye.name)},Ge.readAsText(ye)}():typeof ye=="string"&&(/\.frag$/.test(ye)||/\.fs$/.test(ye)?Q.default.get(ye,function(Ge,Xe,et){if(Ge){console.log("Error downloading ",ye,Ge);return}De.setContent(et,me)}):this.setContent(ye,me))}},{key:"getContent",value:function(){return this.editor.getValue()}},{key:"getAuthor",value:function(){var ye=this.getContent(),me=ye.match(/\/\/\s*[A|a]uthor\s*[\:]?\s*([\w|\s|\@|\(|\)|\-|\_]*)/i);if(me&&!(me[1]===" "||me[1]==="")){var De=me[1].replace(/(\r\n|\n|\r)/gm,"");return De}else return"unknown"}},{key:"getTitle",value:function(){var ye=this.getContent(),me=ye.match(/\/\/\s*[T|t]itle\s*:\s*([\w|\s|\@|\(|\)|\-|\_]*)/i);if(me&&!(me[1]===" "||me[1]==="")){var De=me[1].replace(/(\r\n|\n|\r)/gm,"");return De}else return this.bufferManager!==void 0?this.bufferManager.current:"unknown"}},{key:"getOfToken",value:function(){return this.storage.get("accessToken")}},{key:"download",value:function(){var ye=this.getContent(),me=this.getTitle();me!==""&&(me+="-"),me+=new Date().getTime();var De=new Blob([ye],{type:"text/plain"});(0,te.saveAs)(De,me+".frag"),this.editor.doc.markClean(),this.change=!1}},{key:"update",value:function(){this.debugging&&(this.debugging=!1,(0,E.focusAll)(this.editor)),this.visualDebugger.testingResults.length&&this.visualDebugger.clean(),this.shader.canvas.load(this.options.frag_header+this.editor.getValue()+this.options.frag_footer)}},{key:"createFontLink",value:function(){var ye=document.getElementsByTagName("head")[0],me=document.createElement("link");me.href="https://fonts.googleapis.com/icon?family=Material+Icons",me.type="text/css",me.rel="stylesheet",me.media="screen,print",ye.appendChild(me),document.getElementsByTagName("head")[0].appendChild(me)}},{key:"togglePresentationWindow",value:function(ye){this.pWindowOpen=ye,ye?this.shader.openWindow():this.shader.closeWindow()}},{key:"onClosePresentationWindow",value:function(){this.pWindowOpen=!1}}]),Me}();T.default=we,window.GlslEditor=we;var re=function(){};re.prototype=w(HTMLElement.prototype),re.prototype.createdCallback=function(){for(var ge={canvas_size:150,canvas_follow:!0,tooltips:!0},ye=0;ye<this.attributes.length;ye++){var me=this.attributes[ye];if(me.specified){var De=me.value;De==="true"?De=!0:De==="false"?De=!1:parseInt(De)&&(De=parseInt(De)),ge[me.name]=De}}this.glslEditor=new we(this,ge)},document.registerElement("glsl-editor",re),M.exports=T.default},{"./core/Editor":115,"./core/Shader":116,"./io/BufferManager":117,"./io/FileDrop":118,"./io/HashWatch":119,"./io/LocalStorage":120,"./tools/common":121,"./tools/download":123,"./tools/mixin":126,"./ui/ErrorsDisplay":128,"./ui/ExportIcon":129,"./ui/Helpers":130,"./ui/Menu":131,"./ui/VisualDebugger":133,"babel-runtime/core-js/object/create":3,"babel-runtime/core-js/object/keys":6,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14,codemirror:30,"document-register-element":107,xhr:112}],115:[function(o,M,T){o("babel-runtime/core-js/promise").default;var l=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0}),T.initEditor=b,T.unfocusLine=a,T.unfocusAll=d,T.focusLine=E,T.focusAll=m;var h=o("codemirror"),x=l(h);o("codemirror/addon/search/search"),o("codemirror/addon/search/searchcursor"),o("codemirror/addon/comment/comment"),o("codemirror/addon/dialog/dialog"),o("codemirror/addon/edit/matchbrackets"),o("codemirror/addon/edit/closebrackets"),o("codemirror/addon/wrap/hardwrap"),o("codemirror/addon/fold/foldcode"),o("codemirror/addon/fold/foldgutter"),o("codemirror/addon/fold/indent-fold"),o("codemirror/addon/hint/show-hint"),o("codemirror/addon/hint/javascript-hint"),o("codemirror/addon/display/rulers"),o("codemirror/addon/display/panel"),o("codemirror/addon/hint/show-hint"),o("codemirror/mode/clike/clike.js"),o("codemirror/keymap/sublime");var w="ge_editor-unfocus";function b(v){v.options.lineNumbers===void 0&&(v.options.lineNumbers=!0);var R=document.createElement("div");R.setAttribute("class","ge_editor"),v.menu&&(R.style.paddingTop=(v.menu.el.clientHeight||v.menu.el.offsetHeight||v.menu.el.scrollHeight)+"px"),v.container.appendChild(R);var A=(0,x.default)(R,{value:v.options.frag,viewportMargin:1/0,lineNumbers:v.options.lineNumbers,matchBrackets:!0,mode:"x-shader/x-fragment",keyMap:"sublime",autoCloseBrackets:!0,extraKeys:{"Ctrl-Space":"autocomplete"},showCursorWhenSelecting:!0,theme:v.options.theme,dragDrop:!1,indentUnit:v.options.indentUnit,tabSize:v.options.tabSize,indentWithTabs:v.options.indentWithTabs,gutters:v.options.lineNumbers?["CodeMirror-linenumbers","breakpoints"]:!1,lineWrapping:v.options.lineWrapping,autofocus:v.options.autofocus});return A}function a(v,R){R!==null&&(v.getDoc().addLineClass(R,"gutter",w),v.getDoc().addLineClass(R,"text",w))}function d(v){for(var R=0,A=v.getDoc().lineCount();R<=A;R++)a(v,R)}function E(v,R){R!==null&&(v.getDoc().removeLineClass(R,"gutter",w),v.getDoc().removeLineClass(R,"text",w))}function m(v){for(var R=0,A=v.getDoc().lineCount();R<=A;R++)E(v,R)}},{"babel-runtime/core-js/promise":8,"babel-runtime/helpers/interop-require-default":14,codemirror:30,"codemirror/addon/comment/comment":15,"codemirror/addon/dialog/dialog":16,"codemirror/addon/display/panel":17,"codemirror/addon/display/rulers":18,"codemirror/addon/edit/closebrackets":19,"codemirror/addon/edit/matchbrackets":20,"codemirror/addon/fold/foldcode":21,"codemirror/addon/fold/foldgutter":22,"codemirror/addon/fold/indent-fold":23,"codemirror/addon/hint/javascript-hint":24,"codemirror/addon/hint/show-hint":25,"codemirror/addon/search/search":26,"codemirror/addon/search/searchcursor":27,"codemirror/addon/wrap/hardwrap":28,"codemirror/keymap/sublime":29,"codemirror/mode/clike/clike.js":31}],116:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var w=o("glslCanvas"),b=x(w),a=o("../tools/interactiveDom"),d=o("../tools/mediaCapture"),E=x(d),m=o("../ui/MenuItem"),v=x(m),R=o("../tools/download"),A="ge_control",L="ge_control_panel",_=function(){function g(S){var f=this;h(this,g),this.main=S,this.options=S.options,this.frag="",this.el=document.createElement("div"),this.el.setAttribute("class","ge_canvas_container"),this.elCanvas=document.createElement("canvas"),this.elCanvas.setAttribute("class","ge_canvas"),this.elCanvas.setAttribute("data-fragment",this.options.frag_header+this.options.frag+this.options.frag_footer),this.el.appendChild(this.elCanvas);var p=new b.default(this.elCanvas,{premultipliedAlpha:!1,preserveDrawingBuffer:!0,backgroundColor:"rgba(1,1,1,1)"}),k=this.options.canvas_width||this.options.canvas_size||"250",c=this.options.canvas_height||this.options.canvas_size||"250";if(p.canvas.style.width=k+"px",p.canvas.style.height=c+"px",p.resize(),this.canvas=p,this.options.imgs&&this.options.imgs.length>0)for(var O in this.options.imgs)this.canvas.setUniform("u_tex"+O,this.options.imgs[O]);if(this.mediaCapture=new E.default,this.mediaCapture.setCanvas(this.elCanvas),this.canvas.on("render",function(){f.mediaCapture.completeScreenshot()}),S.options.displayMenu){this.controlsContainer=document.createElement("ul"),this.controlsContainer.className=A,this.controlPanel=document.createElement("ul"),this.controlPanel.className=L,this.controlsContainer.appendChild(this.controlPanel),this.el.appendChild(this.controlsContainer),this.controls={},this.controls.playPause=new v.default(this.controlPanel,"ge_control_element",'<i class="material-icons">pause</i>',function(D){D.stopPropagation(),D.preventDefault(),p.paused?(p.play(),f.controls.playPause.name='<i class="material-icons">pause</i>'):(p.pause(),f.controls.playPause.name='<i class="material-icons">play_arrow</i>')}),this.isCapturing=!1;var C=new v.default(this.controlPanel,"ge_control_element",'<i class="material-icons">&#xE061;</i>',function(D){D.stopPropagation(),D.preventDefault(),f.isCapturing?f.stopVideoCapture():f.startVideoCapture()});this.controls.rec=C,this.controls.rec.button.style.color="red",this.controls.presentationMode=new v.default(this.controlPanel,"ge_control_element",'<i class="material-icons">open_in_new</i>',function(D){D.stopPropagation(),D.preventDefault(),S.pWindowOpen?S.togglePresentationWindow(!1):S.togglePresentationWindow(!0)}),this.elControl=this.el.getElementsByClassName(A)[0],this.elControl.addEventListener("mouseenter",function(D){f.showControls()}),this.elControl.addEventListener("mouseleave",function(D){f.hideControls()}),this.elCanvas.addEventListener("mousemove",function(D){D.offsetY>f.elCanvas.clientHeight*.66?f.showControls():f.hideControls()}),this.hideControls()}(S.options.canvas_draggable||S.options.canvas_resizable||S.options.canvas_snapable)&&((0,a.subscribeInteractiveDom)(this.el,{move:S.options.canvas_draggable,resize:S.options.canvas_resizable,snap:S.options.canvas_snapable}),S.options.canvas_size==="halfscreen"&&this.el.snapRight(),this.el.on("move",function(D){D.el.style.width=D.el.clientWidth+"px",D.el.style.height=D.el.clientHeight+"px"}),this.el.on("resize",function(D){p.canvas.style.width=D.el.clientWidth+"px",p.canvas.style.height=D.el.clientHeight+"px",p.resize()})),S.menu&&(this.el.style.top=(S.menu.el.clientHeight||S.menu.el.offsetHeight||S.menu.el.scrollHeight)+"px"),S.container.appendChild(this.el),p.resize()}return l(g,[{key:"hideControls",value:function(){this.elControl&&this.elControl.className===A&&(this.elControl.className=A+" "+A+"_hidden")}},{key:"showControls",value:function(){this.elControl&&this.elControl.className===A+" "+A+"_hidden"&&(this.elControl.className=A)}},{key:"requestRedraw",value:function(){this.canvas.forceRender=!0,this.canvas.render()}},{key:"screenshot",value:function(){return this.requestRedraw(),this.mediaCapture.screenshot()}},{key:"startVideoCapture",value:function(){this.requestRedraw(),this.mediaCapture.startVideoCapture()&&(this.isCapturing=!0,this.controls.rec.button.style.color="white",this.controls.rec.name='<i class="material-icons">&#xE061;</i>')}},{key:"stopVideoCapture",value:function(){this.isCapturing&&(this.isCapturing=!1,this.controls.rec.button.style.color="red",this.controls.rec.name='<i class="material-icons">stop</i>',this.mediaCapture.stopVideoCapture().then(function(f){(0,R.saveAs)(f.blob,Number(new Date)+".webm")}))}},{key:"openWindow",value:function(){this.originalSize={width:this.canvas.canvas.clientWidth,height:this.canvas.canvas.clientHeight},this.presentationWindow=window.open("","_blank","presentationWindow"),this.setUpPresentationWindow()}},{key:"closeWindow",value:function(){this.presentationWindow&&this.presentationWindow.close()}},{key:"setCanvasSize",value:function(f,p){this.canvas.canvas.style.width=f+"px",this.canvas.canvas.style.height=p+"px"}},{key:"setUpPresentationWindow",value:function(){this.presentationWindow.document.body.appendChild(this.canvas.canvas);var f=this.presentationWindow.document,p=f.createElement("div");p.appendChild(f.createTextNode("Projector mode"));var k=this.presentationWindow.document.createElement("span");p.appendChild(k),k.appendChild(f.createTextNode(" - If the canvas doesn't update, drag this window and reveal the editor")),f.body.appendChild(p),f.title="GLSL Editor",f.body.style.padding="0",f.body.style.margin="0",f.body.style.background="#171e22",f.body.style.overflow="hidden",p.style.position="absolute",p.style.width="100%",p.style.background="rgba(0, 0, 0, 0.5)",p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.right="0",p.style.padding="16px",p.style.color="#ffffff",p.style.fontSize="14px",p.style.fontFamily="Helvetica, Geneva, sans-serif",p.style.fontWeight="400",p.style.letterSpacing="0.1em",p.style.textAlign="center",p.style.opacity="1",p.style.zIndex="9999",p.style.setProperty("-webkit-transition","opacity 1.5s"),p.style.setProperty("-moz-transition","opacity 1.5s"),p.style.setProperty("transition","opacity 1.5s"),k.style.color="rgba(255, 255, 255, 0.5)",setTimeout(function(){p.style.opacity=0},4e3),this.setCanvasSize(this.presentationWindow.innerWidth,this.presentationWindow.innerHeight),this.presentationWindow.addEventListener("resize",this.onPresentationWindowResize.bind(this)),this.presentationWindow.addEventListener("unload",this.onPresentationWindowClose.bind(this))}},{key:"onPresentationWindowClose",value:function(){this.el.appendChild(this.canvas.canvas),this.setCanvasSize(this.originalSize.width,this.originalSize.height),this.canvas.resize(),this.main.onClosePresentationWindow(),this.main.menu.onClosePresentationWindow(),this.presentationWindow=null}},{key:"onPresentationWindowResize",value:function(){this.presentationWindow&&(this.setCanvasSize(this.presentationWindow.innerWidth,this.presentationWindow.innerHeight),this.canvas.resize())}}]),g}();T.default=_,M.exports=T.default},{"../tools/download":123,"../tools/interactiveDom":124,"../tools/mediaCapture":125,"../ui/MenuItem":132,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14,glslCanvas:109}],117:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/core-js/object/keys").default,w=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var b=o("codemirror"),a=w(b);o("codemirror/mode/clike/clike.js");var d=function(){function E(m){h(this,E),this.main=m,this.buffers={},this.tabs={},this.current="untitled"}return l(E,[{key:"open",value:function(v,R){var A=this;this.el||(this.el=document.createElement("ul"),this.el.className="ge_panel"),this.main.change&&this.current==="untitled"&&(console.log("Open Current in a different tab"),this.open(this.current,this.main.getContent())),this.buffers[v]=a.default.Doc(R,"x-shader/x-fragment");var L=document.createElement("li");L.setAttribute("class","ge_panel_tab"),L.textContent=v,a.default.on(L,"click",function(){A.select(v)});var _=L.appendChild(document.createElement("a"));_.textContent="x",_.setAttribute("class","ge_panel_tab_close"),a.default.on(_,"click",function(){A.close(v)}),this.el.appendChild(L),this.tabs[v]=L,this.el&&!this.panel&&this.getLength()>1&&(this.panel=this.main.editor.addPanel(this.el,{position:"top"}))}},{key:"select",value:function(v){var R=this.buffers[v];if(R!==void 0){R.getEditor()&&(R=R.linkedDoc({sharedHist:!0}));var A=this.main.editor.swapDoc(R),L=A.iterLinkedDocs(function(g){L=g});if(L){for(var _ in this.buffers)this.buffers[_]===A&&(this.buffers[_]=L);A.unlinkDoc(L)}this.main.options.autofocus&&this.main.editor.focus(),this.main.setContent(this.main.getContent()),this.tabs[this.current]&&this.tabs[this.current].setAttribute("class","ge_panel_tab"),this.tabs[v].setAttribute("class","ge_panel_tab_active"),this.current=v,this.main.editor.setSize(null,"auto"),this.main.editor.getWrapperElement().style.height="auto",this.main.trigger("new_content",{})}}},{key:"close",value:function(v){var R=v===this.getCurrent();if(this.el.removeChild(this.tabs[v]),delete this.tabs[v],delete this.buffers[v],this.getLength()===1&&(this.panel.clear(),this.panel=void 0,this.el=void 0),R)for(var A in this.tabs){this.select(A);break}}},{key:"getCurrent",value:function(){return this.current}},{key:"getLength",value:function(){return x(this.buffers).length}}]),E}();T.default=d,M.exports=T.default},{"babel-runtime/core-js/object/keys":6,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14,codemirror:30,"codemirror/mode/clike/clike.js":31}],118:[function(o,M,T){var l=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var h=function x(w){l(this,x),w.container.addEventListener("dragenter",function(b){var a=b.dataTransfer.types;a!==null&&(a.indexOf?a.indexOf("Files")!==-1:a.contains("application/x-moz-file"))&&(b.preventDefault(),b.dataTransfer.dropEffect="copy")},!0),w.container.addEventListener("dragover",function(b){b.preventDefault()},!1),w.container.addEventListener("dragleave",function(b){b.preventDefault()},!0),w.container.addEventListener("drop",function(b){if(b.preventDefault(),b.dataTransfer.files.length>0){var a=b.dataTransfer.files[0];w.open(a)}},!1)};T.default=h,M.exports=T.default},{"babel-runtime/helpers/class-call-check":10}],119:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function b(a){var d=this;h(this,b),this.main=a,this.check(),window.addEventListener("hashchange",function(){d.check()},!1)}return l(b,[{key:"check",value:function(){if(window.location.hash!==""){this.main.options.imgs=[];var d=location.hash.split("&");for(var E in d){var m=d[E].substr(d[E].lastIndexOf(".")+1),v=d[E];v.search("#")===0&&(v=v.substr(1));var R=v.split("/").pop();m==="frag"?this.main.open(v,R.replace(/\.[^/.]+$/,"")):(m==="png"||m==="jpg"||m==="PNG"||m==="JPG")&&this.main.options.imgs.push(v)}}var A=w(window.location.search.slice(1));if(A)for(var L in A)if(L==="log")if(this.main.bufferManager){var _=A.log.split(",");for(var E in _)this.main.open("https://thebookofshaders.com/log/"+_[E]+".frag",_[E])}else this.main.open("https://thebookofshaders.com/log/"+A.log+".frag",A.log);else{var g=A[L];g==="true"||g==="false"?g=g=="true":parseFloat(g)&&(g=parseFloat(g)),this.main.options[L]=g}}}]),b}();T.default=x;function w(b){var a={},d=b.split("&");for(var E in d){var m=d[E].split("=");a[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return a}M.exports=T.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],120:[function(o,M,T){Object.defineProperty(T,"__esModule",{value:!0});var l="glslEditor-",h={setItem:function(w,b){window.localStorage&&window.localStorage.setItem(l+w,b)},pushItem:function(w,b){var a=void 0;a=this.getItem(w);try{a=JSON.parse(a),a.arr=a.arr||[]}catch{a={arr:[]}}a.arr.push(b),this.setItem(w,JSON.stringify(a))},getItem:function(w){if(window.localStorage)return window.localStorage.getItem(l+w)},removeItem:function(w){window.localStorage&&window.localStorage.removeItem(l+w)},clear:function(){if(window.localStorage)for(var w in window.localStorage)w.indexOf(l)===0&&window.localStorage.removeItem(l+w)}};T.default=h,M.exports=T.default},{}],121:[function(o,M,T){Object.defineProperty(T,"__esModule",{value:!0}),T.getDomOrigin=l,T.getDevicePixelRatio=h,T.getJSON=x;function l(w){var b=w.getBoundingClientRect?w.getBoundingClientRect():{top:0,left:0},a=w&&w.ownerDocument,d=a.body,E=a.defaultView||a.parentWindow||window,m=a.documentElement||d.parentNode,v=m.clientTop||d.clientTop||0,R=m.clientLeft||d.clientLeft||0;return{left:b.left+(E.pageXOffset||m.scrollLeft)-R,top:b.top+(E.pageYOffset||m.scrollTop)-v}}function h(w){var b=window.devicePixelRatio||1,a=w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1;return b/a}function x(w,b){var a=new XMLHttpRequest;a.open("GET",w,!0),a.responseType="json",a.onload=function(){var d=a.status;b(d===200?null:d,a.response)},a.send()}},{}],122:[function(o,M,T){Object.defineProperty(T,"__esModule",{value:!0}),T.isCommented=l,T.isLineAfterMain=h,T.getVariableType=x,T.getShaderForTypeVarInLine=w,T.getResultRange=b,T.getMedian=a,T.getDeltaSum=d,T.getHits=E;function l(m,v,R){var A=m.getTokenAt({line:v,ch:R.index});return A&&A.type?A.type==="comment":!1}function h(m,v){for(var R=m.getDoc().size,A=new RegExp("void main\\s*\\(\\s*[void]*\\)","i"),L=0;L<v&&L<R;L++){var _=A.exec(m.getLine(L));if(_)return!0}return!1}function x(m,v){for(var R=m.getDoc().size,A=new RegExp("\\s*uniform\\s+(float|vec2|vec3|vec4)\\s+"+v+"\\s*;"),L=new RegExp("void main\\s*\\(\\s*[void]*\\)","i"),_=!1,g=new RegExp("(float|vec\\d)\\s+("+v+")\\s*[;]?","i"),S=0;S<R;S++)if(_){var k=g.exec(m.getLine(S));if(k&&k[1]&&!l(m,S,k))return k[1]}else{var f=L.exec(m.getLine(S));if(f)_=!0;else{var p=A.exec(m.getLine(S));if(p&&!l(m,S,p))return p[1]}}return"none"}function w(m,v,R,A){for(var L="",_=0;_<A+1&&_<m.getDoc().size;_++)m.getLine(_)&&(L+=m.getLine(_)+`
`);return L+="	gl_FragColor = ",v==="float"?L+="vec4(vec3("+R+"),1.)":v==="vec2"?L+="vec4(vec3("+R+",0.),1.)":v==="vec3"?L+="vec4("+R+",1.)":v==="vec4"&&(L+=R),L+=`;
}
`,L}function b(m){var v="10000000.0",R=0,A="0.0",L=0;for(var _ in m)m[_].ms<v&&(v=m[_].ms,R=m[_].line),m[_].ms>A&&(A=m[_].ms,L=m[_].line);return{min:{line:R,ms:v},max:{line:L,ms:A}}}function a(m){m.sort(function(R,A){return R-A});var v=Math.floor(m.length/2);return m.length%2?m[v]:(m[v-1]+m[v])/2}function d(m){var v=0;for(var R in m)m[R].delta>0&&(v+=m[R].delta);return v}function E(m){var v=0;for(var R in m)m[R].delta>0&&v++;return v}},{}],123:[function(o,M,T){Object.defineProperty(T,"__esModule",{value:!0}),T.saveAs=l;function l(h,x){var w=URL.createObjectURL(h),b=document.createElement("a");b.setAttribute("download",x),b.setAttribute("href",w),b.click()}},{}],124:[function(o,M,T){Object.defineProperty(T,"__esModule",{value:!0}),T.subscribeInteractiveDom=b;var l=o("./mixin"),h=-30,x=10;function w(a,d,E,m,v){a.style.left=d+"px",a.style.top=E+"px",a.style.width=m+"px",a.style.height=v+"px"}function b(a,d){(0,l.subscribeMixin)(a),d=d||{},d.resize=d.resize!==void 0?d.resize:!1,d.move=d.move!==void 0?d.move:!1,d.snap=d.snap!==void 0?d.snap:!1;var E=100,m=100,v=null,R,A,L,_,g,S,f,p,k,c,O=!1,C=document.createElement("div");C.className="ghostdom",d.snap&&a.parentElement.appendChild(C),a.addEventListener("mousedown",Z),document.addEventListener("mousemove",Q),document.addEventListener("mouseup",ce),a.addEventListener("touchstart",$,{passive:!1}),document.addEventListener("touchmove",W,{passive:!1}),document.addEventListener("touchend",B,{passive:!1});function D(){w(C,p.left,p.top,p.width,p.height),C.style.opacity=0}function $(re){re.preventDefault(),re.stopPropagation(),re.touches.length===1&&te(re.changedTouches[0])}function W(re){re.preventDefault(),re.stopPropagation(),re.touches.length===1&&se(re.changedTouches[0])}function B(re){re.preventDefault(),re.stopPropagation(),re.touches.length===0&&we(re.changedTouches[0])}function Z(re){re.preventDefault(),re.stopPropagation(),te(re)}function Q(re){re.preventDefault(),re.stopPropagation(),se(re)}function ce(re){re.preventDefault(),re.stopPropagation(),we(re)}function te(re){pe(re);var Me=d.resize&&(R||A||_||L);v={x:k,y:c,cx:re.clientX,cy:re.clientY,w:p.width,h:p.height,isResizing:Me,isMoving:!Me&&ae(),onTopEdge:_,onLeftEdge:L,onRightEdge:R,onBottomEdge:A}}function ae(){return d.move&&k>0&&k<p.width&&c>0&&c<p.height}function pe(re){p=a.getBoundingClientRect(),k=re.clientX-p.left,c=re.clientY-p.top,_=c<x,L=k<x,R=k>=p.width-x,A=c>=p.height-x,g=window.innerWidth-x,S=window.innerHeight-x}var be;function se(re){pe(re),be=re,O=!0}function ie(){if(requestAnimationFrame(ie),!!O){if(O=!1,v&&v.isResizing){if(v.onRightEdge&&(a.style.width=Math.max(k,E)+"px"),v.onBottomEdge&&(a.style.height=Math.max(c,m)+"px"),v.onLeftEdge){var re=Math.max(v.cx-be.clientX+v.w,E);re>E&&(a.style.width=re+"px",a.style.removeProperty("right"),a.style.left=be.clientX+"px")}if(v.onTopEdge){var Me=Math.max(v.cy-be.clientY+v.h,m);Me>m&&(a.style.height=Me+"px",a.style.removeProperty("bottom"),a.style.top=be.clientY+"px")}D(),a.trigger("resize",{finish:!1,el:a});return}if(v&&v.isMoving){if(d.snap){if(p.top<h||p.left<h||p.right>window.innerWidth-h||p.bottom>window.innerHeight-h?(w(C,0,0,window.innerWidth,window.innerHeight),C.style.opacity=.2):p.top<x?(w(C,0,0,window.innerWidth,window.innerHeight/2),C.style.opacity=.2):p.left<x?(w(C,0,0,window.innerWidth/2,window.innerHeight),C.style.opacity=.2):p.right>g?(w(C,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),C.style.opacity=.2):p.bottom>S?(w(C,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),C.style.opacity=.2):D(),f){w(a,be.clientX-f.width/2,be.clientY-Math.min(v.y,f.height),f.width,f.height);return}a.style.removeProperty("right"),a.style.removeProperty("bottom"),a.style.top=be.clientY-v.y+"px",a.style.left=be.clientX-v.x+"px"}else{var ge=be.clientX-v.x,ye=be.clientY-v.y;ge<0?ge=0:ye<0?ye=0:ge+a.offsetWidth>window.innerWidth?ge=window.innerWidth-a.offsetWidth:ye+a.offsetHeight>window.innerHeight&&(ye=window.innerHeight-a.offsetHeight),a.style.removeProperty("right"),a.style.removeProperty("bottom"),a.style.left=ge+"px",a.style.top=ye+"px"}a.trigger("move",{finish:!1,el:a});return}d.resize&&(R&&A||L&&_)?a.style.cursor="nwse-resize":d.resize&&(R&&_||A&&L)?a.style.cursor="nesw-resize":d.resize&&(R||L)?a.style.cursor="ew-resize":d.resize&&(A||_)?a.style.cursor="ns-resize":ae()?a.style.cursor="move":a.style.cursor="default"}}ie();function we(re){if(pe(re),v&&v.isResizing&&a.trigger("resize",{finish:!0,el:a}),d.snap&&v&&v.isMoving){var Me={width:p.width,height:p.height};p.top<h||p.left<h||p.right>window.innerWidth-h||p.bottom>window.innerHeight-h?(w(a,0,0,window.innerWidth,window.innerHeight),f=Me):p.top<x?(w(a,0,0,window.innerWidth,window.innerHeight/2),f=Me):p.left<x?(w(a,0,0,window.innerWidth/2,window.innerHeight),f=Me):p.right>g?(w(a,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),f=Me):p.bottom>S?(w(a,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),f=Me):f=null,D(),a.trigger("move",{finish:!0,el:a}),a.trigger("resize",{finish:!0,el:a})}v=null}return a.snapRight=function(){var re={width:a.width,height:a.height};w(a,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),f=re,a.trigger("move",{finish:!0,el:a}),a.trigger("resize",{finish:!0,el:a})},a}},{"./mixin":126}],125:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/core-js/promise").default;Object.defineProperty(T,"__esModule",{value:!0});var w=o("./urls"),b=function(){function a(){h(this,a),this.queueScreenshot=null,this.videoCapture=null}return l(a,[{key:"setCanvas",value:function(E){this.canvas=E}},{key:"screenshot",value:function(){var E=this;return this.queueScreenshot!=null?this.queueScreenshot.promise:(this.queueScreenshot={},this.queueScreenshot.promise=new x(function(m,v){E.queueScreenshot.resolve=m,E.queueScreenshot.reject=v}),this.queueScreenshot.promise)}},{key:"completeScreenshot",value:function(){if(this.queueScreenshot!=null){for(var E=this.canvas.toDataURL("image/png"),m=atob(E.slice(22)),v=new Uint8Array(m.length),R=0;R<m.length;++R)v[R]=m.charCodeAt(R);var A=new Blob([v],{type:"image/png"});this.queueScreenshot.resolve({url:E,blob:A,type:"png"}),this.queueScreenshot=null}}},{key:"startVideoCapture",value:function(){var E=this;if(typeof window.MediaRecorder!="function"||!this.canvas||typeof this.canvas.captureStream!="function")return console.log("warn: Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.videoCapture)return console.log("warn: Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{(function(){var m=E.videoCapture={};m.chunks=[],m.stream=E.canvas.captureStream(),m.options={mimeType:"video/webm"},m.mediaRecorder=new MediaRecorder(m.stream,m.options),m.mediaRecorder.ondataavailable=function(v){if(v.data.size>0&&m.chunks.push(v.data),m.resolve){var R=new Blob(m.chunks,{type:m.options.mimeType}),A=(0,w.createObjectURL)(R);if(m.stream){var L=m.stream.getTracks()||[];L.forEach(function(_){_.stop(),m.stream.removeTrack(_)})}m.stream=null,m.mediaRecorder=null,E.videoCapture=null,m.resolve({url:A,blob:R,type:"webm"})}},m.mediaRecorder.start()})()}catch(m){return this.videoCapture=null,console.log("error: Scene video capture failed",m),!1}return!0}},{key:"stopVideoCapture",value:function(){var E=this;return this.videoCapture?(this.videoCapture.promise=new x(function(m,v){E.videoCapture.resolve=m,E.videoCapture.reject=v}),this.videoCapture.mediaRecorder.stop(),this.videoCapture.promise):(console.log("warn: No scene video capture in progress, call Scene.startVideoCapture() first"),x.resolve({}))}}]),a}();T.default=b,M.exports=T.default},{"./urls":127,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],126:[function(o,M,T){var l=o("babel-runtime/core-js/set").default,h=o("babel-runtime/core-js/object/assign").default,x=o("babel-runtime/core-js/get-iterator").default,w=o("babel-runtime/core-js/object/keys").default;Object.defineProperty(T,"__esModule",{value:!0}),T.subscribeMixin=b;function b(a){var d=new l;return h(a,{on:function(m,v){var R={};R[m]=v,d.add(R)},off:function(m,v){if(v){var R={};R[m]=v,d.delete(R)}else{var A=!0,L=!1,_=void 0;try{for(var g=x(d),S;!(A=(S=g.next()).done);A=!0){var f=S.value,p=!0,k=!1,c=void 0;try{for(var O=x(w(f)),C;!(p=(C=O.next()).done);p=!0){var D=C.value;if(D===m){d.delete(f);return}}}catch($){k=!0,c=$}finally{try{!p&&O.return&&O.return()}finally{if(k)throw c}}}}catch($){L=!0,_=$}finally{try{!A&&g.return&&g.return()}finally{if(L)throw _}}}},offAll:function(){d.clear()},trigger:function(m){var v=!0,R=!1,A=void 0;try{for(var L=arguments.length,_=Array(L>1?L-1:0),g=1;g<L;g++)_[g-1]=arguments[g];for(var S=x(d),f;!(v=(f=S.next()).done);v=!0){var p=f.value;typeof p[m]=="function"&&p[m].apply(p,_)}}catch(k){R=!0,A=k}finally{try{!v&&S.return&&S.return()}finally{if(R)throw A}}},listSubscriptions:function(){var m=!0,v=!1,R=void 0;try{for(var A=x(d),L;!(m=(L=A.next()).done);m=!0){var _=L.value;console.log(_)}}catch(g){v=!0,R=g}finally{try{!m&&A.return&&A.return()}finally{if(v)throw R}}}})}},{"babel-runtime/core-js/get-iterator":1,"babel-runtime/core-js/object/assign":2,"babel-runtime/core-js/object/keys":6,"babel-runtime/core-js/set":9}],127:[function(o,M,T){Object.defineProperty(T,"__esModule",{value:!0}),T.createObjectURL=h;var l=void 0;function h(x){return l===void 0&&(l=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL,typeof l!="function"&&(l=null,console.log("window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs"))),l?l(x):x}},{}],128:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(b){var a=this;h(this,w),this.main=b,this.widgets=[],this.main.shader.canvas.on("error",function(d){a.main.visualDebugger&&a.main.visualDebugger.testing?a.clean():(a.clean(),a.addError(d))}),this.main.editor.on("changes",function(d,E){a.main.shader.canvas.isValid&&a.clean()})}return l(w,[{key:"clean",value:function(){for(var a=0;a<this.widgets.length;a++)this.main.editor.removeLineWidget(this.widgets[a]);this.widgets.length=0}},{key:"addError",value:function(a){var d=/ERROR:\s+\d+:(\d+):\s+('.*)/g,E=d.exec(a.error);if(E){var m=0;this.main.options.frag_header.length>0&&(m+=(this.main.options.frag_header.match(/\r?\n/g)||"").length);var v=parseInt(E[1])-m,R=E[2],A=document.createElement("div"),L=A.appendChild(document.createElement("span"));L.className="ge-error-icon",L.innerHTML="x",A.appendChild(document.createTextNode(R)),A.className="ge-error",this.widgets.push(this.main.editor.addLineWidget(v,A))}}}]),w}();T.default=x,M.exports=T.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],129:[function(o,M,T){var l=o("babel-runtime/helpers/class-call-check").default,h=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var x=o("./modals/ExportModal"),w=h(x),b=function a(d){var E=this;l(this,a),this.main=d,this.el=document.createElement("div"),this.el.setAttribute("class","ge_export_icon"),this.el.innerHTML="△",this.el.addEventListener("click",function(m){(d.change||!E.modal)&&(E.modal=new w.default("ge_export",{main:d})),E.modal.presentModal(m.target.offsetLeft,m.target.offsetTop)},!0),this.main.container.appendChild(this.el)};T.default=b,M.exports=T.default},{"./modals/ExportModal":134,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/interop-require-default":14}],130:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var w=o("./pickers/ColorPicker"),b=x(w),a=o("./pickers/Vec3Picker"),d=x(a),E=o("./pickers/Vec2Picker"),m=x(E),v=o("./pickers/FloatPicker"),R=x(v),A=o("./pickers/types/Color"),L=x(A),_=o("./modals/Modal"),g=x(_);RegExp.prototype.execAll=function(f){for(var p=null,k=[];p=this.exec(f);){var c=[];for(var O in p)parseInt(O)==O&&c.push(p[O]);c.index=p.index,k.push(c)}return k};var S=function(){function f(p){var k=this;h(this,f),this.main=p,this.main.debugging=!1;var c=window.getComputedStyle(p.editor.getWrapperElement(),null),O=new L.default(c.background!==""?c.background:c.backgroundColor),C=new L.default(c.color);this.properties={bgColor:O.getString("rgb"),fnColor:C.getString("rgb"),dimColor:"rgb(127, 127, 127)",selColor:"rgb(40, 168, 107)",linkButton:!0};var D=this.main.editor.getWrapperElement();D.addEventListener("contextmenu",function($){var W=k.main.editor.getCursor(!0),B=k.main.editor.getTokenAt(W);B.type==="variable"?k.main.visualDebugger.debug(B.string,W.line):k.main.update()}),D.addEventListener("mouseup",function($){if(!k.main.editor.somethingSelected()){var W=k.main.editor.getCursor(!0),B=k.getMatch(W),Z=k.main.editor.getTokenAt(W);if(B){if(k.main.visualDebugger.clean($),k.main.update(),k.activeModal&&k.activeModal.isVisible){k.activeModal.removeModal();return}B.type==="color"&&(k.activeModal=new b.default(B.string,k.properties),k.activeModal.showAt(k.main.editor),k.activeModal.on("changed",function(ce){var te=ce.getString("vec"),ae={line:W.line,ch:B.start},pe={line:W.line,ch:B.end};B.end=B.start+te.length,k.main.editor.replaceRange(te,ae,pe,"+"+B.type)}),k.activeModal.on("linkButton",function(ce){k.activeModal=new d.default(ce.getString("vec"),k.properties),k.activeModal.showAt(k.main.editor),k.activeModal.on("changed",function(te){var ae=te.getString("vec3"),pe={line:W.line,ch:B.start},be={line:W.line,ch:B.end};B.end=B.start+ae.length,k.main.editor.replaceRange(ae,pe,be,"+"+B.type)})})),B.type==="vec3"?(k.activeModal=new d.default(B.string,k.properties),k.activeModal.showAt(k.main.editor),k.activeModal.on("changed",function(ce){var te=ce.getString("vec3"),ae={line:W.line,ch:B.start},pe={line:W.line,ch:B.end};B.end=B.start+te.length,k.main.editor.replaceRange(te,ae,pe,"+"+B.type)})):B.type==="vec2"?(k.activeModal=new m.default(B.string,k.properties),k.activeModal.showAt(k.main.editor),k.activeModal.on("changed",function(ce){var te=ce.getString(),ae={line:W.line,ch:B.start},pe={line:W.line,ch:B.end};B.end=B.start+te.length,k.main.editor.replaceRange(te,ae,pe,"+"+B.type)})):B.type==="number"&&(k.activeModal=new R.default(B.string,k.properties),k.activeModal.showAt(k.main.editor),k.activeModal.on("changed",function(ce){var te=ce.getString(),ae={line:W.line,ch:B.start},pe={line:W.line,ch:B.end};B.end=B.start+te.length,k.main.editor.replaceRange(te,ae,pe,"+"+B.type)}))}else if(k.main.options.tooltips&&(Z.type==="builtin"||Z.type==="variable-3")){k.main.visualDebugger.clean($);var Q='<p>Learn more about: <a href="https://thebookofshaders.com/glossary/?search='+Z.string+'" target="_blank">'+Z.string+"</a></p>";k.activeModal=new g.default("ge_tooltip",{innerHTML:Q}),k.activeModal.showAt(k.main.editor)}else Z.type==="variable"&&k.main.visualDebugger&&(k.main.visualDebugger.clean($),k.main.visualDebugger.iluminate(Z.string))}})}return l(f,[{key:"getMatch",value:function(k){var c=["color","vec3","vec2","number"],O=void 0;for(var C in c)if(O=this.getTypeMatch(k,c[C]),O)return O}},{key:"getTypeMatch",value:function(k,c){if(c){var O=void 0;switch(c.toLowerCase()){case"color":O=/vec[3|4]\([\d|.|,\s]*\)/g;break;case"vec3":O=/vec3\([-|\d|.|,\s]*\)/g;break;case"vec2":O=/vec2\([-|\d|.|,\s]*\)/g;break;case"number":O=/[-]?\d+\.\d+|\d+\.|\.\d+/g;break;default:console.error("invalid match selection");return}var C=this.main.editor.getLine(k.line),D=O.execAll(C);if(D)for(var $=0;$<D.length;$++){var W=D[$][0],B=W.length,Z=D[$].index,Q=D[$].index+B;if(k.ch>=Z&&k.ch<=Q)return{type:c,start:Z,end:Q,string:W}}}}}]),f}();T.default=S,M.exports=T.default},{"./modals/Modal":135,"./pickers/ColorPicker":136,"./pickers/FloatPicker":137,"./pickers/Vec2Picker":139,"./pickers/Vec3Picker":140,"./pickers/types/Color":141,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14}],131:[function(o,M,T){var l=o("babel-runtime/helpers/class-call-check").default,h=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var x=o("./MenuItem"),w=h(x),b=o("./modals/ExportModal"),a=h(b),d=function E(m){var v=this;l(this,E),this.main=m,this.menus={},this.el=document.createElement("ul"),this.el.setAttribute("class","ge_menu_bar"),this.menus.new=new w.default(this.el,"ge_menu",'<i class="material-icons">add</i> New',function(R){m.new()}),this.fileInput=document.createElement("input"),this.fileInput.setAttribute("type","file"),this.fileInput.setAttribute("accept","text/x-yaml"),this.fileInput.style.display="none",this.fileInput.addEventListener("change",function(R){m.open(R.target.files[0])}),this.menus.open=new w.default(this.el,"ge_menu",'<i class="material-icons">folder_open</i>  Open',function(R){v.fileInput.click()}),this.menus.test=new w.default(this.el,"ge_menu",'<i class="material-icons">timeline</i> Test',function(R){m.visualDebugger.check()}),this.menus.share=new w.default(this.el,"ge_menu",'<i class="material-icons">arrow_upward</i> Export',function(R){(m.change||!v.exportModal)&&(v.exportModal=new a.default("ge_export",{main:m,position:"fixed"}));var A=v.menus.share.el.getBoundingClientRect();v.exportModal.presentModal(A.left-5,A.top+A.height+5)}),this.menus.autoupdate=new w.default(this.el,"ge_menu",' <i class="material-icons">autorenew</i> Update: ON',function(R){m.autoupdate?(m.autoupdate=!1,v.menus.autoupdate.name='<i class="material-icons">autorenew</i> Update: OFF'):(m.autoupdate=!0,m.update(),v.menus.autoupdate.name='<i class="material-icons">autorenew</i> Update: ON')}),m.container.appendChild(this.el)};T.default=d,M.exports=T.default},{"./MenuItem":132,"./modals/ExportModal":134,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/interop-require-default":14}],132:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(b,a,d,E){h(this,w),this.el=document.createElement("li"),this.button=document.createElement("button"),this.button.className=a+"_button",this.el.appendChild(this.button),this.el.setAttribute("class",a),this.button.innerHTML=d,this.className=a,this.hiddenClass=a+"--hidden",this.button.addEventListener("click",E,!0),b&&b.appendChild(this.el)}return l(w,[{key:"hide",value:function(){this.el.setAttribute("class",this.className+" "+this.hiddenClass)}},{key:"show",value:function(){this.el.setAttribute("class",this.className)}},{key:"name",set:function(a){this.button.innerHTML=a}}]),w}();T.default=x,M.exports=T.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],133:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var x=o("../tools/debugging"),w=o("../core/Editor.js"),b={},a=30,d=function(){function v(R){var A=this;h(this,v),this.main=R,this.breakpoint=null,b=R,this.testing=!1,this.testingFrag="",this.testingLine=0,this.testingResults=[],this.testingSamples=[],this.main.editor.on("gutterClick",function(L,_){var g=L.lineInfo(_);if(g&&g.gutterMarkers&&g.gutterMarkers.breakpoints){var S=new RegExp("\\s*[float|vec2|vec3|vec4]?\\s+([\\w|\\_]*)[\\.\\w]*?\\s+[\\+|\\-|\\\\|\\*]?\\=","i"),f=S.exec(g.text);f&&(A.debug(f[1],g.line),A.breakpoint=g.line)}})}return l(v,[{key:"check",value:function(){this.testingResults=[];for(var A=this.main.editor,L=A.getDoc().size,_=0,g=0;g<L;g++)if((0,x.isLineAfterMain)(A,g)){_=g;break}this.testLine(_)}},{key:"testLine",value:function(A){var L=b.editor,_=b.visualDebugger;if(A>=L.getDoc().size){_.testingLine=0,_.testing=!1;var g=_.testingResults,S=(0,x.getResultRange)(g),f=(0,x.getDeltaSum)(g),p=(0,x.getHits)(g);console.log("Test: ",S.max.ms+"ms",g),L.clearGutter("breakpoints");for(var k in g){var c=g[k].delta/f*100,O=g[k].delta/f*30,C="<div>"+g[k].ms.toFixed(2);g[k].delta>0&&(C+='<span class="ge_assing_marker_pct ',c>100/p&&(C+="ge_assing_marker_slower"),C+='" style="width: '+O.toFixed(0)+'px;" data="'+c.toFixed(0)+'%"></span>'),L.setGutterMarker(g[k].line,"breakpoints",E(C+"</div>"))}return}if((0,x.isLineAfterMain)(L,A)){var D=b.shader.canvas,$=new RegExp("\\s*[float|vec2|vec3|vec4]?\\s+([\\w|\\_]*)[\\.\\w]*?\\s+[\\+|\\-|\\\\|\\*]?\\=","i"),W=$.exec(L.getLine(A));if(W){var B=W[1],Z=(0,x.getVariableType)(L,B);if(Z==="none"){_.testLine(A+1);return}_.testing=!0,_.testingLine=A,_.testingFrag=(0,x.getShaderForTypeVarInLine)(L,Z,B,A),_.testingSamples=[],(0,w.unfocusAll)(L),(0,w.focusLine)(L,A),b.debugging=!0,D.test(this.onTest,_.testingFrag)}else _.testLine(A+1)}else _.testLine(A+1)}},{key:"onTest",value:function(A){var L=b.editor,_=b.shader.canvas,g=b.visualDebugger;if(A.wasValid){var S=A.timeElapsedMs;if(g.testingSamples.length<a-1)g.testingSamples.push(S),_.test(g.onTest,g.testingFrag);else{(0,w.focusAll)(L),b.debugging=!1,g.testingSamples.push(S),S=(0,x.getMedian)(g.testingSamples);var f=(0,x.getResultRange)(g.testingResults),p=S-f.max.ms;g.testingResults.length===0&&(p=0),g.testingResults.push({line:g.testingLine,ms:A.timeElapsedMs,delta:p}),L.setGutterMarker(g.testingLine,"breakpoints",E(S.toFixed(2))),g.testLine(g.testingLine+1)}}else console.log(A),g.testLine(g.testingLine+1)}},{key:"debug",value:function(A,L){if((0,w.focusAll)(this.main.editor),this.main.debugging=!1,(0,x.isLineAfterMain)(this.main.editor,L)){var _=(0,x.getVariableType)(this.main.editor,A);_!=="none"&&(event.preventDefault(),this.main.shader.canvas.load((0,x.getShaderForTypeVarInLine)(this.main.editor,_,A,L)),(0,w.unfocusAll)(this.main.editor),(0,w.focusLine)(this.main.editor,L),this.main.debugging=!0)}else this.main.update()}},{key:"iluminate",value:function(A){if(!(this.main.debbuging&&this.variable===this.variable)){var L=this.main.editor;this.overlay=m(A),L.addOverlay(this.overlay),L.showMatchesOnScrollbar&&(this.annotate&&(this.annotate.clear(),this.annotate=null),this.annotate=L.showMatchesOnScrollbar(A,!0))}}},{key:"clean",value:function(A){if(!(A&&A.target&&A.target.className==="ge_assing_marker")){var L=this.main.editor;L.clearGutter("breakpoints"),this.overlay&&L.removeOverlay(this.overlay,!0),this.type=null,this.main.debbuging&&this.main.shader.canvas.load(this.main.options.frag_header+this.main.editor.getValue()+this.main.options.frag_footer),this.main.debbuging=!1}}}]),v}();T.default=d;function E(v,R){var A=document.createElement("div");return A.setAttribute("class","ge_assing_marker"),A.innerHTML=v,A}function m(v,R){return typeof v=="string"?v=new RegExp(v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gi"):v.global||(v=new RegExp(v.source,v.ignoreCase?"gi":"g")),{token:function(L){v.lastIndex=L.pos;var _=v.exec(L.string);if(_&&_.index===L.pos)return L.pos+=_[0].length||1,"searching";_?L.pos=_.index:L.skipToEnd()}}}M.exports=T.default},{"../core/Editor.js":115,"../tools/debugging":122,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],134:[function(o,M,T){var l=o("babel-runtime/helpers/get").default,h=o("babel-runtime/helpers/inherits").default,x=o("babel-runtime/helpers/class-call-check").default,w=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var b=o("../MenuItem"),a=w(b),d=o("./Modal"),E=w(d),m=function(v){h(R,v);function R(A,L){x(this,R),l(Object.getPrototypeOf(R.prototype),"constructor",this).call(this,A,L),this.main=L.main,this.save=new a.default(this.el,"ge_sub_menu","Download file",function(_){L.main.download()})}return R}(E.default);T.default=m,M.exports=T.default},{"../MenuItem":132,"./Modal":135,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],135:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0}),T.addEvent=b,T.removeEvent=a;var x=o("../../tools/mixin"),w=function(){function d(E,m){h(this,d),(0,x.subscribeMixin)(this),this.CSS_PREFIX=E,m=m||{};for(var v in m)this[v]=m[v];if(this.el=document.createElement("div"),this.el.className=this.CSS_PREFIX+"_modal ge_modal",this.el.style.backgroundColor=this.bgColor,this.el.innerHTML=this.innerHTML||"",this.elements)for(var R=0;R<this.elements.length;R++)this.el.appendChild(this.elements[R]);this.isVisible=!1}return l(d,[{key:"close",value:function(){this.trigger("close")}},{key:"showAt",value:function(m){var v=m.cursorCoords(!0,"page"),R=v.left,A=v.top;A+=30,this.presentModal(R,A)}},{key:"presentModal",value:function(m,v){var R=this;window.setTimeout(function(){R.onClickOutsideHandler=b(document.body,"click",R.onClickOutside,R),R.onKeyPressHandler=b(window,"keydown",R.onKeyPress,R)},0),this.isVisible=!0,this.el.style.left=m+"px",this.el.style.top=v+"px",this.el.style.width=this.width+"px",this.el.style.height=this.height+"px",this.position&&(this.el.style.position=this.position),document.body.appendChild(this.el),this.trigger("show")}},{key:"getModalClass",value:function(){return this.CSS_PREFIX+"modal"}},{key:"onKeyPress",value:function(m){this.removeModal()}},{key:"onClickOutside",value:function(m){if(m.target!==document.body){var v=m.target;if(v){for(;v!==document.documentElement&&!v.classList.contains(this.getModalClass());)v=v.parentNode;v.classList.contains(this.getModalClass())||this.removeModal()}}}},{key:"removeModal",value:function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),a(document.body,"click",this.onClickOutsideHandler),this.onClickOutsideHandler=null,a(window,"keydown",this.onKeyPressHandler),this.onKeyPressHandler=null,this.close(),this.isVisible=!1}}]),d}();T.default=w;function b(d,E,m,v){var R=void 0;return d.addEventListener(E,R=function(A){m.call(v,A)},!1),R}function a(d,E,m){d.removeEventListener(E,m,!1)}},{"../../tools/mixin":126,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],136:[function(o,M,T){var l=o("babel-runtime/helpers/get").default,h=o("babel-runtime/helpers/inherits").default,x=o("babel-runtime/helpers/create-class").default,w=o("babel-runtime/helpers/class-call-check").default,b=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var a=o("./Picker"),d=b(a),E=o("./types/Color"),m=b(E),v=o("../../tools/common"),R=o("../../tools/interactiveDom"),A=void 0,L=0,_=void 0,g=function(p){h(k,p);function k(){var c=arguments.length<=0||arguments[0]===void 0?"vec3(1.0,0.0,0.0)":arguments[0],O=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];w(this,k),l(Object.getPrototypeOf(k.prototype),"constructor",this).call(this,"ge_colorpicker_",O),this.width=250,this.height=250,this.disc={width:200,height:200},this.barlum={width:25,height:200},this.setValue(c),this.init()}return x(k,[{key:"init",value:function(){var O=this;if(!_){var C=document.createElement("div"),D=document.createElement("div"),$=document.createElement("div"),W=document.createElement("canvas"),B=document.createElement("div"),Z=document.createElement("div"),Q=document.createElement("div"),ce=document.createElement("div"),te=document.createElement("canvas"),ae=document.createElement("div"),pe=document.createElement("div"),be=document.createElement("div");C.className=this.CSS_PREFIX+"modal ge_picker_modal",C.style.backgroundColor=this.bgColor,D.className=this.CSS_PREFIX+"patch",D.style.backgroundColor=this.bgColor,$.className=this.CSS_PREFIX+"hsv-map",W.className=this.CSS_PREFIX+"disc",W.style.backgroundColor=this.bgColor,B.className=this.CSS_PREFIX+"disc-cover",Z.className=this.CSS_PREFIX+"disc-cursor",Q.className=this.CSS_PREFIX+"bar-bg",ce.className=this.CSS_PREFIX+"bar-white",te.className=this.CSS_PREFIX+"bar-luminance",ae.className=this.CSS_PREFIX+"bar-cursors",pe.className=this.CSS_PREFIX+"bar-cursor-left",be.className=this.CSS_PREFIX+"bar-cursor-right",$.id="cp-map",ae.id="cp-bar",C.appendChild(D),C.appendChild($),$.appendChild(W),$.appendChild(B),$.appendChild(Z),$.appendChild(Q),$.appendChild(ce),$.appendChild(te),$.appendChild(ae),ae.appendChild(pe),ae.appendChild(be),_=C}if(this.el=_.cloneNode(!0),(0,R.subscribeInteractiveDom)(this.el,{move:!0,resize:!1,snap:!1}),this.dom={},this.dom.hsvMap=this.el.querySelector(".ge_colorpicker_hsv-map"),this.dom.hsvMapCover=this.dom.hsvMap.children[1],this.dom.hsvMapCursor=this.dom.hsvMap.children[2],this.dom.hsvBarBGLayer=this.dom.hsvMap.children[3],this.dom.hsvBarWhiteLayer=this.dom.hsvMap.children[4],this.dom.hsvBarCursors=this.dom.hsvMap.children[6],this.dom.hsvLeftCursor=this.dom.hsvBarCursors.children[0],this.dom.hsvRightCursor=this.dom.hsvBarCursors.children[1],this.dom.colorDisc=this.el.querySelector(".ge_colorpicker_disc"),this.dom.luminanceBar=this.el.querySelector(".ge_colorpicker_bar-luminance"),this.linkButton){var se=document.createElement("div");se.innerHTML="+",se.className=this.CSS_PREFIX+"link-button",se.style.color=this.fgColor,this.el.appendChild(se),se.addEventListener("click",function(){O.trigger("linkButton",O.value),typeof O.linkButton=="function"&&O.linkButton(O.value),O.removeModal()})}}},{key:"draw",value:function(){var O=this.el.querySelector(".ge_colorpicker_patch");O.style.backgroundColor=this.value.getString("rgb");var C=this.value.colors,D=this.dom.colorDisc.offsetHeight/2,$=Math.PI*2,W=Math.cos($-C.hsv.h*$),B=Math.sin($-C.hsv.h*$),Z=C.hsv.s*(D-5);this.dom.hsvMapCover.style.opacity=1-C.hsv.v/255,this.dom.hsvBarWhiteLayer.style.opacity=1-C.hsv.s,this.dom.hsvBarBGLayer.style.backgroundColor="rgb("+C.hueRGB.r+","+C.hueRGB.g+","+C.hueRGB.b+")",this.dom.hsvMapCursor.style.cssText="left: "+(W*Z+D)+"px;top: "+(B*Z+D)+"px;border-color: "+(C.luminance>.22?"#333;":"#ddd"),C.luminance>.22?this.dom.hsvBarCursors.classList.add("ge_colorpicker_dark"):this.dom.hsvBarCursors.classList.remove("ge_colorpicker_dark"),this.dom.hsvLeftCursor&&(this.dom.hsvLeftCursor.style.top=this.dom.hsvRightCursor.style.top=(1-C.hsv.v/255)*D*2+"px")}},{key:"presentModal",value:function(O,C){l(Object.getPrototypeOf(k.prototype),"presentModal",this).call(this,O,C),this.onHsvDownHandler=(0,a.addEvent)(this.dom.hsvMap,"mousedown",this.onHsvDown,this);var D=this.dom.colorDisc;if(D.getContext){var $=D.getContext("2d"),W=(0,v.getDevicePixelRatio)($),B=this.disc.width/W,Z=this.disc.height/W;this.dom.colorDisc.width=B*W,this.dom.colorDisc.height=Z*W,$.scale(W,W),S($,[B/2,Z/2],[B/2-1,Z/2-1],360,function(te,ae){var pe=te.createRadialGradient(1,1,1,1,1,0);pe.addColorStop(0,"hsl("+(360-ae+0)+", 100%, 50%)"),pe.addColorStop(1,"#fff"),te.fillStyle=pe,te.fill()}),f($,[B/2,Z/2],[B/2,Z/2],this.bgColor,2/W);var Q=this.dom.luminanceBar.getContext("2d");this.dom.luminanceBar.width=this.barlum.width,this.dom.luminanceBar.height=this.barlum.height*W,Q.scale(W,W);var ce=Q.createLinearGradient(0,0,0,this.barlum.height/W);ce.addColorStop(0,"transparent"),ce.addColorStop(1,"black"),Q.fillStyle=ce,Q.fillRect(0,0,30,200)}this.draw()}},{key:"setValue",value:function(O){this.value=new m.default(O)}},{key:"onHsvDown",value:function(O){var C=O.target||O.srcElement;O.preventDefault(),A=C.id?C:C.parentNode,L=A.offsetHeight,this.onHsvMoveHandler=(0,a.addEvent)(this.el,"mousemove",this.onHsvMove,this),this.onHsvUpHandler=(0,a.addEvent)(window,"mouseup",this.onHsvUp,this),this.onHsvMove(O),this.dom.hsvMap.classList.add("ge_colorpicker_no-cursor"),this.renderer.start()}},{key:"onHsvMove",value:function(O){O.preventDefault(),O.stopPropagation();var C=void 0,D=void 0,$=void 0,W=void 0,B=void 0;if(O.target===this.dom.hsvMapCover&&A===this.dom.hsvMap)C=L/2,D=O.offsetX-C,$=O.offsetY-C,W=(360-(Math.atan2($,D)*180/Math.PI+($<0?360:0)))/360,B=Math.sqrt(D*D+$*$)/C,this.value.set({h:W,s:B},"hsv");else if(O.target===this.dom.hsvBarCursors&&A===this.dom.hsvBarCursors){var Z=(L-O.offsetY)/L;Z=Math.max(0,Math.min(1,Z))*255,this.value.set({v:Z},"hsv")}this.trigger("changed",this.value)}},{key:"onHsvUp",value:function(O){this.renderer.stop(),this.dom.hsvMap.classList.remove("ge_colorpicker_no-cursor"),this.destroyEvents()}},{key:"destroyEvents",value:function(){(0,a.removeEvent)(this.el,"mousemove",this.onHsvMoveHandler),this.onHsvMoveHandler=null,(0,a.removeEvent)(window,"mouseup",this.onHsvUpHandler),this.onHsvUpHandler=null}},{key:"close",value:function(){this.destroyEvents(),(0,a.removeEvent)(this.dom.hsvMap,"mousedown",this.onHsvDownHandler),this.onHsvDownHandler=null}}]),k}(d.default);T.default=g;function S(p,k,c,O,C){var D=k[0]||k,$=k[1]||k,W=c[0]||c,B=c[1]||c,Z=360,Q=Math.PI/180;for(p.save(),p.translate(D-W,$-B),p.scale(W,B),O=Z/O||360;Z>0;Z-=O)p.beginPath(),O!==360&&p.moveTo(1,1),p.arc(1,1,1,(Z-O/2-1)*Q,(Z+O/2+1)*Q),C?C(p,Z):(p.fillStyle="black",p.fill());p.restore()}function f(p,k,c,O,C){C=C||1,c=[(c[0]||c)-C/2,(c[1]||c)-C/2],S(p,k,c,1,function(D,$){D.restore(),D.lineWidth=C,D.strokeStyle=O||"#000",D.stroke()})}M.exports=T.default},{"../../tools/common":121,"../../tools/interactiveDom":124,"./Picker":138,"./types/Color":141,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],137:[function(o,M,T){var l=o("babel-runtime/helpers/get").default,h=o("babel-runtime/helpers/inherits").default,x=o("babel-runtime/helpers/create-class").default,w=o("babel-runtime/helpers/class-call-check").default,b=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var a=o("./Picker"),d=b(a),E=o("./types/Float"),m=b(E),v=function(R){h(A,R);function A(L,_){w(this,A),l(Object.getPrototypeOf(A.prototype),"constructor",this).call(this,"ge_floatpicker_",_),this.width=this.width||250,this.height=this.height||40,this.prevOffset=0,this.scale=2,this.setValue(L||1),this.create()}return x(A,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,.5+this.height*.5),this.ctx.lineTo(0+this.width,.5+this.height*.5),this.ctx.closePath(),this.ctx.stroke(),this.ctx.strokeStyle=this.fnColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.width*.5,0),this.ctx.lineTo(this.width*.5,this.height),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fillStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.beginPath(),this.ctx.moveTo(this.width*.5,5),this.ctx.lineTo(this.width*.48,0),this.ctx.lineTo(this.width*.52,0),this.ctx.closePath(),this.ctx.fill();var _=3,g=40,S=this.width/g,f=g*_,p=this.offsetX;Math.abs(this.offsetX-this.width*.5)>this.width*.5&&(p=(this.offsetX-this.width*.5)%(this.width*.5)+this.width),this.ctx.strokeStyle=this.dimColor,this.ctx.beginPath();for(var k=0;k<f;k++){var c=k%(g/2)===0?this.height*.35:k%(g/4)===0?this.height*.2:this.height*.1;this.ctx.moveTo(k*S-p,this.height*.5-c),this.ctx.lineTo(k*S-p,this.height*.5+c)}this.ctx.stroke();var O=Math.round((this.value-this.min)/this.range*this.width);this.ctx.strokeStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.offsetX+O,this.height*.5),this.ctx.lineTo(this.offsetX+O,this.height),this.ctx.closePath(),this.ctx.stroke(),this.overPoint=!1}},{key:"onMouseDown",value:function(_){this.prevOffset=_.offsetX,l(Object.getPrototypeOf(A.prototype),"onMouseDown",this).call(this,_)}},{key:"onMouseMove",value:function(_){var g=_.offsetX,S=g-this.prevOffset,f=this.offsetX-S,p=this.width/this.scale;this.setValue(f/p),this.prevOffset=g;var k=new m.default(this.getValue());this.trigger("changed",k),this.overPoint=!0}},{key:"setValue",value:function(_){typeof _=="string"?this.value=parseFloat(_):typeof _=="number"&&(this.value=_);var g=this.width/this.scale;this.offsetX=this.value*g}}]),A}(d.default);T.default=v,M.exports=T.default},{"./Picker":138,"./types/Float":143,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],138:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0}),T.addEvent=a,T.removeEvent=d;var x=o("../../tools/common"),w=o("../../tools/mixin"),b=function(){function E(m,v){var R=this;h(this,E),(0,w.subscribeMixin)(this),this.CSS_PREFIX=m,this.bgColor="rgb(46, 48, 51)",this.dimColor="rgb(100, 100, 100)",this.fnColor="rgb(230, 230, 230)",this.selColor="rgb(133, 204, 196)",v=v||{};for(var A in v)this[A]=v[A];this.renderer={frame:null,drawFrame:function(){R.el&&R.draw()},start:function(){R.renderer.drawFrame(),R.renderer.frame=window.requestAnimationFrame(R.renderer.start)},stop:function(){window.cancelAnimationFrame(R.renderer.frame)}},this.isVisible=!1}return l(E,[{key:"create",value:function(){this.el=document.createElement("div"),this.el.className=this.CSS_PREFIX+"modal ge_picker_modal",this.el.style.backgroundColor=this.bgColor,this.canvas=document.createElement("canvas"),this.canvas.className=this.CSS_PREFIX+"canvas ge_picker_canvas",this.canvas.style.backgroundColor=this.bgColor,this.el.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");var v=(0,x.getDevicePixelRatio)(this.ctx);this.canvas.width=this.width*v,this.canvas.height=this.height*v,this.ctx.scale(v,v)}},{key:"draw",value:function(){}},{key:"close",value:function(){this.destroyEvents(),d(this.el,"mousedown",this.onMouseDownHandler),this.onMouseDownHandler=null}},{key:"destroyEvents",value:function(){d(this.el,"mousemove",this.onMouseMoveHandler),this.onMouseMoveHandler=null,d(window,"mouseup",this.onMouseUpHandler),this.onMouseUpHandler=null}},{key:"setValue",value:function(v){this.value=v}},{key:"getValue",value:function(){return this.value}},{key:"showAt",value:function(v){var R=v.cursorCoords(!0,"page"),A=R.left,L=R.top;A-=this.width*.5,L+=30,this.presentModal(A,L)}},{key:"presentModal",value:function(v,R){var A=this;window.setTimeout(function(){A.onClickOutsideHandler=a(document.body,"click",A.onClickOutside,A),A.onKeyPressHandler=a(window,"keydown",A.onKeyPress,A)},0),this.isVisible=!0,this.el.style.left=v+"px",this.el.style.top=R+"px",this.el.style.width=this.width+"px",this.el.style.height=this.height+"px",document.body.appendChild(this.el),this.onMouseDownHandler=a(this.el,"mousedown",this.onMouseDown,this),this.renderer.drawFrame()}},{key:"removeModal",value:function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),d(document.body,"click",this.onClickOutsideHandler),this.onClickOutsideHandler=null,d(window,"keydown",this.onKeyPressHandler),this.onKeyPressHandler=null,this.close(),this.isVisible=!1}},{key:"onKeyPress",value:function(v){this.removeModal()}},{key:"onClickOutside",value:function(v){if(v.target!==document.body){for(var R=v.target;R!==document.documentElement&&!R.classList.contains(this.CSS_PREFIX+"modal");)R=R.parentNode;R.classList.contains(this.CSS_PREFIX+"modal")||this.removeModal()}}},{key:"onMouseDown",value:function(v){v.preventDefault(),this.onMouseMoveHandler=a(this.el,"mousemove",this.onMouseMove,this),this.onMouseUpHandler=a(window,"mouseup",this.onMouseUp,this),this.onMouseMove(v),this.renderer.start()}},{key:"onMouseMove",value:function(v){}},{key:"onMouseUp",value:function(v){this.renderer.stop(),this.destroyEvents()}}]),E}();T.default=b;function a(E,m,v,R){var A=void 0;return E.addEventListener(m,A=function(L){v.call(R,L)},!1),A}function d(E,m,v){E.removeEventListener(m,v,!1)}},{"../../tools/common":121,"../../tools/mixin":126,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],139:[function(o,M,T){var l=o("babel-runtime/helpers/get").default,h=o("babel-runtime/helpers/inherits").default,x=o("babel-runtime/helpers/create-class").default,w=o("babel-runtime/helpers/class-call-check").default,b=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var a=o("./Picker"),d=b(a),E=o("./types/Vector"),m=b(E),v=function(R){h(A,R);function A(L,_){w(this,A),l(Object.getPrototypeOf(A.prototype),"constructor",this).call(this,"ge_vec2picker_",_),this.width=this.width||200,this.height=this.height||200,this.min=this.min||-1,this.max=this.max||1,this.size=this.size||6,this.range=this.max-this.min,this.overPoint=!1;var g=(this.range/2-this.max)*-1;this.setValue(L||[g,g]),this.create()}return x(A,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=2,this.ctx.strokeRect(0,0,this.width,this.height),this.ctx.beginPath(),this.ctx.lineWidth=.25;for(var _=20,g=this.width/_,S=0;S<_;S++)this.ctx.moveTo(S*g,0),this.ctx.lineTo(S*g,this.height),this.ctx.moveTo(0,S*g),this.ctx.lineTo(this.width,S*g);this.ctx.stroke(),this.ctx.strokeStyle=this.dimColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,.5+this.height*.5),this.ctx.lineTo(this.width,.5+this.height*.5),this.ctx.closePath(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(.5+this.width*.5,0),this.ctx.lineTo(.5+this.width*.5,this.height),this.ctx.closePath(),this.ctx.stroke();var f=Math.round((this.value.x-this.min)/this.range*this.width),p=Math.round((1-(this.value.y-this.min)/this.range)*this.height),k=this.size/2;f<k&&(f=k),f>this.width-k&&(f=this.width-k),p<k&&(p=k),p>this.height-k&&(p=this.height-k),this.ctx.fillStyle=this.overPoint?this.selColor:this.fnColor,this.ctx.beginPath();var c=this.overPoint?4:2;this.ctx.arc(f,p,c,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore(),this.overPoint=!1}},{key:"onMouseMove",value:function(_){var g=_.offsetX,S=_.offsetY;this.value.x=this.range/this.width*g-(this.range-this.max),this.value.y=(this.range/this.height*S-(this.range-this.max))*-1,this.trigger("changed",this.value),this.overPoint=!0}},{key:"setValue",value:function(_){this.value=new m.default(_)}}]),A}(d.default);T.default=v,M.exports=T.default},{"./Picker":138,"./types/Vector":145,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],140:[function(o,M,T){var l=o("babel-runtime/helpers/get").default,h=o("babel-runtime/helpers/inherits").default,x=o("babel-runtime/helpers/create-class").default,w=o("babel-runtime/helpers/class-call-check").default,b=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var a=o("./Picker"),d=b(a),E=o("./types/Vector"),m=b(E),v=o("./types/Matrix"),R=b(v),A=function(L){h(_,L);function _(g,S){w(this,_),l(Object.getPrototypeOf(_.prototype),"constructor",this).call(this,"ge_vec3picker_",S),this.width=this.width||200,this.height=this.width||200,this.scale=50,this.setValue(g||[0,0,1]),this.create(),this.camera=new R.default,this.shapes=[],this.center=[0,0,0],this.shapes.push({edgeColour:this.dimColor,nodes:[[this.width/2-50,this.height/2,100],[this.width/2+50,this.height/2,100],[this.width/2,this.height/2-50,100],[this.width/2,this.height/2+50,100],[this.width/2,this.height/2,50],[this.width/2,this.height/2,150]],edges:[[0,1],[2,3],[4,5]]}),this.shapes.push({textColour:this.fnColor,nodes:[[this.width/2+68,this.height/2,100],[this.width/2-68,this.height/2,100],[this.width/2,this.height/2+68,100],[this.width/2,this.height/2-68,100],[this.width/2,this.height/2,168],[this.width/2,this.height/2,32]],text:["x","-x","y","-y","z","-z"]}),this.setCenter(this.width/2,this.height/2,100),this.dragOffset=[0,0],this.overPoint=!1}return x(_,[{key:"setCenter",value:function(S,f,p){for(var k in this.shapes){var c=this.shapes[k];for(var O in c.nodes)c.nodes[O][0]-=S,c.nodes[O][1]-=f,c.nodes[O][2]-=p}this.center=[S,f,p]}},{key:"viewFromCamera",value:function(S){var f=this.camera.getMult(S);return f.add(this.center),[f.x,this.height-f.y]}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.width,this.height);for(var S in this.shapes){var f=this.shapes[S];f.edgeColour&&this.drawShapeEdges(f),f.nodeColour&&this.drawShapeNodes(f),f.text&&this.drawShapeText(f)}this.drawShapeEdges({edgeColour:this.fnColor,nodes:[[0,0,0],this.point],edges:[[0,1]]}),this.drawShapeNodes({nodeColour:this.overPoint?this.selColor:this.fnColor,nodeRadius:this.overPoint?4:2,nodes:[this.point]})}},{key:"drawShapeEdges",value:function(S){var f=S.nodes;this.ctx.strokeStyle=S.edgeColour;for(var p in S.edges){var k=this.viewFromCamera(f[S.edges[p][0]]);this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(k[0],k[1]),k=this.viewFromCamera(f[S.edges[p][1]]),this.ctx.lineTo(k[0],k[1]),this.ctx.stroke()}}},{key:"drawShapeNodes",value:function(S){var f=S.nodeRadius||4;this.ctx.fillStyle=S.nodeColour;for(var p in S.nodes){var k=this.viewFromCamera(S.nodes[p]);this.ctx.beginPath(),this.ctx.arc(k[0],k[1],f,0,2*Math.PI,!1),this.ctx.fill()}}},{key:"drawShapeText",value:function(S){this.ctx.fillStyle=S.textColour;for(var f in S.nodes){var p=this.viewFromCamera(S.nodes[f]);this.ctx.textBaseline="middle",this.ctx.fillText(S.text[f],p[0],p[1])}}},{key:"onMouseDown",value:function(S){var f=[S.offsetX,S.offsetY];this.dragOffset=f;var p=new m.default(this.viewFromCamera(this.point)),k=p.getSub(f);this.overPoint=k.getLength()<10,l(Object.getPrototypeOf(_.prototype),"onMouseDown",this).call(this,S),this.onMouseUpHandler=(0,a.addEvent)(this.el,"dblclick",this.onDbClick,this)}},{key:"onMouseMove",value:function(S){var f=S.offsetX,p=S.offsetY,k=.01*(f-this.dragOffset[0]),c=.01*(p-this.dragOffset[1]);if(this.overPoint){var O=this.camera.getInv(),C=O.getMult([k,-c,0]);C.mult(2),this.value.add(C),this.point=[this.value.x*this.scale,this.value.y*this.scale,this.value.z*this.scale],this.trigger("changed",this.value)}else this.camera.rotateX(c),this.camera.rotateY(k);this.dragOffset=[f,p]}},{key:"onDbClick",value:function(S){var f=new m.default([S.offsetX,S.offsetY]),p={x:[68,0,0],negX:[-68,0,0],y:[0,68,100],negY:[0,-68,0]},k="";for(var c in p){var O=new m.default(this.viewFromCamera(p[c])),C=O.getSub(f);if(C.getLength()<10){k=c;break}}this.camera=new R.default,k==="x"?this.camera.rotateY(-1.57079632679):k==="negX"?this.camera.rotateY(1.57079632679):k==="y"?this.camera.rotateX(-1.57079632679):k==="negY"&&this.camera.rotateX(1.57079632679),this.draw()}},{key:"destroyEvents",value:function(){l(Object.getPrototypeOf(_.prototype),"destroyEvents",this).call(this),(0,a.removeEvent)(this.el,"dblclick",this.onDbClick),this.onMouseMoveHandler=null}},{key:"setValue",value:function(S){this.value=new m.default(S),this.point=[this.value.x*this.scale,this.value.y*this.scale,this.value.z*this.scale]}}]),_}(d.default);T.default=A,M.exports=T.default},{"./Picker":138,"./types/Matrix":144,"./types/Vector":145,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/interop-require-default":14}],141:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var w=o("./ColorConverter"),b=x(w),a=function(){function d(E){h(this,d),this.colors={},this.set(E)}return l(d,[{key:"set",value:function(m,v){if(typeof m=="number"){v=v||"rgb",this.colors[v]={};for(var R=3;R--;){var A=v[R]||v.charAt(R);this.colors[v][A]=m}}else if(typeof m=="string"){var L=m.replace(/(?:#|\)|%)/g,"").split("(");if(L[1]){var _=(L[1]||"").split(/,\s*/);v=v||(L[1]?L[0].substr(0,3):"rgb"),this.set(_,v)}else this.set((0,w.getColorAsRGB)(m),"rgb")}else if(m){if(Array.isArray(m)){var A="";v=v||"rgb",this.colors[v]=this.colors[v]||{};for(var g=3;g--;){A=v[g]||v.charAt(g);var S=m.length>=3?g:0;this.colors[v][A]=parseFloat(m[S])}m.length===4&&(this.colors.alpha=parseFloat(m[3]))}else if(v)for(var f in m)this.colors[v][f]=(0,w.limitValue)(m[f]/(0,w.getValueRanges)(v)[f][1],0,1)*(0,w.getValueRanges)(v)[f][1]}if(v){if(v!=="rgb"){var p=b.default;this.colors.rgb=p[v+"2rgb"](this.colors[v])}this.convert(v),this.colors.hueRGB=b.default.hue2RGB(this.colors.hsv.h),this.colors.luminance=(0,w.getLuminance)(this.colors.rgb)}}},{key:"convert",value:function(m){var v=b.default,R=(0,w.getValueRanges)(),A={hsl:"hsv",cmyk:"cmy",rgb:m};if(m!=="alpha"){for(var L in R)if(!R[L][L]&&m!==L&&L!=="XYZ"){var _=A[L]||"rgb";this.colors[L]=v[_+"2"+L](this.colors[_])}}}},{key:"get",value:function(m){if(m!=="rgb"){var v=b.default;return this.colors[m]=v["rgb2"+m](this.colors.rgb),this.colors[m]}else return this.colors.rgb}},{key:"getString",value:function(m){if(m==="HEX"){var v=b.default;return v["rgb2"+m](this.colors.rgb)}else{var R=this.get(m),A=m,L="";m==="vec"&&(A+=this.colors.alpha?4:3),A+="(";for(var _=0;_<3;_++)L=m[_]||m.charAt(_),m==="vec"?A+=R[L].toFixed(3):A+=Math.floor(R[L]),_!==2&&(A+=",");return this.colors.alpha&&(A+=","+this.colors.alpha.toFixed(3)),A+=")"}}},{key:"uniformType",value:function(){return this.colors.alpha?"vec4":"vec3"}},{key:"uniformValue",value:function(){var m=this.get("vec"),v=[m.v,m.e,m.c];return this.colors.alpha&&v.push(this.colors.alpha),v}},{key:"uniformMethod",value:function(m){return this.colors.alpha?"4f":"3f"}}]),d}();T.default=a,M.exports=T.default},{"./ColorConverter":142,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14}],142:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0}),T.limitValue=m,T.getLuminance=v,T.getColorAsRGB=R,T.getValueRanges=A;var x={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,1],s:[0,1],v:[0,255]},hsl:{h:[0,360],s:[0,100],l:[0,100]},cmy:{c:[0,100],m:[0,100],y:[0,100]},cmyk:{c:[0,100],m:[0,100],y:[0,100],k:[0,100]},Lab:{L:[0,100],a:[-128,127],b:[-128,127]},XYZ:{X:[0,100],Y:[0,100],Z:[0,100]},vec:{v:[0,1],e:[0,1],c:[0,1]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},w={X:[.4124564,.3575761,.1804375],Y:[.2126729,.7151522,.072175],Z:[.0193339,.119192,.9503041],R:[3.2404542,-1.5371385,-.4985314],G:[-.969266,1.8760108,.041556],B:[.0556434,-.2040259,1.0572252]},b={X:w.X[0]+w.X[1]+w.X[2],Y:w.Y[0]+w.Y[1]+w.Y[2],Z:w.Z[0]+w.Z[1]+w.Z[2]},a={r:.2126,g:.7152,b:.0722},d,E=function(){function L(){h(this,L)}return l(L,null,[{key:"vec2rgb",value:function(g){return{r:g.v*x.rgb.r[1],g:g.e*x.rgb.g[1],b:g.c*x.rgb.b[1]}}},{key:"rgb2vec",value:function(g){return{v:g.r/x.rgb.r[1],e:g.g/x.rgb.g[1],c:g.b/x.rgb.b[1]}}},{key:"RGB2HEX",value:function(g){return((g.r<16?"0":"")+g.r.toString(16)+(g.g<16?"0":"")+g.g.toString(16)+(g.b<16?"0":"")+g.b.toString(16)).toUpperCase()}},{key:"HEX2rgb",value:function(g){return g=g.split(""),{r:parseInt(g[0]+g[g[3]?1:0],16)/255,g:parseInt(g[g[3]?2:1]+(g[3]||g[1]),16)/255,b:parseInt((g[4]||g[2])+(g[5]||g[2]),16)/255}}},{key:"hue2RGB",value:function(g){var S=g*6,f=Math.floor(S),p=S===6?0:S-f;return{r:Math.round([1,1-p,0,0,p,1][f]*255),g:Math.round([p,1,1,1-p,0,0][f]*255),b:Math.round([0,0,p,1,1,1-p][f]*255)}}},{key:"rgb2hsv",value:function(g){var S=g.r,f=g.g,p=g.b,k=0,c,O,C;return f<p&&(f=p+(p=f,0),k=-1),O=p,S<f&&(S=f+(f=S,0),k=-2/6-k,O=Math.min(f,p)),c=S-O,C=S?c/S:0,{h:C<1e-15?0:c?Math.abs(k+(f-p)/(6*c)):0,s:S?c/S:0,v:S}}},{key:"hsv2rgb",value:function(g){var S=g.h*6,f=g.s,p=g.v,k=Math.floor(S),c=S-k,O=p*(1-f),C=p*(1-c*f),D=p*(1-(1-c)*f),$=k%6;return{r:[p,C,O,O,D,p][$],g:[D,p,p,C,O,O][$],b:[O,O,D,p,p,C][$]}}},{key:"hsv2hsl",value:function(g){var S=(2-g.s)*g.v,f=g.s*g.v;return f=g.s?S<1?S?f/S:0:f/(2-S):0,{h:g.h,s:!g.v&&!f?0:f,l:S/2}}},{key:"rgb2hsl",value:function(g,S){var f=L.rgb2hsv(g);return L.hsv2hsl(S?f:d.hsv=f)}},{key:"hsl2rgb",value:function(g){var S=g.h*6,f=g.s,p=g.l,k=p<.5?p*(1+f):p+f-f*p,c=p+p-k,O=k?(k-c)/k:0,C=Math.floor(S),D=S-C,$=k*O*D,W=c+$,B=k-$,Z=C%6;return{r:[k,B,c,c,W,k][Z],g:[W,k,k,B,c,c][Z],b:[c,c,W,k,k,B][Z]}}},{key:"rgb2cmy",value:function(g){return{c:1-g.r,m:1-g.g,y:1-g.b}}},{key:"cmy2cmyk",value:function(g){var S=Math.min(Math.min(g.c,g.m),g.y),f=1-S||1e-20;return{c:(g.c-S)/f,m:(g.m-S)/f,y:(g.y-S)/f,k:S}}},{key:"cmyk2cmy",value:function(g){var S=g.k;return{c:g.c*(1-S)+S,m:g.m*(1-S)+S,y:g.y*(1-S)+S}}},{key:"cmy2rgb",value:function(g){return{r:1-g.c,g:1-g.m,b:1-g.y}}},{key:"rgb2cmyk",value:function(g){var S=L.rgb2cmy(g);return L.cmy2cmyk(S)}},{key:"cmyk2rgb",value:function(g){var S=L.cmyk2cmy(g);return L.cmy2rgb(S)}},{key:"XYZ2rgb",value:function(g){var S=w,f=g.X,p=g.Y,k=g.Z,c=f*S.R[0]+p*S.R[1]+k*S.R[2],O=f*S.G[0]+p*S.G[1]+k*S.G[2],C=f*S.B[0]+p*S.B[1]+k*S.B[2],D=1/2.4;return S=.0031308,c=c>S?1.055*Math.pow(c,D)-.055:12.92*c,O=O>S?1.055*Math.pow(O,D)-.055:12.92*O,C=C>S?1.055*Math.pow(C,D)-.055:12.92*C,{r:m(c,0,1),g:m(O,0,1),b:m(C,0,1)}}},{key:"rgb2XYZ",value:function(g){var S=w,f=g.r,p=g.g,k=g.b,c=.04045;return f=f>c?Math.pow((f+.055)/1.055,2.4):f/12.92,p=p>c?Math.pow((p+.055)/1.055,2.4):p/12.92,k=k>c?Math.pow((k+.055)/1.055,2.4):k/12.92,{X:f*S.X[0]+p*S.X[1]+k*S.X[2],Y:f*S.Y[0]+p*S.Y[1]+k*S.Y[2],Z:f*S.Z[0]+p*S.Z[1]+k*S.Z[2]}}},{key:"XYZ2Lab",value:function(g){var S=b,f=g.X/S.X,p=g.Y/S.Y,k=g.Z/S.Z,c=16/116,O=1/3,C=.008856,D=7.787037;return f=f>C?Math.pow(f,O):D*f+c,p=p>C?Math.pow(p,O):D*p+c,k=k>C?Math.pow(k,O):D*k+c,{L:116*p-16,a:500*(f-p),b:200*(p-k)}}},{key:"Lab2XYZ",value:function(g){var S=b,f=(g.L+16)/116,p=g.a/500+f,k=f-g.b/200,c=Math.pow(p,3),O=Math.pow(f,3),C=Math.pow(k,3),D=16/116,$=.008856,W=7.787037;return{X:(c>$?c:(p-D)/W)*S.X,Y:(O>$?O:(f-D)/W)*S.Y,Z:(C>$?C:(k-D)/W)*S.Z}}},{key:"rgb2Lab",value:function(g){var S=L.rgb2XYZ(g);return L.XYZ2Lab(S)}},{key:"Lab2rgb",value:function(g){var S=L.Lab2XYZ(g);return L.XYZ2rgb(S)}}]),L}();T.default=E;function m(L,_,g){return L>g?g:L<_?_:L}function v(L,_){for(var g=_?1:255,S=[L.r/g,L.g/g,L.b/g],f=S.length;f--;)S[f]=S[f]<=.03928?S[f]/12.92:Math.pow((S[f]+.055)/1.055,2.4);return a.r*S[0]+a.g*S[1]+a.b*S[2]}function R(L){var _=document.createElement("div");_.style.backgroundColor=L,document.body.appendChild(_);var g=window.getComputedStyle(_).backgroundColor;return g==="transparent"&&(g="rgb(0, 0, 0)"),_.parentNode.removeChild(_),g}function A(L){return L?x[L]:x}},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],143:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(b){h(this,w),this.value=b}return l(w,[{key:"getString",value:function(){return this.value.toFixed(3)}},{key:"uniformType",value:function(){return"float"}},{key:"uniformValue",value:function(){return[this.value]}},{key:"uniformMethod",value:function(){return"1f"}}]),w}();T.default=x,M.exports=T.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}],144:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default,x=o("babel-runtime/helpers/interop-require-default").default;Object.defineProperty(T,"__esModule",{value:!0});var w=o("./Vector"),b=x(w),a=function(){function d(E,m){h(this,d),this.dim=3,this.value=[[1,0,0],[0,1,0],[0,0,1]],E&&this.set(E,m)}return l(d,[{key:"set",value:function(m,v){m.value[0][0]?(this.value=m.value,this.dim=m.dim):m[0][0]&&(this.value=m)}},{key:"rotateX",value:function(m){var v=Math.cos(m),R=Math.sin(m),A=[[1,0,0],[0,v,-R],[0,R,v]];this.value=this.getTransform(A)}},{key:"rotateY",value:function(m){var v=Math.cos(m),R=Math.sin(m),A=[[v,0,R],[0,1,0],[-R,0,v]];this.value=this.getTransform(A)}},{key:"getMult",value:function(m){if(m[0][0]||m.value&&m.value[0][0])console.log("TODO: what If v is a matrix");else{for(var v=new b.default(m),R=[],A=0;A<v.dim;A++)R.push(v.value[0]*this.value[A][0]+v.value[1]*this.value[A][1]+v.value[2]*this.value[A][2]);return new b.default(R)}}},{key:"getTransform",value:function(m){var v=[];for(var R in m){var A=m[R],L=[];L.push(A[0]*this.value[0][0]+A[1]*this.value[1][0]+A[2]*this.value[2][0]),L.push(A[0]*this.value[0][1]+A[1]*this.value[1][1]+A[2]*this.value[2][1]),L.push(A[0]*this.value[0][2]+A[1]*this.value[1][2]+A[2]*this.value[2][2]),v.push(L)}return v}},{key:"getInv",value:function(){var m=new d,v=this.value[0][0]*(this.value[1][1]*this.value[2][2]-this.value[2][1]*this.value[1][2])-this.value[0][1]*(this.value[1][0]*this.value[2][2]-this.value[1][2]*this.value[2][0])+this.value[0][2]*(this.value[1][0]*this.value[2][1]-this.value[1][1]*this.value[2][0]),R=1/v;return m.value[0][0]=(this.value[1][1]*this.value[2][2]-this.value[2][1]*this.value[1][2])*R,m.value[0][1]=-(this.value[0][1]*this.value[2][2]-this.value[0][2]*this.value[2][1])*R,m.value[0][2]=(this.value[0][1]*this.value[1][2]-this.value[0][2]*this.value[1][1])*R,m.value[1][0]=-(this.value[1][0]*this.value[2][2]-this.value[1][2]*this.value[2][0])*R,m.value[1][1]=(this.value[0][0]*this.value[2][2]-this.value[0][2]*this.value[2][0])*R,m.value[1][2]=-(this.value[0][0]*this.value[1][2]-this.value[1][0]*this.value[0][2])*R,m.value[2][0]=(this.value[1][0]*this.value[2][1]-this.value[2][0]*this.value[1][1])*R,m.value[2][1]=-(this.value[0][0]*this.value[2][1]-this.value[2][0]*this.value[0][1])*R,m.value[2][2]=(this.value[0][0]*this.value[1][1]-this.value[1][0]*this.value[0][1])*R,m}}]),d}();T.default=a,M.exports=T.default},{"./Vector":145,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11,"babel-runtime/helpers/interop-require-default":14}],145:[function(o,M,T){var l=o("babel-runtime/helpers/create-class").default,h=o("babel-runtime/helpers/class-call-check").default;Object.defineProperty(T,"__esModule",{value:!0});var x=function(){function w(b,a){h(this,w),this.value=[0,0],this.dim=2,this.set(b,a)}return l(w,[{key:"set",value:function(a,d){if(typeof a=="number")d=d||"vec2",this.set([a],d);else if(typeof a=="string"){var E=a.replace(/(?:#|\)|\]|%)/g,"").split("("),m=(E[1]||E[0].replace(/(\[)/g,"")).split(/,\s*/);d=d||(E[1]?E[0].substr(0,4):"vec"+m.length);var v=[];for(var R in m)v.push(parseFloat(m[R]));this.set(v,d)}else if(a)if(Array.isArray(a)){this.value=[],this.value.length=0,this.dim=d?Number(d.substr(3,4)):a.length;for(var A=a.length===1?a[0]:0,R=0;R<this.dim;R++)this.value.push(a[R]||A)}else a.dim&&(this.value=a.value,this.dim=a.dim)}},{key:"getString",value:function(a){a=a||"vec"+this.dim;var d=this.dim,E="",m=a+"(",v=")";a==="array"?(m="[",v="]",d=this.dim):d=Number(a.substr(3,4)),E=m;for(var R=0;R<d;R++)E+=this.value[R].toFixed(3),R!==d-1&&(E+=",");return E+=v}},{key:"uniformType",value:function(){return"vec"+this.dim}},{key:"uniformValue",value:function(){for(var a=[],d=0;d<this.dim;d++)a.push(this.value[d]);return a}},{key:"uniformMethod",value:function(){return this.dim+"f"}},{key:"add",value:function(a){if(typeof a=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]+a;else for(var E=new w(a),m=Math.min(this.dim,E.dim),d=0;d<m;d++)this.value[d]=this.value[d]+E.value[d]}},{key:"sub",value:function(a){if(typeof a=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]-a;else for(var E=new w(a),m=Math.min(this.dim,E.dim),d=0;d<m;d++)this.value[d]=this.value[d]-E.value[d]}},{key:"mult",value:function(a){if(typeof a=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]*a;else for(var E=new w(a),m=Math.min(this.dim,E.dim),d=0;d<m;d++)this.value[d]=this.value[d]*E.value[d]}},{key:"div",value:function(a){if(typeof a=="number")for(var d=0;d<this.dim;d++)this.value[d]=this.value[d]/a;else for(var E=new w(a),m=Math.min(this.dim,E.dim),d=0;d<m;d++)this.value[d]=this.value[d]/E.value[d]}},{key:"normalize",value:function(){var a=this.getLength();this.div(a)}},{key:"getAdd",value:function(a){var d=new w(this);return d.add(a),d}},{key:"getSub",value:function(a){var d=new w(this);return d.sub(a),d}},{key:"getMult",value:function(a){var d=new w(this);return d.mult(a),d}},{key:"getDiv",value:function(a){var d=new w(this);return d.div(a),d}},{key:"getLengthSq",value:function(){return this.dim===2?this.value[0]*this.value[0]+this.value[1]*this.value[1]:this.value[0]*this.value[0]+this.value[1]*this.value[1]+this.value[2]*this.value[2]}},{key:"getLength",value:function(){return Math.sqrt(this.getLengthSq())}},{key:"x",set:function(a){this.value[0]=a},get:function(){return this.value[0]||0}},{key:"y",set:function(a){this.value[1]=a},get:function(){return this.value[1]||0}},{key:"z",set:function(a){if(this.dim<3){for(;this.dim<3;)this.value.push(0);this.dim=3}this.value[2]=a},get:function(){return this.value[2]||0}},{key:"w",set:function(a){if(this.dim<4){for(;this.dim<4;)this.value.push(0);this.dim=4}this.value[3]=a},get:function(){return this.value[3]||0}}]),w}();T.default=x,M.exports=T.default},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":11}]},{},[114])(114)})}(Ds)),Ds.exports}var Du=_u();const $u=Ou(Du);console.log("main.ts loaded");let on=new vi;document.body.appendChild(on);let Pa=document.createElement("h1");Pa.innerText=on.title;on.appendChild(Pa);let Bs=new gi;Bs.label="Item 1";Bs.onClick=()=>{console.log("item 1 clicked")};on.appendChild(Bs);let Us=new gi;Us.label="Item 2";Us.onClick=()=>{console.log("item 2 clicked")};on.appendChild(Us);let js=document.createElement("div");js.id="code_editor";document.body.appendChild(js);function Hu(){var ne=!1;document.onkeyup=function(N){N.key=="Control"&&(ne=!1)},document.onkeydown=function(N){if(N.key=="Control"&&(ne=!0),N.key=="s"&&ne==!0)return console.log("save triggered"),!1}}const xa=new $u(js,{canvas_size:500,canvas_draggable:!0,theme:"monokai",multipleBuffers:!1,watchHash:!0,fileDrops:!0,menu:!0}),Jn=document.createElement("button");Jn.id="btn1";Jn.innerText="btn1";document.body.appendChild(Jn);Jn.addEventListener("click",()=>{console.log(xa),xa.setContent(`// Author:
// Title:

#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;

void main() {
    vec2 st = gl_FragCoord.xy/u_resolution.xy;
    st.x *= u_resolution.x/u_resolution.y;

    vec3 color = vec3(0.);
    color = vec3(st.x,st.y,abs(sin(u_time)));

    gl_FragColor = vec4(color,1.);
}`)});Hu();
